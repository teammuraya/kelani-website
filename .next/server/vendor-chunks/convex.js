"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/convex";
exports.ids = ["vendor-chunks/convex"];
exports.modules = {

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/http_client.js":
/*!*************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/http_client.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexHttpClient: () => (/* binding */ ConvexHttpClient),\n/* harmony export */   STATUS_CODE_BAD_REQUEST: () => (/* binding */ STATUS_CODE_BAD_REQUEST),\n/* harmony export */   STATUS_CODE_OK: () => (/* binding */ STATUS_CODE_OK),\n/* harmony export */   STATUS_CODE_UDF_FAILED: () => (/* binding */ STATUS_CODE_UDF_FAILED),\n/* harmony export */   setFetch: () => (/* binding */ setFetch)\n/* harmony export */ });\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _logging_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./logging.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/logging.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\nconst STATUS_CODE_OK = 200;\nconst STATUS_CODE_BAD_REQUEST = 400;\nconst STATUS_CODE_UDF_FAILED = 560;\nlet specifiedFetch = void 0;\nfunction setFetch(f) {\n  specifiedFetch = f;\n}\nclass ConvexHttpClient {\n  /**\n   * Create a new {@link ConvexHttpClient}.\n   *\n   * @param address - The url of your Convex deployment, often provided\n   * by an environment variable. E.g. `https://small-mouse-123.convex.cloud`.\n   * @param options - An object of options.\n   * - `skipConvexDeploymentUrlCheck` - Skip validating that the Convex deployment URL looks like\n   * `https://happy-animal-123.convex.cloud` or localhost. This can be useful if running a self-hosted\n   * Convex backend that uses a different URL.\n   * - `logger` - A logger or a boolean. If not provided, logs to the console.\n   * You can construct your own logger to customize logging to log elsewhere\n   * or not log at all, or use `false` as a shorthand for a no-op logger.\n   * A logger is an object with 4 methods: log(), warn(), error(), and logVerbose().\n   * These methods can receive multiple arguments of any types, like console.log().\n   * - `auth` - A JWT containing identity claims accessible in Convex functions.\n   * This identity may expire so it may be necessary to call `setAuth()` later,\n   * but for short-lived clients it's convenient to specify this value here.\n   * - `fetch` - A custom fetch implementation to use for all HTTP requests made by this client.\n   */\n  constructor(address, options) {\n    __publicField(this, \"address\");\n    __publicField(this, \"auth\");\n    __publicField(this, \"adminAuth\");\n    __publicField(this, \"encodedTsPromise\");\n    __publicField(this, \"debug\");\n    __publicField(this, \"fetchOptions\");\n    __publicField(this, \"fetch\");\n    __publicField(this, \"logger\");\n    __publicField(this, \"mutationQueue\", []);\n    __publicField(this, \"isProcessingQueue\", false);\n    if (typeof options === \"boolean\") {\n      throw new Error(\n        \"skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.\"\n      );\n    }\n    const opts = options ?? {};\n    if (opts.skipConvexDeploymentUrlCheck !== true) {\n      (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.validateDeploymentUrl)(address);\n    }\n    this.logger = options?.logger === false ? (0,_logging_js__WEBPACK_IMPORTED_MODULE_4__.instantiateNoopLogger)({ verbose: false }) : options?.logger !== true && options?.logger ? options.logger : (0,_logging_js__WEBPACK_IMPORTED_MODULE_4__.instantiateDefaultLogger)({ verbose: false });\n    this.address = address;\n    this.debug = true;\n    this.auth = void 0;\n    this.adminAuth = void 0;\n    this.fetch = options?.fetch;\n    if (options?.auth) {\n      this.setAuth(options.auth);\n    }\n  }\n  /**\n   * Obtain the {@link ConvexHttpClient}'s URL to its backend.\n   * @deprecated Use url, which returns the url without /api at the end.\n   *\n   * @returns The URL to the Convex backend, including the client's API version.\n   */\n  backendUrl() {\n    return `${this.address}/api`;\n  }\n  /**\n   * Return the address for this client, useful for creating a new client.\n   *\n   * Not guaranteed to match the address with which this client was constructed:\n   * it may be canonicalized.\n   */\n  get url() {\n    return this.address;\n  }\n  /**\n   * Set the authentication token to be used for subsequent queries and mutations.\n   *\n   * Should be called whenever the token changes (i.e. due to expiration and refresh).\n   *\n   * @param value - JWT-encoded OpenID Connect identity token.\n   */\n  setAuth(value) {\n    this.clearAuth();\n    this.auth = value;\n  }\n  /**\n   * Set admin auth token to allow calling internal queries, mutations, and actions\n   * and acting as an identity.\n   *\n   * @internal\n   */\n  setAdminAuth(token, actingAsIdentity) {\n    this.clearAuth();\n    if (actingAsIdentity !== void 0) {\n      const bytes = new TextEncoder().encode(JSON.stringify(actingAsIdentity));\n      const actingAsIdentityEncoded = btoa(String.fromCodePoint(...bytes));\n      this.adminAuth = `${token}:${actingAsIdentityEncoded}`;\n    } else {\n      this.adminAuth = token;\n    }\n  }\n  /**\n   * Clear the current authentication token if set.\n   */\n  clearAuth() {\n    this.auth = void 0;\n    this.adminAuth = void 0;\n  }\n  /**\n   * Sets whether the result log lines should be printed on the console or not.\n   *\n   * @internal\n   */\n  setDebug(debug) {\n    this.debug = debug;\n  }\n  /**\n   * Used to customize the fetch behavior in some runtimes.\n   *\n   * @internal\n   */\n  setFetchOptions(fetchOptions) {\n    this.fetchOptions = fetchOptions;\n  }\n  /**\n   * This API is experimental: it may change or disappear.\n   *\n   * Execute a Convex query function at the same timestamp as every other\n   * consistent query execution run by this HTTP client.\n   *\n   * This doesn't make sense for long-lived ConvexHttpClients as Convex\n   * backends can read a limited amount into the past: beyond 30 seconds\n   * in the past may not be available.\n   *\n   * Create a new client to use a consistent time.\n   *\n   * @param name - The name of the query.\n   * @param args - The arguments object for the query. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the query's result.\n   *\n   * @deprecated This API is experimental: it may change or disappear.\n   */\n  async consistentQuery(query, ...args) {\n    const queryArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args[0]);\n    const timestampPromise = this.getTimestamp();\n    return await this.queryInner(query, queryArgs, { timestampPromise });\n  }\n  async getTimestamp() {\n    if (this.encodedTsPromise) {\n      return this.encodedTsPromise;\n    }\n    return this.encodedTsPromise = this.getTimestampInner();\n  }\n  async getTimestampInner() {\n    const localFetch = this.fetch || specifiedFetch || fetch;\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      \"Convex-Client\": `npm-${_index_js__WEBPACK_IMPORTED_MODULE_2__.version}`\n    };\n    const response = await localFetch(`${this.address}/api/query_ts`, {\n      ...this.fetchOptions,\n      method: \"POST\",\n      headers\n    });\n    if (!response.ok) {\n      throw new Error(await response.text());\n    }\n    const { ts } = await response.json();\n    return ts;\n  }\n  /**\n   * Execute a Convex query function.\n   *\n   * @param name - The name of the query.\n   * @param args - The arguments object for the query. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the query's result.\n   */\n  async query(query, ...args) {\n    const queryArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args[0]);\n    return await this.queryInner(query, queryArgs, {});\n  }\n  async queryInner(query, queryArgs, options) {\n    const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(query);\n    const args = [(0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.convexToJson)(queryArgs)];\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      \"Convex-Client\": `npm-${_index_js__WEBPACK_IMPORTED_MODULE_2__.version}`\n    };\n    if (this.adminAuth) {\n      headers[\"Authorization\"] = `Convex ${this.adminAuth}`;\n    } else if (this.auth) {\n      headers[\"Authorization\"] = `Bearer ${this.auth}`;\n    }\n    const localFetch = this.fetch || specifiedFetch || fetch;\n    const timestamp = options.timestampPromise ? await options.timestampPromise : void 0;\n    const body = JSON.stringify({\n      path: name,\n      format: \"convex_encoded_json\",\n      args,\n      ...timestamp ? { ts: timestamp } : {}\n    });\n    const endpoint = timestamp ? `${this.address}/api/query_at_ts` : `${this.address}/api/query`;\n    const response = await localFetch(endpoint, {\n      ...this.fetchOptions,\n      body,\n      method: \"POST\",\n      headers\n    });\n    if (!response.ok && response.status !== STATUS_CODE_UDF_FAILED) {\n      throw new Error(await response.text());\n    }\n    const respJSON = await response.json();\n    if (this.debug) {\n      for (const line of respJSON.logLines ?? []) {\n        (0,_logging_js__WEBPACK_IMPORTED_MODULE_4__.logForFunction)(this.logger, \"info\", \"query\", name, line);\n      }\n    }\n    switch (respJSON.status) {\n      case \"success\":\n        return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(respJSON.value);\n      case \"error\":\n        if (respJSON.errorData !== void 0) {\n          throw forwardErrorData(\n            respJSON.errorData,\n            new _values_index_js__WEBPACK_IMPORTED_MODULE_3__.ConvexError(respJSON.errorMessage)\n          );\n        }\n        throw new Error(respJSON.errorMessage);\n      default:\n        throw new Error(`Invalid response: ${JSON.stringify(respJSON)}`);\n    }\n  }\n  async mutationInner(mutation, mutationArgs) {\n    const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(mutation);\n    const body = JSON.stringify({\n      path: name,\n      format: \"convex_encoded_json\",\n      args: [(0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.convexToJson)(mutationArgs)]\n    });\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      \"Convex-Client\": `npm-${_index_js__WEBPACK_IMPORTED_MODULE_2__.version}`\n    };\n    if (this.adminAuth) {\n      headers[\"Authorization\"] = `Convex ${this.adminAuth}`;\n    } else if (this.auth) {\n      headers[\"Authorization\"] = `Bearer ${this.auth}`;\n    }\n    const localFetch = this.fetch || specifiedFetch || fetch;\n    const response = await localFetch(`${this.address}/api/mutation`, {\n      ...this.fetchOptions,\n      body,\n      method: \"POST\",\n      headers\n    });\n    if (!response.ok && response.status !== STATUS_CODE_UDF_FAILED) {\n      throw new Error(await response.text());\n    }\n    const respJSON = await response.json();\n    if (this.debug) {\n      for (const line of respJSON.logLines ?? []) {\n        (0,_logging_js__WEBPACK_IMPORTED_MODULE_4__.logForFunction)(this.logger, \"info\", \"mutation\", name, line);\n      }\n    }\n    switch (respJSON.status) {\n      case \"success\":\n        return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(respJSON.value);\n      case \"error\":\n        if (respJSON.errorData !== void 0) {\n          throw forwardErrorData(\n            respJSON.errorData,\n            new _values_index_js__WEBPACK_IMPORTED_MODULE_3__.ConvexError(respJSON.errorMessage)\n          );\n        }\n        throw new Error(respJSON.errorMessage);\n      default:\n        throw new Error(`Invalid response: ${JSON.stringify(respJSON)}`);\n    }\n  }\n  async processMutationQueue() {\n    if (this.isProcessingQueue) {\n      return;\n    }\n    this.isProcessingQueue = true;\n    while (this.mutationQueue.length > 0) {\n      const { mutation, args, resolve, reject } = this.mutationQueue.shift();\n      try {\n        const result = await this.mutationInner(mutation, args);\n        resolve(result);\n      } catch (error) {\n        reject(error);\n      }\n    }\n    this.isProcessingQueue = false;\n  }\n  enqueueMutation(mutation, args) {\n    return new Promise((resolve, reject) => {\n      this.mutationQueue.push({ mutation, args, resolve, reject });\n      void this.processMutationQueue();\n    });\n  }\n  /**\n   * Execute a Convex mutation function. Mutations are queued by default.\n   *\n   * @param name - The name of the mutation.\n   * @param args - The arguments object for the mutation. If this is omitted,\n   * the arguments will be `{}`.\n   * @param options - An optional object containing\n   * @returns A promise of the mutation's result.\n   */\n  async mutation(mutation, ...args) {\n    const [fnArgs, options] = args;\n    const mutationArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(fnArgs);\n    const queued = !options?.skipQueue;\n    if (queued) {\n      return await this.enqueueMutation(mutation, mutationArgs);\n    } else {\n      return await this.mutationInner(mutation, mutationArgs);\n    }\n  }\n  /**\n   * Execute a Convex action function. Actions are not queued.\n   *\n   * @param name - The name of the action.\n   * @param args - The arguments object for the action. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the action's result.\n   */\n  async action(action, ...args) {\n    const actionArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args[0]);\n    const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(action);\n    const body = JSON.stringify({\n      path: name,\n      format: \"convex_encoded_json\",\n      args: [(0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.convexToJson)(actionArgs)]\n    });\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      \"Convex-Client\": `npm-${_index_js__WEBPACK_IMPORTED_MODULE_2__.version}`\n    };\n    if (this.adminAuth) {\n      headers[\"Authorization\"] = `Convex ${this.adminAuth}`;\n    } else if (this.auth) {\n      headers[\"Authorization\"] = `Bearer ${this.auth}`;\n    }\n    const localFetch = this.fetch || specifiedFetch || fetch;\n    const response = await localFetch(`${this.address}/api/action`, {\n      ...this.fetchOptions,\n      body,\n      method: \"POST\",\n      headers\n    });\n    if (!response.ok && response.status !== STATUS_CODE_UDF_FAILED) {\n      throw new Error(await response.text());\n    }\n    const respJSON = await response.json();\n    if (this.debug) {\n      for (const line of respJSON.logLines ?? []) {\n        (0,_logging_js__WEBPACK_IMPORTED_MODULE_4__.logForFunction)(this.logger, \"info\", \"action\", name, line);\n      }\n    }\n    switch (respJSON.status) {\n      case \"success\":\n        return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(respJSON.value);\n      case \"error\":\n        if (respJSON.errorData !== void 0) {\n          throw forwardErrorData(\n            respJSON.errorData,\n            new _values_index_js__WEBPACK_IMPORTED_MODULE_3__.ConvexError(respJSON.errorMessage)\n          );\n        }\n        throw new Error(respJSON.errorMessage);\n      default:\n        throw new Error(`Invalid response: ${JSON.stringify(respJSON)}`);\n    }\n  }\n  /**\n   * Execute a Convex function of an unknown type. These function calls are not queued.\n   *\n   * @param name - The name of the function.\n   * @param args - The arguments object for the function. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the function's result.\n   *\n   * @internal\n   */\n  async function(anyFunction, componentPath, ...args) {\n    const functionArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args[0]);\n    const name = typeof anyFunction === \"string\" ? anyFunction : (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(anyFunction);\n    const body = JSON.stringify({\n      componentPath,\n      path: name,\n      format: \"convex_encoded_json\",\n      args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.convexToJson)(functionArgs)\n    });\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      \"Convex-Client\": `npm-${_index_js__WEBPACK_IMPORTED_MODULE_2__.version}`\n    };\n    if (this.adminAuth) {\n      headers[\"Authorization\"] = `Convex ${this.adminAuth}`;\n    } else if (this.auth) {\n      headers[\"Authorization\"] = `Bearer ${this.auth}`;\n    }\n    const localFetch = this.fetch || specifiedFetch || fetch;\n    const response = await localFetch(`${this.address}/api/function`, {\n      ...this.fetchOptions,\n      body,\n      method: \"POST\",\n      headers\n    });\n    if (!response.ok && response.status !== STATUS_CODE_UDF_FAILED) {\n      throw new Error(await response.text());\n    }\n    const respJSON = await response.json();\n    if (this.debug) {\n      for (const line of respJSON.logLines ?? []) {\n        (0,_logging_js__WEBPACK_IMPORTED_MODULE_4__.logForFunction)(this.logger, \"info\", \"any\", name, line);\n      }\n    }\n    switch (respJSON.status) {\n      case \"success\":\n        return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(respJSON.value);\n      case \"error\":\n        if (respJSON.errorData !== void 0) {\n          throw forwardErrorData(\n            respJSON.errorData,\n            new _values_index_js__WEBPACK_IMPORTED_MODULE_3__.ConvexError(respJSON.errorMessage)\n          );\n        }\n        throw new Error(respJSON.errorMessage);\n      default:\n        throw new Error(`Invalid response: ${JSON.stringify(respJSON)}`);\n    }\n  }\n}\nfunction forwardErrorData(errorData, error) {\n  error.data = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(errorData);\n  return error;\n}\n//# sourceMappingURL=http_client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvaHR0cF9jbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFhO0FBQ2I7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJO0FBRzBCO0FBQzRDO0FBQ2hDO0FBS1Y7QUFLTjtBQUNmO0FBQ0E7QUFDQTtBQUNQO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBLG1CQUFtQix1QkFBdUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUhBQXVILG9DQUFvQztBQUMzSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sdUVBQXFCO0FBQzNCO0FBQ0EsOENBQThDLGtFQUFxQixHQUFHLGdCQUFnQixtRUFBbUUscUVBQXdCLEdBQUcsZ0JBQWdCO0FBQ3BNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVCQUF1QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxhQUFhO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsTUFBTSxHQUFHLHdCQUF3QjtBQUMzRCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyREFBUztBQUMvQjtBQUNBLHFEQUFxRCxrQkFBa0I7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw4Q0FBTyxDQUFDO0FBQ3RDO0FBQ0EseUNBQXlDLGFBQWE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFlBQVksS0FBSztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMkRBQVM7QUFDL0IscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQWU7QUFDaEMsa0JBQWtCLDhEQUFZO0FBQzlCO0FBQ0E7QUFDQSw4QkFBOEIsOENBQU8sQ0FBQztBQUN0QztBQUNBO0FBQ0EsMkNBQTJDLGVBQWU7QUFDMUQsTUFBTTtBQUNOLDJDQUEyQyxVQUFVO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdCQUFnQjtBQUN2QyxLQUFLO0FBQ0wsb0NBQW9DLGFBQWEsdUJBQXVCLGFBQWE7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDJEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4REFBWTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix5REFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyx5QkFBeUI7QUFDdEU7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFlO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLGFBQWEsOERBQVk7QUFDekIsS0FBSztBQUNMO0FBQ0E7QUFDQSw4QkFBOEIsOENBQU8sQ0FBQztBQUN0QztBQUNBO0FBQ0EsMkNBQTJDLGVBQWU7QUFDMUQsTUFBTTtBQUNOLDJDQUEyQyxVQUFVO0FBQ3JEO0FBQ0E7QUFDQSx5Q0FBeUMsYUFBYTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDJEQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4REFBWTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix5REFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyx5QkFBeUI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsa0NBQWtDO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpQ0FBaUM7QUFDakU7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkRBQVM7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJEQUFTO0FBQ2hDLGlCQUFpQiwrREFBZTtBQUNoQztBQUNBO0FBQ0E7QUFDQSxhQUFhLDhEQUFZO0FBQ3pCLEtBQUs7QUFDTDtBQUNBO0FBQ0EsOEJBQThCLDhDQUFPLENBQUM7QUFDdEM7QUFDQTtBQUNBLDJDQUEyQyxlQUFlO0FBQzFELE1BQU07QUFDTiwyQ0FBMkMsVUFBVTtBQUNyRDtBQUNBO0FBQ0EseUNBQXlDLGFBQWE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyREFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsOERBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseURBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMseUJBQXlCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkRBQVM7QUFDbEMsaUVBQWlFLCtEQUFlO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBWTtBQUN4QixLQUFLO0FBQ0w7QUFDQTtBQUNBLDhCQUE4Qiw4Q0FBTyxDQUFDO0FBQ3RDO0FBQ0E7QUFDQSwyQ0FBMkMsZUFBZTtBQUMxRCxNQUFNO0FBQ04sMkNBQTJDLFVBQVU7QUFDckQ7QUFDQTtBQUNBLHlDQUF5QyxhQUFhO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMkRBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDhEQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHlEQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHlCQUF5QjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsOERBQVk7QUFDM0I7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXGJyb3dzZXJcXGh0dHBfY2xpZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbmltcG9ydCB7XG4gIGdldEZ1bmN0aW9uTmFtZVxufSBmcm9tIFwiLi4vc2VydmVyL2FwaS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VBcmdzLCB2YWxpZGF0ZURlcGxveW1lbnRVcmwgfSBmcm9tIFwiLi4vY29tbW9uL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uL2luZGV4LmpzXCI7XG5pbXBvcnQge1xuICBDb252ZXhFcnJvcixcbiAgY29udmV4VG9Kc29uLFxuICBqc29uVG9Db252ZXhcbn0gZnJvbSBcIi4uL3ZhbHVlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHtcbiAgaW5zdGFudGlhdGVEZWZhdWx0TG9nZ2VyLFxuICBpbnN0YW50aWF0ZU5vb3BMb2dnZXIsXG4gIGxvZ0ZvckZ1bmN0aW9uXG59IGZyb20gXCIuL2xvZ2dpbmcuanNcIjtcbmV4cG9ydCBjb25zdCBTVEFUVVNfQ09ERV9PSyA9IDIwMDtcbmV4cG9ydCBjb25zdCBTVEFUVVNfQ09ERV9CQURfUkVRVUVTVCA9IDQwMDtcbmV4cG9ydCBjb25zdCBTVEFUVVNfQ09ERV9VREZfRkFJTEVEID0gNTYwO1xubGV0IHNwZWNpZmllZEZldGNoID0gdm9pZCAwO1xuZXhwb3J0IGZ1bmN0aW9uIHNldEZldGNoKGYpIHtcbiAgc3BlY2lmaWVkRmV0Y2ggPSBmO1xufVxuZXhwb3J0IGNsYXNzIENvbnZleEh0dHBDbGllbnQge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHtAbGluayBDb252ZXhIdHRwQ2xpZW50fS5cbiAgICpcbiAgICogQHBhcmFtIGFkZHJlc3MgLSBUaGUgdXJsIG9mIHlvdXIgQ29udmV4IGRlcGxveW1lbnQsIG9mdGVuIHByb3ZpZGVkXG4gICAqIGJ5IGFuIGVudmlyb25tZW50IHZhcmlhYmxlLiBFLmcuIGBodHRwczovL3NtYWxsLW1vdXNlLTEyMy5jb252ZXguY2xvdWRgLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCBvZiBvcHRpb25zLlxuICAgKiAtIGBza2lwQ29udmV4RGVwbG95bWVudFVybENoZWNrYCAtIFNraXAgdmFsaWRhdGluZyB0aGF0IHRoZSBDb252ZXggZGVwbG95bWVudCBVUkwgbG9va3MgbGlrZVxuICAgKiBgaHR0cHM6Ly9oYXBweS1hbmltYWwtMTIzLmNvbnZleC5jbG91ZGAgb3IgbG9jYWxob3N0LiBUaGlzIGNhbiBiZSB1c2VmdWwgaWYgcnVubmluZyBhIHNlbGYtaG9zdGVkXG4gICAqIENvbnZleCBiYWNrZW5kIHRoYXQgdXNlcyBhIGRpZmZlcmVudCBVUkwuXG4gICAqIC0gYGxvZ2dlcmAgLSBBIGxvZ2dlciBvciBhIGJvb2xlYW4uIElmIG5vdCBwcm92aWRlZCwgbG9ncyB0byB0aGUgY29uc29sZS5cbiAgICogWW91IGNhbiBjb25zdHJ1Y3QgeW91ciBvd24gbG9nZ2VyIHRvIGN1c3RvbWl6ZSBsb2dnaW5nIHRvIGxvZyBlbHNld2hlcmVcbiAgICogb3Igbm90IGxvZyBhdCBhbGwsIG9yIHVzZSBgZmFsc2VgIGFzIGEgc2hvcnRoYW5kIGZvciBhIG5vLW9wIGxvZ2dlci5cbiAgICogQSBsb2dnZXIgaXMgYW4gb2JqZWN0IHdpdGggNCBtZXRob2RzOiBsb2coKSwgd2FybigpLCBlcnJvcigpLCBhbmQgbG9nVmVyYm9zZSgpLlxuICAgKiBUaGVzZSBtZXRob2RzIGNhbiByZWNlaXZlIG11bHRpcGxlIGFyZ3VtZW50cyBvZiBhbnkgdHlwZXMsIGxpa2UgY29uc29sZS5sb2coKS5cbiAgICogLSBgYXV0aGAgLSBBIEpXVCBjb250YWluaW5nIGlkZW50aXR5IGNsYWltcyBhY2Nlc3NpYmxlIGluIENvbnZleCBmdW5jdGlvbnMuXG4gICAqIFRoaXMgaWRlbnRpdHkgbWF5IGV4cGlyZSBzbyBpdCBtYXkgYmUgbmVjZXNzYXJ5IHRvIGNhbGwgYHNldEF1dGgoKWAgbGF0ZXIsXG4gICAqIGJ1dCBmb3Igc2hvcnQtbGl2ZWQgY2xpZW50cyBpdCdzIGNvbnZlbmllbnQgdG8gc3BlY2lmeSB0aGlzIHZhbHVlIGhlcmUuXG4gICAqIC0gYGZldGNoYCAtIEEgY3VzdG9tIGZldGNoIGltcGxlbWVudGF0aW9uIHRvIHVzZSBmb3IgYWxsIEhUVFAgcmVxdWVzdHMgbWFkZSBieSB0aGlzIGNsaWVudC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGFkZHJlc3MsIG9wdGlvbnMpIHtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiYWRkcmVzc1wiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiYXV0aFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiYWRtaW5BdXRoXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJlbmNvZGVkVHNQcm9taXNlXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJkZWJ1Z1wiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZmV0Y2hPcHRpb25zXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJmZXRjaFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwibG9nZ2VyXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJtdXRhdGlvblF1ZXVlXCIsIFtdKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiaXNQcm9jZXNzaW5nUXVldWVcIiwgZmFsc2UpO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJza2lwQ29udmV4RGVwbG95bWVudFVybENoZWNrIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC4gUGxlYXNlIHBhc3MgYW4gb3B0aW9ucyBvYmplY3QsIGB7IHNraXBDb252ZXhEZXBsb3ltZW50VXJsQ2hlY2s6IHRydWUgfWAuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zID8/IHt9O1xuICAgIGlmIChvcHRzLnNraXBDb252ZXhEZXBsb3ltZW50VXJsQ2hlY2sgIT09IHRydWUpIHtcbiAgICAgIHZhbGlkYXRlRGVwbG95bWVudFVybChhZGRyZXNzKTtcbiAgICB9XG4gICAgdGhpcy5sb2dnZXIgPSBvcHRpb25zPy5sb2dnZXIgPT09IGZhbHNlID8gaW5zdGFudGlhdGVOb29wTG9nZ2VyKHsgdmVyYm9zZTogZmFsc2UgfSkgOiBvcHRpb25zPy5sb2dnZXIgIT09IHRydWUgJiYgb3B0aW9ucz8ubG9nZ2VyID8gb3B0aW9ucy5sb2dnZXIgOiBpbnN0YW50aWF0ZURlZmF1bHRMb2dnZXIoeyB2ZXJib3NlOiBmYWxzZSB9KTtcbiAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgIHRoaXMuZGVidWcgPSB0cnVlO1xuICAgIHRoaXMuYXV0aCA9IHZvaWQgMDtcbiAgICB0aGlzLmFkbWluQXV0aCA9IHZvaWQgMDtcbiAgICB0aGlzLmZldGNoID0gb3B0aW9ucz8uZmV0Y2g7XG4gICAgaWYgKG9wdGlvbnM/LmF1dGgpIHtcbiAgICAgIHRoaXMuc2V0QXV0aChvcHRpb25zLmF1dGgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogT2J0YWluIHRoZSB7QGxpbmsgQ29udmV4SHR0cENsaWVudH0ncyBVUkwgdG8gaXRzIGJhY2tlbmQuXG4gICAqIEBkZXByZWNhdGVkIFVzZSB1cmwsIHdoaWNoIHJldHVybnMgdGhlIHVybCB3aXRob3V0IC9hcGkgYXQgdGhlIGVuZC5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIFVSTCB0byB0aGUgQ29udmV4IGJhY2tlbmQsIGluY2x1ZGluZyB0aGUgY2xpZW50J3MgQVBJIHZlcnNpb24uXG4gICAqL1xuICBiYWNrZW5kVXJsKCkge1xuICAgIHJldHVybiBgJHt0aGlzLmFkZHJlc3N9L2FwaWA7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgYWRkcmVzcyBmb3IgdGhpcyBjbGllbnQsIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBuZXcgY2xpZW50LlxuICAgKlxuICAgKiBOb3QgZ3VhcmFudGVlZCB0byBtYXRjaCB0aGUgYWRkcmVzcyB3aXRoIHdoaWNoIHRoaXMgY2xpZW50IHdhcyBjb25zdHJ1Y3RlZDpcbiAgICogaXQgbWF5IGJlIGNhbm9uaWNhbGl6ZWQuXG4gICAqL1xuICBnZXQgdXJsKCkge1xuICAgIHJldHVybiB0aGlzLmFkZHJlc3M7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgYXV0aGVudGljYXRpb24gdG9rZW4gdG8gYmUgdXNlZCBmb3Igc3Vic2VxdWVudCBxdWVyaWVzIGFuZCBtdXRhdGlvbnMuXG4gICAqXG4gICAqIFNob3VsZCBiZSBjYWxsZWQgd2hlbmV2ZXIgdGhlIHRva2VuIGNoYW5nZXMgKGkuZS4gZHVlIHRvIGV4cGlyYXRpb24gYW5kIHJlZnJlc2gpLlxuICAgKlxuICAgKiBAcGFyYW0gdmFsdWUgLSBKV1QtZW5jb2RlZCBPcGVuSUQgQ29ubmVjdCBpZGVudGl0eSB0b2tlbi5cbiAgICovXG4gIHNldEF1dGgodmFsdWUpIHtcbiAgICB0aGlzLmNsZWFyQXV0aCgpO1xuICAgIHRoaXMuYXV0aCA9IHZhbHVlO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgYWRtaW4gYXV0aCB0b2tlbiB0byBhbGxvdyBjYWxsaW5nIGludGVybmFsIHF1ZXJpZXMsIG11dGF0aW9ucywgYW5kIGFjdGlvbnNcbiAgICogYW5kIGFjdGluZyBhcyBhbiBpZGVudGl0eS5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBzZXRBZG1pbkF1dGgodG9rZW4sIGFjdGluZ0FzSWRlbnRpdHkpIHtcbiAgICB0aGlzLmNsZWFyQXV0aCgpO1xuICAgIGlmIChhY3RpbmdBc0lkZW50aXR5ICE9PSB2b2lkIDApIHtcbiAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKEpTT04uc3RyaW5naWZ5KGFjdGluZ0FzSWRlbnRpdHkpKTtcbiAgICAgIGNvbnN0IGFjdGluZ0FzSWRlbnRpdHlFbmNvZGVkID0gYnRvYShTdHJpbmcuZnJvbUNvZGVQb2ludCguLi5ieXRlcykpO1xuICAgICAgdGhpcy5hZG1pbkF1dGggPSBgJHt0b2tlbn06JHthY3RpbmdBc0lkZW50aXR5RW5jb2RlZH1gO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFkbWluQXV0aCA9IHRva2VuO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2xlYXIgdGhlIGN1cnJlbnQgYXV0aGVudGljYXRpb24gdG9rZW4gaWYgc2V0LlxuICAgKi9cbiAgY2xlYXJBdXRoKCkge1xuICAgIHRoaXMuYXV0aCA9IHZvaWQgMDtcbiAgICB0aGlzLmFkbWluQXV0aCA9IHZvaWQgMDtcbiAgfVxuICAvKipcbiAgICogU2V0cyB3aGV0aGVyIHRoZSByZXN1bHQgbG9nIGxpbmVzIHNob3VsZCBiZSBwcmludGVkIG9uIHRoZSBjb25zb2xlIG9yIG5vdC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBzZXREZWJ1ZyhkZWJ1Zykge1xuICAgIHRoaXMuZGVidWcgPSBkZWJ1ZztcbiAgfVxuICAvKipcbiAgICogVXNlZCB0byBjdXN0b21pemUgdGhlIGZldGNoIGJlaGF2aW9yIGluIHNvbWUgcnVudGltZXMuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgc2V0RmV0Y2hPcHRpb25zKGZldGNoT3B0aW9ucykge1xuICAgIHRoaXMuZmV0Y2hPcHRpb25zID0gZmV0Y2hPcHRpb25zO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIEFQSSBpcyBleHBlcmltZW50YWw6IGl0IG1heSBjaGFuZ2Ugb3IgZGlzYXBwZWFyLlxuICAgKlxuICAgKiBFeGVjdXRlIGEgQ29udmV4IHF1ZXJ5IGZ1bmN0aW9uIGF0IHRoZSBzYW1lIHRpbWVzdGFtcCBhcyBldmVyeSBvdGhlclxuICAgKiBjb25zaXN0ZW50IHF1ZXJ5IGV4ZWN1dGlvbiBydW4gYnkgdGhpcyBIVFRQIGNsaWVudC5cbiAgICpcbiAgICogVGhpcyBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGxvbmctbGl2ZWQgQ29udmV4SHR0cENsaWVudHMgYXMgQ29udmV4XG4gICAqIGJhY2tlbmRzIGNhbiByZWFkIGEgbGltaXRlZCBhbW91bnQgaW50byB0aGUgcGFzdDogYmV5b25kIDMwIHNlY29uZHNcbiAgICogaW4gdGhlIHBhc3QgbWF5IG5vdCBiZSBhdmFpbGFibGUuXG4gICAqXG4gICAqIENyZWF0ZSBhIG5ldyBjbGllbnQgdG8gdXNlIGEgY29uc2lzdGVudCB0aW1lLlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS5cbiAgICogQHBhcmFtIGFyZ3MgLSBUaGUgYXJndW1lbnRzIG9iamVjdCBmb3IgdGhlIHF1ZXJ5LiBJZiB0aGlzIGlzIG9taXR0ZWQsXG4gICAqIHRoZSBhcmd1bWVudHMgd2lsbCBiZSBge31gLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2Ugb2YgdGhlIHF1ZXJ5J3MgcmVzdWx0LlxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBUaGlzIEFQSSBpcyBleHBlcmltZW50YWw6IGl0IG1heSBjaGFuZ2Ugb3IgZGlzYXBwZWFyLlxuICAgKi9cbiAgYXN5bmMgY29uc2lzdGVudFF1ZXJ5KHF1ZXJ5LCAuLi5hcmdzKSB7XG4gICAgY29uc3QgcXVlcnlBcmdzID0gcGFyc2VBcmdzKGFyZ3NbMF0pO1xuICAgIGNvbnN0IHRpbWVzdGFtcFByb21pc2UgPSB0aGlzLmdldFRpbWVzdGFtcCgpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnF1ZXJ5SW5uZXIocXVlcnksIHF1ZXJ5QXJncywgeyB0aW1lc3RhbXBQcm9taXNlIH0pO1xuICB9XG4gIGFzeW5jIGdldFRpbWVzdGFtcCgpIHtcbiAgICBpZiAodGhpcy5lbmNvZGVkVHNQcm9taXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmNvZGVkVHNQcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5lbmNvZGVkVHNQcm9taXNlID0gdGhpcy5nZXRUaW1lc3RhbXBJbm5lcigpO1xuICB9XG4gIGFzeW5jIGdldFRpbWVzdGFtcElubmVyKCkge1xuICAgIGNvbnN0IGxvY2FsRmV0Y2ggPSB0aGlzLmZldGNoIHx8IHNwZWNpZmllZEZldGNoIHx8IGZldGNoO1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwiQ29udmV4LUNsaWVudFwiOiBgbnBtLSR7dmVyc2lvbn1gXG4gICAgfTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGxvY2FsRmV0Y2goYCR7dGhpcy5hZGRyZXNzfS9hcGkvcXVlcnlfdHNgLCB7XG4gICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzXG4gICAgfSk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGF3YWl0IHJlc3BvbnNlLnRleHQoKSk7XG4gICAgfVxuICAgIGNvbnN0IHsgdHMgfSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gdHM7XG4gIH1cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSBDb252ZXggcXVlcnkgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5LlxuICAgKiBAcGFyYW0gYXJncyAtIFRoZSBhcmd1bWVudHMgb2JqZWN0IGZvciB0aGUgcXVlcnkuIElmIHRoaXMgaXMgb21pdHRlZCxcbiAgICogdGhlIGFyZ3VtZW50cyB3aWxsIGJlIGB7fWAuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgcXVlcnkncyByZXN1bHQuXG4gICAqL1xuICBhc3luYyBxdWVyeShxdWVyeSwgLi4uYXJncykge1xuICAgIGNvbnN0IHF1ZXJ5QXJncyA9IHBhcnNlQXJncyhhcmdzWzBdKTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5xdWVyeUlubmVyKHF1ZXJ5LCBxdWVyeUFyZ3MsIHt9KTtcbiAgfVxuICBhc3luYyBxdWVyeUlubmVyKHF1ZXJ5LCBxdWVyeUFyZ3MsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBuYW1lID0gZ2V0RnVuY3Rpb25OYW1lKHF1ZXJ5KTtcbiAgICBjb25zdCBhcmdzID0gW2NvbnZleFRvSnNvbihxdWVyeUFyZ3MpXTtcbiAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBcIkNvbnZleC1DbGllbnRcIjogYG5wbS0ke3ZlcnNpb259YFxuICAgIH07XG4gICAgaWYgKHRoaXMuYWRtaW5BdXRoKSB7XG4gICAgICBoZWFkZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IGBDb252ZXggJHt0aGlzLmFkbWluQXV0aH1gO1xuICAgIH0gZWxzZSBpZiAodGhpcy5hdXRoKSB7XG4gICAgICBoZWFkZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IGBCZWFyZXIgJHt0aGlzLmF1dGh9YDtcbiAgICB9XG4gICAgY29uc3QgbG9jYWxGZXRjaCA9IHRoaXMuZmV0Y2ggfHwgc3BlY2lmaWVkRmV0Y2ggfHwgZmV0Y2g7XG4gICAgY29uc3QgdGltZXN0YW1wID0gb3B0aW9ucy50aW1lc3RhbXBQcm9taXNlID8gYXdhaXQgb3B0aW9ucy50aW1lc3RhbXBQcm9taXNlIDogdm9pZCAwO1xuICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBwYXRoOiBuYW1lLFxuICAgICAgZm9ybWF0OiBcImNvbnZleF9lbmNvZGVkX2pzb25cIixcbiAgICAgIGFyZ3MsXG4gICAgICAuLi50aW1lc3RhbXAgPyB7IHRzOiB0aW1lc3RhbXAgfSA6IHt9XG4gICAgfSk7XG4gICAgY29uc3QgZW5kcG9pbnQgPSB0aW1lc3RhbXAgPyBgJHt0aGlzLmFkZHJlc3N9L2FwaS9xdWVyeV9hdF90c2AgOiBgJHt0aGlzLmFkZHJlc3N9L2FwaS9xdWVyeWA7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsb2NhbEZldGNoKGVuZHBvaW50LCB7XG4gICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgIGJvZHksXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICAgIGlmICghcmVzcG9uc2Uub2sgJiYgcmVzcG9uc2Uuc3RhdHVzICE9PSBTVEFUVVNfQ09ERV9VREZfRkFJTEVEKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbiAgICB9XG4gICAgY29uc3QgcmVzcEpTT04gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXNwSlNPTi5sb2dMaW5lcyA/PyBbXSkge1xuICAgICAgICBsb2dGb3JGdW5jdGlvbih0aGlzLmxvZ2dlciwgXCJpbmZvXCIsIFwicXVlcnlcIiwgbmFtZSwgbGluZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHN3aXRjaCAocmVzcEpTT04uc3RhdHVzKSB7XG4gICAgICBjYXNlIFwic3VjY2Vzc1wiOlxuICAgICAgICByZXR1cm4ganNvblRvQ29udmV4KHJlc3BKU09OLnZhbHVlKTtcbiAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICBpZiAocmVzcEpTT04uZXJyb3JEYXRhICE9PSB2b2lkIDApIHtcbiAgICAgICAgICB0aHJvdyBmb3J3YXJkRXJyb3JEYXRhKFxuICAgICAgICAgICAgcmVzcEpTT04uZXJyb3JEYXRhLFxuICAgICAgICAgICAgbmV3IENvbnZleEVycm9yKHJlc3BKU09OLmVycm9yTWVzc2FnZSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwSlNPTi5lcnJvck1lc3NhZ2UpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJlc3BvbnNlOiAke0pTT04uc3RyaW5naWZ5KHJlc3BKU09OKX1gKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgbXV0YXRpb25Jbm5lcihtdXRhdGlvbiwgbXV0YXRpb25BcmdzKSB7XG4gICAgY29uc3QgbmFtZSA9IGdldEZ1bmN0aW9uTmFtZShtdXRhdGlvbik7XG4gICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIHBhdGg6IG5hbWUsXG4gICAgICBmb3JtYXQ6IFwiY29udmV4X2VuY29kZWRfanNvblwiLFxuICAgICAgYXJnczogW2NvbnZleFRvSnNvbihtdXRhdGlvbkFyZ3MpXVxuICAgIH0pO1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwiQ29udmV4LUNsaWVudFwiOiBgbnBtLSR7dmVyc2lvbn1gXG4gICAgfTtcbiAgICBpZiAodGhpcy5hZG1pbkF1dGgpIHtcbiAgICAgIGhlYWRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gYENvbnZleCAke3RoaXMuYWRtaW5BdXRofWA7XG4gICAgfSBlbHNlIGlmICh0aGlzLmF1dGgpIHtcbiAgICAgIGhlYWRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gYEJlYXJlciAke3RoaXMuYXV0aH1gO1xuICAgIH1cbiAgICBjb25zdCBsb2NhbEZldGNoID0gdGhpcy5mZXRjaCB8fCBzcGVjaWZpZWRGZXRjaCB8fCBmZXRjaDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGxvY2FsRmV0Y2goYCR7dGhpcy5hZGRyZXNzfS9hcGkvbXV0YXRpb25gLCB7XG4gICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgIGJvZHksXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICAgIGlmICghcmVzcG9uc2Uub2sgJiYgcmVzcG9uc2Uuc3RhdHVzICE9PSBTVEFUVVNfQ09ERV9VREZfRkFJTEVEKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbiAgICB9XG4gICAgY29uc3QgcmVzcEpTT04gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXNwSlNPTi5sb2dMaW5lcyA/PyBbXSkge1xuICAgICAgICBsb2dGb3JGdW5jdGlvbih0aGlzLmxvZ2dlciwgXCJpbmZvXCIsIFwibXV0YXRpb25cIiwgbmFtZSwgbGluZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHN3aXRjaCAocmVzcEpTT04uc3RhdHVzKSB7XG4gICAgICBjYXNlIFwic3VjY2Vzc1wiOlxuICAgICAgICByZXR1cm4ganNvblRvQ29udmV4KHJlc3BKU09OLnZhbHVlKTtcbiAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICBpZiAocmVzcEpTT04uZXJyb3JEYXRhICE9PSB2b2lkIDApIHtcbiAgICAgICAgICB0aHJvdyBmb3J3YXJkRXJyb3JEYXRhKFxuICAgICAgICAgICAgcmVzcEpTT04uZXJyb3JEYXRhLFxuICAgICAgICAgICAgbmV3IENvbnZleEVycm9yKHJlc3BKU09OLmVycm9yTWVzc2FnZSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwSlNPTi5lcnJvck1lc3NhZ2UpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJlc3BvbnNlOiAke0pTT04uc3RyaW5naWZ5KHJlc3BKU09OKX1gKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgcHJvY2Vzc011dGF0aW9uUXVldWUoKSB7XG4gICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSA9IHRydWU7XG4gICAgd2hpbGUgKHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB7IG11dGF0aW9uLCBhcmdzLCByZXNvbHZlLCByZWplY3QgfSA9IHRoaXMubXV0YXRpb25RdWV1ZS5zaGlmdCgpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tdXRhdGlvbklubmVyKG11dGF0aW9uLCBhcmdzKTtcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSA9IGZhbHNlO1xuICB9XG4gIGVucXVldWVNdXRhdGlvbihtdXRhdGlvbiwgYXJncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLm11dGF0aW9uUXVldWUucHVzaCh7IG11dGF0aW9uLCBhcmdzLCByZXNvbHZlLCByZWplY3QgfSk7XG4gICAgICB2b2lkIHRoaXMucHJvY2Vzc011dGF0aW9uUXVldWUoKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogRXhlY3V0ZSBhIENvbnZleCBtdXRhdGlvbiBmdW5jdGlvbi4gTXV0YXRpb25zIGFyZSBxdWV1ZWQgYnkgZGVmYXVsdC5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgbXV0YXRpb24uXG4gICAqIEBwYXJhbSBhcmdzIC0gVGhlIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBtdXRhdGlvbi4gSWYgdGhpcyBpcyBvbWl0dGVkLFxuICAgKiB0aGUgYXJndW1lbnRzIHdpbGwgYmUgYHt9YC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25hbCBvYmplY3QgY29udGFpbmluZ1xuICAgKiBAcmV0dXJucyBBIHByb21pc2Ugb2YgdGhlIG11dGF0aW9uJ3MgcmVzdWx0LlxuICAgKi9cbiAgYXN5bmMgbXV0YXRpb24obXV0YXRpb24sIC4uLmFyZ3MpIHtcbiAgICBjb25zdCBbZm5BcmdzLCBvcHRpb25zXSA9IGFyZ3M7XG4gICAgY29uc3QgbXV0YXRpb25BcmdzID0gcGFyc2VBcmdzKGZuQXJncyk7XG4gICAgY29uc3QgcXVldWVkID0gIW9wdGlvbnM/LnNraXBRdWV1ZTtcbiAgICBpZiAocXVldWVkKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5lbnF1ZXVlTXV0YXRpb24obXV0YXRpb24sIG11dGF0aW9uQXJncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLm11dGF0aW9uSW5uZXIobXV0YXRpb24sIG11dGF0aW9uQXJncyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgQ29udmV4IGFjdGlvbiBmdW5jdGlvbi4gQWN0aW9ucyBhcmUgbm90IHF1ZXVlZC5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgYWN0aW9uLlxuICAgKiBAcGFyYW0gYXJncyAtIFRoZSBhcmd1bWVudHMgb2JqZWN0IGZvciB0aGUgYWN0aW9uLiBJZiB0aGlzIGlzIG9taXR0ZWQsXG4gICAqIHRoZSBhcmd1bWVudHMgd2lsbCBiZSBge31gLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2Ugb2YgdGhlIGFjdGlvbidzIHJlc3VsdC5cbiAgICovXG4gIGFzeW5jIGFjdGlvbihhY3Rpb24sIC4uLmFyZ3MpIHtcbiAgICBjb25zdCBhY3Rpb25BcmdzID0gcGFyc2VBcmdzKGFyZ3NbMF0pO1xuICAgIGNvbnN0IG5hbWUgPSBnZXRGdW5jdGlvbk5hbWUoYWN0aW9uKTtcbiAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgcGF0aDogbmFtZSxcbiAgICAgIGZvcm1hdDogXCJjb252ZXhfZW5jb2RlZF9qc29uXCIsXG4gICAgICBhcmdzOiBbY29udmV4VG9Kc29uKGFjdGlvbkFyZ3MpXVxuICAgIH0pO1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwiQ29udmV4LUNsaWVudFwiOiBgbnBtLSR7dmVyc2lvbn1gXG4gICAgfTtcbiAgICBpZiAodGhpcy5hZG1pbkF1dGgpIHtcbiAgICAgIGhlYWRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gYENvbnZleCAke3RoaXMuYWRtaW5BdXRofWA7XG4gICAgfSBlbHNlIGlmICh0aGlzLmF1dGgpIHtcbiAgICAgIGhlYWRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gYEJlYXJlciAke3RoaXMuYXV0aH1gO1xuICAgIH1cbiAgICBjb25zdCBsb2NhbEZldGNoID0gdGhpcy5mZXRjaCB8fCBzcGVjaWZpZWRGZXRjaCB8fCBmZXRjaDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGxvY2FsRmV0Y2goYCR7dGhpcy5hZGRyZXNzfS9hcGkvYWN0aW9uYCwge1xuICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICBib2R5LFxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnNcbiAgICB9KTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rICYmIHJlc3BvbnNlLnN0YXR1cyAhPT0gU1RBVFVTX0NPREVfVURGX0ZBSUxFRCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGF3YWl0IHJlc3BvbnNlLnRleHQoKSk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BKU09OID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGlmICh0aGlzLmRlYnVnKSB7XG4gICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVzcEpTT04ubG9nTGluZXMgPz8gW10pIHtcbiAgICAgICAgbG9nRm9yRnVuY3Rpb24odGhpcy5sb2dnZXIsIFwiaW5mb1wiLCBcImFjdGlvblwiLCBuYW1lLCBsaW5lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgc3dpdGNoIChyZXNwSlNPTi5zdGF0dXMpIHtcbiAgICAgIGNhc2UgXCJzdWNjZXNzXCI6XG4gICAgICAgIHJldHVybiBqc29uVG9Db252ZXgocmVzcEpTT04udmFsdWUpO1xuICAgICAgY2FzZSBcImVycm9yXCI6XG4gICAgICAgIGlmIChyZXNwSlNPTi5lcnJvckRhdGEgIT09IHZvaWQgMCkge1xuICAgICAgICAgIHRocm93IGZvcndhcmRFcnJvckRhdGEoXG4gICAgICAgICAgICByZXNwSlNPTi5lcnJvckRhdGEsXG4gICAgICAgICAgICBuZXcgQ29udmV4RXJyb3IocmVzcEpTT04uZXJyb3JNZXNzYWdlKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BKU09OLmVycm9yTWVzc2FnZSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcmVzcG9uc2U6ICR7SlNPTi5zdHJpbmdpZnkocmVzcEpTT04pfWApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRXhlY3V0ZSBhIENvbnZleCBmdW5jdGlvbiBvZiBhbiB1bmtub3duIHR5cGUuIFRoZXNlIGZ1bmN0aW9uIGNhbGxzIGFyZSBub3QgcXVldWVkLlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbi5cbiAgICogQHBhcmFtIGFyZ3MgLSBUaGUgYXJndW1lbnRzIG9iamVjdCBmb3IgdGhlIGZ1bmN0aW9uLiBJZiB0aGlzIGlzIG9taXR0ZWQsXG4gICAqIHRoZSBhcmd1bWVudHMgd2lsbCBiZSBge31gLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2Ugb2YgdGhlIGZ1bmN0aW9uJ3MgcmVzdWx0LlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGFzeW5jIGZ1bmN0aW9uKGFueUZ1bmN0aW9uLCBjb21wb25lbnRQYXRoLCAuLi5hcmdzKSB7XG4gICAgY29uc3QgZnVuY3Rpb25BcmdzID0gcGFyc2VBcmdzKGFyZ3NbMF0pO1xuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2YgYW55RnVuY3Rpb24gPT09IFwic3RyaW5nXCIgPyBhbnlGdW5jdGlvbiA6IGdldEZ1bmN0aW9uTmFtZShhbnlGdW5jdGlvbik7XG4gICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGNvbXBvbmVudFBhdGgsXG4gICAgICBwYXRoOiBuYW1lLFxuICAgICAgZm9ybWF0OiBcImNvbnZleF9lbmNvZGVkX2pzb25cIixcbiAgICAgIGFyZ3M6IGNvbnZleFRvSnNvbihmdW5jdGlvbkFyZ3MpXG4gICAgfSk7XG4gICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgXCJDb252ZXgtQ2xpZW50XCI6IGBucG0tJHt2ZXJzaW9ufWBcbiAgICB9O1xuICAgIGlmICh0aGlzLmFkbWluQXV0aCkge1xuICAgICAgaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBgQ29udmV4ICR7dGhpcy5hZG1pbkF1dGh9YDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuYXV0aCkge1xuICAgICAgaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBgQmVhcmVyICR7dGhpcy5hdXRofWA7XG4gICAgfVxuICAgIGNvbnN0IGxvY2FsRmV0Y2ggPSB0aGlzLmZldGNoIHx8IHNwZWNpZmllZEZldGNoIHx8IGZldGNoO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbG9jYWxGZXRjaChgJHt0aGlzLmFkZHJlc3N9L2FwaS9mdW5jdGlvbmAsIHtcbiAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgYm9keSxcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzXG4gICAgfSk7XG4gICAgaWYgKCFyZXNwb25zZS5vayAmJiByZXNwb25zZS5zdGF0dXMgIT09IFNUQVRVU19DT0RFX1VERl9GQUlMRUQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihhd2FpdCByZXNwb25zZS50ZXh0KCkpO1xuICAgIH1cbiAgICBjb25zdCByZXNwSlNPTiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBpZiAodGhpcy5kZWJ1Zykge1xuICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlc3BKU09OLmxvZ0xpbmVzID8/IFtdKSB7XG4gICAgICAgIGxvZ0ZvckZ1bmN0aW9uKHRoaXMubG9nZ2VyLCBcImluZm9cIiwgXCJhbnlcIiwgbmFtZSwgbGluZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHN3aXRjaCAocmVzcEpTT04uc3RhdHVzKSB7XG4gICAgICBjYXNlIFwic3VjY2Vzc1wiOlxuICAgICAgICByZXR1cm4ganNvblRvQ29udmV4KHJlc3BKU09OLnZhbHVlKTtcbiAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICBpZiAocmVzcEpTT04uZXJyb3JEYXRhICE9PSB2b2lkIDApIHtcbiAgICAgICAgICB0aHJvdyBmb3J3YXJkRXJyb3JEYXRhKFxuICAgICAgICAgICAgcmVzcEpTT04uZXJyb3JEYXRhLFxuICAgICAgICAgICAgbmV3IENvbnZleEVycm9yKHJlc3BKU09OLmVycm9yTWVzc2FnZSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwSlNPTi5lcnJvck1lc3NhZ2UpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHJlc3BvbnNlOiAke0pTT04uc3RyaW5naWZ5KHJlc3BKU09OKX1gKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGZvcndhcmRFcnJvckRhdGEoZXJyb3JEYXRhLCBlcnJvcikge1xuICBlcnJvci5kYXRhID0ganNvblRvQ29udmV4KGVycm9yRGF0YSk7XG4gIHJldHVybiBlcnJvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWh0dHBfY2xpZW50LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/http_client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseConvexClient: () => (/* reexport safe */ _sync_client_js__WEBPACK_IMPORTED_MODULE_0__.BaseConvexClient),\n/* harmony export */   ConvexClient: () => (/* reexport safe */ _simple_client_js__WEBPACK_IMPORTED_MODULE_1__.ConvexClient),\n/* harmony export */   ConvexHttpClient: () => (/* reexport safe */ _http_client_js__WEBPACK_IMPORTED_MODULE_2__.ConvexHttpClient)\n/* harmony export */ });\n/* harmony import */ var _sync_client_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sync/client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/client.js\");\n/* harmony import */ var _simple_client_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./simple_client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/simple_client.js\");\n/* harmony import */ var _http_client_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./http_client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/http_client.js\");\n\n\n\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWE7QUFDdUM7QUFDRjtBQUNFO0FBQ3BEIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXGJyb3dzZXJcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0IHsgQmFzZUNvbnZleENsaWVudCB9IGZyb20gXCIuL3N5bmMvY2xpZW50LmpzXCI7XG5leHBvcnQgeyBDb252ZXhDbGllbnQgfSBmcm9tIFwiLi9zaW1wbGVfY2xpZW50LmpzXCI7XG5leHBvcnQgeyBDb252ZXhIdHRwQ2xpZW50IH0gZnJvbSBcIi4vaHR0cF9jbGllbnQuanNcIjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/logging.js":
/*!*********************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/logging.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultLogger: () => (/* binding */ DefaultLogger),\n/* harmony export */   createHybridErrorStacktrace: () => (/* binding */ createHybridErrorStacktrace),\n/* harmony export */   forwardData: () => (/* binding */ forwardData),\n/* harmony export */   instantiateDefaultLogger: () => (/* binding */ instantiateDefaultLogger),\n/* harmony export */   instantiateNoopLogger: () => (/* binding */ instantiateNoopLogger),\n/* harmony export */   logFatalError: () => (/* binding */ logFatalError),\n/* harmony export */   logForFunction: () => (/* binding */ logForFunction)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nconst INFO_COLOR = \"color:rgb(0, 145, 255)\";\nfunction prefix_for_source(source) {\n  switch (source) {\n    case \"query\":\n      return \"Q\";\n    case \"mutation\":\n      return \"M\";\n    case \"action\":\n      return \"A\";\n    case \"any\":\n      return \"?\";\n  }\n}\nclass DefaultLogger {\n  constructor(options) {\n    __publicField(this, \"_onLogLineFuncs\");\n    __publicField(this, \"_verbose\");\n    this._onLogLineFuncs = {};\n    this._verbose = options.verbose;\n  }\n  addLogLineListener(func) {\n    let id = Math.random().toString(36).substring(2, 15);\n    for (let i = 0; i < 10; i++) {\n      if (this._onLogLineFuncs[id] === void 0) {\n        break;\n      }\n      id = Math.random().toString(36).substring(2, 15);\n    }\n    this._onLogLineFuncs[id] = func;\n    return () => {\n      delete this._onLogLineFuncs[id];\n    };\n  }\n  logVerbose(...args) {\n    if (this._verbose) {\n      for (const func of Object.values(this._onLogLineFuncs)) {\n        func(\"debug\", `${(/* @__PURE__ */ new Date()).toISOString()}`, ...args);\n      }\n    }\n  }\n  log(...args) {\n    for (const func of Object.values(this._onLogLineFuncs)) {\n      func(\"info\", ...args);\n    }\n  }\n  warn(...args) {\n    for (const func of Object.values(this._onLogLineFuncs)) {\n      func(\"warn\", ...args);\n    }\n  }\n  error(...args) {\n    for (const func of Object.values(this._onLogLineFuncs)) {\n      func(\"error\", ...args);\n    }\n  }\n}\nfunction instantiateDefaultLogger(options) {\n  const logger = new DefaultLogger(options);\n  logger.addLogLineListener((level, ...args) => {\n    switch (level) {\n      case \"debug\":\n        console.debug(...args);\n        break;\n      case \"info\":\n        console.log(...args);\n        break;\n      case \"warn\":\n        console.warn(...args);\n        break;\n      case \"error\":\n        console.error(...args);\n        break;\n      default: {\n        level;\n        console.log(...args);\n      }\n    }\n  });\n  return logger;\n}\nfunction instantiateNoopLogger(options) {\n  return new DefaultLogger(options);\n}\nfunction logForFunction(logger, type, source, udfPath, message) {\n  const prefix = prefix_for_source(source);\n  if (typeof message === \"object\") {\n    message = `ConvexError ${JSON.stringify(message.errorData, null, 2)}`;\n  }\n  if (type === \"info\") {\n    const match = message.match(/^\\[.*?\\] /);\n    if (match === null) {\n      logger.error(\n        `[CONVEX ${prefix}(${udfPath})] Could not parse console.log`\n      );\n      return;\n    }\n    const level = message.slice(1, match[0].length - 2);\n    const args = message.slice(match[0].length);\n    logger.log(`%c[CONVEX ${prefix}(${udfPath})] [${level}]`, INFO_COLOR, args);\n  } else {\n    logger.error(`[CONVEX ${prefix}(${udfPath})] ${message}`);\n  }\n}\nfunction logFatalError(logger, message) {\n  const errorMessage = `[CONVEX FATAL ERROR] ${message}`;\n  logger.error(errorMessage);\n  return new Error(errorMessage);\n}\nfunction createHybridErrorStacktrace(source, udfPath, result) {\n  const prefix = prefix_for_source(source);\n  return `[CONVEX ${prefix}(${udfPath})] ${result.errorMessage}\n  Called by client`;\n}\nfunction forwardData(result, error) {\n  error.data = result.errorData;\n  return error;\n}\n//# sourceMappingURL=logging.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvbG9nZ2luZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWE7QUFDYjtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJDQUEyQztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsNkJBQTZCLDJDQUEyQztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU8sR0FBRyxRQUFRO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsT0FBTyxHQUFHLFFBQVEsTUFBTSxNQUFNO0FBQzFELElBQUk7QUFDSiw0QkFBNEIsT0FBTyxHQUFHLFFBQVEsS0FBSyxRQUFRO0FBQzNEO0FBQ0E7QUFDTztBQUNQLCtDQUErQyxRQUFRO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxvQkFBb0IsT0FBTyxHQUFHLFFBQVEsS0FBSztBQUMzQztBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxicm93c2VyXFxsb2dnaW5nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbmNvbnN0IElORk9fQ09MT1IgPSBcImNvbG9yOnJnYigwLCAxNDUsIDI1NSlcIjtcbmZ1bmN0aW9uIHByZWZpeF9mb3Jfc291cmNlKHNvdXJjZSkge1xuICBzd2l0Y2ggKHNvdXJjZSkge1xuICAgIGNhc2UgXCJxdWVyeVwiOlxuICAgICAgcmV0dXJuIFwiUVwiO1xuICAgIGNhc2UgXCJtdXRhdGlvblwiOlxuICAgICAgcmV0dXJuIFwiTVwiO1xuICAgIGNhc2UgXCJhY3Rpb25cIjpcbiAgICAgIHJldHVybiBcIkFcIjtcbiAgICBjYXNlIFwiYW55XCI6XG4gICAgICByZXR1cm4gXCI/XCI7XG4gIH1cbn1cbmV4cG9ydCBjbGFzcyBEZWZhdWx0TG9nZ2VyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfb25Mb2dMaW5lRnVuY3NcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl92ZXJib3NlXCIpO1xuICAgIHRoaXMuX29uTG9nTGluZUZ1bmNzID0ge307XG4gICAgdGhpcy5fdmVyYm9zZSA9IG9wdGlvbnMudmVyYm9zZTtcbiAgfVxuICBhZGRMb2dMaW5lTGlzdGVuZXIoZnVuYykge1xuICAgIGxldCBpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxNSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5fb25Mb2dMaW5lRnVuY3NbaWRdID09PSB2b2lkIDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxNSk7XG4gICAgfVxuICAgIHRoaXMuX29uTG9nTGluZUZ1bmNzW2lkXSA9IGZ1bmM7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9vbkxvZ0xpbmVGdW5jc1tpZF07XG4gICAgfTtcbiAgfVxuICBsb2dWZXJib3NlKC4uLmFyZ3MpIHtcbiAgICBpZiAodGhpcy5fdmVyYm9zZSkge1xuICAgICAgZm9yIChjb25zdCBmdW5jIG9mIE9iamVjdC52YWx1ZXModGhpcy5fb25Mb2dMaW5lRnVuY3MpKSB7XG4gICAgICAgIGZ1bmMoXCJkZWJ1Z1wiLCBgJHsoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCl9YCwgLi4uYXJncyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGxvZyguLi5hcmdzKSB7XG4gICAgZm9yIChjb25zdCBmdW5jIG9mIE9iamVjdC52YWx1ZXModGhpcy5fb25Mb2dMaW5lRnVuY3MpKSB7XG4gICAgICBmdW5jKFwiaW5mb1wiLCAuLi5hcmdzKTtcbiAgICB9XG4gIH1cbiAgd2FybiguLi5hcmdzKSB7XG4gICAgZm9yIChjb25zdCBmdW5jIG9mIE9iamVjdC52YWx1ZXModGhpcy5fb25Mb2dMaW5lRnVuY3MpKSB7XG4gICAgICBmdW5jKFwid2FyblwiLCAuLi5hcmdzKTtcbiAgICB9XG4gIH1cbiAgZXJyb3IoLi4uYXJncykge1xuICAgIGZvciAoY29uc3QgZnVuYyBvZiBPYmplY3QudmFsdWVzKHRoaXMuX29uTG9nTGluZUZ1bmNzKSkge1xuICAgICAgZnVuYyhcImVycm9yXCIsIC4uLmFyZ3MpO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbnRpYXRlRGVmYXVsdExvZ2dlcihvcHRpb25zKSB7XG4gIGNvbnN0IGxvZ2dlciA9IG5ldyBEZWZhdWx0TG9nZ2VyKG9wdGlvbnMpO1xuICBsb2dnZXIuYWRkTG9nTGluZUxpc3RlbmVyKChsZXZlbCwgLi4uYXJncykgPT4ge1xuICAgIHN3aXRjaCAobGV2ZWwpIHtcbiAgICAgIGNhc2UgXCJkZWJ1Z1wiOlxuICAgICAgICBjb25zb2xlLmRlYnVnKC4uLmFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJpbmZvXCI6XG4gICAgICAgIGNvbnNvbGUubG9nKC4uLmFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJ3YXJuXCI6XG4gICAgICAgIGNvbnNvbGUud2FybiguLi5hcmdzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZXJyb3JcIjpcbiAgICAgICAgY29uc29sZS5lcnJvciguLi5hcmdzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGxldmVsO1xuICAgICAgICBjb25zb2xlLmxvZyguLi5hcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gbG9nZ2VyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbnRpYXRlTm9vcExvZ2dlcihvcHRpb25zKSB7XG4gIHJldHVybiBuZXcgRGVmYXVsdExvZ2dlcihvcHRpb25zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb2dGb3JGdW5jdGlvbihsb2dnZXIsIHR5cGUsIHNvdXJjZSwgdWRmUGF0aCwgbWVzc2FnZSkge1xuICBjb25zdCBwcmVmaXggPSBwcmVmaXhfZm9yX3NvdXJjZShzb3VyY2UpO1xuICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwib2JqZWN0XCIpIHtcbiAgICBtZXNzYWdlID0gYENvbnZleEVycm9yICR7SlNPTi5zdHJpbmdpZnkobWVzc2FnZS5lcnJvckRhdGEsIG51bGwsIDIpfWA7XG4gIH1cbiAgaWYgKHR5cGUgPT09IFwiaW5mb1wiKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBtZXNzYWdlLm1hdGNoKC9eXFxbLio/XFxdIC8pO1xuICAgIGlmIChtYXRjaCA9PT0gbnVsbCkge1xuICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICBgW0NPTlZFWCAke3ByZWZpeH0oJHt1ZGZQYXRofSldIENvdWxkIG5vdCBwYXJzZSBjb25zb2xlLmxvZ2BcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGxldmVsID0gbWVzc2FnZS5zbGljZSgxLCBtYXRjaFswXS5sZW5ndGggLSAyKTtcbiAgICBjb25zdCBhcmdzID0gbWVzc2FnZS5zbGljZShtYXRjaFswXS5sZW5ndGgpO1xuICAgIGxvZ2dlci5sb2coYCVjW0NPTlZFWCAke3ByZWZpeH0oJHt1ZGZQYXRofSldIFske2xldmVsfV1gLCBJTkZPX0NPTE9SLCBhcmdzKTtcbiAgfSBlbHNlIHtcbiAgICBsb2dnZXIuZXJyb3IoYFtDT05WRVggJHtwcmVmaXh9KCR7dWRmUGF0aH0pXSAke21lc3NhZ2V9YCk7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBsb2dGYXRhbEVycm9yKGxvZ2dlciwgbWVzc2FnZSkge1xuICBjb25zdCBlcnJvck1lc3NhZ2UgPSBgW0NPTlZFWCBGQVRBTCBFUlJPUl0gJHttZXNzYWdlfWA7XG4gIGxvZ2dlci5lcnJvcihlcnJvck1lc3NhZ2UpO1xuICByZXR1cm4gbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSHlicmlkRXJyb3JTdGFja3RyYWNlKHNvdXJjZSwgdWRmUGF0aCwgcmVzdWx0KSB7XG4gIGNvbnN0IHByZWZpeCA9IHByZWZpeF9mb3Jfc291cmNlKHNvdXJjZSk7XG4gIHJldHVybiBgW0NPTlZFWCAke3ByZWZpeH0oJHt1ZGZQYXRofSldICR7cmVzdWx0LmVycm9yTWVzc2FnZX1cbiAgQ2FsbGVkIGJ5IGNsaWVudGA7XG59XG5leHBvcnQgZnVuY3Rpb24gZm9yd2FyZERhdGEocmVzdWx0LCBlcnJvcikge1xuICBlcnJvci5kYXRhID0gcmVzdWx0LmVycm9yRGF0YTtcbiAgcmV0dXJuIGVycm9yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2luZy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/logging.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/simple_client.js":
/*!***************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/simple_client.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexClient: () => (/* binding */ ConvexClient),\n/* harmony export */   setDefaultWebSocketConstructor: () => (/* binding */ setDefaultWebSocketConstructor)\n/* harmony export */ });\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/index.js\");\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _sync_paginated_query_client_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sync/paginated_query_client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/paginated_query_client.js\");\n/* harmony import */ var _sync_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./sync/udf_path_utils.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\nlet defaultWebSocketConstructor;\nfunction setDefaultWebSocketConstructor(ws) {\n  defaultWebSocketConstructor = ws;\n}\nclass ConvexClient {\n  /**\n   * Construct a client and immediately initiate a WebSocket connection to the passed address.\n   *\n   * @public\n   */\n  constructor(address, options = {}) {\n    __publicField(this, \"listeners\");\n    __publicField(this, \"_client\");\n    __publicField(this, \"_paginatedClient\");\n    // A synthetic server event to run callbacks the first time\n    __publicField(this, \"callNewListenersWithCurrentValuesTimer\");\n    __publicField(this, \"_closed\");\n    __publicField(this, \"_disabled\");\n    if (options.skipConvexDeploymentUrlCheck !== true) {\n      (0,_common_index_js__WEBPACK_IMPORTED_MODULE_0__.validateDeploymentUrl)(address);\n    }\n    const { disabled, ...baseOptions } = options;\n    this._closed = false;\n    this._disabled = !!disabled;\n    if (defaultWebSocketConstructor && !(\"webSocketConstructor\" in baseOptions) && typeof WebSocket === \"undefined\") {\n      baseOptions.webSocketConstructor = defaultWebSocketConstructor;\n    }\n    if (typeof window === \"undefined\" && !(\"unsavedChangesWarning\" in baseOptions)) {\n      baseOptions.unsavedChangesWarning = false;\n    }\n    if (!this.disabled) {\n      this._client = new _index_js__WEBPACK_IMPORTED_MODULE_1__.BaseConvexClient(\n        address,\n        () => {\n        },\n        // NOP, let the paginated query client do it all\n        baseOptions\n      );\n      this._paginatedClient = new _sync_paginated_query_client_js__WEBPACK_IMPORTED_MODULE_3__.PaginatedQueryClient(\n        this._client,\n        (transition) => this._transition(transition)\n      );\n    }\n    this.listeners = /* @__PURE__ */ new Set();\n  }\n  /**\n   * Once closed no registered callbacks will fire again.\n   */\n  get closed() {\n    return this._closed;\n  }\n  get client() {\n    if (this._client) return this._client;\n    throw new Error(\"ConvexClient is disabled\");\n  }\n  /**\n   * @internal\n   */\n  get paginatedClient() {\n    if (this._paginatedClient) return this._paginatedClient;\n    throw new Error(\"ConvexClient is disabled\");\n  }\n  get disabled() {\n    return this._disabled;\n  }\n  /**\n   * Call a callback whenever a new result for a query is received. The callback\n   * will run soon after being registered if a result for the query is already\n   * in memory.\n   *\n   * The return value is an {@link Unsubscribe} object which is both a function\n   * an an object with properties. Both of the patterns below work with this object:\n   *\n   *```ts\n   * // call the return value as a function\n   * const unsubscribe = client.onUpdate(api.messages.list, {}, (messages) => {\n   *   console.log(messages);\n   * });\n   * unsubscribe();\n   *\n   * // unpack the return value into its properties\n   * const {\n   *   getCurrentValue,\n   *   unsubscribe,\n   * } = client.onUpdate(api.messages.list, {}, (messages) => {\n   *   console.log(messages);\n   * });\n   *```\n   *\n   * @param query - A {@link server.FunctionReference} for the public query to run.\n   * @param args - The arguments to run the query with.\n   * @param callback - Function to call when the query result updates.\n   * @param onError - Function to call when the query result updates with an error.\n   * If not provided, errors will be thrown instead of calling the callback.\n   *\n   * @return an {@link Unsubscribe} function to stop calling the onUpdate function.\n   */\n  onUpdate(query, args, callback, onError) {\n    if (this.disabled) {\n      return this.createDisabledUnsubscribe();\n    }\n    const { queryToken, unsubscribe } = this.client.subscribe(\n      (0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.getFunctionName)(query),\n      args\n    );\n    const queryInfo = {\n      queryToken,\n      callback,\n      onError,\n      unsubscribe,\n      hasEverRun: false,\n      query,\n      args,\n      paginationOptions: void 0\n    };\n    this.listeners.add(queryInfo);\n    if (this.queryResultReady(queryToken) && this.callNewListenersWithCurrentValuesTimer === void 0) {\n      this.callNewListenersWithCurrentValuesTimer = setTimeout(\n        () => this.callNewListenersWithCurrentValues(),\n        0\n      );\n    }\n    const unsubscribeProps = {\n      unsubscribe: () => {\n        if (this.closed) {\n          return;\n        }\n        this.listeners.delete(queryInfo);\n        unsubscribe();\n      },\n      getCurrentValue: () => this.client.localQueryResultByToken(queryToken),\n      getQueryLogs: () => this.client.localQueryLogs(queryToken)\n    };\n    const ret = unsubscribeProps.unsubscribe;\n    Object.assign(ret, unsubscribeProps);\n    return ret;\n  }\n  /**\n   * Call a callback whenever a new result for a paginated query is received.\n   *\n   * This is an experimental preview: the final API may change.\n   * In particular, caching behavior, page splitting, and required paginated query options\n   * may change.\n   *\n   * @param query - A {@link server.FunctionReference} for the public query to run.\n   * @param args - The arguments to run the query with.\n   * @param options - Options for the paginated query including initialNumItems and id.\n   * @param callback - Function to call when the query result updates.\n   * @param onError - Function to call when the query result updates with an error.\n   *\n   * @return an {@link Unsubscribe} function to stop calling the callback.\n   */\n  onPaginatedUpdate_experimental(query, args, options, callback, onError) {\n    if (this.disabled) {\n      return this.createDisabledUnsubscribe();\n    }\n    const paginationOptions = {\n      initialNumItems: options.initialNumItems,\n      id: -1\n    };\n    const { paginatedQueryToken, unsubscribe } = this.paginatedClient.subscribe(\n      (0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.getFunctionName)(query),\n      args,\n      // Simple client doesn't use IDs, there's no expectation that these queries remain separate.\n      paginationOptions\n    );\n    const queryInfo = {\n      queryToken: paginatedQueryToken,\n      callback,\n      onError,\n      unsubscribe,\n      hasEverRun: false,\n      query,\n      args,\n      paginationOptions\n    };\n    this.listeners.add(queryInfo);\n    if (!!this.paginatedClient.localQueryResultByToken(paginatedQueryToken) && this.callNewListenersWithCurrentValuesTimer === void 0) {\n      this.callNewListenersWithCurrentValuesTimer = setTimeout(\n        () => this.callNewListenersWithCurrentValues(),\n        0\n      );\n    }\n    const unsubscribeProps = {\n      unsubscribe: () => {\n        if (this.closed) {\n          return;\n        }\n        this.listeners.delete(queryInfo);\n        unsubscribe();\n      },\n      getCurrentValue: () => {\n        const result = this.paginatedClient.localQueryResult(\n          (0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.getFunctionName)(query),\n          args,\n          paginationOptions\n        );\n        return result;\n      },\n      getQueryLogs: () => []\n      // Paginated queries don't aggregate their logs\n    };\n    const ret = unsubscribeProps.unsubscribe;\n    Object.assign(ret, unsubscribeProps);\n    return ret;\n  }\n  // Run all callbacks that have never been run before if they have a query\n  // result available now.\n  callNewListenersWithCurrentValues() {\n    this.callNewListenersWithCurrentValuesTimer = void 0;\n    this._transition({ queries: [], paginatedQueries: [] }, true);\n  }\n  queryResultReady(queryToken) {\n    return this.client.hasLocalQueryResultByToken(queryToken);\n  }\n  createDisabledUnsubscribe() {\n    const disabledUnsubscribe = (() => {\n    });\n    const unsubscribeProps = {\n      unsubscribe: disabledUnsubscribe,\n      getCurrentValue: () => void 0,\n      getQueryLogs: () => void 0\n    };\n    Object.assign(disabledUnsubscribe, unsubscribeProps);\n    return disabledUnsubscribe;\n  }\n  async close() {\n    if (this.disabled) return;\n    this.listeners.clear();\n    this._closed = true;\n    if (this._paginatedClient) {\n      this._paginatedClient = void 0;\n    }\n    return this.client.close();\n  }\n  /**\n   * Get the current JWT auth token and decoded claims.\n   */\n  getAuth() {\n    if (this.disabled) return;\n    return this.client.getCurrentAuthClaims();\n  }\n  /**\n   * Set the authentication token to be used for subsequent queries and mutations.\n   * `fetchToken` will be called automatically again if a token expires.\n   * `fetchToken` should return `null` if the token cannot be retrieved, for example\n   * when the user's rights were permanently revoked.\n   * @param fetchToken - an async function returning the JWT (typically an OpenID Connect Identity Token)\n   * @param onChange - a callback that will be called when the authentication status changes\n   */\n  setAuth(fetchToken, onChange) {\n    if (this.disabled) return;\n    this.client.setAuth(\n      fetchToken,\n      onChange ?? (() => {\n      })\n    );\n  }\n  /**\n   * @internal\n   */\n  setAdminAuth(token, identity) {\n    if (this.closed) {\n      throw new Error(\"ConvexClient has already been closed.\");\n    }\n    if (this.disabled) return;\n    this.client.setAdminAuth(token, identity);\n  }\n  /**\n   * @internal\n   */\n  _transition({\n    queries,\n    paginatedQueries\n  }, callNewListeners = false) {\n    const updatedQueries = [\n      ...queries.map((q) => q.token),\n      ...paginatedQueries.map((q) => q.token)\n    ];\n    for (const queryInfo of this.listeners) {\n      const { callback, queryToken, onError, hasEverRun } = queryInfo;\n      const isPaginatedQuery = (0,_sync_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_4__.serializedQueryTokenIsPaginated)(queryToken);\n      const hasResultReady = isPaginatedQuery ? !!this.paginatedClient.localQueryResultByToken(queryToken) : this.client.hasLocalQueryResultByToken(queryToken);\n      if (updatedQueries.includes(queryToken) || callNewListeners && !hasEverRun && hasResultReady) {\n        queryInfo.hasEverRun = true;\n        let newValue;\n        try {\n          if (isPaginatedQuery) {\n            newValue = this.paginatedClient.localQueryResultByToken(queryToken);\n          } else {\n            newValue = this.client.localQueryResultByToken(queryToken);\n          }\n        } catch (error) {\n          if (!(error instanceof Error)) throw error;\n          if (onError) {\n            onError(\n              error,\n              \"Second argument to onUpdate onError is reserved for later use\"\n            );\n          } else {\n            void Promise.reject(error);\n          }\n          continue;\n        }\n        callback(\n          newValue,\n          \"Second argument to onUpdate callback is reserved for later use\"\n        );\n      }\n    }\n  }\n  /**\n   * Execute a mutation function.\n   *\n   * @param mutation - A {@link server.FunctionReference} for the public mutation\n   * to run.\n   * @param args - An arguments object for the mutation.\n   * @param options - A {@link MutationOptions} options object for the mutation.\n   * @returns A promise of the mutation's result.\n   */\n  async mutation(mutation, args, options) {\n    if (this.disabled) throw new Error(\"ConvexClient is disabled\");\n    return await this.client.mutation((0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.getFunctionName)(mutation), args, options);\n  }\n  /**\n   * Execute an action function.\n   *\n   * @param action - A {@link server.FunctionReference} for the public action\n   * to run.\n   * @param args - An arguments object for the action.\n   * @returns A promise of the action's result.\n   */\n  async action(action, args) {\n    if (this.disabled) throw new Error(\"ConvexClient is disabled\");\n    return await this.client.action((0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.getFunctionName)(action), args);\n  }\n  /**\n   * Fetch a query result once.\n   *\n   * @param query - A {@link server.FunctionReference} for the public query\n   * to run.\n   * @param args - An arguments object for the query.\n   * @returns A promise of the query's result.\n   */\n  async query(query, args) {\n    if (this.disabled) throw new Error(\"ConvexClient is disabled\");\n    const value = this.client.localQueryResult((0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.getFunctionName)(query), args);\n    if (value !== void 0) return Promise.resolve(value);\n    return new Promise((resolve, reject) => {\n      const { unsubscribe } = this.onUpdate(\n        query,\n        args,\n        (value2) => {\n          unsubscribe();\n          resolve(value2);\n        },\n        (e) => {\n          unsubscribe();\n          reject(e);\n        }\n      );\n    });\n  }\n  /**\n   * Get the current {@link ConnectionState} between the client and the Convex\n   * backend.\n   *\n   * @returns The {@link ConnectionState} with the Convex backend.\n   */\n  connectionState() {\n    if (this.disabled) throw new Error(\"ConvexClient is disabled\");\n    return this.client.connectionState();\n  }\n  /**\n   * Subscribe to the {@link ConnectionState} between the client and the Convex\n   * backend, calling a callback each time it changes.\n   *\n   * Subscribed callbacks will be called when any part of ConnectionState changes.\n   * ConnectionState may grow in future versions (e.g. to provide a array of\n   * inflight requests) in which case callbacks would be called more frequently.\n   *\n   * @returns An unsubscribe function to stop listening.\n   */\n  subscribeToConnectionState(cb) {\n    if (this.disabled) return () => {\n    };\n    return this.client.subscribeToConnectionState(cb);\n  }\n}\n//# sourceMappingURL=simple_client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc2ltcGxlX2NsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWE7QUFDYjtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDMkQ7QUFHdkM7QUFDK0I7QUFHVDtBQUNpQztBQUMzRTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx1RUFBcUI7QUFDM0I7QUFDQSxZQUFZLDJCQUEyQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdURBQWdCO0FBQ3pDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlGQUFvQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixtQkFBbUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQ7QUFDOUQ7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyx1Q0FBdUM7QUFDOUM7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLHVCQUF1QixnQ0FBZ0M7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMEJBQTBCO0FBQ3RDLE1BQU0sK0RBQWU7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdDQUFnQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1DQUFtQztBQUMvQyxNQUFNLCtEQUFlO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxVQUFVLCtEQUFlO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsbUNBQW1DO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNENBQTRDO0FBQzFELCtCQUErQix3RkFBK0I7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixnQ0FBZ0M7QUFDMUQ7QUFDQTtBQUNBLHlCQUF5Qix1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsK0RBQWU7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0NBQWdDO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywrREFBZTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixnQ0FBZ0M7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLCtEQUFlO0FBQzlEO0FBQ0E7QUFDQSxjQUFjLGNBQWM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxzQkFBc0IsdUJBQXVCO0FBQzdDO0FBQ0E7QUFDQSxtQkFBbUIsdUJBQXVCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1QkFBdUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXGJyb3dzZXJcXHNpbXBsZV9jbGllbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuaW1wb3J0IHsgdmFsaWRhdGVEZXBsb3ltZW50VXJsIH0gZnJvbSBcIi4uL2NvbW1vbi9pbmRleC5qc1wiO1xuaW1wb3J0IHtcbiAgQmFzZUNvbnZleENsaWVudFxufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0RnVuY3Rpb25OYW1lIH0gZnJvbSBcIi4uL3NlcnZlci9hcGkuanNcIjtcbmltcG9ydCB7XG4gIFBhZ2luYXRlZFF1ZXJ5Q2xpZW50XG59IGZyb20gXCIuL3N5bmMvcGFnaW5hdGVkX3F1ZXJ5X2NsaWVudC5qc1wiO1xuaW1wb3J0IHsgc2VyaWFsaXplZFF1ZXJ5VG9rZW5Jc1BhZ2luYXRlZCB9IGZyb20gXCIuL3N5bmMvdWRmX3BhdGhfdXRpbHMuanNcIjtcbmxldCBkZWZhdWx0V2ViU29ja2V0Q29uc3RydWN0b3I7XG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdFdlYlNvY2tldENvbnN0cnVjdG9yKHdzKSB7XG4gIGRlZmF1bHRXZWJTb2NrZXRDb25zdHJ1Y3RvciA9IHdzO1xufVxuZXhwb3J0IGNsYXNzIENvbnZleENsaWVudCB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3QgYSBjbGllbnQgYW5kIGltbWVkaWF0ZWx5IGluaXRpYXRlIGEgV2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIHBhc3NlZCBhZGRyZXNzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhZGRyZXNzLCBvcHRpb25zID0ge30pIHtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwibGlzdGVuZXJzXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfY2xpZW50XCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfcGFnaW5hdGVkQ2xpZW50XCIpO1xuICAgIC8vIEEgc3ludGhldGljIHNlcnZlciBldmVudCB0byBydW4gY2FsbGJhY2tzIHRoZSBmaXJzdCB0aW1lXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNhbGxOZXdMaXN0ZW5lcnNXaXRoQ3VycmVudFZhbHVlc1RpbWVyXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfY2xvc2VkXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfZGlzYWJsZWRcIik7XG4gICAgaWYgKG9wdGlvbnMuc2tpcENvbnZleERlcGxveW1lbnRVcmxDaGVjayAhPT0gdHJ1ZSkge1xuICAgICAgdmFsaWRhdGVEZXBsb3ltZW50VXJsKGFkZHJlc3MpO1xuICAgIH1cbiAgICBjb25zdCB7IGRpc2FibGVkLCAuLi5iYXNlT3B0aW9ucyB9ID0gb3B0aW9ucztcbiAgICB0aGlzLl9jbG9zZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9kaXNhYmxlZCA9ICEhZGlzYWJsZWQ7XG4gICAgaWYgKGRlZmF1bHRXZWJTb2NrZXRDb25zdHJ1Y3RvciAmJiAhKFwid2ViU29ja2V0Q29uc3RydWN0b3JcIiBpbiBiYXNlT3B0aW9ucykgJiYgdHlwZW9mIFdlYlNvY2tldCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgYmFzZU9wdGlvbnMud2ViU29ja2V0Q29uc3RydWN0b3IgPSBkZWZhdWx0V2ViU29ja2V0Q29uc3RydWN0b3I7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiICYmICEoXCJ1bnNhdmVkQ2hhbmdlc1dhcm5pbmdcIiBpbiBiYXNlT3B0aW9ucykpIHtcbiAgICAgIGJhc2VPcHRpb25zLnVuc2F2ZWRDaGFuZ2VzV2FybmluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMuX2NsaWVudCA9IG5ldyBCYXNlQ29udmV4Q2xpZW50KFxuICAgICAgICBhZGRyZXNzLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIE5PUCwgbGV0IHRoZSBwYWdpbmF0ZWQgcXVlcnkgY2xpZW50IGRvIGl0IGFsbFxuICAgICAgICBiYXNlT3B0aW9uc1xuICAgICAgKTtcbiAgICAgIHRoaXMuX3BhZ2luYXRlZENsaWVudCA9IG5ldyBQYWdpbmF0ZWRRdWVyeUNsaWVudChcbiAgICAgICAgdGhpcy5fY2xpZW50LFxuICAgICAgICAodHJhbnNpdGlvbikgPT4gdGhpcy5fdHJhbnNpdGlvbih0cmFuc2l0aW9uKVxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5saXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICB9XG4gIC8qKlxuICAgKiBPbmNlIGNsb3NlZCBubyByZWdpc3RlcmVkIGNhbGxiYWNrcyB3aWxsIGZpcmUgYWdhaW4uXG4gICAqL1xuICBnZXQgY2xvc2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9jbG9zZWQ7XG4gIH1cbiAgZ2V0IGNsaWVudCgpIHtcbiAgICBpZiAodGhpcy5fY2xpZW50KSByZXR1cm4gdGhpcy5fY2xpZW50O1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnZleENsaWVudCBpcyBkaXNhYmxlZFwiKTtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXQgcGFnaW5hdGVkQ2xpZW50KCkge1xuICAgIGlmICh0aGlzLl9wYWdpbmF0ZWRDbGllbnQpIHJldHVybiB0aGlzLl9wYWdpbmF0ZWRDbGllbnQ7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ29udmV4Q2xpZW50IGlzIGRpc2FibGVkXCIpO1xuICB9XG4gIGdldCBkaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gIH1cbiAgLyoqXG4gICAqIENhbGwgYSBjYWxsYmFjayB3aGVuZXZlciBhIG5ldyByZXN1bHQgZm9yIGEgcXVlcnkgaXMgcmVjZWl2ZWQuIFRoZSBjYWxsYmFja1xuICAgKiB3aWxsIHJ1biBzb29uIGFmdGVyIGJlaW5nIHJlZ2lzdGVyZWQgaWYgYSByZXN1bHQgZm9yIHRoZSBxdWVyeSBpcyBhbHJlYWR5XG4gICAqIGluIG1lbW9yeS5cbiAgICpcbiAgICogVGhlIHJldHVybiB2YWx1ZSBpcyBhbiB7QGxpbmsgVW5zdWJzY3JpYmV9IG9iamVjdCB3aGljaCBpcyBib3RoIGEgZnVuY3Rpb25cbiAgICogYW4gYW4gb2JqZWN0IHdpdGggcHJvcGVydGllcy4gQm90aCBvZiB0aGUgcGF0dGVybnMgYmVsb3cgd29yayB3aXRoIHRoaXMgb2JqZWN0OlxuICAgKlxuICAgKmBgYHRzXG4gICAqIC8vIGNhbGwgdGhlIHJldHVybiB2YWx1ZSBhcyBhIGZ1bmN0aW9uXG4gICAqIGNvbnN0IHVuc3Vic2NyaWJlID0gY2xpZW50Lm9uVXBkYXRlKGFwaS5tZXNzYWdlcy5saXN0LCB7fSwgKG1lc3NhZ2VzKSA9PiB7XG4gICAqICAgY29uc29sZS5sb2cobWVzc2FnZXMpO1xuICAgKiB9KTtcbiAgICogdW5zdWJzY3JpYmUoKTtcbiAgICpcbiAgICogLy8gdW5wYWNrIHRoZSByZXR1cm4gdmFsdWUgaW50byBpdHMgcHJvcGVydGllc1xuICAgKiBjb25zdCB7XG4gICAqICAgZ2V0Q3VycmVudFZhbHVlLFxuICAgKiAgIHVuc3Vic2NyaWJlLFxuICAgKiB9ID0gY2xpZW50Lm9uVXBkYXRlKGFwaS5tZXNzYWdlcy5saXN0LCB7fSwgKG1lc3NhZ2VzKSA9PiB7XG4gICAqICAgY29uc29sZS5sb2cobWVzc2FnZXMpO1xuICAgKiB9KTtcbiAgICpgYGBcbiAgICpcbiAgICogQHBhcmFtIHF1ZXJ5IC0gQSB7QGxpbmsgc2VydmVyLkZ1bmN0aW9uUmVmZXJlbmNlfSBmb3IgdGhlIHB1YmxpYyBxdWVyeSB0byBydW4uXG4gICAqIEBwYXJhbSBhcmdzIC0gVGhlIGFyZ3VtZW50cyB0byBydW4gdGhlIHF1ZXJ5IHdpdGguXG4gICAqIEBwYXJhbSBjYWxsYmFjayAtIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgcXVlcnkgcmVzdWx0IHVwZGF0ZXMuXG4gICAqIEBwYXJhbSBvbkVycm9yIC0gRnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBxdWVyeSByZXN1bHQgdXBkYXRlcyB3aXRoIGFuIGVycm9yLlxuICAgKiBJZiBub3QgcHJvdmlkZWQsIGVycm9ycyB3aWxsIGJlIHRocm93biBpbnN0ZWFkIG9mIGNhbGxpbmcgdGhlIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcmV0dXJuIGFuIHtAbGluayBVbnN1YnNjcmliZX0gZnVuY3Rpb24gdG8gc3RvcCBjYWxsaW5nIHRoZSBvblVwZGF0ZSBmdW5jdGlvbi5cbiAgICovXG4gIG9uVXBkYXRlKHF1ZXJ5LCBhcmdzLCBjYWxsYmFjaywgb25FcnJvcikge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVEaXNhYmxlZFVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIGNvbnN0IHsgcXVlcnlUb2tlbiwgdW5zdWJzY3JpYmUgfSA9IHRoaXMuY2xpZW50LnN1YnNjcmliZShcbiAgICAgIGdldEZ1bmN0aW9uTmFtZShxdWVyeSksXG4gICAgICBhcmdzXG4gICAgKTtcbiAgICBjb25zdCBxdWVyeUluZm8gPSB7XG4gICAgICBxdWVyeVRva2VuLFxuICAgICAgY2FsbGJhY2ssXG4gICAgICBvbkVycm9yLFxuICAgICAgdW5zdWJzY3JpYmUsXG4gICAgICBoYXNFdmVyUnVuOiBmYWxzZSxcbiAgICAgIHF1ZXJ5LFxuICAgICAgYXJncyxcbiAgICAgIHBhZ2luYXRpb25PcHRpb25zOiB2b2lkIDBcbiAgICB9O1xuICAgIHRoaXMubGlzdGVuZXJzLmFkZChxdWVyeUluZm8pO1xuICAgIGlmICh0aGlzLnF1ZXJ5UmVzdWx0UmVhZHkocXVlcnlUb2tlbikgJiYgdGhpcy5jYWxsTmV3TGlzdGVuZXJzV2l0aEN1cnJlbnRWYWx1ZXNUaW1lciA9PT0gdm9pZCAwKSB7XG4gICAgICB0aGlzLmNhbGxOZXdMaXN0ZW5lcnNXaXRoQ3VycmVudFZhbHVlc1RpbWVyID0gc2V0VGltZW91dChcbiAgICAgICAgKCkgPT4gdGhpcy5jYWxsTmV3TGlzdGVuZXJzV2l0aEN1cnJlbnRWYWx1ZXMoKSxcbiAgICAgICAgMFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgdW5zdWJzY3JpYmVQcm9wcyA9IHtcbiAgICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmVycy5kZWxldGUocXVlcnlJbmZvKTtcbiAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgIH0sXG4gICAgICBnZXRDdXJyZW50VmFsdWU6ICgpID0+IHRoaXMuY2xpZW50LmxvY2FsUXVlcnlSZXN1bHRCeVRva2VuKHF1ZXJ5VG9rZW4pLFxuICAgICAgZ2V0UXVlcnlMb2dzOiAoKSA9PiB0aGlzLmNsaWVudC5sb2NhbFF1ZXJ5TG9ncyhxdWVyeVRva2VuKVxuICAgIH07XG4gICAgY29uc3QgcmV0ID0gdW5zdWJzY3JpYmVQcm9wcy51bnN1YnNjcmliZTtcbiAgICBPYmplY3QuYXNzaWduKHJldCwgdW5zdWJzY3JpYmVQcm9wcyk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuICAvKipcbiAgICogQ2FsbCBhIGNhbGxiYWNrIHdoZW5ldmVyIGEgbmV3IHJlc3VsdCBmb3IgYSBwYWdpbmF0ZWQgcXVlcnkgaXMgcmVjZWl2ZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgYW4gZXhwZXJpbWVudGFsIHByZXZpZXc6IHRoZSBmaW5hbCBBUEkgbWF5IGNoYW5nZS5cbiAgICogSW4gcGFydGljdWxhciwgY2FjaGluZyBiZWhhdmlvciwgcGFnZSBzcGxpdHRpbmcsIGFuZCByZXF1aXJlZCBwYWdpbmF0ZWQgcXVlcnkgb3B0aW9uc1xuICAgKiBtYXkgY2hhbmdlLlxuICAgKlxuICAgKiBAcGFyYW0gcXVlcnkgLSBBIHtAbGluayBzZXJ2ZXIuRnVuY3Rpb25SZWZlcmVuY2V9IGZvciB0aGUgcHVibGljIHF1ZXJ5IHRvIHJ1bi5cbiAgICogQHBhcmFtIGFyZ3MgLSBUaGUgYXJndW1lbnRzIHRvIHJ1biB0aGUgcXVlcnkgd2l0aC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgcGFnaW5hdGVkIHF1ZXJ5IGluY2x1ZGluZyBpbml0aWFsTnVtSXRlbXMgYW5kIGlkLlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIHF1ZXJ5IHJlc3VsdCB1cGRhdGVzLlxuICAgKiBAcGFyYW0gb25FcnJvciAtIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgcXVlcnkgcmVzdWx0IHVwZGF0ZXMgd2l0aCBhbiBlcnJvci5cbiAgICpcbiAgICogQHJldHVybiBhbiB7QGxpbmsgVW5zdWJzY3JpYmV9IGZ1bmN0aW9uIHRvIHN0b3AgY2FsbGluZyB0aGUgY2FsbGJhY2suXG4gICAqL1xuICBvblBhZ2luYXRlZFVwZGF0ZV9leHBlcmltZW50YWwocXVlcnksIGFyZ3MsIG9wdGlvbnMsIGNhbGxiYWNrLCBvbkVycm9yKSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZURpc2FibGVkVW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgY29uc3QgcGFnaW5hdGlvbk9wdGlvbnMgPSB7XG4gICAgICBpbml0aWFsTnVtSXRlbXM6IG9wdGlvbnMuaW5pdGlhbE51bUl0ZW1zLFxuICAgICAgaWQ6IC0xXG4gICAgfTtcbiAgICBjb25zdCB7IHBhZ2luYXRlZFF1ZXJ5VG9rZW4sIHVuc3Vic2NyaWJlIH0gPSB0aGlzLnBhZ2luYXRlZENsaWVudC5zdWJzY3JpYmUoXG4gICAgICBnZXRGdW5jdGlvbk5hbWUocXVlcnkpLFxuICAgICAgYXJncyxcbiAgICAgIC8vIFNpbXBsZSBjbGllbnQgZG9lc24ndCB1c2UgSURzLCB0aGVyZSdzIG5vIGV4cGVjdGF0aW9uIHRoYXQgdGhlc2UgcXVlcmllcyByZW1haW4gc2VwYXJhdGUuXG4gICAgICBwYWdpbmF0aW9uT3B0aW9uc1xuICAgICk7XG4gICAgY29uc3QgcXVlcnlJbmZvID0ge1xuICAgICAgcXVlcnlUb2tlbjogcGFnaW5hdGVkUXVlcnlUb2tlbixcbiAgICAgIGNhbGxiYWNrLFxuICAgICAgb25FcnJvcixcbiAgICAgIHVuc3Vic2NyaWJlLFxuICAgICAgaGFzRXZlclJ1bjogZmFsc2UsXG4gICAgICBxdWVyeSxcbiAgICAgIGFyZ3MsXG4gICAgICBwYWdpbmF0aW9uT3B0aW9uc1xuICAgIH07XG4gICAgdGhpcy5saXN0ZW5lcnMuYWRkKHF1ZXJ5SW5mbyk7XG4gICAgaWYgKCEhdGhpcy5wYWdpbmF0ZWRDbGllbnQubG9jYWxRdWVyeVJlc3VsdEJ5VG9rZW4ocGFnaW5hdGVkUXVlcnlUb2tlbikgJiYgdGhpcy5jYWxsTmV3TGlzdGVuZXJzV2l0aEN1cnJlbnRWYWx1ZXNUaW1lciA9PT0gdm9pZCAwKSB7XG4gICAgICB0aGlzLmNhbGxOZXdMaXN0ZW5lcnNXaXRoQ3VycmVudFZhbHVlc1RpbWVyID0gc2V0VGltZW91dChcbiAgICAgICAgKCkgPT4gdGhpcy5jYWxsTmV3TGlzdGVuZXJzV2l0aEN1cnJlbnRWYWx1ZXMoKSxcbiAgICAgICAgMFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgdW5zdWJzY3JpYmVQcm9wcyA9IHtcbiAgICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmVycy5kZWxldGUocXVlcnlJbmZvKTtcbiAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgIH0sXG4gICAgICBnZXRDdXJyZW50VmFsdWU6ICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wYWdpbmF0ZWRDbGllbnQubG9jYWxRdWVyeVJlc3VsdChcbiAgICAgICAgICBnZXRGdW5jdGlvbk5hbWUocXVlcnkpLFxuICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnNcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0sXG4gICAgICBnZXRRdWVyeUxvZ3M6ICgpID0+IFtdXG4gICAgICAvLyBQYWdpbmF0ZWQgcXVlcmllcyBkb24ndCBhZ2dyZWdhdGUgdGhlaXIgbG9nc1xuICAgIH07XG4gICAgY29uc3QgcmV0ID0gdW5zdWJzY3JpYmVQcm9wcy51bnN1YnNjcmliZTtcbiAgICBPYmplY3QuYXNzaWduKHJldCwgdW5zdWJzY3JpYmVQcm9wcyk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuICAvLyBSdW4gYWxsIGNhbGxiYWNrcyB0aGF0IGhhdmUgbmV2ZXIgYmVlbiBydW4gYmVmb3JlIGlmIHRoZXkgaGF2ZSBhIHF1ZXJ5XG4gIC8vIHJlc3VsdCBhdmFpbGFibGUgbm93LlxuICBjYWxsTmV3TGlzdGVuZXJzV2l0aEN1cnJlbnRWYWx1ZXMoKSB7XG4gICAgdGhpcy5jYWxsTmV3TGlzdGVuZXJzV2l0aEN1cnJlbnRWYWx1ZXNUaW1lciA9IHZvaWQgMDtcbiAgICB0aGlzLl90cmFuc2l0aW9uKHsgcXVlcmllczogW10sIHBhZ2luYXRlZFF1ZXJpZXM6IFtdIH0sIHRydWUpO1xuICB9XG4gIHF1ZXJ5UmVzdWx0UmVhZHkocXVlcnlUb2tlbikge1xuICAgIHJldHVybiB0aGlzLmNsaWVudC5oYXNMb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbihxdWVyeVRva2VuKTtcbiAgfVxuICBjcmVhdGVEaXNhYmxlZFVuc3Vic2NyaWJlKCkge1xuICAgIGNvbnN0IGRpc2FibGVkVW5zdWJzY3JpYmUgPSAoKCkgPT4ge1xuICAgIH0pO1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlUHJvcHMgPSB7XG4gICAgICB1bnN1YnNjcmliZTogZGlzYWJsZWRVbnN1YnNjcmliZSxcbiAgICAgIGdldEN1cnJlbnRWYWx1ZTogKCkgPT4gdm9pZCAwLFxuICAgICAgZ2V0UXVlcnlMb2dzOiAoKSA9PiB2b2lkIDBcbiAgICB9O1xuICAgIE9iamVjdC5hc3NpZ24oZGlzYWJsZWRVbnN1YnNjcmliZSwgdW5zdWJzY3JpYmVQcm9wcyk7XG4gICAgcmV0dXJuIGRpc2FibGVkVW5zdWJzY3JpYmU7XG4gIH1cbiAgYXN5bmMgY2xvc2UoKSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybjtcbiAgICB0aGlzLmxpc3RlbmVycy5jbGVhcigpO1xuICAgIHRoaXMuX2Nsb3NlZCA9IHRydWU7XG4gICAgaWYgKHRoaXMuX3BhZ2luYXRlZENsaWVudCkge1xuICAgICAgdGhpcy5fcGFnaW5hdGVkQ2xpZW50ID0gdm9pZCAwO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jbGllbnQuY2xvc2UoKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IEpXVCBhdXRoIHRva2VuIGFuZCBkZWNvZGVkIGNsYWltcy5cbiAgICovXG4gIGdldEF1dGgoKSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybjtcbiAgICByZXR1cm4gdGhpcy5jbGllbnQuZ2V0Q3VycmVudEF1dGhDbGFpbXMoKTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBhdXRoZW50aWNhdGlvbiB0b2tlbiB0byBiZSB1c2VkIGZvciBzdWJzZXF1ZW50IHF1ZXJpZXMgYW5kIG11dGF0aW9ucy5cbiAgICogYGZldGNoVG9rZW5gIHdpbGwgYmUgY2FsbGVkIGF1dG9tYXRpY2FsbHkgYWdhaW4gaWYgYSB0b2tlbiBleHBpcmVzLlxuICAgKiBgZmV0Y2hUb2tlbmAgc2hvdWxkIHJldHVybiBgbnVsbGAgaWYgdGhlIHRva2VuIGNhbm5vdCBiZSByZXRyaWV2ZWQsIGZvciBleGFtcGxlXG4gICAqIHdoZW4gdGhlIHVzZXIncyByaWdodHMgd2VyZSBwZXJtYW5lbnRseSByZXZva2VkLlxuICAgKiBAcGFyYW0gZmV0Y2hUb2tlbiAtIGFuIGFzeW5jIGZ1bmN0aW9uIHJldHVybmluZyB0aGUgSldUICh0eXBpY2FsbHkgYW4gT3BlbklEIENvbm5lY3QgSWRlbnRpdHkgVG9rZW4pXG4gICAqIEBwYXJhbSBvbkNoYW5nZSAtIGEgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBhdXRoZW50aWNhdGlvbiBzdGF0dXMgY2hhbmdlc1xuICAgKi9cbiAgc2V0QXV0aChmZXRjaFRva2VuLCBvbkNoYW5nZSkge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSByZXR1cm47XG4gICAgdGhpcy5jbGllbnQuc2V0QXV0aChcbiAgICAgIGZldGNoVG9rZW4sXG4gICAgICBvbkNoYW5nZSA/PyAoKCkgPT4ge1xuICAgICAgfSlcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHNldEFkbWluQXV0aCh0b2tlbiwgaWRlbnRpdHkpIHtcbiAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnZleENsaWVudCBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZC5cIik7XG4gICAgfVxuICAgIGlmICh0aGlzLmRpc2FibGVkKSByZXR1cm47XG4gICAgdGhpcy5jbGllbnQuc2V0QWRtaW5BdXRoKHRva2VuLCBpZGVudGl0eSk7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX3RyYW5zaXRpb24oe1xuICAgIHF1ZXJpZXMsXG4gICAgcGFnaW5hdGVkUXVlcmllc1xuICB9LCBjYWxsTmV3TGlzdGVuZXJzID0gZmFsc2UpIHtcbiAgICBjb25zdCB1cGRhdGVkUXVlcmllcyA9IFtcbiAgICAgIC4uLnF1ZXJpZXMubWFwKChxKSA9PiBxLnRva2VuKSxcbiAgICAgIC4uLnBhZ2luYXRlZFF1ZXJpZXMubWFwKChxKSA9PiBxLnRva2VuKVxuICAgIF07XG4gICAgZm9yIChjb25zdCBxdWVyeUluZm8gb2YgdGhpcy5saXN0ZW5lcnMpIHtcbiAgICAgIGNvbnN0IHsgY2FsbGJhY2ssIHF1ZXJ5VG9rZW4sIG9uRXJyb3IsIGhhc0V2ZXJSdW4gfSA9IHF1ZXJ5SW5mbztcbiAgICAgIGNvbnN0IGlzUGFnaW5hdGVkUXVlcnkgPSBzZXJpYWxpemVkUXVlcnlUb2tlbklzUGFnaW5hdGVkKHF1ZXJ5VG9rZW4pO1xuICAgICAgY29uc3QgaGFzUmVzdWx0UmVhZHkgPSBpc1BhZ2luYXRlZFF1ZXJ5ID8gISF0aGlzLnBhZ2luYXRlZENsaWVudC5sb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbihxdWVyeVRva2VuKSA6IHRoaXMuY2xpZW50Lmhhc0xvY2FsUXVlcnlSZXN1bHRCeVRva2VuKHF1ZXJ5VG9rZW4pO1xuICAgICAgaWYgKHVwZGF0ZWRRdWVyaWVzLmluY2x1ZGVzKHF1ZXJ5VG9rZW4pIHx8IGNhbGxOZXdMaXN0ZW5lcnMgJiYgIWhhc0V2ZXJSdW4gJiYgaGFzUmVzdWx0UmVhZHkpIHtcbiAgICAgICAgcXVlcnlJbmZvLmhhc0V2ZXJSdW4gPSB0cnVlO1xuICAgICAgICBsZXQgbmV3VmFsdWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGlzUGFnaW5hdGVkUXVlcnkpIHtcbiAgICAgICAgICAgIG5ld1ZhbHVlID0gdGhpcy5wYWdpbmF0ZWRDbGllbnQubG9jYWxRdWVyeVJlc3VsdEJ5VG9rZW4ocXVlcnlUb2tlbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld1ZhbHVlID0gdGhpcy5jbGllbnQubG9jYWxRdWVyeVJlc3VsdEJ5VG9rZW4ocXVlcnlUb2tlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGlmICghKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpKSB0aHJvdyBlcnJvcjtcbiAgICAgICAgICBpZiAob25FcnJvcikge1xuICAgICAgICAgICAgb25FcnJvcihcbiAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgIFwiU2Vjb25kIGFyZ3VtZW50IHRvIG9uVXBkYXRlIG9uRXJyb3IgaXMgcmVzZXJ2ZWQgZm9yIGxhdGVyIHVzZVwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2b2lkIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soXG4gICAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgICAgXCJTZWNvbmQgYXJndW1lbnQgdG8gb25VcGRhdGUgY2FsbGJhY2sgaXMgcmVzZXJ2ZWQgZm9yIGxhdGVyIHVzZVwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgbXV0YXRpb24gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBtdXRhdGlvbiAtIEEge0BsaW5rIHNlcnZlci5GdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBwdWJsaWMgbXV0YXRpb25cbiAgICogdG8gcnVuLlxuICAgKiBAcGFyYW0gYXJncyAtIEFuIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBtdXRhdGlvbi5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBBIHtAbGluayBNdXRhdGlvbk9wdGlvbnN9IG9wdGlvbnMgb2JqZWN0IGZvciB0aGUgbXV0YXRpb24uXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgbXV0YXRpb24ncyByZXN1bHQuXG4gICAqL1xuICBhc3luYyBtdXRhdGlvbihtdXRhdGlvbiwgYXJncywgb3B0aW9ucykge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB0aHJvdyBuZXcgRXJyb3IoXCJDb252ZXhDbGllbnQgaXMgZGlzYWJsZWRcIik7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY2xpZW50Lm11dGF0aW9uKGdldEZ1bmN0aW9uTmFtZShtdXRhdGlvbiksIGFyZ3MsIG9wdGlvbnMpO1xuICB9XG4gIC8qKlxuICAgKiBFeGVjdXRlIGFuIGFjdGlvbiBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIGFjdGlvbiAtIEEge0BsaW5rIHNlcnZlci5GdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBwdWJsaWMgYWN0aW9uXG4gICAqIHRvIHJ1bi5cbiAgICogQHBhcmFtIGFyZ3MgLSBBbiBhcmd1bWVudHMgb2JqZWN0IGZvciB0aGUgYWN0aW9uLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2Ugb2YgdGhlIGFjdGlvbidzIHJlc3VsdC5cbiAgICovXG4gIGFzeW5jIGFjdGlvbihhY3Rpb24sIGFyZ3MpIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCkgdGhyb3cgbmV3IEVycm9yKFwiQ29udmV4Q2xpZW50IGlzIGRpc2FibGVkXCIpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmNsaWVudC5hY3Rpb24oZ2V0RnVuY3Rpb25OYW1lKGFjdGlvbiksIGFyZ3MpO1xuICB9XG4gIC8qKlxuICAgKiBGZXRjaCBhIHF1ZXJ5IHJlc3VsdCBvbmNlLlxuICAgKlxuICAgKiBAcGFyYW0gcXVlcnkgLSBBIHtAbGluayBzZXJ2ZXIuRnVuY3Rpb25SZWZlcmVuY2V9IGZvciB0aGUgcHVibGljIHF1ZXJ5XG4gICAqIHRvIHJ1bi5cbiAgICogQHBhcmFtIGFyZ3MgLSBBbiBhcmd1bWVudHMgb2JqZWN0IGZvciB0aGUgcXVlcnkuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgcXVlcnkncyByZXN1bHQuXG4gICAqL1xuICBhc3luYyBxdWVyeShxdWVyeSwgYXJncykge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB0aHJvdyBuZXcgRXJyb3IoXCJDb252ZXhDbGllbnQgaXMgZGlzYWJsZWRcIik7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmNsaWVudC5sb2NhbFF1ZXJ5UmVzdWx0KGdldEZ1bmN0aW9uTmFtZShxdWVyeSksIGFyZ3MpO1xuICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgeyB1bnN1YnNjcmliZSB9ID0gdGhpcy5vblVwZGF0ZShcbiAgICAgICAgcXVlcnksXG4gICAgICAgIGFyZ3MsXG4gICAgICAgICh2YWx1ZTIpID0+IHtcbiAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgIHJlc29sdmUodmFsdWUyKTtcbiAgICAgICAgfSxcbiAgICAgICAgKGUpID0+IHtcbiAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHtAbGluayBDb25uZWN0aW9uU3RhdGV9IGJldHdlZW4gdGhlIGNsaWVudCBhbmQgdGhlIENvbnZleFxuICAgKiBiYWNrZW5kLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIENvbm5lY3Rpb25TdGF0ZX0gd2l0aCB0aGUgQ29udmV4IGJhY2tlbmQuXG4gICAqL1xuICBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHRocm93IG5ldyBFcnJvcihcIkNvbnZleENsaWVudCBpcyBkaXNhYmxlZFwiKTtcbiAgICByZXR1cm4gdGhpcy5jbGllbnQuY29ubmVjdGlvblN0YXRlKCk7XG4gIH1cbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byB0aGUge0BsaW5rIENvbm5lY3Rpb25TdGF0ZX0gYmV0d2VlbiB0aGUgY2xpZW50IGFuZCB0aGUgQ29udmV4XG4gICAqIGJhY2tlbmQsIGNhbGxpbmcgYSBjYWxsYmFjayBlYWNoIHRpbWUgaXQgY2hhbmdlcy5cbiAgICpcbiAgICogU3Vic2NyaWJlZCBjYWxsYmFja3Mgd2lsbCBiZSBjYWxsZWQgd2hlbiBhbnkgcGFydCBvZiBDb25uZWN0aW9uU3RhdGUgY2hhbmdlcy5cbiAgICogQ29ubmVjdGlvblN0YXRlIG1heSBncm93IGluIGZ1dHVyZSB2ZXJzaW9ucyAoZS5nLiB0byBwcm92aWRlIGEgYXJyYXkgb2ZcbiAgICogaW5mbGlnaHQgcmVxdWVzdHMpIGluIHdoaWNoIGNhc2UgY2FsbGJhY2tzIHdvdWxkIGJlIGNhbGxlZCBtb3JlIGZyZXF1ZW50bHkuXG4gICAqXG4gICAqIEByZXR1cm5zIEFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRvIHN0b3AgbGlzdGVuaW5nLlxuICAgKi9cbiAgc3Vic2NyaWJlVG9Db25uZWN0aW9uU3RhdGUoY2IpIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCkgcmV0dXJuICgpID0+IHtcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmNsaWVudC5zdWJzY3JpYmVUb0Nvbm5lY3Rpb25TdGF0ZShjYik7XG4gIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpbXBsZV9jbGllbnQuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/simple_client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/authentication_manager.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/authentication_manager.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthenticationManager: () => (/* binding */ AuthenticationManager)\n/* harmony export */ });\n/* harmony import */ var _vendor_jwt_decode_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../vendor/jwt-decode/index.js */ \"(ssr)/./node_modules/convex/dist/esm/vendor/jwt-decode/index.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\nconst MAXIMUM_REFRESH_DELAY = 20 * 24 * 60 * 60 * 1e3;\nconst MAX_TOKEN_CONFIRMATION_ATTEMPTS = 2;\nclass AuthenticationManager {\n  constructor(syncState, callbacks, config) {\n    __publicField(this, \"authState\", { state: \"noAuth\" });\n    // Used to detect races involving `setConfig` calls\n    // while a token is being fetched.\n    __publicField(this, \"configVersion\", 0);\n    // Shared by the BaseClient so that the auth manager can easily inspect it\n    __publicField(this, \"syncState\");\n    // Passed down by BaseClient, sends a message to the server\n    __publicField(this, \"authenticate\");\n    __publicField(this, \"stopSocket\");\n    __publicField(this, \"tryRestartSocket\");\n    __publicField(this, \"pauseSocket\");\n    __publicField(this, \"resumeSocket\");\n    // Passed down by BaseClient, sends a message to the server\n    __publicField(this, \"clearAuth\");\n    __publicField(this, \"logger\");\n    __publicField(this, \"refreshTokenLeewaySeconds\");\n    // Number of times we have attempted to confirm the latest token. We retry up\n    // to `MAX_TOKEN_CONFIRMATION_ATTEMPTS` times.\n    __publicField(this, \"tokenConfirmationAttempts\", 0);\n    this.syncState = syncState;\n    this.authenticate = callbacks.authenticate;\n    this.stopSocket = callbacks.stopSocket;\n    this.tryRestartSocket = callbacks.tryRestartSocket;\n    this.pauseSocket = callbacks.pauseSocket;\n    this.resumeSocket = callbacks.resumeSocket;\n    this.clearAuth = callbacks.clearAuth;\n    this.logger = config.logger;\n    this.refreshTokenLeewaySeconds = config.refreshTokenLeewaySeconds;\n  }\n  async setConfig(fetchToken, onChange) {\n    this.resetAuthState();\n    this._logVerbose(\"pausing WS for auth token fetch\");\n    this.pauseSocket();\n    const token = await this.fetchTokenAndGuardAgainstRace(fetchToken, {\n      forceRefreshToken: false\n    });\n    if (token.isFromOutdatedConfig) {\n      return;\n    }\n    if (token.value) {\n      this.setAuthState({\n        state: \"waitingForServerConfirmationOfCachedToken\",\n        config: { fetchToken, onAuthChange: onChange },\n        hasRetried: false\n      });\n      this.authenticate(token.value);\n    } else {\n      this.setAuthState({\n        state: \"initialRefetch\",\n        config: { fetchToken, onAuthChange: onChange }\n      });\n      await this.refetchToken();\n    }\n    this._logVerbose(\"resuming WS after auth token fetch\");\n    this.resumeSocket();\n  }\n  onTransition(serverMessage) {\n    if (!this.syncState.isCurrentOrNewerAuthVersion(\n      serverMessage.endVersion.identity\n    )) {\n      return;\n    }\n    if (serverMessage.endVersion.identity <= serverMessage.startVersion.identity) {\n      return;\n    }\n    if (this.authState.state === \"waitingForServerConfirmationOfCachedToken\") {\n      this._logVerbose(\"server confirmed auth token is valid\");\n      void this.refetchToken();\n      this.authState.config.onAuthChange(true);\n      return;\n    }\n    if (this.authState.state === \"waitingForServerConfirmationOfFreshToken\") {\n      this._logVerbose(\"server confirmed new auth token is valid\");\n      this.scheduleTokenRefetch(this.authState.token);\n      this.tokenConfirmationAttempts = 0;\n      if (!this.authState.hadAuth) {\n        this.authState.config.onAuthChange(true);\n      }\n    }\n  }\n  onAuthError(serverMessage) {\n    if (serverMessage.authUpdateAttempted === false && (this.authState.state === \"waitingForServerConfirmationOfFreshToken\" || this.authState.state === \"waitingForServerConfirmationOfCachedToken\")) {\n      this._logVerbose(\"ignoring non-auth token expired error\");\n      return;\n    }\n    const { baseVersion } = serverMessage;\n    if (!this.syncState.isCurrentOrNewerAuthVersion(baseVersion + 1)) {\n      this._logVerbose(\"ignoring auth error for previous auth attempt\");\n      return;\n    }\n    void this.tryToReauthenticate(serverMessage);\n    return;\n  }\n  // This is similar to `refetchToken` defined below, in fact we\n  // don't represent them as different states, but it is different\n  // in that we pause the WebSocket so that mutations\n  // don't retry with bad auth.\n  async tryToReauthenticate(serverMessage) {\n    this._logVerbose(`attempting to reauthenticate: ${serverMessage.error}`);\n    if (\n      // No way to fetch another token, kaboom\n      this.authState.state === \"noAuth\" || // We failed on a fresh token. After a small number of retries, we give up\n      // and clear the auth state to avoid infinite retries.\n      this.authState.state === \"waitingForServerConfirmationOfFreshToken\" && this.tokenConfirmationAttempts >= MAX_TOKEN_CONFIRMATION_ATTEMPTS\n    ) {\n      this.logger.error(\n        `Failed to authenticate: \"${serverMessage.error}\", check your server auth config`\n      );\n      if (this.syncState.hasAuth()) {\n        this.syncState.clearAuth();\n      }\n      if (this.authState.state !== \"noAuth\") {\n        this.setAndReportAuthFailed(this.authState.config.onAuthChange);\n      }\n      return;\n    }\n    if (this.authState.state === \"waitingForServerConfirmationOfFreshToken\") {\n      this.tokenConfirmationAttempts++;\n      this._logVerbose(\n        `retrying reauthentication, ${MAX_TOKEN_CONFIRMATION_ATTEMPTS - this.tokenConfirmationAttempts} attempts remaining`\n      );\n    }\n    await this.stopSocket();\n    const token = await this.fetchTokenAndGuardAgainstRace(\n      this.authState.config.fetchToken,\n      {\n        forceRefreshToken: true\n      }\n    );\n    if (token.isFromOutdatedConfig) {\n      return;\n    }\n    if (token.value && this.syncState.isNewAuth(token.value)) {\n      this.authenticate(token.value);\n      this.setAuthState({\n        state: \"waitingForServerConfirmationOfFreshToken\",\n        config: this.authState.config,\n        token: token.value,\n        hadAuth: this.authState.state === \"notRefetching\" || this.authState.state === \"waitingForScheduledRefetch\"\n      });\n    } else {\n      this._logVerbose(\"reauthentication failed, could not fetch a new token\");\n      if (this.syncState.hasAuth()) {\n        this.syncState.clearAuth();\n      }\n      this.setAndReportAuthFailed(this.authState.config.onAuthChange);\n    }\n    this.tryRestartSocket();\n  }\n  // Force refetch the token and schedule another refetch\n  // before the token expires - an active client should never\n  // need to reauthenticate.\n  async refetchToken() {\n    if (this.authState.state === \"noAuth\") {\n      return;\n    }\n    this._logVerbose(\"refetching auth token\");\n    const token = await this.fetchTokenAndGuardAgainstRace(\n      this.authState.config.fetchToken,\n      {\n        forceRefreshToken: true\n      }\n    );\n    if (token.isFromOutdatedConfig) {\n      return;\n    }\n    if (token.value) {\n      if (this.syncState.isNewAuth(token.value)) {\n        this.setAuthState({\n          state: \"waitingForServerConfirmationOfFreshToken\",\n          hadAuth: this.syncState.hasAuth(),\n          token: token.value,\n          config: this.authState.config\n        });\n        this.authenticate(token.value);\n      } else {\n        this.setAuthState({\n          state: \"notRefetching\",\n          config: this.authState.config\n        });\n      }\n    } else {\n      this._logVerbose(\"refetching token failed\");\n      if (this.syncState.hasAuth()) {\n        this.clearAuth();\n      }\n      this.setAndReportAuthFailed(this.authState.config.onAuthChange);\n    }\n    this._logVerbose(\n      \"restarting WS after auth token fetch (if currently stopped)\"\n    );\n    this.tryRestartSocket();\n  }\n  scheduleTokenRefetch(token) {\n    if (this.authState.state === \"noAuth\") {\n      return;\n    }\n    const decodedToken = this.decodeToken(token);\n    if (!decodedToken) {\n      this.logger.error(\n        \"Auth token is not a valid JWT, cannot refetch the token\"\n      );\n      return;\n    }\n    const { iat, exp } = decodedToken;\n    if (!iat || !exp) {\n      this.logger.error(\n        \"Auth token does not have required fields, cannot refetch the token\"\n      );\n      return;\n    }\n    const tokenValiditySeconds = exp - iat;\n    if (tokenValiditySeconds <= 2) {\n      this.logger.error(\n        \"Auth token does not live long enough, cannot refetch the token\"\n      );\n      return;\n    }\n    let delay = Math.min(\n      MAXIMUM_REFRESH_DELAY,\n      (tokenValiditySeconds - this.refreshTokenLeewaySeconds) * 1e3\n    );\n    if (delay <= 0) {\n      this.logger.warn(\n        `Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${tokenValiditySeconds}s`\n      );\n      delay = 0;\n    }\n    const refetchTokenTimeoutId = setTimeout(() => {\n      this._logVerbose(\"running scheduled token refetch\");\n      void this.refetchToken();\n    }, delay);\n    this.setAuthState({\n      state: \"waitingForScheduledRefetch\",\n      refetchTokenTimeoutId,\n      config: this.authState.config\n    });\n    this._logVerbose(\n      `scheduled preemptive auth token refetching in ${delay}ms`\n    );\n  }\n  // Protects against simultaneous calls to `setConfig`\n  // while we're fetching a token\n  async fetchTokenAndGuardAgainstRace(fetchToken, fetchArgs) {\n    const originalConfigVersion = ++this.configVersion;\n    this._logVerbose(\n      `fetching token with config version ${originalConfigVersion}`\n    );\n    const token = await fetchToken(fetchArgs);\n    if (this.configVersion !== originalConfigVersion) {\n      this._logVerbose(\n        `stale config version, expected ${originalConfigVersion}, got ${this.configVersion}`\n      );\n      return { isFromOutdatedConfig: true };\n    }\n    return { isFromOutdatedConfig: false, value: token };\n  }\n  stop() {\n    this.resetAuthState();\n    this.configVersion++;\n    this._logVerbose(`config version bumped to ${this.configVersion}`);\n  }\n  setAndReportAuthFailed(onAuthChange) {\n    onAuthChange(false);\n    this.resetAuthState();\n  }\n  resetAuthState() {\n    this.setAuthState({ state: \"noAuth\" });\n  }\n  setAuthState(newAuth) {\n    const authStateForLog = newAuth.state === \"waitingForServerConfirmationOfFreshToken\" ? {\n      hadAuth: newAuth.hadAuth,\n      state: newAuth.state,\n      token: `...${newAuth.token.slice(-7)}`\n    } : { state: newAuth.state };\n    this._logVerbose(\n      `setting auth state to ${JSON.stringify(authStateForLog)}`\n    );\n    switch (newAuth.state) {\n      case \"waitingForScheduledRefetch\":\n      case \"notRefetching\":\n      case \"noAuth\":\n        this.tokenConfirmationAttempts = 0;\n        break;\n      case \"waitingForServerConfirmationOfFreshToken\":\n      case \"waitingForServerConfirmationOfCachedToken\":\n      case \"initialRefetch\":\n        break;\n      default: {\n        newAuth;\n      }\n    }\n    if (this.authState.state === \"waitingForScheduledRefetch\") {\n      clearTimeout(this.authState.refetchTokenTimeoutId);\n      this.syncState.markAuthCompletion();\n    }\n    this.authState = newAuth;\n  }\n  decodeToken(token) {\n    try {\n      return (0,_vendor_jwt_decode_index_js__WEBPACK_IMPORTED_MODULE_0__.jwtDecode)(token);\n    } catch (e) {\n      this._logVerbose(\n        `Error decoding token: ${e instanceof Error ? e.message : \"Unknown error\"}`\n      );\n      return null;\n    }\n  }\n  _logVerbose(message) {\n    this.logger.logVerbose(`${message} [v${this.configVersion}]`);\n  }\n}\n//# sourceMappingURL=authentication_manager.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9hdXRoZW50aWNhdGlvbl9tYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWE7QUFDYjtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDNkQ7QUFDN0Q7QUFDQTtBQUNPO0FBQ1A7QUFDQSx1Q0FBdUMsaUJBQWlCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvQ0FBb0M7QUFDdEQ7QUFDQSxPQUFPO0FBQ1A7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLGtCQUFrQjtBQUNsQixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELG9CQUFvQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxvQkFBb0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGtFQUFrRTtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsK0JBQStCLHdDQUF3QyxxQkFBcUI7QUFDNUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsdURBQXVELE1BQU07QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsc0JBQXNCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHNCQUFzQixRQUFRLG1CQUFtQjtBQUMzRjtBQUNBLGVBQWU7QUFDZjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxtQkFBbUI7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHdCQUF3QjtBQUMzQyxNQUFNLElBQUk7QUFDVjtBQUNBLCtCQUErQixnQ0FBZ0M7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsc0VBQVM7QUFDdEIsTUFBTTtBQUNOO0FBQ0EsaUNBQWlDLGlEQUFpRDtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLFNBQVMsSUFBSSxtQkFBbUI7QUFDOUQ7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXGJyb3dzZXJcXHN5bmNcXGF1dGhlbnRpY2F0aW9uX21hbmFnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuaW1wb3J0IHsgand0RGVjb2RlIH0gZnJvbSBcIi4uLy4uL3ZlbmRvci9qd3QtZGVjb2RlL2luZGV4LmpzXCI7XG5jb25zdCBNQVhJTVVNX1JFRlJFU0hfREVMQVkgPSAyMCAqIDI0ICogNjAgKiA2MCAqIDFlMztcbmNvbnN0IE1BWF9UT0tFTl9DT05GSVJNQVRJT05fQVRURU1QVFMgPSAyO1xuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0aW9uTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHN5bmNTdGF0ZSwgY2FsbGJhY2tzLCBjb25maWcpIHtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiYXV0aFN0YXRlXCIsIHsgc3RhdGU6IFwibm9BdXRoXCIgfSk7XG4gICAgLy8gVXNlZCB0byBkZXRlY3QgcmFjZXMgaW52b2x2aW5nIGBzZXRDb25maWdgIGNhbGxzXG4gICAgLy8gd2hpbGUgYSB0b2tlbiBpcyBiZWluZyBmZXRjaGVkLlxuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJjb25maWdWZXJzaW9uXCIsIDApO1xuICAgIC8vIFNoYXJlZCBieSB0aGUgQmFzZUNsaWVudCBzbyB0aGF0IHRoZSBhdXRoIG1hbmFnZXIgY2FuIGVhc2lseSBpbnNwZWN0IGl0XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInN5bmNTdGF0ZVwiKTtcbiAgICAvLyBQYXNzZWQgZG93biBieSBCYXNlQ2xpZW50LCBzZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIHNlcnZlclxuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJhdXRoZW50aWNhdGVcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInN0b3BTb2NrZXRcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInRyeVJlc3RhcnRTb2NrZXRcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInBhdXNlU29ja2V0XCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJyZXN1bWVTb2NrZXRcIik7XG4gICAgLy8gUGFzc2VkIGRvd24gYnkgQmFzZUNsaWVudCwgc2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBzZXJ2ZXJcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiY2xlYXJBdXRoXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJsb2dnZXJcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInJlZnJlc2hUb2tlbkxlZXdheVNlY29uZHNcIik7XG4gICAgLy8gTnVtYmVyIG9mIHRpbWVzIHdlIGhhdmUgYXR0ZW1wdGVkIHRvIGNvbmZpcm0gdGhlIGxhdGVzdCB0b2tlbi4gV2UgcmV0cnkgdXBcbiAgICAvLyB0byBgTUFYX1RPS0VOX0NPTkZJUk1BVElPTl9BVFRFTVBUU2AgdGltZXMuXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInRva2VuQ29uZmlybWF0aW9uQXR0ZW1wdHNcIiwgMCk7XG4gICAgdGhpcy5zeW5jU3RhdGUgPSBzeW5jU3RhdGU7XG4gICAgdGhpcy5hdXRoZW50aWNhdGUgPSBjYWxsYmFja3MuYXV0aGVudGljYXRlO1xuICAgIHRoaXMuc3RvcFNvY2tldCA9IGNhbGxiYWNrcy5zdG9wU29ja2V0O1xuICAgIHRoaXMudHJ5UmVzdGFydFNvY2tldCA9IGNhbGxiYWNrcy50cnlSZXN0YXJ0U29ja2V0O1xuICAgIHRoaXMucGF1c2VTb2NrZXQgPSBjYWxsYmFja3MucGF1c2VTb2NrZXQ7XG4gICAgdGhpcy5yZXN1bWVTb2NrZXQgPSBjYWxsYmFja3MucmVzdW1lU29ja2V0O1xuICAgIHRoaXMuY2xlYXJBdXRoID0gY2FsbGJhY2tzLmNsZWFyQXV0aDtcbiAgICB0aGlzLmxvZ2dlciA9IGNvbmZpZy5sb2dnZXI7XG4gICAgdGhpcy5yZWZyZXNoVG9rZW5MZWV3YXlTZWNvbmRzID0gY29uZmlnLnJlZnJlc2hUb2tlbkxlZXdheVNlY29uZHM7XG4gIH1cbiAgYXN5bmMgc2V0Q29uZmlnKGZldGNoVG9rZW4sIG9uQ2hhbmdlKSB7XG4gICAgdGhpcy5yZXNldEF1dGhTdGF0ZSgpO1xuICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXCJwYXVzaW5nIFdTIGZvciBhdXRoIHRva2VuIGZldGNoXCIpO1xuICAgIHRoaXMucGF1c2VTb2NrZXQoKTtcbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHRoaXMuZmV0Y2hUb2tlbkFuZEd1YXJkQWdhaW5zdFJhY2UoZmV0Y2hUb2tlbiwge1xuICAgICAgZm9yY2VSZWZyZXNoVG9rZW46IGZhbHNlXG4gICAgfSk7XG4gICAgaWYgKHRva2VuLmlzRnJvbU91dGRhdGVkQ29uZmlnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0b2tlbi52YWx1ZSkge1xuICAgICAgdGhpcy5zZXRBdXRoU3RhdGUoe1xuICAgICAgICBzdGF0ZTogXCJ3YWl0aW5nRm9yU2VydmVyQ29uZmlybWF0aW9uT2ZDYWNoZWRUb2tlblwiLFxuICAgICAgICBjb25maWc6IHsgZmV0Y2hUb2tlbiwgb25BdXRoQ2hhbmdlOiBvbkNoYW5nZSB9LFxuICAgICAgICBoYXNSZXRyaWVkOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICB0aGlzLmF1dGhlbnRpY2F0ZSh0b2tlbi52YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0QXV0aFN0YXRlKHtcbiAgICAgICAgc3RhdGU6IFwiaW5pdGlhbFJlZmV0Y2hcIixcbiAgICAgICAgY29uZmlnOiB7IGZldGNoVG9rZW4sIG9uQXV0aENoYW5nZTogb25DaGFuZ2UgfVxuICAgICAgfSk7XG4gICAgICBhd2FpdCB0aGlzLnJlZmV0Y2hUb2tlbigpO1xuICAgIH1cbiAgICB0aGlzLl9sb2dWZXJib3NlKFwicmVzdW1pbmcgV1MgYWZ0ZXIgYXV0aCB0b2tlbiBmZXRjaFwiKTtcbiAgICB0aGlzLnJlc3VtZVNvY2tldCgpO1xuICB9XG4gIG9uVHJhbnNpdGlvbihzZXJ2ZXJNZXNzYWdlKSB7XG4gICAgaWYgKCF0aGlzLnN5bmNTdGF0ZS5pc0N1cnJlbnRPck5ld2VyQXV0aFZlcnNpb24oXG4gICAgICBzZXJ2ZXJNZXNzYWdlLmVuZFZlcnNpb24uaWRlbnRpdHlcbiAgICApKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzZXJ2ZXJNZXNzYWdlLmVuZFZlcnNpb24uaWRlbnRpdHkgPD0gc2VydmVyTWVzc2FnZS5zdGFydFZlcnNpb24uaWRlbnRpdHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuYXV0aFN0YXRlLnN0YXRlID09PSBcIndhaXRpbmdGb3JTZXJ2ZXJDb25maXJtYXRpb25PZkNhY2hlZFRva2VuXCIpIHtcbiAgICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXCJzZXJ2ZXIgY29uZmlybWVkIGF1dGggdG9rZW4gaXMgdmFsaWRcIik7XG4gICAgICB2b2lkIHRoaXMucmVmZXRjaFRva2VuKCk7XG4gICAgICB0aGlzLmF1dGhTdGF0ZS5jb25maWcub25BdXRoQ2hhbmdlKHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5hdXRoU3RhdGUuc3RhdGUgPT09IFwid2FpdGluZ0ZvclNlcnZlckNvbmZpcm1hdGlvbk9mRnJlc2hUb2tlblwiKSB7XG4gICAgICB0aGlzLl9sb2dWZXJib3NlKFwic2VydmVyIGNvbmZpcm1lZCBuZXcgYXV0aCB0b2tlbiBpcyB2YWxpZFwiKTtcbiAgICAgIHRoaXMuc2NoZWR1bGVUb2tlblJlZmV0Y2godGhpcy5hdXRoU3RhdGUudG9rZW4pO1xuICAgICAgdGhpcy50b2tlbkNvbmZpcm1hdGlvbkF0dGVtcHRzID0gMDtcbiAgICAgIGlmICghdGhpcy5hdXRoU3RhdGUuaGFkQXV0aCkge1xuICAgICAgICB0aGlzLmF1dGhTdGF0ZS5jb25maWcub25BdXRoQ2hhbmdlKHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBvbkF1dGhFcnJvcihzZXJ2ZXJNZXNzYWdlKSB7XG4gICAgaWYgKHNlcnZlck1lc3NhZ2UuYXV0aFVwZGF0ZUF0dGVtcHRlZCA9PT0gZmFsc2UgJiYgKHRoaXMuYXV0aFN0YXRlLnN0YXRlID09PSBcIndhaXRpbmdGb3JTZXJ2ZXJDb25maXJtYXRpb25PZkZyZXNoVG9rZW5cIiB8fCB0aGlzLmF1dGhTdGF0ZS5zdGF0ZSA9PT0gXCJ3YWl0aW5nRm9yU2VydmVyQ29uZmlybWF0aW9uT2ZDYWNoZWRUb2tlblwiKSkge1xuICAgICAgdGhpcy5fbG9nVmVyYm9zZShcImlnbm9yaW5nIG5vbi1hdXRoIHRva2VuIGV4cGlyZWQgZXJyb3JcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgYmFzZVZlcnNpb24gfSA9IHNlcnZlck1lc3NhZ2U7XG4gICAgaWYgKCF0aGlzLnN5bmNTdGF0ZS5pc0N1cnJlbnRPck5ld2VyQXV0aFZlcnNpb24oYmFzZVZlcnNpb24gKyAxKSkge1xuICAgICAgdGhpcy5fbG9nVmVyYm9zZShcImlnbm9yaW5nIGF1dGggZXJyb3IgZm9yIHByZXZpb3VzIGF1dGggYXR0ZW1wdFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdm9pZCB0aGlzLnRyeVRvUmVhdXRoZW50aWNhdGUoc2VydmVyTWVzc2FnZSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIFRoaXMgaXMgc2ltaWxhciB0byBgcmVmZXRjaFRva2VuYCBkZWZpbmVkIGJlbG93LCBpbiBmYWN0IHdlXG4gIC8vIGRvbid0IHJlcHJlc2VudCB0aGVtIGFzIGRpZmZlcmVudCBzdGF0ZXMsIGJ1dCBpdCBpcyBkaWZmZXJlbnRcbiAgLy8gaW4gdGhhdCB3ZSBwYXVzZSB0aGUgV2ViU29ja2V0IHNvIHRoYXQgbXV0YXRpb25zXG4gIC8vIGRvbid0IHJldHJ5IHdpdGggYmFkIGF1dGguXG4gIGFzeW5jIHRyeVRvUmVhdXRoZW50aWNhdGUoc2VydmVyTWVzc2FnZSkge1xuICAgIHRoaXMuX2xvZ1ZlcmJvc2UoYGF0dGVtcHRpbmcgdG8gcmVhdXRoZW50aWNhdGU6ICR7c2VydmVyTWVzc2FnZS5lcnJvcn1gKTtcbiAgICBpZiAoXG4gICAgICAvLyBObyB3YXkgdG8gZmV0Y2ggYW5vdGhlciB0b2tlbiwga2Fib29tXG4gICAgICB0aGlzLmF1dGhTdGF0ZS5zdGF0ZSA9PT0gXCJub0F1dGhcIiB8fCAvLyBXZSBmYWlsZWQgb24gYSBmcmVzaCB0b2tlbi4gQWZ0ZXIgYSBzbWFsbCBudW1iZXIgb2YgcmV0cmllcywgd2UgZ2l2ZSB1cFxuICAgICAgLy8gYW5kIGNsZWFyIHRoZSBhdXRoIHN0YXRlIHRvIGF2b2lkIGluZmluaXRlIHJldHJpZXMuXG4gICAgICB0aGlzLmF1dGhTdGF0ZS5zdGF0ZSA9PT0gXCJ3YWl0aW5nRm9yU2VydmVyQ29uZmlybWF0aW9uT2ZGcmVzaFRva2VuXCIgJiYgdGhpcy50b2tlbkNvbmZpcm1hdGlvbkF0dGVtcHRzID49IE1BWF9UT0tFTl9DT05GSVJNQVRJT05fQVRURU1QVFNcbiAgICApIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICBgRmFpbGVkIHRvIGF1dGhlbnRpY2F0ZTogXCIke3NlcnZlck1lc3NhZ2UuZXJyb3J9XCIsIGNoZWNrIHlvdXIgc2VydmVyIGF1dGggY29uZmlnYFxuICAgICAgKTtcbiAgICAgIGlmICh0aGlzLnN5bmNTdGF0ZS5oYXNBdXRoKCkpIHtcbiAgICAgICAgdGhpcy5zeW5jU3RhdGUuY2xlYXJBdXRoKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdXRoU3RhdGUuc3RhdGUgIT09IFwibm9BdXRoXCIpIHtcbiAgICAgICAgdGhpcy5zZXRBbmRSZXBvcnRBdXRoRmFpbGVkKHRoaXMuYXV0aFN0YXRlLmNvbmZpZy5vbkF1dGhDaGFuZ2UpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5hdXRoU3RhdGUuc3RhdGUgPT09IFwid2FpdGluZ0ZvclNlcnZlckNvbmZpcm1hdGlvbk9mRnJlc2hUb2tlblwiKSB7XG4gICAgICB0aGlzLnRva2VuQ29uZmlybWF0aW9uQXR0ZW1wdHMrKztcbiAgICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXG4gICAgICAgIGByZXRyeWluZyByZWF1dGhlbnRpY2F0aW9uLCAke01BWF9UT0tFTl9DT05GSVJNQVRJT05fQVRURU1QVFMgLSB0aGlzLnRva2VuQ29uZmlybWF0aW9uQXR0ZW1wdHN9IGF0dGVtcHRzIHJlbWFpbmluZ2BcbiAgICAgICk7XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuc3RvcFNvY2tldCgpO1xuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5mZXRjaFRva2VuQW5kR3VhcmRBZ2FpbnN0UmFjZShcbiAgICAgIHRoaXMuYXV0aFN0YXRlLmNvbmZpZy5mZXRjaFRva2VuLFxuICAgICAge1xuICAgICAgICBmb3JjZVJlZnJlc2hUb2tlbjogdHJ1ZVxuICAgICAgfVxuICAgICk7XG4gICAgaWYgKHRva2VuLmlzRnJvbU91dGRhdGVkQ29uZmlnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0b2tlbi52YWx1ZSAmJiB0aGlzLnN5bmNTdGF0ZS5pc05ld0F1dGgodG9rZW4udmFsdWUpKSB7XG4gICAgICB0aGlzLmF1dGhlbnRpY2F0ZSh0b2tlbi52YWx1ZSk7XG4gICAgICB0aGlzLnNldEF1dGhTdGF0ZSh7XG4gICAgICAgIHN0YXRlOiBcIndhaXRpbmdGb3JTZXJ2ZXJDb25maXJtYXRpb25PZkZyZXNoVG9rZW5cIixcbiAgICAgICAgY29uZmlnOiB0aGlzLmF1dGhTdGF0ZS5jb25maWcsXG4gICAgICAgIHRva2VuOiB0b2tlbi52YWx1ZSxcbiAgICAgICAgaGFkQXV0aDogdGhpcy5hdXRoU3RhdGUuc3RhdGUgPT09IFwibm90UmVmZXRjaGluZ1wiIHx8IHRoaXMuYXV0aFN0YXRlLnN0YXRlID09PSBcIndhaXRpbmdGb3JTY2hlZHVsZWRSZWZldGNoXCJcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sb2dWZXJib3NlKFwicmVhdXRoZW50aWNhdGlvbiBmYWlsZWQsIGNvdWxkIG5vdCBmZXRjaCBhIG5ldyB0b2tlblwiKTtcbiAgICAgIGlmICh0aGlzLnN5bmNTdGF0ZS5oYXNBdXRoKCkpIHtcbiAgICAgICAgdGhpcy5zeW5jU3RhdGUuY2xlYXJBdXRoKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnNldEFuZFJlcG9ydEF1dGhGYWlsZWQodGhpcy5hdXRoU3RhdGUuY29uZmlnLm9uQXV0aENoYW5nZSk7XG4gICAgfVxuICAgIHRoaXMudHJ5UmVzdGFydFNvY2tldCgpO1xuICB9XG4gIC8vIEZvcmNlIHJlZmV0Y2ggdGhlIHRva2VuIGFuZCBzY2hlZHVsZSBhbm90aGVyIHJlZmV0Y2hcbiAgLy8gYmVmb3JlIHRoZSB0b2tlbiBleHBpcmVzIC0gYW4gYWN0aXZlIGNsaWVudCBzaG91bGQgbmV2ZXJcbiAgLy8gbmVlZCB0byByZWF1dGhlbnRpY2F0ZS5cbiAgYXN5bmMgcmVmZXRjaFRva2VuKCkge1xuICAgIGlmICh0aGlzLmF1dGhTdGF0ZS5zdGF0ZSA9PT0gXCJub0F1dGhcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9sb2dWZXJib3NlKFwicmVmZXRjaGluZyBhdXRoIHRva2VuXCIpO1xuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5mZXRjaFRva2VuQW5kR3VhcmRBZ2FpbnN0UmFjZShcbiAgICAgIHRoaXMuYXV0aFN0YXRlLmNvbmZpZy5mZXRjaFRva2VuLFxuICAgICAge1xuICAgICAgICBmb3JjZVJlZnJlc2hUb2tlbjogdHJ1ZVxuICAgICAgfVxuICAgICk7XG4gICAgaWYgKHRva2VuLmlzRnJvbU91dGRhdGVkQ29uZmlnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0b2tlbi52YWx1ZSkge1xuICAgICAgaWYgKHRoaXMuc3luY1N0YXRlLmlzTmV3QXV0aCh0b2tlbi52YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5zZXRBdXRoU3RhdGUoe1xuICAgICAgICAgIHN0YXRlOiBcIndhaXRpbmdGb3JTZXJ2ZXJDb25maXJtYXRpb25PZkZyZXNoVG9rZW5cIixcbiAgICAgICAgICBoYWRBdXRoOiB0aGlzLnN5bmNTdGF0ZS5oYXNBdXRoKCksXG4gICAgICAgICAgdG9rZW46IHRva2VuLnZhbHVlLFxuICAgICAgICAgIGNvbmZpZzogdGhpcy5hdXRoU3RhdGUuY29uZmlnXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmF1dGhlbnRpY2F0ZSh0b2tlbi52YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldEF1dGhTdGF0ZSh7XG4gICAgICAgICAgc3RhdGU6IFwibm90UmVmZXRjaGluZ1wiLFxuICAgICAgICAgIGNvbmZpZzogdGhpcy5hdXRoU3RhdGUuY29uZmlnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sb2dWZXJib3NlKFwicmVmZXRjaGluZyB0b2tlbiBmYWlsZWRcIik7XG4gICAgICBpZiAodGhpcy5zeW5jU3RhdGUuaGFzQXV0aCgpKSB7XG4gICAgICAgIHRoaXMuY2xlYXJBdXRoKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnNldEFuZFJlcG9ydEF1dGhGYWlsZWQodGhpcy5hdXRoU3RhdGUuY29uZmlnLm9uQXV0aENoYW5nZSk7XG4gICAgfVxuICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXG4gICAgICBcInJlc3RhcnRpbmcgV1MgYWZ0ZXIgYXV0aCB0b2tlbiBmZXRjaCAoaWYgY3VycmVudGx5IHN0b3BwZWQpXCJcbiAgICApO1xuICAgIHRoaXMudHJ5UmVzdGFydFNvY2tldCgpO1xuICB9XG4gIHNjaGVkdWxlVG9rZW5SZWZldGNoKHRva2VuKSB7XG4gICAgaWYgKHRoaXMuYXV0aFN0YXRlLnN0YXRlID09PSBcIm5vQXV0aFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRlY29kZWRUb2tlbiA9IHRoaXMuZGVjb2RlVG9rZW4odG9rZW4pO1xuICAgIGlmICghZGVjb2RlZFRva2VuKSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihcbiAgICAgICAgXCJBdXRoIHRva2VuIGlzIG5vdCBhIHZhbGlkIEpXVCwgY2Fubm90IHJlZmV0Y2ggdGhlIHRva2VuXCJcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgaWF0LCBleHAgfSA9IGRlY29kZWRUb2tlbjtcbiAgICBpZiAoIWlhdCB8fCAhZXhwKSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihcbiAgICAgICAgXCJBdXRoIHRva2VuIGRvZXMgbm90IGhhdmUgcmVxdWlyZWQgZmllbGRzLCBjYW5ub3QgcmVmZXRjaCB0aGUgdG9rZW5cIlxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdG9rZW5WYWxpZGl0eVNlY29uZHMgPSBleHAgLSBpYXQ7XG4gICAgaWYgKHRva2VuVmFsaWRpdHlTZWNvbmRzIDw9IDIpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICBcIkF1dGggdG9rZW4gZG9lcyBub3QgbGl2ZSBsb25nIGVub3VnaCwgY2Fubm90IHJlZmV0Y2ggdGhlIHRva2VuXCJcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBkZWxheSA9IE1hdGgubWluKFxuICAgICAgTUFYSU1VTV9SRUZSRVNIX0RFTEFZLFxuICAgICAgKHRva2VuVmFsaWRpdHlTZWNvbmRzIC0gdGhpcy5yZWZyZXNoVG9rZW5MZWV3YXlTZWNvbmRzKSAqIDFlM1xuICAgICk7XG4gICAgaWYgKGRlbGF5IDw9IDApIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oXG4gICAgICAgIGBSZWZldGNoaW5nIGF1dGggdG9rZW4gaW1tZWRpYXRlbHksIGNvbmZpZ3VyZWQgbGVld2F5ICR7dGhpcy5yZWZyZXNoVG9rZW5MZWV3YXlTZWNvbmRzfXMgaXMgbGFyZ2VyIHRoYW4gdGhlIHRva2VuJ3MgbGlmZXRpbWUgJHt0b2tlblZhbGlkaXR5U2Vjb25kc31zYFxuICAgICAgKTtcbiAgICAgIGRlbGF5ID0gMDtcbiAgICB9XG4gICAgY29uc3QgcmVmZXRjaFRva2VuVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLl9sb2dWZXJib3NlKFwicnVubmluZyBzY2hlZHVsZWQgdG9rZW4gcmVmZXRjaFwiKTtcbiAgICAgIHZvaWQgdGhpcy5yZWZldGNoVG9rZW4oKTtcbiAgICB9LCBkZWxheSk7XG4gICAgdGhpcy5zZXRBdXRoU3RhdGUoe1xuICAgICAgc3RhdGU6IFwid2FpdGluZ0ZvclNjaGVkdWxlZFJlZmV0Y2hcIixcbiAgICAgIHJlZmV0Y2hUb2tlblRpbWVvdXRJZCxcbiAgICAgIGNvbmZpZzogdGhpcy5hdXRoU3RhdGUuY29uZmlnXG4gICAgfSk7XG4gICAgdGhpcy5fbG9nVmVyYm9zZShcbiAgICAgIGBzY2hlZHVsZWQgcHJlZW1wdGl2ZSBhdXRoIHRva2VuIHJlZmV0Y2hpbmcgaW4gJHtkZWxheX1tc2BcbiAgICApO1xuICB9XG4gIC8vIFByb3RlY3RzIGFnYWluc3Qgc2ltdWx0YW5lb3VzIGNhbGxzIHRvIGBzZXRDb25maWdgXG4gIC8vIHdoaWxlIHdlJ3JlIGZldGNoaW5nIGEgdG9rZW5cbiAgYXN5bmMgZmV0Y2hUb2tlbkFuZEd1YXJkQWdhaW5zdFJhY2UoZmV0Y2hUb2tlbiwgZmV0Y2hBcmdzKSB7XG4gICAgY29uc3Qgb3JpZ2luYWxDb25maWdWZXJzaW9uID0gKyt0aGlzLmNvbmZpZ1ZlcnNpb247XG4gICAgdGhpcy5fbG9nVmVyYm9zZShcbiAgICAgIGBmZXRjaGluZyB0b2tlbiB3aXRoIGNvbmZpZyB2ZXJzaW9uICR7b3JpZ2luYWxDb25maWdWZXJzaW9ufWBcbiAgICApO1xuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgZmV0Y2hUb2tlbihmZXRjaEFyZ3MpO1xuICAgIGlmICh0aGlzLmNvbmZpZ1ZlcnNpb24gIT09IG9yaWdpbmFsQ29uZmlnVmVyc2lvbikge1xuICAgICAgdGhpcy5fbG9nVmVyYm9zZShcbiAgICAgICAgYHN0YWxlIGNvbmZpZyB2ZXJzaW9uLCBleHBlY3RlZCAke29yaWdpbmFsQ29uZmlnVmVyc2lvbn0sIGdvdCAke3RoaXMuY29uZmlnVmVyc2lvbn1gXG4gICAgICApO1xuICAgICAgcmV0dXJuIHsgaXNGcm9tT3V0ZGF0ZWRDb25maWc6IHRydWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgaXNGcm9tT3V0ZGF0ZWRDb25maWc6IGZhbHNlLCB2YWx1ZTogdG9rZW4gfTtcbiAgfVxuICBzdG9wKCkge1xuICAgIHRoaXMucmVzZXRBdXRoU3RhdGUoKTtcbiAgICB0aGlzLmNvbmZpZ1ZlcnNpb24rKztcbiAgICB0aGlzLl9sb2dWZXJib3NlKGBjb25maWcgdmVyc2lvbiBidW1wZWQgdG8gJHt0aGlzLmNvbmZpZ1ZlcnNpb259YCk7XG4gIH1cbiAgc2V0QW5kUmVwb3J0QXV0aEZhaWxlZChvbkF1dGhDaGFuZ2UpIHtcbiAgICBvbkF1dGhDaGFuZ2UoZmFsc2UpO1xuICAgIHRoaXMucmVzZXRBdXRoU3RhdGUoKTtcbiAgfVxuICByZXNldEF1dGhTdGF0ZSgpIHtcbiAgICB0aGlzLnNldEF1dGhTdGF0ZSh7IHN0YXRlOiBcIm5vQXV0aFwiIH0pO1xuICB9XG4gIHNldEF1dGhTdGF0ZShuZXdBdXRoKSB7XG4gICAgY29uc3QgYXV0aFN0YXRlRm9yTG9nID0gbmV3QXV0aC5zdGF0ZSA9PT0gXCJ3YWl0aW5nRm9yU2VydmVyQ29uZmlybWF0aW9uT2ZGcmVzaFRva2VuXCIgPyB7XG4gICAgICBoYWRBdXRoOiBuZXdBdXRoLmhhZEF1dGgsXG4gICAgICBzdGF0ZTogbmV3QXV0aC5zdGF0ZSxcbiAgICAgIHRva2VuOiBgLi4uJHtuZXdBdXRoLnRva2VuLnNsaWNlKC03KX1gXG4gICAgfSA6IHsgc3RhdGU6IG5ld0F1dGguc3RhdGUgfTtcbiAgICB0aGlzLl9sb2dWZXJib3NlKFxuICAgICAgYHNldHRpbmcgYXV0aCBzdGF0ZSB0byAke0pTT04uc3RyaW5naWZ5KGF1dGhTdGF0ZUZvckxvZyl9YFxuICAgICk7XG4gICAgc3dpdGNoIChuZXdBdXRoLnN0YXRlKSB7XG4gICAgICBjYXNlIFwid2FpdGluZ0ZvclNjaGVkdWxlZFJlZmV0Y2hcIjpcbiAgICAgIGNhc2UgXCJub3RSZWZldGNoaW5nXCI6XG4gICAgICBjYXNlIFwibm9BdXRoXCI6XG4gICAgICAgIHRoaXMudG9rZW5Db25maXJtYXRpb25BdHRlbXB0cyA9IDA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIndhaXRpbmdGb3JTZXJ2ZXJDb25maXJtYXRpb25PZkZyZXNoVG9rZW5cIjpcbiAgICAgIGNhc2UgXCJ3YWl0aW5nRm9yU2VydmVyQ29uZmlybWF0aW9uT2ZDYWNoZWRUb2tlblwiOlxuICAgICAgY2FzZSBcImluaXRpYWxSZWZldGNoXCI6XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBuZXdBdXRoO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5hdXRoU3RhdGUuc3RhdGUgPT09IFwid2FpdGluZ0ZvclNjaGVkdWxlZFJlZmV0Y2hcIikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuYXV0aFN0YXRlLnJlZmV0Y2hUb2tlblRpbWVvdXRJZCk7XG4gICAgICB0aGlzLnN5bmNTdGF0ZS5tYXJrQXV0aENvbXBsZXRpb24oKTtcbiAgICB9XG4gICAgdGhpcy5hdXRoU3RhdGUgPSBuZXdBdXRoO1xuICB9XG4gIGRlY29kZVRva2VuKHRva2VuKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBqd3REZWNvZGUodG9rZW4pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXG4gICAgICAgIGBFcnJvciBkZWNvZGluZyB0b2tlbjogJHtlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIn1gXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIF9sb2dWZXJib3NlKG1lc3NhZ2UpIHtcbiAgICB0aGlzLmxvZ2dlci5sb2dWZXJib3NlKGAke21lc3NhZ2V9IFt2JHt0aGlzLmNvbmZpZ1ZlcnNpb259XWApO1xuICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdXRoZW50aWNhdGlvbl9tYW5hZ2VyLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/authentication_manager.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/client.js":
/*!*************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/client.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseConvexClient: () => (/* binding */ BaseConvexClient)\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _logging_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logging.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/logging.js\");\n/* harmony import */ var _local_state_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./local_state.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/local_state.js\");\n/* harmony import */ var _request_manager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./request_manager.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/request_manager.js\");\n/* harmony import */ var _optimistic_updates_impl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./optimistic_updates_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/optimistic_updates_impl.js\");\n/* harmony import */ var _remote_query_set_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./remote_query_set.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/remote_query_set.js\");\n/* harmony import */ var _udf_path_utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./udf_path_utils.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js\");\n/* harmony import */ var _web_socket_manager_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./web_socket_manager.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/web_socket_manager.js\");\n/* harmony import */ var _session_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./session.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/session.js\");\n/* harmony import */ var _authentication_manager_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./authentication_manager.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/authentication_manager.js\");\n/* harmony import */ var _metrics_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./metrics.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/metrics.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _values_errors_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../values/errors.js */ \"(ssr)/./node_modules/convex/dist/esm/values/errors.js\");\n/* harmony import */ var _vendor_jwt_decode_index_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../vendor/jwt-decode/index.js */ \"(ssr)/./node_modules/convex/dist/esm/vendor/jwt-decode/index.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass BaseConvexClient {\n  /**\n   * @param address - The url of your Convex deployment, often provided\n   * by an environment variable. E.g. `https://small-mouse-123.convex.cloud`.\n   * @param onTransition - A callback receiving an array of query tokens\n   * corresponding to query results that have changed -- additional handlers\n   * can be added via `addOnTransitionHandler`.\n   * @param options - See {@link BaseConvexClientOptions} for a full description.\n   */\n  constructor(address, onTransition, options) {\n    __publicField(this, \"address\");\n    __publicField(this, \"state\");\n    __publicField(this, \"requestManager\");\n    __publicField(this, \"webSocketManager\");\n    __publicField(this, \"authenticationManager\");\n    __publicField(this, \"remoteQuerySet\");\n    __publicField(this, \"optimisticQueryResults\");\n    __publicField(this, \"_transitionHandlerCounter\", 0);\n    __publicField(this, \"_nextRequestId\");\n    __publicField(this, \"_onTransitionFns\", /* @__PURE__ */ new Map());\n    __publicField(this, \"_sessionId\");\n    __publicField(this, \"firstMessageReceived\", false);\n    __publicField(this, \"debug\");\n    __publicField(this, \"logger\");\n    __publicField(this, \"maxObservedTimestamp\");\n    __publicField(this, \"connectionStateSubscribers\", /* @__PURE__ */ new Map());\n    __publicField(this, \"nextConnectionStateSubscriberId\", 0);\n    __publicField(this, \"_lastPublishedConnectionState\");\n    /**\n     * Call this whenever the connection state may have changed in a way that could\n     * require publishing it. Schedules a possibly update.\n     */\n    __publicField(this, \"markConnectionStateDirty\", () => {\n      void Promise.resolve().then(() => {\n        const curConnectionState = this.connectionState();\n        if (JSON.stringify(curConnectionState) !== JSON.stringify(this._lastPublishedConnectionState)) {\n          this._lastPublishedConnectionState = curConnectionState;\n          for (const cb of this.connectionStateSubscribers.values()) {\n            cb(curConnectionState);\n          }\n        }\n      });\n    });\n    // Instance property so that `mark()` doesn't need to be called as a method.\n    __publicField(this, \"mark\", (name) => {\n      if (this.debug) {\n        (0,_metrics_js__WEBPACK_IMPORTED_MODULE_11__.mark)(name, this.sessionId);\n      }\n    });\n    if (typeof address === \"object\") {\n      throw new Error(\n        \"Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.\"\n      );\n    }\n    if (options?.skipConvexDeploymentUrlCheck !== true) {\n      (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.validateDeploymentUrl)(address);\n    }\n    options = { ...options };\n    const authRefreshTokenLeewaySeconds = options.authRefreshTokenLeewaySeconds ?? 2;\n    let webSocketConstructor = options.webSocketConstructor;\n    if (!webSocketConstructor && typeof WebSocket === \"undefined\") {\n      throw new Error(\n        \"No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient\"\n      );\n    }\n    webSocketConstructor = webSocketConstructor || WebSocket;\n    this.debug = options.reportDebugInfoToConvex ?? false;\n    this.address = address;\n    this.logger = options.logger === false ? (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.instantiateNoopLogger)({ verbose: options.verbose ?? false }) : options.logger !== true && options.logger ? options.logger : (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.instantiateDefaultLogger)({ verbose: options.verbose ?? false });\n    const i = address.search(\"://\");\n    if (i === -1) {\n      throw new Error(\"Provided address was not an absolute URL.\");\n    }\n    const origin = address.substring(i + 3);\n    const protocol = address.substring(0, i);\n    let wsProtocol;\n    if (protocol === \"http\") {\n      wsProtocol = \"ws\";\n    } else if (protocol === \"https\") {\n      wsProtocol = \"wss\";\n    } else {\n      throw new Error(`Unknown parent protocol ${protocol}`);\n    }\n    const wsUri = `${wsProtocol}://${origin}/api/${_index_js__WEBPACK_IMPORTED_MODULE_0__.version}/sync`;\n    this.state = new _local_state_js__WEBPACK_IMPORTED_MODULE_3__.LocalSyncState();\n    this.remoteQuerySet = new _remote_query_set_js__WEBPACK_IMPORTED_MODULE_6__.RemoteQuerySet(\n      (queryId) => this.state.queryPath(queryId),\n      this.logger\n    );\n    this.requestManager = new _request_manager_js__WEBPACK_IMPORTED_MODULE_4__.RequestManager(\n      this.logger,\n      this.markConnectionStateDirty\n    );\n    const pauseSocket = () => {\n      this.webSocketManager.pause();\n      this.state.pause();\n    };\n    this.authenticationManager = new _authentication_manager_js__WEBPACK_IMPORTED_MODULE_10__.AuthenticationManager(\n      this.state,\n      {\n        authenticate: (token) => {\n          const message = this.state.setAuth(token);\n          this.webSocketManager.sendMessage(message);\n          return message.baseVersion;\n        },\n        stopSocket: () => this.webSocketManager.stop(),\n        tryRestartSocket: () => this.webSocketManager.tryRestart(),\n        pauseSocket,\n        resumeSocket: () => this.webSocketManager.resume(),\n        clearAuth: () => {\n          this.clearAuth();\n        }\n      },\n      {\n        logger: this.logger,\n        refreshTokenLeewaySeconds: authRefreshTokenLeewaySeconds\n      }\n    );\n    this.optimisticQueryResults = new _optimistic_updates_impl_js__WEBPACK_IMPORTED_MODULE_5__.OptimisticQueryResults();\n    this.addOnTransitionHandler((transition) => {\n      onTransition(transition.queries.map((q) => q.token));\n    });\n    this._nextRequestId = 0;\n    this._sessionId = (0,_session_js__WEBPACK_IMPORTED_MODULE_9__.newSessionId)();\n    const { unsavedChangesWarning } = options;\n    if (typeof window === \"undefined\" || typeof window.addEventListener === \"undefined\") {\n      if (unsavedChangesWarning === true) {\n        throw new Error(\n          \"unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.\"\n        );\n      }\n    } else if (unsavedChangesWarning !== false) {\n      window.addEventListener(\"beforeunload\", (e) => {\n        if (this.requestManager.hasIncompleteRequests()) {\n          e.preventDefault();\n          const confirmationMessage = \"Are you sure you want to leave? Your changes may not be saved.\";\n          (e || window.event).returnValue = confirmationMessage;\n          return confirmationMessage;\n        }\n      });\n    }\n    this.webSocketManager = new _web_socket_manager_js__WEBPACK_IMPORTED_MODULE_8__.WebSocketManager(\n      wsUri,\n      {\n        onOpen: (reconnectMetadata) => {\n          this.mark(\"convexWebSocketOpen\");\n          this.webSocketManager.sendMessage({\n            ...reconnectMetadata,\n            type: \"Connect\",\n            sessionId: this._sessionId,\n            maxObservedTimestamp: this.maxObservedTimestamp\n          });\n          const oldRemoteQueryResults = new Set(\n            this.remoteQuerySet.remoteQueryResults().keys()\n          );\n          this.remoteQuerySet = new _remote_query_set_js__WEBPACK_IMPORTED_MODULE_6__.RemoteQuerySet(\n            (queryId) => this.state.queryPath(queryId),\n            this.logger\n          );\n          const [querySetModification, authModification] = this.state.restart(\n            oldRemoteQueryResults\n          );\n          if (authModification) {\n            this.webSocketManager.sendMessage(authModification);\n          }\n          this.webSocketManager.sendMessage(querySetModification);\n          for (const message of this.requestManager.restart()) {\n            this.webSocketManager.sendMessage(message);\n          }\n        },\n        onResume: () => {\n          const [querySetModification, authModification] = this.state.resume();\n          if (authModification) {\n            this.webSocketManager.sendMessage(authModification);\n          }\n          if (querySetModification) {\n            this.webSocketManager.sendMessage(querySetModification);\n          }\n          for (const message of this.requestManager.resume()) {\n            this.webSocketManager.sendMessage(message);\n          }\n        },\n        onMessage: (serverMessage) => {\n          if (!this.firstMessageReceived) {\n            this.firstMessageReceived = true;\n            this.mark(\"convexFirstMessageReceived\");\n            this.reportMarks();\n          }\n          switch (serverMessage.type) {\n            case \"Transition\": {\n              this.observedTimestamp(serverMessage.endVersion.ts);\n              this.authenticationManager.onTransition(serverMessage);\n              this.remoteQuerySet.transition(serverMessage);\n              this.state.transition(serverMessage);\n              const completedRequests = this.requestManager.removeCompleted(\n                this.remoteQuerySet.timestamp()\n              );\n              this.notifyOnQueryResultChanges(completedRequests);\n              break;\n            }\n            case \"MutationResponse\": {\n              if (serverMessage.success) {\n                this.observedTimestamp(serverMessage.ts);\n              }\n              const completedMutationInfo = this.requestManager.onResponse(serverMessage);\n              if (completedMutationInfo !== null) {\n                this.notifyOnQueryResultChanges(\n                  /* @__PURE__ */ new Map([\n                    [\n                      completedMutationInfo.requestId,\n                      completedMutationInfo.result\n                    ]\n                  ])\n                );\n              }\n              break;\n            }\n            case \"ActionResponse\": {\n              this.requestManager.onResponse(serverMessage);\n              break;\n            }\n            case \"AuthError\": {\n              this.authenticationManager.onAuthError(serverMessage);\n              break;\n            }\n            case \"FatalError\": {\n              const error = (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.logFatalError)(this.logger, serverMessage.error);\n              void this.webSocketManager.terminate();\n              throw error;\n            }\n            default: {\n              serverMessage;\n            }\n          }\n          return {\n            hasSyncedPastLastReconnect: this.hasSyncedPastLastReconnect()\n          };\n        },\n        onServerDisconnectError: options.onServerDisconnectError\n      },\n      webSocketConstructor,\n      this.logger,\n      this.markConnectionStateDirty,\n      this.debug\n    );\n    this.mark(\"convexClientConstructed\");\n    if (options.expectAuth) {\n      pauseSocket();\n    }\n  }\n  /**\n   * Return true if there is outstanding work from prior to the time of the most recent restart.\n   * This indicates that the client has not proven itself to have gotten past the issue that\n   * potentially led to the restart. Use this to influence when to reset backoff after a failure.\n   */\n  hasSyncedPastLastReconnect() {\n    const hasSyncedPastLastReconnect = this.requestManager.hasSyncedPastLastReconnect() || this.state.hasSyncedPastLastReconnect();\n    return hasSyncedPastLastReconnect;\n  }\n  observedTimestamp(observedTs) {\n    if (this.maxObservedTimestamp === void 0 || this.maxObservedTimestamp.lessThanOrEqual(observedTs)) {\n      this.maxObservedTimestamp = observedTs;\n    }\n  }\n  getMaxObservedTimestamp() {\n    return this.maxObservedTimestamp;\n  }\n  /**\n   * Compute the current query results based on the remoteQuerySet and the\n   * current optimistic updates and call `onTransition` for all the changed\n   * queries.\n   *\n   * @param completedMutations - A set of mutation IDs whose optimistic updates\n   * are no longer needed.\n   */\n  notifyOnQueryResultChanges(completedRequests) {\n    const remoteQueryResults = this.remoteQuerySet.remoteQueryResults();\n    const queryTokenToValue = /* @__PURE__ */ new Map();\n    for (const [queryId, result] of remoteQueryResults) {\n      const queryToken = this.state.queryToken(queryId);\n      if (queryToken !== null) {\n        const query = {\n          result,\n          udfPath: this.state.queryPath(queryId),\n          args: this.state.queryArgs(queryId)\n        };\n        queryTokenToValue.set(queryToken, query);\n      }\n    }\n    const changedQueryTokens = this.optimisticQueryResults.ingestQueryResultsFromServer(\n      queryTokenToValue,\n      new Set(completedRequests.keys())\n    );\n    this.handleTransition({\n      queries: changedQueryTokens.map((token) => {\n        const optimisticResult = this.optimisticQueryResults.rawQueryResult(token);\n        return {\n          token,\n          modification: {\n            kind: \"Updated\",\n            result: optimisticResult\n          }\n        };\n      }),\n      reflectedMutations: Array.from(completedRequests).map(\n        ([requestId, result]) => ({\n          requestId,\n          result\n        })\n      ),\n      timestamp: this.remoteQuerySet.timestamp()\n    });\n  }\n  handleTransition(transition) {\n    for (const fn of this._onTransitionFns.values()) {\n      fn(transition);\n    }\n  }\n  /**\n   * Add a handler that will be called on a transition.\n   *\n   * Any external side effects (e.g. setting React state) should be handled here.\n   *\n   * @param fn\n   *\n   * @returns\n   */\n  addOnTransitionHandler(fn) {\n    const id = this._transitionHandlerCounter++;\n    this._onTransitionFns.set(id, fn);\n    return () => this._onTransitionFns.delete(id);\n  }\n  /**\n   * Get the current JWT auth token and decoded claims.\n   */\n  getCurrentAuthClaims() {\n    const authToken = this.state.getAuth();\n    let decoded = {};\n    if (authToken && authToken.tokenType === \"User\") {\n      try {\n        decoded = authToken ? (0,_vendor_jwt_decode_index_js__WEBPACK_IMPORTED_MODULE_14__.jwtDecode)(authToken.value) : {};\n      } catch {\n        decoded = {};\n      }\n    } else {\n      return void 0;\n    }\n    return { token: authToken.value, decoded };\n  }\n  /**\n   * Set the authentication token to be used for subsequent queries and mutations.\n   * `fetchToken` will be called automatically again if a token expires.\n   * `fetchToken` should return `null` if the token cannot be retrieved, for example\n   * when the user's rights were permanently revoked.\n   * @param fetchToken - an async function returning the JWT-encoded OpenID Connect Identity Token\n   * @param onChange - a callback that will be called when the authentication status changes\n   */\n  setAuth(fetchToken, onChange) {\n    void this.authenticationManager.setConfig(fetchToken, onChange);\n  }\n  hasAuth() {\n    return this.state.hasAuth();\n  }\n  /** @internal */\n  setAdminAuth(value, fakeUserIdentity) {\n    const message = this.state.setAdminAuth(value, fakeUserIdentity);\n    this.webSocketManager.sendMessage(message);\n  }\n  clearAuth() {\n    const message = this.state.clearAuth();\n    this.webSocketManager.sendMessage(message);\n  }\n  /**\n     * Subscribe to a query function.\n     *\n     * Whenever this query's result changes, the `onTransition` callback\n     * passed into the constructor will be called.\n     *\n     * @param name - The name of the query.\n     * @param args - An arguments object for the query. If this is omitted, the\n     * arguments will be `{}`.\n     * @param options - A {@link SubscribeOptions} options object for this query.\n  \n     * @returns An object containing a {@link QueryToken} corresponding to this\n     * query and an `unsubscribe` callback.\n     */\n  subscribe(name, args, options) {\n    const argsObject = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.parseArgs)(args);\n    const { modification, queryToken, unsubscribe } = this.state.subscribe(\n      name,\n      argsObject,\n      options?.journal,\n      options?.componentPath\n    );\n    if (modification !== null) {\n      this.webSocketManager.sendMessage(modification);\n    }\n    return {\n      queryToken,\n      unsubscribe: () => {\n        const modification2 = unsubscribe();\n        if (modification2) {\n          this.webSocketManager.sendMessage(modification2);\n        }\n      }\n    };\n  }\n  /**\n   * A query result based only on the current, local state.\n   *\n   * The only way this will return a value is if we're already subscribed to the\n   * query or its value has been set optimistically.\n   */\n  localQueryResult(udfPath, args) {\n    const argsObject = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.parseArgs)(args);\n    const queryToken = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_7__.serializePathAndArgs)(udfPath, argsObject);\n    return this.optimisticQueryResults.queryResult(queryToken);\n  }\n  /**\n   * Get query result by query token based on current, local state\n   *\n   * The only way this will return a value is if we're already subscribed to the\n   * query or its value has been set optimistically.\n   *\n   * @internal\n   */\n  localQueryResultByToken(queryToken) {\n    return this.optimisticQueryResults.queryResult(queryToken);\n  }\n  /**\n   * Whether local query result is available for a token.\n   *\n   * This method does not throw if the result is an error.\n   *\n   * @internal\n   */\n  hasLocalQueryResultByToken(queryToken) {\n    return this.optimisticQueryResults.hasQueryResult(queryToken);\n  }\n  /**\n   * @internal\n   */\n  localQueryLogs(udfPath, args) {\n    const argsObject = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.parseArgs)(args);\n    const queryToken = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_7__.serializePathAndArgs)(udfPath, argsObject);\n    return this.optimisticQueryResults.queryLogs(queryToken);\n  }\n  /**\n   * Retrieve the current {@link QueryJournal} for this query function.\n   *\n   * If we have not yet received a result for this query, this will be `undefined`.\n   *\n   * @param name - The name of the query.\n   * @param args - The arguments object for this query.\n   * @returns The query's {@link QueryJournal} or `undefined`.\n   */\n  queryJournal(name, args) {\n    const argsObject = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.parseArgs)(args);\n    const queryToken = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_7__.serializePathAndArgs)(name, argsObject);\n    return this.state.queryJournal(queryToken);\n  }\n  /**\n   * Get the current {@link ConnectionState} between the client and the Convex\n   * backend.\n   *\n   * @returns The {@link ConnectionState} with the Convex backend.\n   */\n  connectionState() {\n    const wsConnectionState = this.webSocketManager.connectionState();\n    return {\n      hasInflightRequests: this.requestManager.hasInflightRequests(),\n      isWebSocketConnected: wsConnectionState.isConnected,\n      hasEverConnected: wsConnectionState.hasEverConnected,\n      connectionCount: wsConnectionState.connectionCount,\n      connectionRetries: wsConnectionState.connectionRetries,\n      timeOfOldestInflightRequest: this.requestManager.timeOfOldestInflightRequest(),\n      inflightMutations: this.requestManager.inflightMutations(),\n      inflightActions: this.requestManager.inflightActions()\n    };\n  }\n  /**\n   * Subscribe to the {@link ConnectionState} between the client and the Convex\n   * backend, calling a callback each time it changes.\n   *\n   * Subscribed callbacks will be called when any part of ConnectionState changes.\n   * ConnectionState may grow in future versions (e.g. to provide a array of\n   * inflight requests) in which case callbacks would be called more frequently.\n   *\n   * @returns An unsubscribe function to stop listening.\n   */\n  subscribeToConnectionState(cb) {\n    const id = this.nextConnectionStateSubscriberId++;\n    this.connectionStateSubscribers.set(id, cb);\n    return () => {\n      this.connectionStateSubscribers.delete(id);\n    };\n  }\n  /**\n     * Execute a mutation function.\n     *\n     * @param name - The name of the mutation.\n     * @param args - An arguments object for the mutation. If this is omitted,\n     * the arguments will be `{}`.\n     * @param options - A {@link MutationOptions} options object for this mutation.\n  \n     * @returns - A promise of the mutation's result.\n     */\n  async mutation(name, args, options) {\n    const result = await this.mutationInternal(name, args, options);\n    if (!result.success) {\n      if (result.errorData !== void 0) {\n        throw (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.forwardData)(\n          result,\n          new _values_errors_js__WEBPACK_IMPORTED_MODULE_13__.ConvexError(\n            (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.createHybridErrorStacktrace)(\"mutation\", name, result)\n          )\n        );\n      }\n      throw new Error((0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.createHybridErrorStacktrace)(\"mutation\", name, result));\n    }\n    return result.value;\n  }\n  /**\n   * @internal\n   */\n  async mutationInternal(udfPath, args, options, componentPath) {\n    const { mutationPromise } = this.enqueueMutation(\n      udfPath,\n      args,\n      options,\n      componentPath\n    );\n    return mutationPromise;\n  }\n  /**\n   * @internal\n   */\n  enqueueMutation(udfPath, args, options, componentPath) {\n    const mutationArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.parseArgs)(args);\n    this.tryReportLongDisconnect();\n    const requestId = this.nextRequestId;\n    this._nextRequestId++;\n    if (options !== void 0) {\n      const optimisticUpdate = options.optimisticUpdate;\n      if (optimisticUpdate !== void 0) {\n        const wrappedUpdate = (localQueryStore) => {\n          const result = optimisticUpdate(\n            localQueryStore,\n            mutationArgs\n          );\n          if (result instanceof Promise) {\n            this.logger.warn(\n              \"Optimistic update handler returned a Promise. Optimistic updates should be synchronous.\"\n            );\n          }\n        };\n        const changedQueryTokens = this.optimisticQueryResults.applyOptimisticUpdate(\n          wrappedUpdate,\n          requestId\n        );\n        const changedQueries = changedQueryTokens.map((token) => {\n          const localResult = this.localQueryResultByToken(token);\n          return {\n            token,\n            modification: {\n              kind: \"Updated\",\n              result: localResult === void 0 ? void 0 : {\n                success: true,\n                value: localResult,\n                logLines: []\n              }\n            }\n          };\n        });\n        this.handleTransition({\n          queries: changedQueries,\n          reflectedMutations: [],\n          timestamp: this.remoteQuerySet.timestamp()\n        });\n      }\n    }\n    const message = {\n      type: \"Mutation\",\n      requestId,\n      udfPath,\n      componentPath,\n      args: [(0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(mutationArgs)]\n    };\n    const mightBeSent = this.webSocketManager.sendMessage(message);\n    const mutationPromise = this.requestManager.request(message, mightBeSent);\n    return {\n      requestId,\n      mutationPromise\n    };\n  }\n  /**\n   * Execute an action function.\n   *\n   * @param name - The name of the action.\n   * @param args - An arguments object for the action. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the action's result.\n   */\n  async action(name, args) {\n    const result = await this.actionInternal(name, args);\n    if (!result.success) {\n      if (result.errorData !== void 0) {\n        throw (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.forwardData)(\n          result,\n          new _values_errors_js__WEBPACK_IMPORTED_MODULE_13__.ConvexError((0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.createHybridErrorStacktrace)(\"action\", name, result))\n        );\n      }\n      throw new Error((0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.createHybridErrorStacktrace)(\"action\", name, result));\n    }\n    return result.value;\n  }\n  /**\n   * @internal\n   */\n  async actionInternal(udfPath, args, componentPath) {\n    const actionArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.parseArgs)(args);\n    const requestId = this.nextRequestId;\n    this._nextRequestId++;\n    this.tryReportLongDisconnect();\n    const message = {\n      type: \"Action\",\n      requestId,\n      udfPath,\n      componentPath,\n      args: [(0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(actionArgs)]\n    };\n    const mightBeSent = this.webSocketManager.sendMessage(message);\n    return this.requestManager.request(message, mightBeSent);\n  }\n  /**\n   * Close any network handles associated with this client and stop all subscriptions.\n   *\n   * Call this method when you're done with an {@link BaseConvexClient} to\n   * dispose of its sockets and resources.\n   *\n   * @returns A `Promise` fulfilled when the connection has been completely closed.\n   */\n  async close() {\n    this.authenticationManager.stop();\n    return this.webSocketManager.terminate();\n  }\n  /**\n   * Return the address for this client, useful for creating a new client.\n   *\n   * Not guaranteed to match the address with which this client was constructed:\n   * it may be canonicalized.\n   */\n  get url() {\n    return this.address;\n  }\n  /**\n   * @internal\n   */\n  get nextRequestId() {\n    return this._nextRequestId;\n  }\n  /**\n   * @internal\n   */\n  get sessionId() {\n    return this._sessionId;\n  }\n  /**\n   * Reports performance marks to the server. This should only be called when\n   * we have a functional websocket.\n   */\n  reportMarks() {\n    if (this.debug) {\n      const report = (0,_metrics_js__WEBPACK_IMPORTED_MODULE_11__.getMarksReport)(this.sessionId);\n      this.webSocketManager.sendMessage({\n        type: \"Event\",\n        eventType: \"ClientConnect\",\n        event: report\n      });\n    }\n  }\n  tryReportLongDisconnect() {\n    if (!this.debug) {\n      return;\n    }\n    const timeOfOldestRequest = this.connectionState().timeOfOldestInflightRequest;\n    if (timeOfOldestRequest === null || Date.now() - timeOfOldestRequest.getTime() <= 60 * 1e3) {\n      return;\n    }\n    const endpoint = `${this.address}/api/debug_event`;\n    fetch(endpoint, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Convex-Client\": `npm-${_index_js__WEBPACK_IMPORTED_MODULE_0__.version}`\n      },\n      body: JSON.stringify({ event: \"LongWebsocketDisconnect\" })\n    }).then((response) => {\n      if (!response.ok) {\n        this.logger.warn(\n          \"Analytics request failed with response:\",\n          response.body\n        );\n      }\n    }).catch((error) => {\n      this.logger.warn(\"Analytics response failed with error:\", error);\n    });\n  }\n}\n//# sourceMappingURL=client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9jbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFhO0FBQ2I7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJO0FBQ3lDO0FBQ1k7QUFPOUI7QUFDMkI7QUFDSTtBQUdoQjtBQUNpQjtBQUNJO0FBQ0E7QUFDZjtBQUdQO0FBQ2U7QUFDcUI7QUFDcEI7QUFDUTtBQUN0RDtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwrQkFBK0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtEQUFJO0FBQ1o7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx3RUFBcUI7QUFDM0I7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsa0VBQXFCLEdBQUcsbUNBQW1DLGlFQUFpRSxxRUFBd0IsR0FBRyxtQ0FBbUM7QUFDdk87QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOLGlEQUFpRCxTQUFTO0FBQzFEO0FBQ0EscUJBQXFCLFdBQVcsS0FBSyxPQUFPLE9BQU8sOENBQU8sQ0FBQztBQUMzRCxxQkFBcUIsMkRBQWM7QUFDbkMsOEJBQThCLGdFQUFjO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrREFBYztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyw4RUFBcUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsK0VBQXNCO0FBQzVEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxzQkFBc0IseURBQVk7QUFDbEMsWUFBWSx3QkFBd0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGLDZCQUE2QjtBQUN4SDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsZ0NBQWdDLG9FQUFnQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGdFQUFjO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwwREFBYTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qix1RUFBUztBQUN2QyxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUIsMkJBQTJCLHdCQUF3QjtBQUNuRDtBQUNBLHdDQUF3QyxrQkFBa0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDREQUFTO0FBQ2hDLFlBQVksd0NBQXdDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDREQUFTO0FBQ2hDLHVCQUF1Qix3RUFBb0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDREQUFTO0FBQ2hDLHVCQUF1Qix3RUFBb0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG9CQUFvQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG9CQUFvQjtBQUMvQztBQUNBO0FBQ0EsdUJBQXVCLDREQUFTO0FBQ2hDLHVCQUF1Qix3RUFBb0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHVCQUF1QjtBQUM3QztBQUNBO0FBQ0EsbUJBQW1CLHVCQUF1QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEMsMkJBQTJCLHVCQUF1QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsd0RBQVc7QUFDekI7QUFDQSxjQUFjLDJEQUFXO0FBQ3pCLFlBQVksd0VBQTJCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix3RUFBMkI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtCQUFrQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDREQUFTO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4REFBWTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHdEQUFXO0FBQ3pCO0FBQ0EsY0FBYywyREFBVyxDQUFDLHdFQUEyQjtBQUNyRDtBQUNBO0FBQ0Esc0JBQXNCLHdFQUEyQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw0REFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4REFBWTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCx3QkFBd0I7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw0REFBYztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixhQUFhO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDhDQUFPLENBQUM7QUFDeEMsT0FBTztBQUNQLDZCQUE2QixrQ0FBa0M7QUFDL0QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcYnJvd3Nlclxcc3luY1xcY2xpZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vLi4vaW5kZXguanNcIjtcbmltcG9ydCB7IGNvbnZleFRvSnNvbiB9IGZyb20gXCIuLi8uLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZUh5YnJpZEVycm9yU3RhY2t0cmFjZSxcbiAgZm9yd2FyZERhdGEsXG4gIGluc3RhbnRpYXRlRGVmYXVsdExvZ2dlcixcbiAgaW5zdGFudGlhdGVOb29wTG9nZ2VyLFxuICBsb2dGYXRhbEVycm9yXG59IGZyb20gXCIuLi9sb2dnaW5nLmpzXCI7XG5pbXBvcnQgeyBMb2NhbFN5bmNTdGF0ZSB9IGZyb20gXCIuL2xvY2FsX3N0YXRlLmpzXCI7XG5pbXBvcnQgeyBSZXF1ZXN0TWFuYWdlciB9IGZyb20gXCIuL3JlcXVlc3RfbWFuYWdlci5qc1wiO1xuaW1wb3J0IHtcbiAgT3B0aW1pc3RpY1F1ZXJ5UmVzdWx0c1xufSBmcm9tIFwiLi9vcHRpbWlzdGljX3VwZGF0ZXNfaW1wbC5qc1wiO1xuaW1wb3J0IHsgUmVtb3RlUXVlcnlTZXQgfSBmcm9tIFwiLi9yZW1vdGVfcXVlcnlfc2V0LmpzXCI7XG5pbXBvcnQgeyBzZXJpYWxpemVQYXRoQW5kQXJncyB9IGZyb20gXCIuL3VkZl9wYXRoX3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBXZWJTb2NrZXRNYW5hZ2VyIH0gZnJvbSBcIi4vd2ViX3NvY2tldF9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBuZXdTZXNzaW9uSWQgfSBmcm9tIFwiLi9zZXNzaW9uLmpzXCI7XG5pbXBvcnQge1xuICBBdXRoZW50aWNhdGlvbk1hbmFnZXJcbn0gZnJvbSBcIi4vYXV0aGVudGljYXRpb25fbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgZ2V0TWFya3NSZXBvcnQsIG1hcmsgfSBmcm9tIFwiLi9tZXRyaWNzLmpzXCI7XG5pbXBvcnQgeyBwYXJzZUFyZ3MsIHZhbGlkYXRlRGVwbG95bWVudFVybCB9IGZyb20gXCIuLi8uLi9jb21tb24vaW5kZXguanNcIjtcbmltcG9ydCB7IENvbnZleEVycm9yIH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGp3dERlY29kZSB9IGZyb20gXCIuLi8uLi92ZW5kb3Ivand0LWRlY29kZS9pbmRleC5qc1wiO1xuZXhwb3J0IGNsYXNzIEJhc2VDb252ZXhDbGllbnQge1xuICAvKipcbiAgICogQHBhcmFtIGFkZHJlc3MgLSBUaGUgdXJsIG9mIHlvdXIgQ29udmV4IGRlcGxveW1lbnQsIG9mdGVuIHByb3ZpZGVkXG4gICAqIGJ5IGFuIGVudmlyb25tZW50IHZhcmlhYmxlLiBFLmcuIGBodHRwczovL3NtYWxsLW1vdXNlLTEyMy5jb252ZXguY2xvdWRgLlxuICAgKiBAcGFyYW0gb25UcmFuc2l0aW9uIC0gQSBjYWxsYmFjayByZWNlaXZpbmcgYW4gYXJyYXkgb2YgcXVlcnkgdG9rZW5zXG4gICAqIGNvcnJlc3BvbmRpbmcgdG8gcXVlcnkgcmVzdWx0cyB0aGF0IGhhdmUgY2hhbmdlZCAtLSBhZGRpdGlvbmFsIGhhbmRsZXJzXG4gICAqIGNhbiBiZSBhZGRlZCB2aWEgYGFkZE9uVHJhbnNpdGlvbkhhbmRsZXJgLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNlZSB7QGxpbmsgQmFzZUNvbnZleENsaWVudE9wdGlvbnN9IGZvciBhIGZ1bGwgZGVzY3JpcHRpb24uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhZGRyZXNzLCBvblRyYW5zaXRpb24sIG9wdGlvbnMpIHtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiYWRkcmVzc1wiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwic3RhdGVcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInJlcXVlc3RNYW5hZ2VyXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ3ZWJTb2NrZXRNYW5hZ2VyXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJhdXRoZW50aWNhdGlvbk1hbmFnZXJcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInJlbW90ZVF1ZXJ5U2V0XCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJvcHRpbWlzdGljUXVlcnlSZXN1bHRzXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfdHJhbnNpdGlvbkhhbmRsZXJDb3VudGVyXCIsIDApO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfbmV4dFJlcXVlc3RJZFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX29uVHJhbnNpdGlvbkZuc1wiLCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX3Nlc3Npb25JZFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZmlyc3RNZXNzYWdlUmVjZWl2ZWRcIiwgZmFsc2UpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJkZWJ1Z1wiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwibG9nZ2VyXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJtYXhPYnNlcnZlZFRpbWVzdGFtcFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiY29ubmVjdGlvblN0YXRlU3Vic2NyaWJlcnNcIiwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIm5leHRDb25uZWN0aW9uU3RhdGVTdWJzY3JpYmVySWRcIiwgMCk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9sYXN0UHVibGlzaGVkQ29ubmVjdGlvblN0YXRlXCIpO1xuICAgIC8qKlxuICAgICAqIENhbGwgdGhpcyB3aGVuZXZlciB0aGUgY29ubmVjdGlvbiBzdGF0ZSBtYXkgaGF2ZSBjaGFuZ2VkIGluIGEgd2F5IHRoYXQgY291bGRcbiAgICAgKiByZXF1aXJlIHB1Ymxpc2hpbmcgaXQuIFNjaGVkdWxlcyBhIHBvc3NpYmx5IHVwZGF0ZS5cbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwibWFya0Nvbm5lY3Rpb25TdGF0ZURpcnR5XCIsICgpID0+IHtcbiAgICAgIHZvaWQgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1ckNvbm5lY3Rpb25TdGF0ZSA9IHRoaXMuY29ubmVjdGlvblN0YXRlKCk7XG4gICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShjdXJDb25uZWN0aW9uU3RhdGUpICE9PSBKU09OLnN0cmluZ2lmeSh0aGlzLl9sYXN0UHVibGlzaGVkQ29ubmVjdGlvblN0YXRlKSkge1xuICAgICAgICAgIHRoaXMuX2xhc3RQdWJsaXNoZWRDb25uZWN0aW9uU3RhdGUgPSBjdXJDb25uZWN0aW9uU3RhdGU7XG4gICAgICAgICAgZm9yIChjb25zdCBjYiBvZiB0aGlzLmNvbm5lY3Rpb25TdGF0ZVN1YnNjcmliZXJzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBjYihjdXJDb25uZWN0aW9uU3RhdGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgLy8gSW5zdGFuY2UgcHJvcGVydHkgc28gdGhhdCBgbWFyaygpYCBkb2Vzbid0IG5lZWQgdG8gYmUgY2FsbGVkIGFzIGEgbWV0aG9kLlxuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJtYXJrXCIsIChuYW1lKSA9PiB7XG4gICAgICBpZiAodGhpcy5kZWJ1Zykge1xuICAgICAgICBtYXJrKG5hbWUsIHRoaXMuc2Vzc2lvbklkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAodHlwZW9mIGFkZHJlc3MgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJQYXNzaW5nIGEgQ2xpZW50Q29uZmlnIG9iamVjdCBpcyBubyBsb25nZXIgc3VwcG9ydGVkLiBQYXNzIHRoZSBVUkwgb2YgdGhlIENvbnZleCBkZXBsb3ltZW50IGFzIGEgc3RyaW5nIGRpcmVjdGx5LlwiXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucz8uc2tpcENvbnZleERlcGxveW1lbnRVcmxDaGVjayAhPT0gdHJ1ZSkge1xuICAgICAgdmFsaWRhdGVEZXBsb3ltZW50VXJsKGFkZHJlc3MpO1xuICAgIH1cbiAgICBvcHRpb25zID0geyAuLi5vcHRpb25zIH07XG4gICAgY29uc3QgYXV0aFJlZnJlc2hUb2tlbkxlZXdheVNlY29uZHMgPSBvcHRpb25zLmF1dGhSZWZyZXNoVG9rZW5MZWV3YXlTZWNvbmRzID8/IDI7XG4gICAgbGV0IHdlYlNvY2tldENvbnN0cnVjdG9yID0gb3B0aW9ucy53ZWJTb2NrZXRDb25zdHJ1Y3RvcjtcbiAgICBpZiAoIXdlYlNvY2tldENvbnN0cnVjdG9yICYmIHR5cGVvZiBXZWJTb2NrZXQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJObyBXZWJTb2NrZXQgZ2xvYmFsIHZhcmlhYmxlIGRlZmluZWQhIFRvIHVzZSBDb252ZXggaW4gYW4gZW52aXJvbm1lbnQgd2l0aG91dCBXZWJTb2NrZXQgdHJ5IHRoZSBIVFRQIGNsaWVudDogaHR0cHM6Ly9kb2NzLmNvbnZleC5kZXYvYXBpL2NsYXNzZXMvYnJvd3Nlci5Db252ZXhIdHRwQ2xpZW50XCJcbiAgICAgICk7XG4gICAgfVxuICAgIHdlYlNvY2tldENvbnN0cnVjdG9yID0gd2ViU29ja2V0Q29uc3RydWN0b3IgfHwgV2ViU29ja2V0O1xuICAgIHRoaXMuZGVidWcgPSBvcHRpb25zLnJlcG9ydERlYnVnSW5mb1RvQ29udmV4ID8/IGZhbHNlO1xuICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgdGhpcy5sb2dnZXIgPSBvcHRpb25zLmxvZ2dlciA9PT0gZmFsc2UgPyBpbnN0YW50aWF0ZU5vb3BMb2dnZXIoeyB2ZXJib3NlOiBvcHRpb25zLnZlcmJvc2UgPz8gZmFsc2UgfSkgOiBvcHRpb25zLmxvZ2dlciAhPT0gdHJ1ZSAmJiBvcHRpb25zLmxvZ2dlciA/IG9wdGlvbnMubG9nZ2VyIDogaW5zdGFudGlhdGVEZWZhdWx0TG9nZ2VyKHsgdmVyYm9zZTogb3B0aW9ucy52ZXJib3NlID8/IGZhbHNlIH0pO1xuICAgIGNvbnN0IGkgPSBhZGRyZXNzLnNlYXJjaChcIjovL1wiKTtcbiAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3ZpZGVkIGFkZHJlc3Mgd2FzIG5vdCBhbiBhYnNvbHV0ZSBVUkwuXCIpO1xuICAgIH1cbiAgICBjb25zdCBvcmlnaW4gPSBhZGRyZXNzLnN1YnN0cmluZyhpICsgMyk7XG4gICAgY29uc3QgcHJvdG9jb2wgPSBhZGRyZXNzLnN1YnN0cmluZygwLCBpKTtcbiAgICBsZXQgd3NQcm90b2NvbDtcbiAgICBpZiAocHJvdG9jb2wgPT09IFwiaHR0cFwiKSB7XG4gICAgICB3c1Byb3RvY29sID0gXCJ3c1wiO1xuICAgIH0gZWxzZSBpZiAocHJvdG9jb2wgPT09IFwiaHR0cHNcIikge1xuICAgICAgd3NQcm90b2NvbCA9IFwid3NzXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwYXJlbnQgcHJvdG9jb2wgJHtwcm90b2NvbH1gKTtcbiAgICB9XG4gICAgY29uc3Qgd3NVcmkgPSBgJHt3c1Byb3RvY29sfTovLyR7b3JpZ2lufS9hcGkvJHt2ZXJzaW9ufS9zeW5jYDtcbiAgICB0aGlzLnN0YXRlID0gbmV3IExvY2FsU3luY1N0YXRlKCk7XG4gICAgdGhpcy5yZW1vdGVRdWVyeVNldCA9IG5ldyBSZW1vdGVRdWVyeVNldChcbiAgICAgIChxdWVyeUlkKSA9PiB0aGlzLnN0YXRlLnF1ZXJ5UGF0aChxdWVyeUlkKSxcbiAgICAgIHRoaXMubG9nZ2VyXG4gICAgKTtcbiAgICB0aGlzLnJlcXVlc3RNYW5hZ2VyID0gbmV3IFJlcXVlc3RNYW5hZ2VyKFxuICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICB0aGlzLm1hcmtDb25uZWN0aW9uU3RhdGVEaXJ0eVxuICAgICk7XG4gICAgY29uc3QgcGF1c2VTb2NrZXQgPSAoKSA9PiB7XG4gICAgICB0aGlzLndlYlNvY2tldE1hbmFnZXIucGF1c2UoKTtcbiAgICAgIHRoaXMuc3RhdGUucGF1c2UoKTtcbiAgICB9O1xuICAgIHRoaXMuYXV0aGVudGljYXRpb25NYW5hZ2VyID0gbmV3IEF1dGhlbnRpY2F0aW9uTWFuYWdlcihcbiAgICAgIHRoaXMuc3RhdGUsXG4gICAgICB7XG4gICAgICAgIGF1dGhlbnRpY2F0ZTogKHRva2VuKSA9PiB7XG4gICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuc3RhdGUuc2V0QXV0aCh0b2tlbik7XG4gICAgICAgICAgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnNlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgIHJldHVybiBtZXNzYWdlLmJhc2VWZXJzaW9uO1xuICAgICAgICB9LFxuICAgICAgICBzdG9wU29ja2V0OiAoKSA9PiB0aGlzLndlYlNvY2tldE1hbmFnZXIuc3RvcCgpLFxuICAgICAgICB0cnlSZXN0YXJ0U29ja2V0OiAoKSA9PiB0aGlzLndlYlNvY2tldE1hbmFnZXIudHJ5UmVzdGFydCgpLFxuICAgICAgICBwYXVzZVNvY2tldCxcbiAgICAgICAgcmVzdW1lU29ja2V0OiAoKSA9PiB0aGlzLndlYlNvY2tldE1hbmFnZXIucmVzdW1lKCksXG4gICAgICAgIGNsZWFyQXV0aDogKCkgPT4ge1xuICAgICAgICAgIHRoaXMuY2xlYXJBdXRoKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGxvZ2dlcjogdGhpcy5sb2dnZXIsXG4gICAgICAgIHJlZnJlc2hUb2tlbkxlZXdheVNlY29uZHM6IGF1dGhSZWZyZXNoVG9rZW5MZWV3YXlTZWNvbmRzXG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLm9wdGltaXN0aWNRdWVyeVJlc3VsdHMgPSBuZXcgT3B0aW1pc3RpY1F1ZXJ5UmVzdWx0cygpO1xuICAgIHRoaXMuYWRkT25UcmFuc2l0aW9uSGFuZGxlcigodHJhbnNpdGlvbikgPT4ge1xuICAgICAgb25UcmFuc2l0aW9uKHRyYW5zaXRpb24ucXVlcmllcy5tYXAoKHEpID0+IHEudG9rZW4pKTtcbiAgICB9KTtcbiAgICB0aGlzLl9uZXh0UmVxdWVzdElkID0gMDtcbiAgICB0aGlzLl9zZXNzaW9uSWQgPSBuZXdTZXNzaW9uSWQoKTtcbiAgICBjb25zdCB7IHVuc2F2ZWRDaGFuZ2VzV2FybmluZyB9ID0gb3B0aW9ucztcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlmICh1bnNhdmVkQ2hhbmdlc1dhcm5pbmcgPT09IHRydWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwidW5zYXZlZENoYW5nZXNXYXJuaW5nIHJlcXVlc3RlZCwgYnV0IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyIG5vdCBmb3VuZCEgUmVtb3ZlIHt1bnNhdmVkQ2hhbmdlc1dhcm5pbmc6IHRydWV9IGZyb20gQ29udmV4IGNsaWVudCBvcHRpb25zLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh1bnNhdmVkQ2hhbmdlc1dhcm5pbmcgIT09IGZhbHNlKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZXVubG9hZFwiLCAoZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5yZXF1ZXN0TWFuYWdlci5oYXNJbmNvbXBsZXRlUmVxdWVzdHMoKSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBjb25zdCBjb25maXJtYXRpb25NZXNzYWdlID0gXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gbGVhdmU/IFlvdXIgY2hhbmdlcyBtYXkgbm90IGJlIHNhdmVkLlwiO1xuICAgICAgICAgIChlIHx8IHdpbmRvdy5ldmVudCkucmV0dXJuVmFsdWUgPSBjb25maXJtYXRpb25NZXNzYWdlO1xuICAgICAgICAgIHJldHVybiBjb25maXJtYXRpb25NZXNzYWdlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyID0gbmV3IFdlYlNvY2tldE1hbmFnZXIoXG4gICAgICB3c1VyaSxcbiAgICAgIHtcbiAgICAgICAgb25PcGVuOiAocmVjb25uZWN0TWV0YWRhdGEpID0+IHtcbiAgICAgICAgICB0aGlzLm1hcmsoXCJjb252ZXhXZWJTb2NrZXRPcGVuXCIpO1xuICAgICAgICAgIHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAuLi5yZWNvbm5lY3RNZXRhZGF0YSxcbiAgICAgICAgICAgIHR5cGU6IFwiQ29ubmVjdFwiLFxuICAgICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLl9zZXNzaW9uSWQsXG4gICAgICAgICAgICBtYXhPYnNlcnZlZFRpbWVzdGFtcDogdGhpcy5tYXhPYnNlcnZlZFRpbWVzdGFtcFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IG9sZFJlbW90ZVF1ZXJ5UmVzdWx0cyA9IG5ldyBTZXQoXG4gICAgICAgICAgICB0aGlzLnJlbW90ZVF1ZXJ5U2V0LnJlbW90ZVF1ZXJ5UmVzdWx0cygpLmtleXMoKVxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5yZW1vdGVRdWVyeVNldCA9IG5ldyBSZW1vdGVRdWVyeVNldChcbiAgICAgICAgICAgIChxdWVyeUlkKSA9PiB0aGlzLnN0YXRlLnF1ZXJ5UGF0aChxdWVyeUlkKSxcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBbcXVlcnlTZXRNb2RpZmljYXRpb24sIGF1dGhNb2RpZmljYXRpb25dID0gdGhpcy5zdGF0ZS5yZXN0YXJ0KFxuICAgICAgICAgICAgb2xkUmVtb3RlUXVlcnlSZXN1bHRzXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoYXV0aE1vZGlmaWNhdGlvbikge1xuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnNlbmRNZXNzYWdlKGF1dGhNb2RpZmljYXRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLndlYlNvY2tldE1hbmFnZXIuc2VuZE1lc3NhZ2UocXVlcnlTZXRNb2RpZmljYXRpb24pO1xuICAgICAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiB0aGlzLnJlcXVlc3RNYW5hZ2VyLnJlc3RhcnQoKSkge1xuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnNlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25SZXN1bWU6ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBbcXVlcnlTZXRNb2RpZmljYXRpb24sIGF1dGhNb2RpZmljYXRpb25dID0gdGhpcy5zdGF0ZS5yZXN1bWUoKTtcbiAgICAgICAgICBpZiAoYXV0aE1vZGlmaWNhdGlvbikge1xuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnNlbmRNZXNzYWdlKGF1dGhNb2RpZmljYXRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocXVlcnlTZXRNb2RpZmljYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZShxdWVyeVNldE1vZGlmaWNhdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiB0aGlzLnJlcXVlc3RNYW5hZ2VyLnJlc3VtZSgpKSB7XG4gICAgICAgICAgICB0aGlzLndlYlNvY2tldE1hbmFnZXIuc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbk1lc3NhZ2U6IChzZXJ2ZXJNZXNzYWdlKSA9PiB7XG4gICAgICAgICAgaWYgKCF0aGlzLmZpcnN0TWVzc2FnZVJlY2VpdmVkKSB7XG4gICAgICAgICAgICB0aGlzLmZpcnN0TWVzc2FnZVJlY2VpdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubWFyayhcImNvbnZleEZpcnN0TWVzc2FnZVJlY2VpdmVkXCIpO1xuICAgICAgICAgICAgdGhpcy5yZXBvcnRNYXJrcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzd2l0Y2ggKHNlcnZlck1lc3NhZ2UudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcIlRyYW5zaXRpb25cIjoge1xuICAgICAgICAgICAgICB0aGlzLm9ic2VydmVkVGltZXN0YW1wKHNlcnZlck1lc3NhZ2UuZW5kVmVyc2lvbi50cyk7XG4gICAgICAgICAgICAgIHRoaXMuYXV0aGVudGljYXRpb25NYW5hZ2VyLm9uVHJhbnNpdGlvbihzZXJ2ZXJNZXNzYWdlKTtcbiAgICAgICAgICAgICAgdGhpcy5yZW1vdGVRdWVyeVNldC50cmFuc2l0aW9uKHNlcnZlck1lc3NhZ2UpO1xuICAgICAgICAgICAgICB0aGlzLnN0YXRlLnRyYW5zaXRpb24oc2VydmVyTWVzc2FnZSk7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZFJlcXVlc3RzID0gdGhpcy5yZXF1ZXN0TWFuYWdlci5yZW1vdmVDb21wbGV0ZWQoXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdGVRdWVyeVNldC50aW1lc3RhbXAoKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB0aGlzLm5vdGlmeU9uUXVlcnlSZXN1bHRDaGFuZ2VzKGNvbXBsZXRlZFJlcXVlc3RzKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiTXV0YXRpb25SZXNwb25zZVwiOiB7XG4gICAgICAgICAgICAgIGlmIChzZXJ2ZXJNZXNzYWdlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9ic2VydmVkVGltZXN0YW1wKHNlcnZlck1lc3NhZ2UudHMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZE11dGF0aW9uSW5mbyA9IHRoaXMucmVxdWVzdE1hbmFnZXIub25SZXNwb25zZShzZXJ2ZXJNZXNzYWdlKTtcbiAgICAgICAgICAgICAgaWYgKGNvbXBsZXRlZE11dGF0aW9uSW5mbyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5T25RdWVyeVJlc3VsdENoYW5nZXMoXG4gICAgICAgICAgICAgICAgICAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRNdXRhdGlvbkluZm8ucmVxdWVzdElkLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZE11dGF0aW9uSW5mby5yZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcIkFjdGlvblJlc3BvbnNlXCI6IHtcbiAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0TWFuYWdlci5vblJlc3BvbnNlKHNlcnZlck1lc3NhZ2UpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJBdXRoRXJyb3JcIjoge1xuICAgICAgICAgICAgICB0aGlzLmF1dGhlbnRpY2F0aW9uTWFuYWdlci5vbkF1dGhFcnJvcihzZXJ2ZXJNZXNzYWdlKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiRmF0YWxFcnJvclwiOiB7XG4gICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbG9nRmF0YWxFcnJvcih0aGlzLmxvZ2dlciwgc2VydmVyTWVzc2FnZS5lcnJvcik7XG4gICAgICAgICAgICAgIHZvaWQgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgc2VydmVyTWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhhc1N5bmNlZFBhc3RMYXN0UmVjb25uZWN0OiB0aGlzLmhhc1N5bmNlZFBhc3RMYXN0UmVjb25uZWN0KClcbiAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBvblNlcnZlckRpc2Nvbm5lY3RFcnJvcjogb3B0aW9ucy5vblNlcnZlckRpc2Nvbm5lY3RFcnJvclxuICAgICAgfSxcbiAgICAgIHdlYlNvY2tldENvbnN0cnVjdG9yLFxuICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICB0aGlzLm1hcmtDb25uZWN0aW9uU3RhdGVEaXJ0eSxcbiAgICAgIHRoaXMuZGVidWdcbiAgICApO1xuICAgIHRoaXMubWFyayhcImNvbnZleENsaWVudENvbnN0cnVjdGVkXCIpO1xuICAgIGlmIChvcHRpb25zLmV4cGVjdEF1dGgpIHtcbiAgICAgIHBhdXNlU29ja2V0KCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGVyZSBpcyBvdXRzdGFuZGluZyB3b3JrIGZyb20gcHJpb3IgdG8gdGhlIHRpbWUgb2YgdGhlIG1vc3QgcmVjZW50IHJlc3RhcnQuXG4gICAqIFRoaXMgaW5kaWNhdGVzIHRoYXQgdGhlIGNsaWVudCBoYXMgbm90IHByb3ZlbiBpdHNlbGYgdG8gaGF2ZSBnb3R0ZW4gcGFzdCB0aGUgaXNzdWUgdGhhdFxuICAgKiBwb3RlbnRpYWxseSBsZWQgdG8gdGhlIHJlc3RhcnQuIFVzZSB0aGlzIHRvIGluZmx1ZW5jZSB3aGVuIHRvIHJlc2V0IGJhY2tvZmYgYWZ0ZXIgYSBmYWlsdXJlLlxuICAgKi9cbiAgaGFzU3luY2VkUGFzdExhc3RSZWNvbm5lY3QoKSB7XG4gICAgY29uc3QgaGFzU3luY2VkUGFzdExhc3RSZWNvbm5lY3QgPSB0aGlzLnJlcXVlc3RNYW5hZ2VyLmhhc1N5bmNlZFBhc3RMYXN0UmVjb25uZWN0KCkgfHwgdGhpcy5zdGF0ZS5oYXNTeW5jZWRQYXN0TGFzdFJlY29ubmVjdCgpO1xuICAgIHJldHVybiBoYXNTeW5jZWRQYXN0TGFzdFJlY29ubmVjdDtcbiAgfVxuICBvYnNlcnZlZFRpbWVzdGFtcChvYnNlcnZlZFRzKSB7XG4gICAgaWYgKHRoaXMubWF4T2JzZXJ2ZWRUaW1lc3RhbXAgPT09IHZvaWQgMCB8fCB0aGlzLm1heE9ic2VydmVkVGltZXN0YW1wLmxlc3NUaGFuT3JFcXVhbChvYnNlcnZlZFRzKSkge1xuICAgICAgdGhpcy5tYXhPYnNlcnZlZFRpbWVzdGFtcCA9IG9ic2VydmVkVHM7XG4gICAgfVxuICB9XG4gIGdldE1heE9ic2VydmVkVGltZXN0YW1wKCkge1xuICAgIHJldHVybiB0aGlzLm1heE9ic2VydmVkVGltZXN0YW1wO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBjdXJyZW50IHF1ZXJ5IHJlc3VsdHMgYmFzZWQgb24gdGhlIHJlbW90ZVF1ZXJ5U2V0IGFuZCB0aGVcbiAgICogY3VycmVudCBvcHRpbWlzdGljIHVwZGF0ZXMgYW5kIGNhbGwgYG9uVHJhbnNpdGlvbmAgZm9yIGFsbCB0aGUgY2hhbmdlZFxuICAgKiBxdWVyaWVzLlxuICAgKlxuICAgKiBAcGFyYW0gY29tcGxldGVkTXV0YXRpb25zIC0gQSBzZXQgb2YgbXV0YXRpb24gSURzIHdob3NlIG9wdGltaXN0aWMgdXBkYXRlc1xuICAgKiBhcmUgbm8gbG9uZ2VyIG5lZWRlZC5cbiAgICovXG4gIG5vdGlmeU9uUXVlcnlSZXN1bHRDaGFuZ2VzKGNvbXBsZXRlZFJlcXVlc3RzKSB7XG4gICAgY29uc3QgcmVtb3RlUXVlcnlSZXN1bHRzID0gdGhpcy5yZW1vdGVRdWVyeVNldC5yZW1vdGVRdWVyeVJlc3VsdHMoKTtcbiAgICBjb25zdCBxdWVyeVRva2VuVG9WYWx1ZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBbcXVlcnlJZCwgcmVzdWx0XSBvZiByZW1vdGVRdWVyeVJlc3VsdHMpIHtcbiAgICAgIGNvbnN0IHF1ZXJ5VG9rZW4gPSB0aGlzLnN0YXRlLnF1ZXJ5VG9rZW4ocXVlcnlJZCk7XG4gICAgICBpZiAocXVlcnlUb2tlbiAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBxdWVyeSA9IHtcbiAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgdWRmUGF0aDogdGhpcy5zdGF0ZS5xdWVyeVBhdGgocXVlcnlJZCksXG4gICAgICAgICAgYXJnczogdGhpcy5zdGF0ZS5xdWVyeUFyZ3MocXVlcnlJZClcbiAgICAgICAgfTtcbiAgICAgICAgcXVlcnlUb2tlblRvVmFsdWUuc2V0KHF1ZXJ5VG9rZW4sIHF1ZXJ5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY2hhbmdlZFF1ZXJ5VG9rZW5zID0gdGhpcy5vcHRpbWlzdGljUXVlcnlSZXN1bHRzLmluZ2VzdFF1ZXJ5UmVzdWx0c0Zyb21TZXJ2ZXIoXG4gICAgICBxdWVyeVRva2VuVG9WYWx1ZSxcbiAgICAgIG5ldyBTZXQoY29tcGxldGVkUmVxdWVzdHMua2V5cygpKVxuICAgICk7XG4gICAgdGhpcy5oYW5kbGVUcmFuc2l0aW9uKHtcbiAgICAgIHF1ZXJpZXM6IGNoYW5nZWRRdWVyeVRva2Vucy5tYXAoKHRva2VuKSA9PiB7XG4gICAgICAgIGNvbnN0IG9wdGltaXN0aWNSZXN1bHQgPSB0aGlzLm9wdGltaXN0aWNRdWVyeVJlc3VsdHMucmF3UXVlcnlSZXN1bHQodG9rZW4pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRva2VuLFxuICAgICAgICAgIG1vZGlmaWNhdGlvbjoge1xuICAgICAgICAgICAga2luZDogXCJVcGRhdGVkXCIsXG4gICAgICAgICAgICByZXN1bHQ6IG9wdGltaXN0aWNSZXN1bHRcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSxcbiAgICAgIHJlZmxlY3RlZE11dGF0aW9uczogQXJyYXkuZnJvbShjb21wbGV0ZWRSZXF1ZXN0cykubWFwKFxuICAgICAgICAoW3JlcXVlc3RJZCwgcmVzdWx0XSkgPT4gKHtcbiAgICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgICAgcmVzdWx0XG4gICAgICAgIH0pXG4gICAgICApLFxuICAgICAgdGltZXN0YW1wOiB0aGlzLnJlbW90ZVF1ZXJ5U2V0LnRpbWVzdGFtcCgpXG4gICAgfSk7XG4gIH1cbiAgaGFuZGxlVHJhbnNpdGlvbih0cmFuc2l0aW9uKSB7XG4gICAgZm9yIChjb25zdCBmbiBvZiB0aGlzLl9vblRyYW5zaXRpb25GbnMudmFsdWVzKCkpIHtcbiAgICAgIGZuKHRyYW5zaXRpb24pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQWRkIGEgaGFuZGxlciB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGEgdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQW55IGV4dGVybmFsIHNpZGUgZWZmZWN0cyAoZS5nLiBzZXR0aW5nIFJlYWN0IHN0YXRlKSBzaG91bGQgYmUgaGFuZGxlZCBoZXJlLlxuICAgKlxuICAgKiBAcGFyYW0gZm5cbiAgICpcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFkZE9uVHJhbnNpdGlvbkhhbmRsZXIoZm4pIHtcbiAgICBjb25zdCBpZCA9IHRoaXMuX3RyYW5zaXRpb25IYW5kbGVyQ291bnRlcisrO1xuICAgIHRoaXMuX29uVHJhbnNpdGlvbkZucy5zZXQoaWQsIGZuKTtcbiAgICByZXR1cm4gKCkgPT4gdGhpcy5fb25UcmFuc2l0aW9uRm5zLmRlbGV0ZShpZCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCBKV1QgYXV0aCB0b2tlbiBhbmQgZGVjb2RlZCBjbGFpbXMuXG4gICAqL1xuICBnZXRDdXJyZW50QXV0aENsYWltcygpIHtcbiAgICBjb25zdCBhdXRoVG9rZW4gPSB0aGlzLnN0YXRlLmdldEF1dGgoKTtcbiAgICBsZXQgZGVjb2RlZCA9IHt9O1xuICAgIGlmIChhdXRoVG9rZW4gJiYgYXV0aFRva2VuLnRva2VuVHlwZSA9PT0gXCJVc2VyXCIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRlY29kZWQgPSBhdXRoVG9rZW4gPyBqd3REZWNvZGUoYXV0aFRva2VuLnZhbHVlKSA6IHt9O1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIGRlY29kZWQgPSB7fTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgcmV0dXJuIHsgdG9rZW46IGF1dGhUb2tlbi52YWx1ZSwgZGVjb2RlZCB9O1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGF1dGhlbnRpY2F0aW9uIHRva2VuIHRvIGJlIHVzZWQgZm9yIHN1YnNlcXVlbnQgcXVlcmllcyBhbmQgbXV0YXRpb25zLlxuICAgKiBgZmV0Y2hUb2tlbmAgd2lsbCBiZSBjYWxsZWQgYXV0b21hdGljYWxseSBhZ2FpbiBpZiBhIHRva2VuIGV4cGlyZXMuXG4gICAqIGBmZXRjaFRva2VuYCBzaG91bGQgcmV0dXJuIGBudWxsYCBpZiB0aGUgdG9rZW4gY2Fubm90IGJlIHJldHJpZXZlZCwgZm9yIGV4YW1wbGVcbiAgICogd2hlbiB0aGUgdXNlcidzIHJpZ2h0cyB3ZXJlIHBlcm1hbmVudGx5IHJldm9rZWQuXG4gICAqIEBwYXJhbSBmZXRjaFRva2VuIC0gYW4gYXN5bmMgZnVuY3Rpb24gcmV0dXJuaW5nIHRoZSBKV1QtZW5jb2RlZCBPcGVuSUQgQ29ubmVjdCBJZGVudGl0eSBUb2tlblxuICAgKiBAcGFyYW0gb25DaGFuZ2UgLSBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgYXV0aGVudGljYXRpb24gc3RhdHVzIGNoYW5nZXNcbiAgICovXG4gIHNldEF1dGgoZmV0Y2hUb2tlbiwgb25DaGFuZ2UpIHtcbiAgICB2b2lkIHRoaXMuYXV0aGVudGljYXRpb25NYW5hZ2VyLnNldENvbmZpZyhmZXRjaFRva2VuLCBvbkNoYW5nZSk7XG4gIH1cbiAgaGFzQXV0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5oYXNBdXRoKCk7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBzZXRBZG1pbkF1dGgodmFsdWUsIGZha2VVc2VySWRlbnRpdHkpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5zdGF0ZS5zZXRBZG1pbkF1dGgodmFsdWUsIGZha2VVc2VySWRlbnRpdHkpO1xuICAgIHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZShtZXNzYWdlKTtcbiAgfVxuICBjbGVhckF1dGgoKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuc3RhdGUuY2xlYXJBdXRoKCk7XG4gICAgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnNlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICB9XG4gIC8qKlxuICAgICAqIFN1YnNjcmliZSB0byBhIHF1ZXJ5IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogV2hlbmV2ZXIgdGhpcyBxdWVyeSdzIHJlc3VsdCBjaGFuZ2VzLCB0aGUgYG9uVHJhbnNpdGlvbmAgY2FsbGJhY2tcbiAgICAgKiBwYXNzZWQgaW50byB0aGUgY29uc3RydWN0b3Igd2lsbCBiZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS5cbiAgICAgKiBAcGFyYW0gYXJncyAtIEFuIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBxdWVyeS4gSWYgdGhpcyBpcyBvbWl0dGVkLCB0aGVcbiAgICAgKiBhcmd1bWVudHMgd2lsbCBiZSBge31gLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQSB7QGxpbmsgU3Vic2NyaWJlT3B0aW9uc30gb3B0aW9ucyBvYmplY3QgZm9yIHRoaXMgcXVlcnkuXG4gIFxuICAgICAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIGEge0BsaW5rIFF1ZXJ5VG9rZW59IGNvcnJlc3BvbmRpbmcgdG8gdGhpc1xuICAgICAqIHF1ZXJ5IGFuZCBhbiBgdW5zdWJzY3JpYmVgIGNhbGxiYWNrLlxuICAgICAqL1xuICBzdWJzY3JpYmUobmFtZSwgYXJncywgb3B0aW9ucykge1xuICAgIGNvbnN0IGFyZ3NPYmplY3QgPSBwYXJzZUFyZ3MoYXJncyk7XG4gICAgY29uc3QgeyBtb2RpZmljYXRpb24sIHF1ZXJ5VG9rZW4sIHVuc3Vic2NyaWJlIH0gPSB0aGlzLnN0YXRlLnN1YnNjcmliZShcbiAgICAgIG5hbWUsXG4gICAgICBhcmdzT2JqZWN0LFxuICAgICAgb3B0aW9ucz8uam91cm5hbCxcbiAgICAgIG9wdGlvbnM/LmNvbXBvbmVudFBhdGhcbiAgICApO1xuICAgIGlmIChtb2RpZmljYXRpb24gIT09IG51bGwpIHtcbiAgICAgIHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZShtb2RpZmljYXRpb24pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgcXVlcnlUb2tlbixcbiAgICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vZGlmaWNhdGlvbjIgPSB1bnN1YnNjcmliZSgpO1xuICAgICAgICBpZiAobW9kaWZpY2F0aW9uMikge1xuICAgICAgICAgIHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZShtb2RpZmljYXRpb24yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIEEgcXVlcnkgcmVzdWx0IGJhc2VkIG9ubHkgb24gdGhlIGN1cnJlbnQsIGxvY2FsIHN0YXRlLlxuICAgKlxuICAgKiBUaGUgb25seSB3YXkgdGhpcyB3aWxsIHJldHVybiBhIHZhbHVlIGlzIGlmIHdlJ3JlIGFscmVhZHkgc3Vic2NyaWJlZCB0byB0aGVcbiAgICogcXVlcnkgb3IgaXRzIHZhbHVlIGhhcyBiZWVuIHNldCBvcHRpbWlzdGljYWxseS5cbiAgICovXG4gIGxvY2FsUXVlcnlSZXN1bHQodWRmUGF0aCwgYXJncykge1xuICAgIGNvbnN0IGFyZ3NPYmplY3QgPSBwYXJzZUFyZ3MoYXJncyk7XG4gICAgY29uc3QgcXVlcnlUb2tlbiA9IHNlcmlhbGl6ZVBhdGhBbmRBcmdzKHVkZlBhdGgsIGFyZ3NPYmplY3QpO1xuICAgIHJldHVybiB0aGlzLm9wdGltaXN0aWNRdWVyeVJlc3VsdHMucXVlcnlSZXN1bHQocXVlcnlUb2tlbik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBxdWVyeSByZXN1bHQgYnkgcXVlcnkgdG9rZW4gYmFzZWQgb24gY3VycmVudCwgbG9jYWwgc3RhdGVcbiAgICpcbiAgICogVGhlIG9ubHkgd2F5IHRoaXMgd2lsbCByZXR1cm4gYSB2YWx1ZSBpcyBpZiB3ZSdyZSBhbHJlYWR5IHN1YnNjcmliZWQgdG8gdGhlXG4gICAqIHF1ZXJ5IG9yIGl0cyB2YWx1ZSBoYXMgYmVlbiBzZXQgb3B0aW1pc3RpY2FsbHkuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbG9jYWxRdWVyeVJlc3VsdEJ5VG9rZW4ocXVlcnlUb2tlbikge1xuICAgIHJldHVybiB0aGlzLm9wdGltaXN0aWNRdWVyeVJlc3VsdHMucXVlcnlSZXN1bHQocXVlcnlUb2tlbik7XG4gIH1cbiAgLyoqXG4gICAqIFdoZXRoZXIgbG9jYWwgcXVlcnkgcmVzdWx0IGlzIGF2YWlsYWJsZSBmb3IgYSB0b2tlbi5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgZG9lcyBub3QgdGhyb3cgaWYgdGhlIHJlc3VsdCBpcyBhbiBlcnJvci5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBoYXNMb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbihxdWVyeVRva2VuKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW1pc3RpY1F1ZXJ5UmVzdWx0cy5oYXNRdWVyeVJlc3VsdChxdWVyeVRva2VuKTtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBsb2NhbFF1ZXJ5TG9ncyh1ZGZQYXRoLCBhcmdzKSB7XG4gICAgY29uc3QgYXJnc09iamVjdCA9IHBhcnNlQXJncyhhcmdzKTtcbiAgICBjb25zdCBxdWVyeVRva2VuID0gc2VyaWFsaXplUGF0aEFuZEFyZ3ModWRmUGF0aCwgYXJnc09iamVjdCk7XG4gICAgcmV0dXJuIHRoaXMub3B0aW1pc3RpY1F1ZXJ5UmVzdWx0cy5xdWVyeUxvZ3MocXVlcnlUb2tlbik7XG4gIH1cbiAgLyoqXG4gICAqIFJldHJpZXZlIHRoZSBjdXJyZW50IHtAbGluayBRdWVyeUpvdXJuYWx9IGZvciB0aGlzIHF1ZXJ5IGZ1bmN0aW9uLlxuICAgKlxuICAgKiBJZiB3ZSBoYXZlIG5vdCB5ZXQgcmVjZWl2ZWQgYSByZXN1bHQgZm9yIHRoaXMgcXVlcnksIHRoaXMgd2lsbCBiZSBgdW5kZWZpbmVkYC5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcXVlcnkuXG4gICAqIEBwYXJhbSBhcmdzIC0gVGhlIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoaXMgcXVlcnkuXG4gICAqIEByZXR1cm5zIFRoZSBxdWVyeSdzIHtAbGluayBRdWVyeUpvdXJuYWx9IG9yIGB1bmRlZmluZWRgLlxuICAgKi9cbiAgcXVlcnlKb3VybmFsKG5hbWUsIGFyZ3MpIHtcbiAgICBjb25zdCBhcmdzT2JqZWN0ID0gcGFyc2VBcmdzKGFyZ3MpO1xuICAgIGNvbnN0IHF1ZXJ5VG9rZW4gPSBzZXJpYWxpemVQYXRoQW5kQXJncyhuYW1lLCBhcmdzT2JqZWN0KTtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5xdWVyeUpvdXJuYWwocXVlcnlUb2tlbik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCB7QGxpbmsgQ29ubmVjdGlvblN0YXRlfSBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIHRoZSBDb252ZXhcbiAgICogYmFja2VuZC5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIHtAbGluayBDb25uZWN0aW9uU3RhdGV9IHdpdGggdGhlIENvbnZleCBiYWNrZW5kLlxuICAgKi9cbiAgY29ubmVjdGlvblN0YXRlKCkge1xuICAgIGNvbnN0IHdzQ29ubmVjdGlvblN0YXRlID0gdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLmNvbm5lY3Rpb25TdGF0ZSgpO1xuICAgIHJldHVybiB7XG4gICAgICBoYXNJbmZsaWdodFJlcXVlc3RzOiB0aGlzLnJlcXVlc3RNYW5hZ2VyLmhhc0luZmxpZ2h0UmVxdWVzdHMoKSxcbiAgICAgIGlzV2ViU29ja2V0Q29ubmVjdGVkOiB3c0Nvbm5lY3Rpb25TdGF0ZS5pc0Nvbm5lY3RlZCxcbiAgICAgIGhhc0V2ZXJDb25uZWN0ZWQ6IHdzQ29ubmVjdGlvblN0YXRlLmhhc0V2ZXJDb25uZWN0ZWQsXG4gICAgICBjb25uZWN0aW9uQ291bnQ6IHdzQ29ubmVjdGlvblN0YXRlLmNvbm5lY3Rpb25Db3VudCxcbiAgICAgIGNvbm5lY3Rpb25SZXRyaWVzOiB3c0Nvbm5lY3Rpb25TdGF0ZS5jb25uZWN0aW9uUmV0cmllcyxcbiAgICAgIHRpbWVPZk9sZGVzdEluZmxpZ2h0UmVxdWVzdDogdGhpcy5yZXF1ZXN0TWFuYWdlci50aW1lT2ZPbGRlc3RJbmZsaWdodFJlcXVlc3QoKSxcbiAgICAgIGluZmxpZ2h0TXV0YXRpb25zOiB0aGlzLnJlcXVlc3RNYW5hZ2VyLmluZmxpZ2h0TXV0YXRpb25zKCksXG4gICAgICBpbmZsaWdodEFjdGlvbnM6IHRoaXMucmVxdWVzdE1hbmFnZXIuaW5mbGlnaHRBY3Rpb25zKClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gdGhlIHtAbGluayBDb25uZWN0aW9uU3RhdGV9IGJldHdlZW4gdGhlIGNsaWVudCBhbmQgdGhlIENvbnZleFxuICAgKiBiYWNrZW5kLCBjYWxsaW5nIGEgY2FsbGJhY2sgZWFjaCB0aW1lIGl0IGNoYW5nZXMuXG4gICAqXG4gICAqIFN1YnNjcmliZWQgY2FsbGJhY2tzIHdpbGwgYmUgY2FsbGVkIHdoZW4gYW55IHBhcnQgb2YgQ29ubmVjdGlvblN0YXRlIGNoYW5nZXMuXG4gICAqIENvbm5lY3Rpb25TdGF0ZSBtYXkgZ3JvdyBpbiBmdXR1cmUgdmVyc2lvbnMgKGUuZy4gdG8gcHJvdmlkZSBhIGFycmF5IG9mXG4gICAqIGluZmxpZ2h0IHJlcXVlc3RzKSBpbiB3aGljaCBjYXNlIGNhbGxiYWNrcyB3b3VsZCBiZSBjYWxsZWQgbW9yZSBmcmVxdWVudGx5LlxuICAgKlxuICAgKiBAcmV0dXJucyBBbiB1bnN1YnNjcmliZSBmdW5jdGlvbiB0byBzdG9wIGxpc3RlbmluZy5cbiAgICovXG4gIHN1YnNjcmliZVRvQ29ubmVjdGlvblN0YXRlKGNiKSB7XG4gICAgY29uc3QgaWQgPSB0aGlzLm5leHRDb25uZWN0aW9uU3RhdGVTdWJzY3JpYmVySWQrKztcbiAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZVN1YnNjcmliZXJzLnNldChpZCwgY2IpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZVN1YnNjcmliZXJzLmRlbGV0ZShpZCk7XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICAgKiBFeGVjdXRlIGEgbXV0YXRpb24gZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBtdXRhdGlvbi5cbiAgICAgKiBAcGFyYW0gYXJncyAtIEFuIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBtdXRhdGlvbi4gSWYgdGhpcyBpcyBvbWl0dGVkLFxuICAgICAqIHRoZSBhcmd1bWVudHMgd2lsbCBiZSBge31gLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQSB7QGxpbmsgTXV0YXRpb25PcHRpb25zfSBvcHRpb25zIG9iamVjdCBmb3IgdGhpcyBtdXRhdGlvbi5cbiAgXG4gICAgICogQHJldHVybnMgLSBBIHByb21pc2Ugb2YgdGhlIG11dGF0aW9uJ3MgcmVzdWx0LlxuICAgICAqL1xuICBhc3luYyBtdXRhdGlvbihuYW1lLCBhcmdzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tdXRhdGlvbkludGVybmFsKG5hbWUsIGFyZ3MsIG9wdGlvbnMpO1xuICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIGlmIChyZXN1bHQuZXJyb3JEYXRhICE9PSB2b2lkIDApIHtcbiAgICAgICAgdGhyb3cgZm9yd2FyZERhdGEoXG4gICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgIG5ldyBDb252ZXhFcnJvcihcbiAgICAgICAgICAgIGNyZWF0ZUh5YnJpZEVycm9yU3RhY2t0cmFjZShcIm11dGF0aW9uXCIsIG5hbWUsIHJlc3VsdClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoY3JlYXRlSHlicmlkRXJyb3JTdGFja3RyYWNlKFwibXV0YXRpb25cIiwgbmFtZSwgcmVzdWx0KSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQudmFsdWU7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgYXN5bmMgbXV0YXRpb25JbnRlcm5hbCh1ZGZQYXRoLCBhcmdzLCBvcHRpb25zLCBjb21wb25lbnRQYXRoKSB7XG4gICAgY29uc3QgeyBtdXRhdGlvblByb21pc2UgfSA9IHRoaXMuZW5xdWV1ZU11dGF0aW9uKFxuICAgICAgdWRmUGF0aCxcbiAgICAgIGFyZ3MsXG4gICAgICBvcHRpb25zLFxuICAgICAgY29tcG9uZW50UGF0aFxuICAgICk7XG4gICAgcmV0dXJuIG11dGF0aW9uUHJvbWlzZTtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlTXV0YXRpb24odWRmUGF0aCwgYXJncywgb3B0aW9ucywgY29tcG9uZW50UGF0aCkge1xuICAgIGNvbnN0IG11dGF0aW9uQXJncyA9IHBhcnNlQXJncyhhcmdzKTtcbiAgICB0aGlzLnRyeVJlcG9ydExvbmdEaXNjb25uZWN0KCk7XG4gICAgY29uc3QgcmVxdWVzdElkID0gdGhpcy5uZXh0UmVxdWVzdElkO1xuICAgIHRoaXMuX25leHRSZXF1ZXN0SWQrKztcbiAgICBpZiAob3B0aW9ucyAhPT0gdm9pZCAwKSB7XG4gICAgICBjb25zdCBvcHRpbWlzdGljVXBkYXRlID0gb3B0aW9ucy5vcHRpbWlzdGljVXBkYXRlO1xuICAgICAgaWYgKG9wdGltaXN0aWNVcGRhdGUgIT09IHZvaWQgMCkge1xuICAgICAgICBjb25zdCB3cmFwcGVkVXBkYXRlID0gKGxvY2FsUXVlcnlTdG9yZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9wdGltaXN0aWNVcGRhdGUoXG4gICAgICAgICAgICBsb2NhbFF1ZXJ5U3RvcmUsXG4gICAgICAgICAgICBtdXRhdGlvbkFyZ3NcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFxuICAgICAgICAgICAgICBcIk9wdGltaXN0aWMgdXBkYXRlIGhhbmRsZXIgcmV0dXJuZWQgYSBQcm9taXNlLiBPcHRpbWlzdGljIHVwZGF0ZXMgc2hvdWxkIGJlIHN5bmNocm9ub3VzLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY2hhbmdlZFF1ZXJ5VG9rZW5zID0gdGhpcy5vcHRpbWlzdGljUXVlcnlSZXN1bHRzLmFwcGx5T3B0aW1pc3RpY1VwZGF0ZShcbiAgICAgICAgICB3cmFwcGVkVXBkYXRlLFxuICAgICAgICAgIHJlcXVlc3RJZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjaGFuZ2VkUXVlcmllcyA9IGNoYW5nZWRRdWVyeVRva2Vucy5tYXAoKHRva2VuKSA9PiB7XG4gICAgICAgICAgY29uc3QgbG9jYWxSZXN1bHQgPSB0aGlzLmxvY2FsUXVlcnlSZXN1bHRCeVRva2VuKHRva2VuKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICBtb2RpZmljYXRpb246IHtcbiAgICAgICAgICAgICAga2luZDogXCJVcGRhdGVkXCIsXG4gICAgICAgICAgICAgIHJlc3VsdDogbG9jYWxSZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBsb2NhbFJlc3VsdCxcbiAgICAgICAgICAgICAgICBsb2dMaW5lczogW11cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmhhbmRsZVRyYW5zaXRpb24oe1xuICAgICAgICAgIHF1ZXJpZXM6IGNoYW5nZWRRdWVyaWVzLFxuICAgICAgICAgIHJlZmxlY3RlZE11dGF0aW9uczogW10sXG4gICAgICAgICAgdGltZXN0YW1wOiB0aGlzLnJlbW90ZVF1ZXJ5U2V0LnRpbWVzdGFtcCgpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgdHlwZTogXCJNdXRhdGlvblwiLFxuICAgICAgcmVxdWVzdElkLFxuICAgICAgdWRmUGF0aCxcbiAgICAgIGNvbXBvbmVudFBhdGgsXG4gICAgICBhcmdzOiBbY29udmV4VG9Kc29uKG11dGF0aW9uQXJncyldXG4gICAgfTtcbiAgICBjb25zdCBtaWdodEJlU2VudCA9IHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZShtZXNzYWdlKTtcbiAgICBjb25zdCBtdXRhdGlvblByb21pc2UgPSB0aGlzLnJlcXVlc3RNYW5hZ2VyLnJlcXVlc3QobWVzc2FnZSwgbWlnaHRCZVNlbnQpO1xuICAgIHJldHVybiB7XG4gICAgICByZXF1ZXN0SWQsXG4gICAgICBtdXRhdGlvblByb21pc2VcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBFeGVjdXRlIGFuIGFjdGlvbiBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgYWN0aW9uLlxuICAgKiBAcGFyYW0gYXJncyAtIEFuIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBhY3Rpb24uIElmIHRoaXMgaXMgb21pdHRlZCxcbiAgICogdGhlIGFyZ3VtZW50cyB3aWxsIGJlIGB7fWAuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgYWN0aW9uJ3MgcmVzdWx0LlxuICAgKi9cbiAgYXN5bmMgYWN0aW9uKG5hbWUsIGFyZ3MpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmFjdGlvbkludGVybmFsKG5hbWUsIGFyZ3MpO1xuICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIGlmIChyZXN1bHQuZXJyb3JEYXRhICE9PSB2b2lkIDApIHtcbiAgICAgICAgdGhyb3cgZm9yd2FyZERhdGEoXG4gICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgIG5ldyBDb252ZXhFcnJvcihjcmVhdGVIeWJyaWRFcnJvclN0YWNrdHJhY2UoXCJhY3Rpb25cIiwgbmFtZSwgcmVzdWx0KSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihjcmVhdGVIeWJyaWRFcnJvclN0YWNrdHJhY2UoXCJhY3Rpb25cIiwgbmFtZSwgcmVzdWx0KSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQudmFsdWU7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgYXN5bmMgYWN0aW9uSW50ZXJuYWwodWRmUGF0aCwgYXJncywgY29tcG9uZW50UGF0aCkge1xuICAgIGNvbnN0IGFjdGlvbkFyZ3MgPSBwYXJzZUFyZ3MoYXJncyk7XG4gICAgY29uc3QgcmVxdWVzdElkID0gdGhpcy5uZXh0UmVxdWVzdElkO1xuICAgIHRoaXMuX25leHRSZXF1ZXN0SWQrKztcbiAgICB0aGlzLnRyeVJlcG9ydExvbmdEaXNjb25uZWN0KCk7XG4gICAgY29uc3QgbWVzc2FnZSA9IHtcbiAgICAgIHR5cGU6IFwiQWN0aW9uXCIsXG4gICAgICByZXF1ZXN0SWQsXG4gICAgICB1ZGZQYXRoLFxuICAgICAgY29tcG9uZW50UGF0aCxcbiAgICAgIGFyZ3M6IFtjb252ZXhUb0pzb24oYWN0aW9uQXJncyldXG4gICAgfTtcbiAgICBjb25zdCBtaWdodEJlU2VudCA9IHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZShtZXNzYWdlKTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0TWFuYWdlci5yZXF1ZXN0KG1lc3NhZ2UsIG1pZ2h0QmVTZW50KTtcbiAgfVxuICAvKipcbiAgICogQ2xvc2UgYW55IG5ldHdvcmsgaGFuZGxlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBjbGllbnQgYW5kIHN0b3AgYWxsIHN1YnNjcmlwdGlvbnMuXG4gICAqXG4gICAqIENhbGwgdGhpcyBtZXRob2Qgd2hlbiB5b3UncmUgZG9uZSB3aXRoIGFuIHtAbGluayBCYXNlQ29udmV4Q2xpZW50fSB0b1xuICAgKiBkaXNwb3NlIG9mIGl0cyBzb2NrZXRzIGFuZCByZXNvdXJjZXMuXG4gICAqXG4gICAqIEByZXR1cm5zIEEgYFByb21pc2VgIGZ1bGZpbGxlZCB3aGVuIHRoZSBjb25uZWN0aW9uIGhhcyBiZWVuIGNvbXBsZXRlbHkgY2xvc2VkLlxuICAgKi9cbiAgYXN5bmMgY2xvc2UoKSB7XG4gICAgdGhpcy5hdXRoZW50aWNhdGlvbk1hbmFnZXIuc3RvcCgpO1xuICAgIHJldHVybiB0aGlzLndlYlNvY2tldE1hbmFnZXIudGVybWluYXRlKCk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgYWRkcmVzcyBmb3IgdGhpcyBjbGllbnQsIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBuZXcgY2xpZW50LlxuICAgKlxuICAgKiBOb3QgZ3VhcmFudGVlZCB0byBtYXRjaCB0aGUgYWRkcmVzcyB3aXRoIHdoaWNoIHRoaXMgY2xpZW50IHdhcyBjb25zdHJ1Y3RlZDpcbiAgICogaXQgbWF5IGJlIGNhbm9uaWNhbGl6ZWQuXG4gICAqL1xuICBnZXQgdXJsKCkge1xuICAgIHJldHVybiB0aGlzLmFkZHJlc3M7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0IG5leHRSZXF1ZXN0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25leHRSZXF1ZXN0SWQ7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0IHNlc3Npb25JZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fc2Vzc2lvbklkO1xuICB9XG4gIC8qKlxuICAgKiBSZXBvcnRzIHBlcmZvcm1hbmNlIG1hcmtzIHRvIHRoZSBzZXJ2ZXIuIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdoZW5cbiAgICogd2UgaGF2ZSBhIGZ1bmN0aW9uYWwgd2Vic29ja2V0LlxuICAgKi9cbiAgcmVwb3J0TWFya3MoKSB7XG4gICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGdldE1hcmtzUmVwb3J0KHRoaXMuc2Vzc2lvbklkKTtcbiAgICAgIHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZSh7XG4gICAgICAgIHR5cGU6IFwiRXZlbnRcIixcbiAgICAgICAgZXZlbnRUeXBlOiBcIkNsaWVudENvbm5lY3RcIixcbiAgICAgICAgZXZlbnQ6IHJlcG9ydFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHRyeVJlcG9ydExvbmdEaXNjb25uZWN0KCkge1xuICAgIGlmICghdGhpcy5kZWJ1Zykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0aW1lT2ZPbGRlc3RSZXF1ZXN0ID0gdGhpcy5jb25uZWN0aW9uU3RhdGUoKS50aW1lT2ZPbGRlc3RJbmZsaWdodFJlcXVlc3Q7XG4gICAgaWYgKHRpbWVPZk9sZGVzdFJlcXVlc3QgPT09IG51bGwgfHwgRGF0ZS5ub3coKSAtIHRpbWVPZk9sZGVzdFJlcXVlc3QuZ2V0VGltZSgpIDw9IDYwICogMWUzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7dGhpcy5hZGRyZXNzfS9hcGkvZGVidWdfZXZlbnRgO1xuICAgIGZldGNoKGVuZHBvaW50LCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJDb252ZXgtQ2xpZW50XCI6IGBucG0tJHt2ZXJzaW9ufWBcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGV2ZW50OiBcIkxvbmdXZWJzb2NrZXREaXNjb25uZWN0XCIgfSlcbiAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFxuICAgICAgICAgIFwiQW5hbHl0aWNzIHJlcXVlc3QgZmFpbGVkIHdpdGggcmVzcG9uc2U6XCIsXG4gICAgICAgICAgcmVzcG9uc2UuYm9keVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgdGhpcy5sb2dnZXIud2FybihcIkFuYWx5dGljcyByZXNwb25zZSBmYWlsZWQgd2l0aCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIH0pO1xuICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/local_state.js":
/*!******************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/local_state.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocalSyncState: () => (/* binding */ LocalSyncState)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _udf_path_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./udf_path_utils.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\nclass LocalSyncState {\n  constructor() {\n    __publicField(this, \"nextQueryId\");\n    __publicField(this, \"querySetVersion\");\n    __publicField(this, \"querySet\");\n    __publicField(this, \"queryIdToToken\");\n    __publicField(this, \"identityVersion\");\n    __publicField(this, \"auth\");\n    __publicField(this, \"outstandingQueriesOlderThanRestart\");\n    __publicField(this, \"outstandingAuthOlderThanRestart\");\n    __publicField(this, \"paused\");\n    __publicField(this, \"pendingQuerySetModifications\");\n    this.nextQueryId = 0;\n    this.querySetVersion = 0;\n    this.identityVersion = 0;\n    this.querySet = /* @__PURE__ */ new Map();\n    this.queryIdToToken = /* @__PURE__ */ new Map();\n    this.outstandingQueriesOlderThanRestart = /* @__PURE__ */ new Set();\n    this.outstandingAuthOlderThanRestart = false;\n    this.paused = false;\n    this.pendingQuerySetModifications = /* @__PURE__ */ new Map();\n  }\n  hasSyncedPastLastReconnect() {\n    return this.outstandingQueriesOlderThanRestart.size === 0 && !this.outstandingAuthOlderThanRestart;\n  }\n  markAuthCompletion() {\n    this.outstandingAuthOlderThanRestart = false;\n  }\n  subscribe(udfPath, args, journal, componentPath) {\n    const canonicalizedUdfPath = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_1__.canonicalizeUdfPath)(udfPath);\n    const queryToken = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_1__.serializePathAndArgs)(canonicalizedUdfPath, args);\n    const existingEntry = this.querySet.get(queryToken);\n    if (existingEntry !== void 0) {\n      existingEntry.numSubscribers += 1;\n      return {\n        queryToken,\n        modification: null,\n        unsubscribe: () => this.removeSubscriber(queryToken)\n      };\n    } else {\n      const queryId = this.nextQueryId++;\n      const query = {\n        id: queryId,\n        canonicalizedUdfPath,\n        args,\n        numSubscribers: 1,\n        journal,\n        componentPath\n      };\n      this.querySet.set(queryToken, query);\n      this.queryIdToToken.set(queryId, queryToken);\n      const baseVersion = this.querySetVersion;\n      const newVersion = this.querySetVersion + 1;\n      const add = {\n        type: \"Add\",\n        queryId,\n        udfPath: canonicalizedUdfPath,\n        args: [(0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(args)],\n        journal,\n        componentPath\n      };\n      if (this.paused) {\n        this.pendingQuerySetModifications.set(queryId, add);\n      } else {\n        this.querySetVersion = newVersion;\n      }\n      const modification = {\n        type: \"ModifyQuerySet\",\n        baseVersion,\n        newVersion,\n        modifications: [add]\n      };\n      return {\n        queryToken,\n        modification,\n        unsubscribe: () => this.removeSubscriber(queryToken)\n      };\n    }\n  }\n  transition(transition) {\n    for (const modification of transition.modifications) {\n      switch (modification.type) {\n        case \"QueryUpdated\":\n        case \"QueryFailed\": {\n          this.outstandingQueriesOlderThanRestart.delete(modification.queryId);\n          const journal = modification.journal;\n          if (journal !== void 0) {\n            const queryToken = this.queryIdToToken.get(modification.queryId);\n            if (queryToken !== void 0) {\n              this.querySet.get(queryToken).journal = journal;\n            }\n          }\n          break;\n        }\n        case \"QueryRemoved\": {\n          this.outstandingQueriesOlderThanRestart.delete(modification.queryId);\n          break;\n        }\n        default: {\n          modification;\n          throw new Error(`Invalid modification ${modification.type}`);\n        }\n      }\n    }\n  }\n  queryId(udfPath, args) {\n    const canonicalizedUdfPath = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_1__.canonicalizeUdfPath)(udfPath);\n    const queryToken = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_1__.serializePathAndArgs)(canonicalizedUdfPath, args);\n    const existingEntry = this.querySet.get(queryToken);\n    if (existingEntry !== void 0) {\n      return existingEntry.id;\n    }\n    return null;\n  }\n  isCurrentOrNewerAuthVersion(version) {\n    return version >= this.identityVersion;\n  }\n  getAuth() {\n    return this.auth;\n  }\n  setAuth(value) {\n    this.auth = {\n      tokenType: \"User\",\n      value\n    };\n    const baseVersion = this.identityVersion;\n    if (!this.paused) {\n      this.identityVersion = baseVersion + 1;\n    }\n    return {\n      type: \"Authenticate\",\n      baseVersion,\n      ...this.auth\n    };\n  }\n  setAdminAuth(value, actingAs) {\n    const auth = {\n      tokenType: \"Admin\",\n      value,\n      impersonating: actingAs\n    };\n    this.auth = auth;\n    const baseVersion = this.identityVersion;\n    if (!this.paused) {\n      this.identityVersion = baseVersion + 1;\n    }\n    return {\n      type: \"Authenticate\",\n      baseVersion,\n      ...auth\n    };\n  }\n  clearAuth() {\n    this.auth = void 0;\n    this.markAuthCompletion();\n    const baseVersion = this.identityVersion;\n    if (!this.paused) {\n      this.identityVersion = baseVersion + 1;\n    }\n    return {\n      type: \"Authenticate\",\n      tokenType: \"None\",\n      baseVersion\n    };\n  }\n  hasAuth() {\n    return !!this.auth;\n  }\n  isNewAuth(value) {\n    return this.auth?.value !== value;\n  }\n  queryPath(queryId) {\n    const pathAndArgs = this.queryIdToToken.get(queryId);\n    if (pathAndArgs) {\n      return this.querySet.get(pathAndArgs).canonicalizedUdfPath;\n    }\n    return null;\n  }\n  queryArgs(queryId) {\n    const pathAndArgs = this.queryIdToToken.get(queryId);\n    if (pathAndArgs) {\n      return this.querySet.get(pathAndArgs).args;\n    }\n    return null;\n  }\n  queryToken(queryId) {\n    return this.queryIdToToken.get(queryId) ?? null;\n  }\n  queryJournal(queryToken) {\n    return this.querySet.get(queryToken)?.journal;\n  }\n  restart(oldRemoteQueryResults) {\n    this.unpause();\n    this.outstandingQueriesOlderThanRestart.clear();\n    const modifications = [];\n    for (const localQuery of this.querySet.values()) {\n      const add = {\n        type: \"Add\",\n        queryId: localQuery.id,\n        udfPath: localQuery.canonicalizedUdfPath,\n        args: [(0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(localQuery.args)],\n        journal: localQuery.journal,\n        componentPath: localQuery.componentPath\n      };\n      modifications.push(add);\n      if (!oldRemoteQueryResults.has(localQuery.id)) {\n        this.outstandingQueriesOlderThanRestart.add(localQuery.id);\n      }\n    }\n    this.querySetVersion = 1;\n    const querySet = {\n      type: \"ModifyQuerySet\",\n      baseVersion: 0,\n      newVersion: 1,\n      modifications\n    };\n    if (!this.auth) {\n      this.identityVersion = 0;\n      return [querySet, void 0];\n    }\n    this.outstandingAuthOlderThanRestart = true;\n    const authenticate = {\n      type: \"Authenticate\",\n      baseVersion: 0,\n      ...this.auth\n    };\n    this.identityVersion = 1;\n    return [querySet, authenticate];\n  }\n  pause() {\n    this.paused = true;\n  }\n  resume() {\n    const querySet = this.pendingQuerySetModifications.size > 0 ? {\n      type: \"ModifyQuerySet\",\n      baseVersion: this.querySetVersion,\n      newVersion: ++this.querySetVersion,\n      modifications: Array.from(\n        this.pendingQuerySetModifications.values()\n      )\n    } : void 0;\n    const authenticate = this.auth !== void 0 ? {\n      type: \"Authenticate\",\n      baseVersion: this.identityVersion++,\n      ...this.auth\n    } : void 0;\n    this.unpause();\n    return [querySet, authenticate];\n  }\n  unpause() {\n    this.paused = false;\n    this.pendingQuerySetModifications.clear();\n  }\n  removeSubscriber(queryToken) {\n    const localQuery = this.querySet.get(queryToken);\n    if (localQuery.numSubscribers > 1) {\n      localQuery.numSubscribers -= 1;\n      return null;\n    } else {\n      this.querySet.delete(queryToken);\n      this.queryIdToToken.delete(localQuery.id);\n      this.outstandingQueriesOlderThanRestart.delete(localQuery.id);\n      const baseVersion = this.querySetVersion;\n      const newVersion = this.querySetVersion + 1;\n      const remove = {\n        type: \"Remove\",\n        queryId: localQuery.id\n      };\n      if (this.paused) {\n        if (this.pendingQuerySetModifications.has(localQuery.id)) {\n          this.pendingQuerySetModifications.delete(localQuery.id);\n        } else {\n          this.pendingQuerySetModifications.set(localQuery.id, remove);\n        }\n      } else {\n        this.querySetVersion = newVersion;\n      }\n      return {\n        type: \"ModifyQuerySet\",\n        baseVersion,\n        newVersion,\n        modifications: [remove]\n      };\n    }\n  }\n}\n//# sourceMappingURL=local_state.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9sb2NhbF9zdGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNxRDtBQUl4QjtBQUN0QjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHVFQUFtQjtBQUNwRCx1QkFBdUIsd0VBQW9CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsOERBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsa0JBQWtCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsdUVBQW1CO0FBQ3BELHVCQUF1Qix3RUFBb0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsOERBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcYnJvd3Nlclxcc3luY1xcbG9jYWxfc3RhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuaW1wb3J0IHsgY29udmV4VG9Kc29uIH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHtcbiAgY2Fub25pY2FsaXplVWRmUGF0aCxcbiAgc2VyaWFsaXplUGF0aEFuZEFyZ3Ncbn0gZnJvbSBcIi4vdWRmX3BhdGhfdXRpbHMuanNcIjtcbmV4cG9ydCBjbGFzcyBMb2NhbFN5bmNTdGF0ZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJuZXh0UXVlcnlJZFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicXVlcnlTZXRWZXJzaW9uXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJxdWVyeVNldFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicXVlcnlJZFRvVG9rZW5cIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImlkZW50aXR5VmVyc2lvblwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiYXV0aFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwib3V0c3RhbmRpbmdRdWVyaWVzT2xkZXJUaGFuUmVzdGFydFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwib3V0c3RhbmRpbmdBdXRoT2xkZXJUaGFuUmVzdGFydFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicGF1c2VkXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJwZW5kaW5nUXVlcnlTZXRNb2RpZmljYXRpb25zXCIpO1xuICAgIHRoaXMubmV4dFF1ZXJ5SWQgPSAwO1xuICAgIHRoaXMucXVlcnlTZXRWZXJzaW9uID0gMDtcbiAgICB0aGlzLmlkZW50aXR5VmVyc2lvbiA9IDA7XG4gICAgdGhpcy5xdWVyeVNldCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgdGhpcy5xdWVyeUlkVG9Ub2tlbiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgdGhpcy5vdXRzdGFuZGluZ1F1ZXJpZXNPbGRlclRoYW5SZXN0YXJ0ID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICB0aGlzLm91dHN0YW5kaW5nQXV0aE9sZGVyVGhhblJlc3RhcnQgPSBmYWxzZTtcbiAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMucGVuZGluZ1F1ZXJ5U2V0TW9kaWZpY2F0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIH1cbiAgaGFzU3luY2VkUGFzdExhc3RSZWNvbm5lY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMub3V0c3RhbmRpbmdRdWVyaWVzT2xkZXJUaGFuUmVzdGFydC5zaXplID09PSAwICYmICF0aGlzLm91dHN0YW5kaW5nQXV0aE9sZGVyVGhhblJlc3RhcnQ7XG4gIH1cbiAgbWFya0F1dGhDb21wbGV0aW9uKCkge1xuICAgIHRoaXMub3V0c3RhbmRpbmdBdXRoT2xkZXJUaGFuUmVzdGFydCA9IGZhbHNlO1xuICB9XG4gIHN1YnNjcmliZSh1ZGZQYXRoLCBhcmdzLCBqb3VybmFsLCBjb21wb25lbnRQYXRoKSB7XG4gICAgY29uc3QgY2Fub25pY2FsaXplZFVkZlBhdGggPSBjYW5vbmljYWxpemVVZGZQYXRoKHVkZlBhdGgpO1xuICAgIGNvbnN0IHF1ZXJ5VG9rZW4gPSBzZXJpYWxpemVQYXRoQW5kQXJncyhjYW5vbmljYWxpemVkVWRmUGF0aCwgYXJncyk7XG4gICAgY29uc3QgZXhpc3RpbmdFbnRyeSA9IHRoaXMucXVlcnlTZXQuZ2V0KHF1ZXJ5VG9rZW4pO1xuICAgIGlmIChleGlzdGluZ0VudHJ5ICE9PSB2b2lkIDApIHtcbiAgICAgIGV4aXN0aW5nRW50cnkubnVtU3Vic2NyaWJlcnMgKz0gMTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHF1ZXJ5VG9rZW4sXG4gICAgICAgIG1vZGlmaWNhdGlvbjogbnVsbCxcbiAgICAgICAgdW5zdWJzY3JpYmU6ICgpID0+IHRoaXMucmVtb3ZlU3Vic2NyaWJlcihxdWVyeVRva2VuKVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcXVlcnlJZCA9IHRoaXMubmV4dFF1ZXJ5SWQrKztcbiAgICAgIGNvbnN0IHF1ZXJ5ID0ge1xuICAgICAgICBpZDogcXVlcnlJZCxcbiAgICAgICAgY2Fub25pY2FsaXplZFVkZlBhdGgsXG4gICAgICAgIGFyZ3MsXG4gICAgICAgIG51bVN1YnNjcmliZXJzOiAxLFxuICAgICAgICBqb3VybmFsLFxuICAgICAgICBjb21wb25lbnRQYXRoXG4gICAgICB9O1xuICAgICAgdGhpcy5xdWVyeVNldC5zZXQocXVlcnlUb2tlbiwgcXVlcnkpO1xuICAgICAgdGhpcy5xdWVyeUlkVG9Ub2tlbi5zZXQocXVlcnlJZCwgcXVlcnlUb2tlbik7XG4gICAgICBjb25zdCBiYXNlVmVyc2lvbiA9IHRoaXMucXVlcnlTZXRWZXJzaW9uO1xuICAgICAgY29uc3QgbmV3VmVyc2lvbiA9IHRoaXMucXVlcnlTZXRWZXJzaW9uICsgMTtcbiAgICAgIGNvbnN0IGFkZCA9IHtcbiAgICAgICAgdHlwZTogXCJBZGRcIixcbiAgICAgICAgcXVlcnlJZCxcbiAgICAgICAgdWRmUGF0aDogY2Fub25pY2FsaXplZFVkZlBhdGgsXG4gICAgICAgIGFyZ3M6IFtjb252ZXhUb0pzb24oYXJncyldLFxuICAgICAgICBqb3VybmFsLFxuICAgICAgICBjb21wb25lbnRQYXRoXG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMucGF1c2VkKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1F1ZXJ5U2V0TW9kaWZpY2F0aW9ucy5zZXQocXVlcnlJZCwgYWRkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVlcnlTZXRWZXJzaW9uID0gbmV3VmVyc2lvbjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1vZGlmaWNhdGlvbiA9IHtcbiAgICAgICAgdHlwZTogXCJNb2RpZnlRdWVyeVNldFwiLFxuICAgICAgICBiYXNlVmVyc2lvbixcbiAgICAgICAgbmV3VmVyc2lvbixcbiAgICAgICAgbW9kaWZpY2F0aW9uczogW2FkZF1cbiAgICAgIH07XG4gICAgICByZXR1cm4ge1xuICAgICAgICBxdWVyeVRva2VuLFxuICAgICAgICBtb2RpZmljYXRpb24sXG4gICAgICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB0aGlzLnJlbW92ZVN1YnNjcmliZXIocXVlcnlUb2tlbilcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIHRyYW5zaXRpb24odHJhbnNpdGlvbikge1xuICAgIGZvciAoY29uc3QgbW9kaWZpY2F0aW9uIG9mIHRyYW5zaXRpb24ubW9kaWZpY2F0aW9ucykge1xuICAgICAgc3dpdGNoIChtb2RpZmljYXRpb24udHlwZSkge1xuICAgICAgICBjYXNlIFwiUXVlcnlVcGRhdGVkXCI6XG4gICAgICAgIGNhc2UgXCJRdWVyeUZhaWxlZFwiOiB7XG4gICAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1F1ZXJpZXNPbGRlclRoYW5SZXN0YXJ0LmRlbGV0ZShtb2RpZmljYXRpb24ucXVlcnlJZCk7XG4gICAgICAgICAgY29uc3Qgam91cm5hbCA9IG1vZGlmaWNhdGlvbi5qb3VybmFsO1xuICAgICAgICAgIGlmIChqb3VybmFsICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5VG9rZW4gPSB0aGlzLnF1ZXJ5SWRUb1Rva2VuLmdldChtb2RpZmljYXRpb24ucXVlcnlJZCk7XG4gICAgICAgICAgICBpZiAocXVlcnlUb2tlbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgIHRoaXMucXVlcnlTZXQuZ2V0KHF1ZXJ5VG9rZW4pLmpvdXJuYWwgPSBqb3VybmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiUXVlcnlSZW1vdmVkXCI6IHtcbiAgICAgICAgICB0aGlzLm91dHN0YW5kaW5nUXVlcmllc09sZGVyVGhhblJlc3RhcnQuZGVsZXRlKG1vZGlmaWNhdGlvbi5xdWVyeUlkKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgbW9kaWZpY2F0aW9uO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBtb2RpZmljYXRpb24gJHttb2RpZmljYXRpb24udHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBxdWVyeUlkKHVkZlBhdGgsIGFyZ3MpIHtcbiAgICBjb25zdCBjYW5vbmljYWxpemVkVWRmUGF0aCA9IGNhbm9uaWNhbGl6ZVVkZlBhdGgodWRmUGF0aCk7XG4gICAgY29uc3QgcXVlcnlUb2tlbiA9IHNlcmlhbGl6ZVBhdGhBbmRBcmdzKGNhbm9uaWNhbGl6ZWRVZGZQYXRoLCBhcmdzKTtcbiAgICBjb25zdCBleGlzdGluZ0VudHJ5ID0gdGhpcy5xdWVyeVNldC5nZXQocXVlcnlUb2tlbik7XG4gICAgaWYgKGV4aXN0aW5nRW50cnkgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIGV4aXN0aW5nRW50cnkuaWQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlzQ3VycmVudE9yTmV3ZXJBdXRoVmVyc2lvbih2ZXJzaW9uKSB7XG4gICAgcmV0dXJuIHZlcnNpb24gPj0gdGhpcy5pZGVudGl0eVZlcnNpb247XG4gIH1cbiAgZ2V0QXV0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5hdXRoO1xuICB9XG4gIHNldEF1dGgodmFsdWUpIHtcbiAgICB0aGlzLmF1dGggPSB7XG4gICAgICB0b2tlblR5cGU6IFwiVXNlclwiLFxuICAgICAgdmFsdWVcbiAgICB9O1xuICAgIGNvbnN0IGJhc2VWZXJzaW9uID0gdGhpcy5pZGVudGl0eVZlcnNpb247XG4gICAgaWYgKCF0aGlzLnBhdXNlZCkge1xuICAgICAgdGhpcy5pZGVudGl0eVZlcnNpb24gPSBiYXNlVmVyc2lvbiArIDE7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcIkF1dGhlbnRpY2F0ZVwiLFxuICAgICAgYmFzZVZlcnNpb24sXG4gICAgICAuLi50aGlzLmF1dGhcbiAgICB9O1xuICB9XG4gIHNldEFkbWluQXV0aCh2YWx1ZSwgYWN0aW5nQXMpIHtcbiAgICBjb25zdCBhdXRoID0ge1xuICAgICAgdG9rZW5UeXBlOiBcIkFkbWluXCIsXG4gICAgICB2YWx1ZSxcbiAgICAgIGltcGVyc29uYXRpbmc6IGFjdGluZ0FzXG4gICAgfTtcbiAgICB0aGlzLmF1dGggPSBhdXRoO1xuICAgIGNvbnN0IGJhc2VWZXJzaW9uID0gdGhpcy5pZGVudGl0eVZlcnNpb247XG4gICAgaWYgKCF0aGlzLnBhdXNlZCkge1xuICAgICAgdGhpcy5pZGVudGl0eVZlcnNpb24gPSBiYXNlVmVyc2lvbiArIDE7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcIkF1dGhlbnRpY2F0ZVwiLFxuICAgICAgYmFzZVZlcnNpb24sXG4gICAgICAuLi5hdXRoXG4gICAgfTtcbiAgfVxuICBjbGVhckF1dGgoKSB7XG4gICAgdGhpcy5hdXRoID0gdm9pZCAwO1xuICAgIHRoaXMubWFya0F1dGhDb21wbGV0aW9uKCk7XG4gICAgY29uc3QgYmFzZVZlcnNpb24gPSB0aGlzLmlkZW50aXR5VmVyc2lvbjtcbiAgICBpZiAoIXRoaXMucGF1c2VkKSB7XG4gICAgICB0aGlzLmlkZW50aXR5VmVyc2lvbiA9IGJhc2VWZXJzaW9uICsgMTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiQXV0aGVudGljYXRlXCIsXG4gICAgICB0b2tlblR5cGU6IFwiTm9uZVwiLFxuICAgICAgYmFzZVZlcnNpb25cbiAgICB9O1xuICB9XG4gIGhhc0F1dGgoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5hdXRoO1xuICB9XG4gIGlzTmV3QXV0aCh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmF1dGg/LnZhbHVlICE9PSB2YWx1ZTtcbiAgfVxuICBxdWVyeVBhdGgocXVlcnlJZCkge1xuICAgIGNvbnN0IHBhdGhBbmRBcmdzID0gdGhpcy5xdWVyeUlkVG9Ub2tlbi5nZXQocXVlcnlJZCk7XG4gICAgaWYgKHBhdGhBbmRBcmdzKSB7XG4gICAgICByZXR1cm4gdGhpcy5xdWVyeVNldC5nZXQocGF0aEFuZEFyZ3MpLmNhbm9uaWNhbGl6ZWRVZGZQYXRoO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBxdWVyeUFyZ3MocXVlcnlJZCkge1xuICAgIGNvbnN0IHBhdGhBbmRBcmdzID0gdGhpcy5xdWVyeUlkVG9Ub2tlbi5nZXQocXVlcnlJZCk7XG4gICAgaWYgKHBhdGhBbmRBcmdzKSB7XG4gICAgICByZXR1cm4gdGhpcy5xdWVyeVNldC5nZXQocGF0aEFuZEFyZ3MpLmFyZ3M7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHF1ZXJ5VG9rZW4ocXVlcnlJZCkge1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5SWRUb1Rva2VuLmdldChxdWVyeUlkKSA/PyBudWxsO1xuICB9XG4gIHF1ZXJ5Sm91cm5hbChxdWVyeVRva2VuKSB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlTZXQuZ2V0KHF1ZXJ5VG9rZW4pPy5qb3VybmFsO1xuICB9XG4gIHJlc3RhcnQob2xkUmVtb3RlUXVlcnlSZXN1bHRzKSB7XG4gICAgdGhpcy51bnBhdXNlKCk7XG4gICAgdGhpcy5vdXRzdGFuZGluZ1F1ZXJpZXNPbGRlclRoYW5SZXN0YXJ0LmNsZWFyKCk7XG4gICAgY29uc3QgbW9kaWZpY2F0aW9ucyA9IFtdO1xuICAgIGZvciAoY29uc3QgbG9jYWxRdWVyeSBvZiB0aGlzLnF1ZXJ5U2V0LnZhbHVlcygpKSB7XG4gICAgICBjb25zdCBhZGQgPSB7XG4gICAgICAgIHR5cGU6IFwiQWRkXCIsXG4gICAgICAgIHF1ZXJ5SWQ6IGxvY2FsUXVlcnkuaWQsXG4gICAgICAgIHVkZlBhdGg6IGxvY2FsUXVlcnkuY2Fub25pY2FsaXplZFVkZlBhdGgsXG4gICAgICAgIGFyZ3M6IFtjb252ZXhUb0pzb24obG9jYWxRdWVyeS5hcmdzKV0sXG4gICAgICAgIGpvdXJuYWw6IGxvY2FsUXVlcnkuam91cm5hbCxcbiAgICAgICAgY29tcG9uZW50UGF0aDogbG9jYWxRdWVyeS5jb21wb25lbnRQYXRoXG4gICAgICB9O1xuICAgICAgbW9kaWZpY2F0aW9ucy5wdXNoKGFkZCk7XG4gICAgICBpZiAoIW9sZFJlbW90ZVF1ZXJ5UmVzdWx0cy5oYXMobG9jYWxRdWVyeS5pZCkpIHtcbiAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1F1ZXJpZXNPbGRlclRoYW5SZXN0YXJ0LmFkZChsb2NhbFF1ZXJ5LmlkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5xdWVyeVNldFZlcnNpb24gPSAxO1xuICAgIGNvbnN0IHF1ZXJ5U2V0ID0ge1xuICAgICAgdHlwZTogXCJNb2RpZnlRdWVyeVNldFwiLFxuICAgICAgYmFzZVZlcnNpb246IDAsXG4gICAgICBuZXdWZXJzaW9uOiAxLFxuICAgICAgbW9kaWZpY2F0aW9uc1xuICAgIH07XG4gICAgaWYgKCF0aGlzLmF1dGgpIHtcbiAgICAgIHRoaXMuaWRlbnRpdHlWZXJzaW9uID0gMDtcbiAgICAgIHJldHVybiBbcXVlcnlTZXQsIHZvaWQgMF07XG4gICAgfVxuICAgIHRoaXMub3V0c3RhbmRpbmdBdXRoT2xkZXJUaGFuUmVzdGFydCA9IHRydWU7XG4gICAgY29uc3QgYXV0aGVudGljYXRlID0ge1xuICAgICAgdHlwZTogXCJBdXRoZW50aWNhdGVcIixcbiAgICAgIGJhc2VWZXJzaW9uOiAwLFxuICAgICAgLi4udGhpcy5hdXRoXG4gICAgfTtcbiAgICB0aGlzLmlkZW50aXR5VmVyc2lvbiA9IDE7XG4gICAgcmV0dXJuIFtxdWVyeVNldCwgYXV0aGVudGljYXRlXTtcbiAgfVxuICBwYXVzZSgpIHtcbiAgICB0aGlzLnBhdXNlZCA9IHRydWU7XG4gIH1cbiAgcmVzdW1lKCkge1xuICAgIGNvbnN0IHF1ZXJ5U2V0ID0gdGhpcy5wZW5kaW5nUXVlcnlTZXRNb2RpZmljYXRpb25zLnNpemUgPiAwID8ge1xuICAgICAgdHlwZTogXCJNb2RpZnlRdWVyeVNldFwiLFxuICAgICAgYmFzZVZlcnNpb246IHRoaXMucXVlcnlTZXRWZXJzaW9uLFxuICAgICAgbmV3VmVyc2lvbjogKyt0aGlzLnF1ZXJ5U2V0VmVyc2lvbixcbiAgICAgIG1vZGlmaWNhdGlvbnM6IEFycmF5LmZyb20oXG4gICAgICAgIHRoaXMucGVuZGluZ1F1ZXJ5U2V0TW9kaWZpY2F0aW9ucy52YWx1ZXMoKVxuICAgICAgKVxuICAgIH0gOiB2b2lkIDA7XG4gICAgY29uc3QgYXV0aGVudGljYXRlID0gdGhpcy5hdXRoICE9PSB2b2lkIDAgPyB7XG4gICAgICB0eXBlOiBcIkF1dGhlbnRpY2F0ZVwiLFxuICAgICAgYmFzZVZlcnNpb246IHRoaXMuaWRlbnRpdHlWZXJzaW9uKyssXG4gICAgICAuLi50aGlzLmF1dGhcbiAgICB9IDogdm9pZCAwO1xuICAgIHRoaXMudW5wYXVzZSgpO1xuICAgIHJldHVybiBbcXVlcnlTZXQsIGF1dGhlbnRpY2F0ZV07XG4gIH1cbiAgdW5wYXVzZSgpIHtcbiAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMucGVuZGluZ1F1ZXJ5U2V0TW9kaWZpY2F0aW9ucy5jbGVhcigpO1xuICB9XG4gIHJlbW92ZVN1YnNjcmliZXIocXVlcnlUb2tlbikge1xuICAgIGNvbnN0IGxvY2FsUXVlcnkgPSB0aGlzLnF1ZXJ5U2V0LmdldChxdWVyeVRva2VuKTtcbiAgICBpZiAobG9jYWxRdWVyeS5udW1TdWJzY3JpYmVycyA+IDEpIHtcbiAgICAgIGxvY2FsUXVlcnkubnVtU3Vic2NyaWJlcnMgLT0gMTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnF1ZXJ5U2V0LmRlbGV0ZShxdWVyeVRva2VuKTtcbiAgICAgIHRoaXMucXVlcnlJZFRvVG9rZW4uZGVsZXRlKGxvY2FsUXVlcnkuaWQpO1xuICAgICAgdGhpcy5vdXRzdGFuZGluZ1F1ZXJpZXNPbGRlclRoYW5SZXN0YXJ0LmRlbGV0ZShsb2NhbFF1ZXJ5LmlkKTtcbiAgICAgIGNvbnN0IGJhc2VWZXJzaW9uID0gdGhpcy5xdWVyeVNldFZlcnNpb247XG4gICAgICBjb25zdCBuZXdWZXJzaW9uID0gdGhpcy5xdWVyeVNldFZlcnNpb24gKyAxO1xuICAgICAgY29uc3QgcmVtb3ZlID0ge1xuICAgICAgICB0eXBlOiBcIlJlbW92ZVwiLFxuICAgICAgICBxdWVyeUlkOiBsb2NhbFF1ZXJ5LmlkXG4gICAgICB9O1xuICAgICAgaWYgKHRoaXMucGF1c2VkKSB7XG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdRdWVyeVNldE1vZGlmaWNhdGlvbnMuaGFzKGxvY2FsUXVlcnkuaWQpKSB7XG4gICAgICAgICAgdGhpcy5wZW5kaW5nUXVlcnlTZXRNb2RpZmljYXRpb25zLmRlbGV0ZShsb2NhbFF1ZXJ5LmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnBlbmRpbmdRdWVyeVNldE1vZGlmaWNhdGlvbnMuc2V0KGxvY2FsUXVlcnkuaWQsIHJlbW92ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVlcnlTZXRWZXJzaW9uID0gbmV3VmVyc2lvbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiTW9kaWZ5UXVlcnlTZXRcIixcbiAgICAgICAgYmFzZVZlcnNpb24sXG4gICAgICAgIG5ld1ZlcnNpb24sXG4gICAgICAgIG1vZGlmaWNhdGlvbnM6IFtyZW1vdmVdXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9jYWxfc3RhdGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/local_state.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/metrics.js":
/*!**************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/metrics.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getMarksReport: () => (/* binding */ getMarksReport),\n/* harmony export */   mark: () => (/* binding */ mark)\n/* harmony export */ });\n\nconst markNames = [\n  \"convexClientConstructed\",\n  \"convexWebSocketOpen\",\n  \"convexFirstMessageReceived\"\n];\nfunction mark(name, sessionId) {\n  const detail = { sessionId };\n  if (typeof performance === \"undefined\" || !performance.mark) return;\n  performance.mark(name, { detail });\n}\nfunction performanceMarkToJson(mark2) {\n  let name = mark2.name.slice(\"convex\".length);\n  name = name.charAt(0).toLowerCase() + name.slice(1);\n  return {\n    name,\n    startTime: mark2.startTime\n  };\n}\nfunction getMarksReport(sessionId) {\n  if (typeof performance === \"undefined\" || !performance.getEntriesByName) {\n    return [];\n  }\n  const allMarks = [];\n  for (const name of markNames) {\n    const marks = performance.getEntriesByName(name).filter((entry) => entry.entryType === \"mark\").filter((mark2) => mark2.detail.sessionId === sessionId);\n    allMarks.push(...marks);\n  }\n  return allMarks.map(performanceMarkToJson);\n}\n//# sourceMappingURL=metrics.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9tZXRyaWNzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxtQkFBbUI7QUFDbkI7QUFDQSwyQkFBMkIsUUFBUTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcYnJvd3Nlclxcc3luY1xcbWV0cmljcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmNvbnN0IG1hcmtOYW1lcyA9IFtcbiAgXCJjb252ZXhDbGllbnRDb25zdHJ1Y3RlZFwiLFxuICBcImNvbnZleFdlYlNvY2tldE9wZW5cIixcbiAgXCJjb252ZXhGaXJzdE1lc3NhZ2VSZWNlaXZlZFwiXG5dO1xuZXhwb3J0IGZ1bmN0aW9uIG1hcmsobmFtZSwgc2Vzc2lvbklkKSB7XG4gIGNvbnN0IGRldGFpbCA9IHsgc2Vzc2lvbklkIH07XG4gIGlmICh0eXBlb2YgcGVyZm9ybWFuY2UgPT09IFwidW5kZWZpbmVkXCIgfHwgIXBlcmZvcm1hbmNlLm1hcmspIHJldHVybjtcbiAgcGVyZm9ybWFuY2UubWFyayhuYW1lLCB7IGRldGFpbCB9KTtcbn1cbmZ1bmN0aW9uIHBlcmZvcm1hbmNlTWFya1RvSnNvbihtYXJrMikge1xuICBsZXQgbmFtZSA9IG1hcmsyLm5hbWUuc2xpY2UoXCJjb252ZXhcIi5sZW5ndGgpO1xuICBuYW1lID0gbmFtZS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIG5hbWUuc2xpY2UoMSk7XG4gIHJldHVybiB7XG4gICAgbmFtZSxcbiAgICBzdGFydFRpbWU6IG1hcmsyLnN0YXJ0VGltZVxuICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE1hcmtzUmVwb3J0KHNlc3Npb25JZCkge1xuICBpZiAodHlwZW9mIHBlcmZvcm1hbmNlID09PSBcInVuZGVmaW5lZFwiIHx8ICFwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlOYW1lKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IGFsbE1hcmtzID0gW107XG4gIGZvciAoY29uc3QgbmFtZSBvZiBtYXJrTmFtZXMpIHtcbiAgICBjb25zdCBtYXJrcyA9IHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeU5hbWUobmFtZSkuZmlsdGVyKChlbnRyeSkgPT4gZW50cnkuZW50cnlUeXBlID09PSBcIm1hcmtcIikuZmlsdGVyKChtYXJrMikgPT4gbWFyazIuZGV0YWlsLnNlc3Npb25JZCA9PT0gc2Vzc2lvbklkKTtcbiAgICBhbGxNYXJrcy5wdXNoKC4uLm1hcmtzKTtcbiAgfVxuICByZXR1cm4gYWxsTWFya3MubWFwKHBlcmZvcm1hbmNlTWFya1RvSnNvbik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRyaWNzLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/metrics.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/optimistic_updates_impl.js":
/*!******************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/optimistic_updates_impl.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OptimisticQueryResults: () => (/* binding */ OptimisticQueryResults)\n/* harmony export */ });\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _logging_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logging.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/logging.js\");\n/* harmony import */ var _udf_path_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./udf_path_utils.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js\");\n/* harmony import */ var _values_errors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../values/errors.js */ \"(ssr)/./node_modules/convex/dist/esm/values/errors.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\nclass OptimisticLocalStoreImpl {\n  constructor(queryResults) {\n    // A references of the query results in OptimisticQueryResults\n    __publicField(this, \"queryResults\");\n    // All of the queries modified by this class\n    __publicField(this, \"modifiedQueries\");\n    this.queryResults = queryResults;\n    this.modifiedQueries = [];\n  }\n  getQuery(query, ...args) {\n    const queryArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args[0]);\n    const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(query);\n    const queryResult = this.queryResults.get(\n      (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_3__.serializePathAndArgs)(name, queryArgs)\n    );\n    if (queryResult === void 0) {\n      return void 0;\n    }\n    return OptimisticLocalStoreImpl.queryValue(queryResult.result);\n  }\n  getAllQueries(query) {\n    const queriesWithName = [];\n    const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(query);\n    for (const queryResult of this.queryResults.values()) {\n      if (queryResult.udfPath === (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_3__.canonicalizeUdfPath)(name)) {\n        queriesWithName.push({\n          args: queryResult.args,\n          value: OptimisticLocalStoreImpl.queryValue(queryResult.result)\n        });\n      }\n    }\n    return queriesWithName;\n  }\n  setQuery(queryReference, args, value) {\n    const queryArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args);\n    const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(queryReference);\n    const queryToken = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_3__.serializePathAndArgs)(name, queryArgs);\n    let result;\n    if (value === void 0) {\n      result = void 0;\n    } else {\n      result = {\n        success: true,\n        value,\n        // It's an optimistic update, so there are no function logs to show.\n        logLines: []\n      };\n    }\n    const query = {\n      udfPath: name,\n      args: queryArgs,\n      result\n    };\n    this.queryResults.set(queryToken, query);\n    this.modifiedQueries.push(queryToken);\n  }\n  static queryValue(result) {\n    if (result === void 0) {\n      return void 0;\n    } else if (result.success) {\n      return result.value;\n    } else {\n      return void 0;\n    }\n  }\n}\nclass OptimisticQueryResults {\n  constructor() {\n    __publicField(this, \"queryResults\");\n    __publicField(this, \"optimisticUpdates\");\n    this.queryResults = /* @__PURE__ */ new Map();\n    this.optimisticUpdates = [];\n  }\n  /**\n   * Apply all optimistic updates on top of server query results\n   */\n  ingestQueryResultsFromServer(serverQueryResults, optimisticUpdatesToDrop) {\n    this.optimisticUpdates = this.optimisticUpdates.filter((updateAndId) => {\n      return !optimisticUpdatesToDrop.has(updateAndId.mutationId);\n    });\n    const oldQueryResults = this.queryResults;\n    this.queryResults = new Map(serverQueryResults);\n    const localStore = new OptimisticLocalStoreImpl(this.queryResults);\n    for (const updateAndId of this.optimisticUpdates) {\n      updateAndId.update(localStore);\n    }\n    const changedQueries = [];\n    for (const [queryToken, query] of this.queryResults) {\n      const oldQuery = oldQueryResults.get(queryToken);\n      if (oldQuery === void 0 || oldQuery.result !== query.result) {\n        changedQueries.push(queryToken);\n      }\n    }\n    return changedQueries;\n  }\n  applyOptimisticUpdate(update, mutationId) {\n    this.optimisticUpdates.push({\n      update,\n      mutationId\n    });\n    const localStore = new OptimisticLocalStoreImpl(this.queryResults);\n    update(localStore);\n    return localStore.modifiedQueries;\n  }\n  /**\n   * \"Raw\" with respect to errors vs values, but query results still have\n   * optimistic updates applied.\n   *\n   * @internal\n   */\n  rawQueryResult(queryToken) {\n    const query = this.queryResults.get(queryToken);\n    if (query === void 0) {\n      return void 0;\n    }\n    return query.result;\n  }\n  queryResult(queryToken) {\n    const query = this.queryResults.get(queryToken);\n    if (query === void 0) {\n      return void 0;\n    }\n    const result = query.result;\n    if (result === void 0) {\n      return void 0;\n    } else if (result.success) {\n      return result.value;\n    } else {\n      if (result.errorData !== void 0) {\n        throw (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.forwardData)(\n          result,\n          new _values_errors_js__WEBPACK_IMPORTED_MODULE_4__.ConvexError(\n            (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.createHybridErrorStacktrace)(\"query\", query.udfPath, result)\n          )\n        );\n      }\n      throw new Error(\n        (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.createHybridErrorStacktrace)(\"query\", query.udfPath, result)\n      );\n    }\n  }\n  hasQueryResult(queryToken) {\n    return this.queryResults.get(queryToken) !== void 0;\n  }\n  /**\n   * @internal\n   */\n  queryLogs(queryToken) {\n    const query = this.queryResults.get(queryToken);\n    return query?.result?.logLines;\n  }\n}\n//# sourceMappingURL=optimistic_updates_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9vcHRpbWlzdGljX3VwZGF0ZXNfaW1wbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUc2QjtBQUNxQjtBQUN1QjtBQUk1QztBQUN3QjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyREFBUztBQUMvQixpQkFBaUIsK0RBQWU7QUFDaEM7QUFDQSxNQUFNLHdFQUFvQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFlO0FBQ2hDO0FBQ0Esa0NBQWtDLHVFQUFtQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyREFBUztBQUMvQixpQkFBaUIsK0RBQWU7QUFDaEMsdUJBQXVCLHdFQUFvQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQSxjQUFjLHdEQUFXO0FBQ3pCO0FBQ0EsY0FBYywwREFBVztBQUN6QixZQUFZLHdFQUEyQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsd0VBQTJCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxicm93c2VyXFxzeW5jXFxvcHRpbWlzdGljX3VwZGF0ZXNfaW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG5pbXBvcnQge1xuICBnZXRGdW5jdGlvbk5hbWVcbn0gZnJvbSBcIi4uLy4uL3NlcnZlci9hcGkuanNcIjtcbmltcG9ydCB7IHBhcnNlQXJncyB9IGZyb20gXCIuLi8uLi9jb21tb24vaW5kZXguanNcIjtcbmltcG9ydCB7IGNyZWF0ZUh5YnJpZEVycm9yU3RhY2t0cmFjZSwgZm9yd2FyZERhdGEgfSBmcm9tIFwiLi4vbG9nZ2luZy5qc1wiO1xuaW1wb3J0IHtcbiAgY2Fub25pY2FsaXplVWRmUGF0aCxcbiAgc2VyaWFsaXplUGF0aEFuZEFyZ3Ncbn0gZnJvbSBcIi4vdWRmX3BhdGhfdXRpbHMuanNcIjtcbmltcG9ydCB7IENvbnZleEVycm9yIH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy9lcnJvcnMuanNcIjtcbmNsYXNzIE9wdGltaXN0aWNMb2NhbFN0b3JlSW1wbCB7XG4gIGNvbnN0cnVjdG9yKHF1ZXJ5UmVzdWx0cykge1xuICAgIC8vIEEgcmVmZXJlbmNlcyBvZiB0aGUgcXVlcnkgcmVzdWx0cyBpbiBPcHRpbWlzdGljUXVlcnlSZXN1bHRzXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInF1ZXJ5UmVzdWx0c1wiKTtcbiAgICAvLyBBbGwgb2YgdGhlIHF1ZXJpZXMgbW9kaWZpZWQgYnkgdGhpcyBjbGFzc1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJtb2RpZmllZFF1ZXJpZXNcIik7XG4gICAgdGhpcy5xdWVyeVJlc3VsdHMgPSBxdWVyeVJlc3VsdHM7XG4gICAgdGhpcy5tb2RpZmllZFF1ZXJpZXMgPSBbXTtcbiAgfVxuICBnZXRRdWVyeShxdWVyeSwgLi4uYXJncykge1xuICAgIGNvbnN0IHF1ZXJ5QXJncyA9IHBhcnNlQXJncyhhcmdzWzBdKTtcbiAgICBjb25zdCBuYW1lID0gZ2V0RnVuY3Rpb25OYW1lKHF1ZXJ5KTtcbiAgICBjb25zdCBxdWVyeVJlc3VsdCA9IHRoaXMucXVlcnlSZXN1bHRzLmdldChcbiAgICAgIHNlcmlhbGl6ZVBhdGhBbmRBcmdzKG5hbWUsIHF1ZXJ5QXJncylcbiAgICApO1xuICAgIGlmIChxdWVyeVJlc3VsdCA9PT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICByZXR1cm4gT3B0aW1pc3RpY0xvY2FsU3RvcmVJbXBsLnF1ZXJ5VmFsdWUocXVlcnlSZXN1bHQucmVzdWx0KTtcbiAgfVxuICBnZXRBbGxRdWVyaWVzKHF1ZXJ5KSB7XG4gICAgY29uc3QgcXVlcmllc1dpdGhOYW1lID0gW107XG4gICAgY29uc3QgbmFtZSA9IGdldEZ1bmN0aW9uTmFtZShxdWVyeSk7XG4gICAgZm9yIChjb25zdCBxdWVyeVJlc3VsdCBvZiB0aGlzLnF1ZXJ5UmVzdWx0cy52YWx1ZXMoKSkge1xuICAgICAgaWYgKHF1ZXJ5UmVzdWx0LnVkZlBhdGggPT09IGNhbm9uaWNhbGl6ZVVkZlBhdGgobmFtZSkpIHtcbiAgICAgICAgcXVlcmllc1dpdGhOYW1lLnB1c2goe1xuICAgICAgICAgIGFyZ3M6IHF1ZXJ5UmVzdWx0LmFyZ3MsXG4gICAgICAgICAgdmFsdWU6IE9wdGltaXN0aWNMb2NhbFN0b3JlSW1wbC5xdWVyeVZhbHVlKHF1ZXJ5UmVzdWx0LnJlc3VsdClcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBxdWVyaWVzV2l0aE5hbWU7XG4gIH1cbiAgc2V0UXVlcnkocXVlcnlSZWZlcmVuY2UsIGFyZ3MsIHZhbHVlKSB7XG4gICAgY29uc3QgcXVlcnlBcmdzID0gcGFyc2VBcmdzKGFyZ3MpO1xuICAgIGNvbnN0IG5hbWUgPSBnZXRGdW5jdGlvbk5hbWUocXVlcnlSZWZlcmVuY2UpO1xuICAgIGNvbnN0IHF1ZXJ5VG9rZW4gPSBzZXJpYWxpemVQYXRoQW5kQXJncyhuYW1lLCBxdWVyeUFyZ3MpO1xuICAgIGxldCByZXN1bHQ7XG4gICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgIHJlc3VsdCA9IHZvaWQgMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgLy8gSXQncyBhbiBvcHRpbWlzdGljIHVwZGF0ZSwgc28gdGhlcmUgYXJlIG5vIGZ1bmN0aW9uIGxvZ3MgdG8gc2hvdy5cbiAgICAgICAgbG9nTGluZXM6IFtdXG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBxdWVyeSA9IHtcbiAgICAgIHVkZlBhdGg6IG5hbWUsXG4gICAgICBhcmdzOiBxdWVyeUFyZ3MsXG4gICAgICByZXN1bHRcbiAgICB9O1xuICAgIHRoaXMucXVlcnlSZXN1bHRzLnNldChxdWVyeVRva2VuLCBxdWVyeSk7XG4gICAgdGhpcy5tb2RpZmllZFF1ZXJpZXMucHVzaChxdWVyeVRva2VuKTtcbiAgfVxuICBzdGF0aWMgcXVlcnlWYWx1ZShyZXN1bHQpIHtcbiAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfSBlbHNlIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBjbGFzcyBPcHRpbWlzdGljUXVlcnlSZXN1bHRzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInF1ZXJ5UmVzdWx0c1wiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwib3B0aW1pc3RpY1VwZGF0ZXNcIik7XG4gICAgdGhpcy5xdWVyeVJlc3VsdHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIHRoaXMub3B0aW1pc3RpY1VwZGF0ZXMgPSBbXTtcbiAgfVxuICAvKipcbiAgICogQXBwbHkgYWxsIG9wdGltaXN0aWMgdXBkYXRlcyBvbiB0b3Agb2Ygc2VydmVyIHF1ZXJ5IHJlc3VsdHNcbiAgICovXG4gIGluZ2VzdFF1ZXJ5UmVzdWx0c0Zyb21TZXJ2ZXIoc2VydmVyUXVlcnlSZXN1bHRzLCBvcHRpbWlzdGljVXBkYXRlc1RvRHJvcCkge1xuICAgIHRoaXMub3B0aW1pc3RpY1VwZGF0ZXMgPSB0aGlzLm9wdGltaXN0aWNVcGRhdGVzLmZpbHRlcigodXBkYXRlQW5kSWQpID0+IHtcbiAgICAgIHJldHVybiAhb3B0aW1pc3RpY1VwZGF0ZXNUb0Ryb3AuaGFzKHVwZGF0ZUFuZElkLm11dGF0aW9uSWQpO1xuICAgIH0pO1xuICAgIGNvbnN0IG9sZFF1ZXJ5UmVzdWx0cyA9IHRoaXMucXVlcnlSZXN1bHRzO1xuICAgIHRoaXMucXVlcnlSZXN1bHRzID0gbmV3IE1hcChzZXJ2ZXJRdWVyeVJlc3VsdHMpO1xuICAgIGNvbnN0IGxvY2FsU3RvcmUgPSBuZXcgT3B0aW1pc3RpY0xvY2FsU3RvcmVJbXBsKHRoaXMucXVlcnlSZXN1bHRzKTtcbiAgICBmb3IgKGNvbnN0IHVwZGF0ZUFuZElkIG9mIHRoaXMub3B0aW1pc3RpY1VwZGF0ZXMpIHtcbiAgICAgIHVwZGF0ZUFuZElkLnVwZGF0ZShsb2NhbFN0b3JlKTtcbiAgICB9XG4gICAgY29uc3QgY2hhbmdlZFF1ZXJpZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFtxdWVyeVRva2VuLCBxdWVyeV0gb2YgdGhpcy5xdWVyeVJlc3VsdHMpIHtcbiAgICAgIGNvbnN0IG9sZFF1ZXJ5ID0gb2xkUXVlcnlSZXN1bHRzLmdldChxdWVyeVRva2VuKTtcbiAgICAgIGlmIChvbGRRdWVyeSA9PT0gdm9pZCAwIHx8IG9sZFF1ZXJ5LnJlc3VsdCAhPT0gcXVlcnkucmVzdWx0KSB7XG4gICAgICAgIGNoYW5nZWRRdWVyaWVzLnB1c2gocXVlcnlUb2tlbik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGFuZ2VkUXVlcmllcztcbiAgfVxuICBhcHBseU9wdGltaXN0aWNVcGRhdGUodXBkYXRlLCBtdXRhdGlvbklkKSB7XG4gICAgdGhpcy5vcHRpbWlzdGljVXBkYXRlcy5wdXNoKHtcbiAgICAgIHVwZGF0ZSxcbiAgICAgIG11dGF0aW9uSWRcbiAgICB9KTtcbiAgICBjb25zdCBsb2NhbFN0b3JlID0gbmV3IE9wdGltaXN0aWNMb2NhbFN0b3JlSW1wbCh0aGlzLnF1ZXJ5UmVzdWx0cyk7XG4gICAgdXBkYXRlKGxvY2FsU3RvcmUpO1xuICAgIHJldHVybiBsb2NhbFN0b3JlLm1vZGlmaWVkUXVlcmllcztcbiAgfVxuICAvKipcbiAgICogXCJSYXdcIiB3aXRoIHJlc3BlY3QgdG8gZXJyb3JzIHZzIHZhbHVlcywgYnV0IHF1ZXJ5IHJlc3VsdHMgc3RpbGwgaGF2ZVxuICAgKiBvcHRpbWlzdGljIHVwZGF0ZXMgYXBwbGllZC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICByYXdRdWVyeVJlc3VsdChxdWVyeVRva2VuKSB7XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnF1ZXJ5UmVzdWx0cy5nZXQocXVlcnlUb2tlbik7XG4gICAgaWYgKHF1ZXJ5ID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIHJldHVybiBxdWVyeS5yZXN1bHQ7XG4gIH1cbiAgcXVlcnlSZXN1bHQocXVlcnlUb2tlbikge1xuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5xdWVyeVJlc3VsdHMuZ2V0KHF1ZXJ5VG9rZW4pO1xuICAgIGlmIChxdWVyeSA9PT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBxdWVyeS5yZXN1bHQ7XG4gICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH0gZWxzZSBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiByZXN1bHQudmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChyZXN1bHQuZXJyb3JEYXRhICE9PSB2b2lkIDApIHtcbiAgICAgICAgdGhyb3cgZm9yd2FyZERhdGEoXG4gICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgIG5ldyBDb252ZXhFcnJvcihcbiAgICAgICAgICAgIGNyZWF0ZUh5YnJpZEVycm9yU3RhY2t0cmFjZShcInF1ZXJ5XCIsIHF1ZXJ5LnVkZlBhdGgsIHJlc3VsdClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGNyZWF0ZUh5YnJpZEVycm9yU3RhY2t0cmFjZShcInF1ZXJ5XCIsIHF1ZXJ5LnVkZlBhdGgsIHJlc3VsdClcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGhhc1F1ZXJ5UmVzdWx0KHF1ZXJ5VG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVJlc3VsdHMuZ2V0KHF1ZXJ5VG9rZW4pICE9PSB2b2lkIDA7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcXVlcnlMb2dzKHF1ZXJ5VG9rZW4pIHtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMucXVlcnlSZXN1bHRzLmdldChxdWVyeVRva2VuKTtcbiAgICByZXR1cm4gcXVlcnk/LnJlc3VsdD8ubG9nTGluZXM7XG4gIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGltaXN0aWNfdXBkYXRlc19pbXBsLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/optimistic_updates_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/paginated_query_client.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/paginated_query_client.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PaginatedQueryClient: () => (/* binding */ PaginatedQueryClient)\n/* harmony export */ });\n/* harmony import */ var _udf_path_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./udf_path_utils.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js\");\n/* harmony import */ var _pagination_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pagination.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/pagination.js\");\n/* harmony import */ var _vendor_long_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../vendor/long.js */ \"(ssr)/./node_modules/convex/dist/esm/vendor/long.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\nclass PaginatedQueryClient {\n  constructor(client, onTransition) {\n    this.client = client;\n    this.onTransition = onTransition;\n    __publicField(this, \"paginatedQuerySet\", /* @__PURE__ */ new Map());\n    // hold onto a real Transition so we can construct synthetic ones with that timestamp\n    __publicField(this, \"lastTransitionTs\");\n    this.lastTransitionTs = _vendor_long_js__WEBPACK_IMPORTED_MODULE_2__.Long.fromNumber(0);\n    this.client.addOnTransitionHandler(\n      (transition) => this.onBaseTransition(transition)\n    );\n  }\n  /**\n   * Subscribe to a paginated query.\n   *\n   * @param name - The name of the paginated query function\n   * @param args - Arguments for the query (excluding paginationOpts)\n   * @param options - Pagination options including initialNumItems\n   * @returns Object with paginatedQueryToken and unsubscribe function\n   */\n  subscribe(name, args, options) {\n    const canonicalizedUdfPath = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_0__.canonicalizeUdfPath)(name);\n    const token = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_0__.serializePaginatedPathAndArgs)(\n      canonicalizedUdfPath,\n      args,\n      options\n    );\n    const unsubscribe = () => this.removePaginatedQuerySubscriber(token);\n    const existingEntry = this.paginatedQuerySet.get(token);\n    if (existingEntry) {\n      existingEntry.numSubscribers += 1;\n      return {\n        paginatedQueryToken: token,\n        unsubscribe\n      };\n    }\n    this.paginatedQuerySet.set(token, {\n      token,\n      canonicalizedUdfPath,\n      args,\n      numSubscribers: 1,\n      options: { initialNumItems: options.initialNumItems },\n      nextPageKey: 0,\n      pageKeys: [],\n      pageKeyToQuery: /* @__PURE__ */ new Map(),\n      ongoingSplits: /* @__PURE__ */ new Map(),\n      skip: false,\n      id: options.id\n    });\n    this.addPageToPaginatedQuery(token, null, options.initialNumItems);\n    return {\n      paginatedQueryToken: token,\n      unsubscribe\n    };\n  }\n  /**\n   * Get current results for a paginated query based on local state.\n   *\n   * Throws an error when one of the pages has errored.\n   */\n  localQueryResult(name, args, options) {\n    const canonicalizedUdfPath = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_0__.canonicalizeUdfPath)(name);\n    const token = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_0__.serializePaginatedPathAndArgs)(\n      canonicalizedUdfPath,\n      args,\n      options\n    );\n    return this.localQueryResultByToken(token);\n  }\n  /**\n   * @internal\n   */\n  localQueryResultByToken(token) {\n    const paginatedQuery = this.paginatedQuerySet.get(token);\n    if (!paginatedQuery) {\n      return void 0;\n    }\n    const activePages = this.activePageQueryTokens(paginatedQuery);\n    if (activePages.length === 0) {\n      return {\n        results: [],\n        status: \"LoadingFirstPage\",\n        loadMore: (numItems) => {\n          return this.loadMoreOfPaginatedQuery(token, numItems);\n        }\n      };\n    }\n    let allResults = [];\n    let hasUndefined = false;\n    let isDone = false;\n    for (const pageToken of activePages) {\n      const result = this.client.localQueryResultByToken(pageToken);\n      if (result === void 0) {\n        hasUndefined = true;\n        isDone = false;\n        continue;\n      }\n      const paginationResult = (0,_pagination_js__WEBPACK_IMPORTED_MODULE_1__.asPaginationResult)(result);\n      allResults = allResults.concat(paginationResult.page);\n      isDone = !!paginationResult.isDone;\n    }\n    let status;\n    if (hasUndefined) {\n      status = allResults.length === 0 ? \"LoadingFirstPage\" : \"LoadingMore\";\n    } else if (isDone) {\n      status = \"Exhausted\";\n    } else {\n      status = \"CanLoadMore\";\n    }\n    return {\n      results: allResults,\n      status,\n      loadMore: (numItems) => {\n        return this.loadMoreOfPaginatedQuery(token, numItems);\n      }\n    };\n  }\n  onBaseTransition(transition) {\n    const changedBaseTokens = transition.queries.map((q) => q.token);\n    const changed = this.queriesContainingTokens(changedBaseTokens);\n    let paginatedQueries = [];\n    if (changed.length > 0) {\n      this.processPaginatedQuerySplits(\n        changed,\n        (token) => this.client.localQueryResultByToken(token)\n      );\n      paginatedQueries = changed.map((token) => ({\n        token,\n        modification: {\n          kind: \"Updated\",\n          result: this.localQueryResultByToken(token)\n        }\n      }));\n    }\n    const extendedTransition = {\n      ...transition,\n      paginatedQueries\n    };\n    this.onTransition(extendedTransition);\n  }\n  /**\n   * Load more items for a paginated query.\n   *\n   * This *always* causes a transition, the status of the query\n   * has probably changed from \"CanLoadMore\" to \"LoadingMore\".\n   * Data might have changed too: maybe a subscription to this page\n   * query already exists (unlikely but possible) or this page query\n   * has an optimistic update providing some initial data.\n   *\n   * @internal\n   */\n  loadMoreOfPaginatedQuery(token, numItems) {\n    this.mustGetPaginatedQuery(token);\n    const lastPageToken = this.queryTokenForLastPageOfPaginatedQuery(token);\n    const lastPageResult = this.client.localQueryResultByToken(lastPageToken);\n    if (!lastPageResult) {\n      return false;\n    }\n    const paginationResult = (0,_pagination_js__WEBPACK_IMPORTED_MODULE_1__.asPaginationResult)(lastPageResult);\n    if (paginationResult.isDone) {\n      return false;\n    }\n    this.addPageToPaginatedQuery(\n      token,\n      paginationResult.continueCursor,\n      numItems\n    );\n    const loadMoreTransition = {\n      timestamp: this.lastTransitionTs,\n      reflectedMutations: [],\n      queries: [],\n      paginatedQueries: [\n        {\n          token,\n          modification: {\n            kind: \"Updated\",\n            result: this.localQueryResultByToken(token)\n          }\n        }\n      ]\n    };\n    this.onTransition(loadMoreTransition);\n    return true;\n  }\n  /**\n   * @internal\n   */\n  queriesContainingTokens(queryTokens) {\n    if (queryTokens.length === 0) {\n      return [];\n    }\n    const changed = [];\n    const queryTokenSet = new Set(queryTokens);\n    for (const [paginatedToken, paginatedQuery] of this.paginatedQuerySet) {\n      for (const pageToken of this.allQueryTokens(paginatedQuery)) {\n        if (queryTokenSet.has(pageToken)) {\n          changed.push(paginatedToken);\n          break;\n        }\n      }\n    }\n    return changed;\n  }\n  /**\n   * @internal\n   */\n  processPaginatedQuerySplits(changed, getResult) {\n    for (const paginatedQueryToken of changed) {\n      const paginatedQuery = this.mustGetPaginatedQuery(paginatedQueryToken);\n      const { ongoingSplits, pageKeyToQuery, pageKeys } = paginatedQuery;\n      for (const [pageKey, [splitKey1, splitKey2]] of ongoingSplits) {\n        const bothNewPagesLoaded = getResult(pageKeyToQuery.get(splitKey1).queryToken) !== void 0 && getResult(pageKeyToQuery.get(splitKey2).queryToken) !== void 0;\n        if (bothNewPagesLoaded) {\n          this.completePaginatedQuerySplit(\n            paginatedQuery,\n            pageKey,\n            splitKey1,\n            splitKey2\n          );\n        }\n      }\n      for (const pageKey of pageKeys) {\n        if (ongoingSplits.has(pageKey)) {\n          continue;\n        }\n        const pageToken = pageKeyToQuery.get(pageKey).queryToken;\n        const pageResult = getResult(pageToken);\n        if (!pageResult) {\n          continue;\n        }\n        const result = (0,_pagination_js__WEBPACK_IMPORTED_MODULE_1__.asPaginationResult)(pageResult);\n        const shouldSplit = result.splitCursor && (result.pageStatus === \"SplitRecommended\" || result.pageStatus === \"SplitRequired\" || // This client-driven page splitting condition will change in the future.\n        result.page.length > paginatedQuery.options.initialNumItems * 2);\n        if (shouldSplit) {\n          this.splitPaginatedQueryPage(\n            paginatedQuery,\n            pageKey,\n            result.splitCursor,\n            // we just checked\n            result.continueCursor\n          );\n        }\n      }\n    }\n  }\n  splitPaginatedQueryPage(paginatedQuery, pageKey, splitCursor, continueCursor) {\n    const splitKey1 = paginatedQuery.nextPageKey++;\n    const splitKey2 = paginatedQuery.nextPageKey++;\n    const paginationOpts = {\n      cursor: continueCursor,\n      numItems: paginatedQuery.options.initialNumItems,\n      id: paginatedQuery.id\n    };\n    const firstSubscription = this.client.subscribe(\n      paginatedQuery.canonicalizedUdfPath,\n      {\n        ...paginatedQuery.args,\n        paginationOpts: {\n          ...paginationOpts,\n          cursor: null,\n          // Start from beginning for first split\n          endCursor: splitCursor\n        }\n      }\n    );\n    paginatedQuery.pageKeyToQuery.set(splitKey1, firstSubscription);\n    const secondSubscription = this.client.subscribe(\n      paginatedQuery.canonicalizedUdfPath,\n      {\n        ...paginatedQuery.args,\n        paginationOpts: {\n          ...paginationOpts,\n          cursor: splitCursor,\n          endCursor: continueCursor\n        }\n      }\n    );\n    paginatedQuery.pageKeyToQuery.set(splitKey2, secondSubscription);\n    paginatedQuery.ongoingSplits.set(pageKey, [splitKey1, splitKey2]);\n  }\n  /**\n   * @internal\n   */\n  addPageToPaginatedQuery(token, continueCursor, numItems) {\n    const paginatedQuery = this.mustGetPaginatedQuery(token);\n    const pageKey = paginatedQuery.nextPageKey++;\n    const paginationOpts = {\n      cursor: continueCursor,\n      numItems,\n      id: paginatedQuery.id\n    };\n    const pageArgs = {\n      ...paginatedQuery.args,\n      paginationOpts\n    };\n    const subscription = this.client.subscribe(\n      paginatedQuery.canonicalizedUdfPath,\n      pageArgs\n    );\n    paginatedQuery.pageKeys.push(pageKey);\n    paginatedQuery.pageKeyToQuery.set(pageKey, subscription);\n    return subscription;\n  }\n  removePaginatedQuerySubscriber(token) {\n    const paginatedQuery = this.paginatedQuerySet.get(token);\n    if (!paginatedQuery) {\n      return;\n    }\n    paginatedQuery.numSubscribers -= 1;\n    if (paginatedQuery.numSubscribers > 0) {\n      return;\n    }\n    for (const subscription of paginatedQuery.pageKeyToQuery.values()) {\n      subscription.unsubscribe();\n    }\n    this.paginatedQuerySet.delete(token);\n  }\n  completePaginatedQuerySplit(paginatedQuery, pageKey, splitKey1, splitKey2) {\n    const originalQuery = paginatedQuery.pageKeyToQuery.get(pageKey);\n    paginatedQuery.pageKeyToQuery.delete(pageKey);\n    const pageIndex = paginatedQuery.pageKeys.indexOf(pageKey);\n    paginatedQuery.pageKeys.splice(pageIndex, 1, splitKey1, splitKey2);\n    paginatedQuery.ongoingSplits.delete(pageKey);\n    originalQuery.unsubscribe();\n  }\n  /** The query tokens for all active pages, in result order */\n  activePageQueryTokens(paginatedQuery) {\n    return paginatedQuery.pageKeys.map(\n      (pageKey) => paginatedQuery.pageKeyToQuery.get(pageKey).queryToken\n    );\n  }\n  allQueryTokens(paginatedQuery) {\n    return Array.from(paginatedQuery.pageKeyToQuery.values()).map(\n      (sub) => sub.queryToken\n    );\n  }\n  queryTokenForLastPageOfPaginatedQuery(token) {\n    const paginatedQuery = this.mustGetPaginatedQuery(token);\n    const lastPageKey = paginatedQuery.pageKeys[paginatedQuery.pageKeys.length - 1];\n    if (lastPageKey === void 0) {\n      throw new Error(`No pages for paginated query ${token}`);\n    }\n    return paginatedQuery.pageKeyToQuery.get(lastPageKey).queryToken;\n  }\n  mustGetPaginatedQuery(token) {\n    const paginatedQuery = this.paginatedQuerySet.get(token);\n    if (!paginatedQuery) {\n      throw new Error(\"paginated query no longer exists for token \" + token);\n    }\n    return paginatedQuery;\n  }\n}\n//# sourceMappingURL=paginated_query_client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9wYWdpbmF0ZWRfcXVlcnlfY2xpZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUk2QjtBQUdKO0FBQ21CO0FBQ3JDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGlEQUFJO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHVFQUFtQjtBQUNwRCxrQkFBa0IsaUZBQTZCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwwQ0FBMEM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx1RUFBbUI7QUFDcEQsa0JBQWtCLGlGQUE2QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixrRUFBa0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGtFQUFrQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywwQ0FBMEM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrRUFBa0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsTUFBTTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcYnJvd3Nlclxcc3luY1xccGFnaW5hdGVkX3F1ZXJ5X2NsaWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG5pbXBvcnQge1xuICBzZXJpYWxpemVQYWdpbmF0ZWRQYXRoQW5kQXJncyxcbiAgY2Fub25pY2FsaXplVWRmUGF0aFxufSBmcm9tIFwiLi91ZGZfcGF0aF91dGlscy5qc1wiO1xuaW1wb3J0IHtcbiAgYXNQYWdpbmF0aW9uUmVzdWx0XG59IGZyb20gXCIuL3BhZ2luYXRpb24uanNcIjtcbmltcG9ydCB7IExvbmcgfSBmcm9tIFwiLi4vLi4vdmVuZG9yL2xvbmcuanNcIjtcbmV4cG9ydCBjbGFzcyBQYWdpbmF0ZWRRdWVyeUNsaWVudCB7XG4gIGNvbnN0cnVjdG9yKGNsaWVudCwgb25UcmFuc2l0aW9uKSB7XG4gICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gICAgdGhpcy5vblRyYW5zaXRpb24gPSBvblRyYW5zaXRpb247XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInBhZ2luYXRlZFF1ZXJ5U2V0XCIsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpO1xuICAgIC8vIGhvbGQgb250byBhIHJlYWwgVHJhbnNpdGlvbiBzbyB3ZSBjYW4gY29uc3RydWN0IHN5bnRoZXRpYyBvbmVzIHdpdGggdGhhdCB0aW1lc3RhbXBcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwibGFzdFRyYW5zaXRpb25Uc1wiKTtcbiAgICB0aGlzLmxhc3RUcmFuc2l0aW9uVHMgPSBMb25nLmZyb21OdW1iZXIoMCk7XG4gICAgdGhpcy5jbGllbnQuYWRkT25UcmFuc2l0aW9uSGFuZGxlcihcbiAgICAgICh0cmFuc2l0aW9uKSA9PiB0aGlzLm9uQmFzZVRyYW5zaXRpb24odHJhbnNpdGlvbilcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gYSBwYWdpbmF0ZWQgcXVlcnkuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHBhZ2luYXRlZCBxdWVyeSBmdW5jdGlvblxuICAgKiBAcGFyYW0gYXJncyAtIEFyZ3VtZW50cyBmb3IgdGhlIHF1ZXJ5IChleGNsdWRpbmcgcGFnaW5hdGlvbk9wdHMpXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gUGFnaW5hdGlvbiBvcHRpb25zIGluY2x1ZGluZyBpbml0aWFsTnVtSXRlbXNcbiAgICogQHJldHVybnMgT2JqZWN0IHdpdGggcGFnaW5hdGVkUXVlcnlUb2tlbiBhbmQgdW5zdWJzY3JpYmUgZnVuY3Rpb25cbiAgICovXG4gIHN1YnNjcmliZShuYW1lLCBhcmdzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgY2Fub25pY2FsaXplZFVkZlBhdGggPSBjYW5vbmljYWxpemVVZGZQYXRoKG5hbWUpO1xuICAgIGNvbnN0IHRva2VuID0gc2VyaWFsaXplUGFnaW5hdGVkUGF0aEFuZEFyZ3MoXG4gICAgICBjYW5vbmljYWxpemVkVWRmUGF0aCxcbiAgICAgIGFyZ3MsXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgICBjb25zdCB1bnN1YnNjcmliZSA9ICgpID0+IHRoaXMucmVtb3ZlUGFnaW5hdGVkUXVlcnlTdWJzY3JpYmVyKHRva2VuKTtcbiAgICBjb25zdCBleGlzdGluZ0VudHJ5ID0gdGhpcy5wYWdpbmF0ZWRRdWVyeVNldC5nZXQodG9rZW4pO1xuICAgIGlmIChleGlzdGluZ0VudHJ5KSB7XG4gICAgICBleGlzdGluZ0VudHJ5Lm51bVN1YnNjcmliZXJzICs9IDE7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYWdpbmF0ZWRRdWVyeVRva2VuOiB0b2tlbixcbiAgICAgICAgdW5zdWJzY3JpYmVcbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMucGFnaW5hdGVkUXVlcnlTZXQuc2V0KHRva2VuLCB7XG4gICAgICB0b2tlbixcbiAgICAgIGNhbm9uaWNhbGl6ZWRVZGZQYXRoLFxuICAgICAgYXJncyxcbiAgICAgIG51bVN1YnNjcmliZXJzOiAxLFxuICAgICAgb3B0aW9uczogeyBpbml0aWFsTnVtSXRlbXM6IG9wdGlvbnMuaW5pdGlhbE51bUl0ZW1zIH0sXG4gICAgICBuZXh0UGFnZUtleTogMCxcbiAgICAgIHBhZ2VLZXlzOiBbXSxcbiAgICAgIHBhZ2VLZXlUb1F1ZXJ5OiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLFxuICAgICAgb25nb2luZ1NwbGl0czogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSxcbiAgICAgIHNraXA6IGZhbHNlLFxuICAgICAgaWQ6IG9wdGlvbnMuaWRcbiAgICB9KTtcbiAgICB0aGlzLmFkZFBhZ2VUb1BhZ2luYXRlZFF1ZXJ5KHRva2VuLCBudWxsLCBvcHRpb25zLmluaXRpYWxOdW1JdGVtcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhZ2luYXRlZFF1ZXJ5VG9rZW46IHRva2VuLFxuICAgICAgdW5zdWJzY3JpYmVcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCByZXN1bHRzIGZvciBhIHBhZ2luYXRlZCBxdWVyeSBiYXNlZCBvbiBsb2NhbCBzdGF0ZS5cbiAgICpcbiAgICogVGhyb3dzIGFuIGVycm9yIHdoZW4gb25lIG9mIHRoZSBwYWdlcyBoYXMgZXJyb3JlZC5cbiAgICovXG4gIGxvY2FsUXVlcnlSZXN1bHQobmFtZSwgYXJncywgb3B0aW9ucykge1xuICAgIGNvbnN0IGNhbm9uaWNhbGl6ZWRVZGZQYXRoID0gY2Fub25pY2FsaXplVWRmUGF0aChuYW1lKTtcbiAgICBjb25zdCB0b2tlbiA9IHNlcmlhbGl6ZVBhZ2luYXRlZFBhdGhBbmRBcmdzKFxuICAgICAgY2Fub25pY2FsaXplZFVkZlBhdGgsXG4gICAgICBhcmdzLFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxRdWVyeVJlc3VsdEJ5VG9rZW4odG9rZW4pO1xuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGxvY2FsUXVlcnlSZXN1bHRCeVRva2VuKHRva2VuKSB7XG4gICAgY29uc3QgcGFnaW5hdGVkUXVlcnkgPSB0aGlzLnBhZ2luYXRlZFF1ZXJ5U2V0LmdldCh0b2tlbik7XG4gICAgaWYgKCFwYWdpbmF0ZWRRdWVyeSkge1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgY29uc3QgYWN0aXZlUGFnZXMgPSB0aGlzLmFjdGl2ZVBhZ2VRdWVyeVRva2VucyhwYWdpbmF0ZWRRdWVyeSk7XG4gICAgaWYgKGFjdGl2ZVBhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdWx0czogW10sXG4gICAgICAgIHN0YXR1czogXCJMb2FkaW5nRmlyc3RQYWdlXCIsXG4gICAgICAgIGxvYWRNb3JlOiAobnVtSXRlbXMpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkTW9yZU9mUGFnaW5hdGVkUXVlcnkodG9rZW4sIG51bUl0ZW1zKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgbGV0IGFsbFJlc3VsdHMgPSBbXTtcbiAgICBsZXQgaGFzVW5kZWZpbmVkID0gZmFsc2U7XG4gICAgbGV0IGlzRG9uZSA9IGZhbHNlO1xuICAgIGZvciAoY29uc3QgcGFnZVRva2VuIG9mIGFjdGl2ZVBhZ2VzKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNsaWVudC5sb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbihwYWdlVG9rZW4pO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGhhc1VuZGVmaW5lZCA9IHRydWU7XG4gICAgICAgIGlzRG9uZSA9IGZhbHNlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhZ2luYXRpb25SZXN1bHQgPSBhc1BhZ2luYXRpb25SZXN1bHQocmVzdWx0KTtcbiAgICAgIGFsbFJlc3VsdHMgPSBhbGxSZXN1bHRzLmNvbmNhdChwYWdpbmF0aW9uUmVzdWx0LnBhZ2UpO1xuICAgICAgaXNEb25lID0gISFwYWdpbmF0aW9uUmVzdWx0LmlzRG9uZTtcbiAgICB9XG4gICAgbGV0IHN0YXR1cztcbiAgICBpZiAoaGFzVW5kZWZpbmVkKSB7XG4gICAgICBzdGF0dXMgPSBhbGxSZXN1bHRzLmxlbmd0aCA9PT0gMCA/IFwiTG9hZGluZ0ZpcnN0UGFnZVwiIDogXCJMb2FkaW5nTW9yZVwiO1xuICAgIH0gZWxzZSBpZiAoaXNEb25lKSB7XG4gICAgICBzdGF0dXMgPSBcIkV4aGF1c3RlZFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0dXMgPSBcIkNhbkxvYWRNb3JlXCI7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICByZXN1bHRzOiBhbGxSZXN1bHRzLFxuICAgICAgc3RhdHVzLFxuICAgICAgbG9hZE1vcmU6IChudW1JdGVtcykgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkTW9yZU9mUGFnaW5hdGVkUXVlcnkodG9rZW4sIG51bUl0ZW1zKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIG9uQmFzZVRyYW5zaXRpb24odHJhbnNpdGlvbikge1xuICAgIGNvbnN0IGNoYW5nZWRCYXNlVG9rZW5zID0gdHJhbnNpdGlvbi5xdWVyaWVzLm1hcCgocSkgPT4gcS50b2tlbik7XG4gICAgY29uc3QgY2hhbmdlZCA9IHRoaXMucXVlcmllc0NvbnRhaW5pbmdUb2tlbnMoY2hhbmdlZEJhc2VUb2tlbnMpO1xuICAgIGxldCBwYWdpbmF0ZWRRdWVyaWVzID0gW107XG4gICAgaWYgKGNoYW5nZWQubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5wcm9jZXNzUGFnaW5hdGVkUXVlcnlTcGxpdHMoXG4gICAgICAgIGNoYW5nZWQsXG4gICAgICAgICh0b2tlbikgPT4gdGhpcy5jbGllbnQubG9jYWxRdWVyeVJlc3VsdEJ5VG9rZW4odG9rZW4pXG4gICAgICApO1xuICAgICAgcGFnaW5hdGVkUXVlcmllcyA9IGNoYW5nZWQubWFwKCh0b2tlbikgPT4gKHtcbiAgICAgICAgdG9rZW4sXG4gICAgICAgIG1vZGlmaWNhdGlvbjoge1xuICAgICAgICAgIGtpbmQ6IFwiVXBkYXRlZFwiLFxuICAgICAgICAgIHJlc3VsdDogdGhpcy5sb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbih0b2tlbilcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgICBjb25zdCBleHRlbmRlZFRyYW5zaXRpb24gPSB7XG4gICAgICAuLi50cmFuc2l0aW9uLFxuICAgICAgcGFnaW5hdGVkUXVlcmllc1xuICAgIH07XG4gICAgdGhpcy5vblRyYW5zaXRpb24oZXh0ZW5kZWRUcmFuc2l0aW9uKTtcbiAgfVxuICAvKipcbiAgICogTG9hZCBtb3JlIGl0ZW1zIGZvciBhIHBhZ2luYXRlZCBxdWVyeS5cbiAgICpcbiAgICogVGhpcyAqYWx3YXlzKiBjYXVzZXMgYSB0cmFuc2l0aW9uLCB0aGUgc3RhdHVzIG9mIHRoZSBxdWVyeVxuICAgKiBoYXMgcHJvYmFibHkgY2hhbmdlZCBmcm9tIFwiQ2FuTG9hZE1vcmVcIiB0byBcIkxvYWRpbmdNb3JlXCIuXG4gICAqIERhdGEgbWlnaHQgaGF2ZSBjaGFuZ2VkIHRvbzogbWF5YmUgYSBzdWJzY3JpcHRpb24gdG8gdGhpcyBwYWdlXG4gICAqIHF1ZXJ5IGFscmVhZHkgZXhpc3RzICh1bmxpa2VseSBidXQgcG9zc2libGUpIG9yIHRoaXMgcGFnZSBxdWVyeVxuICAgKiBoYXMgYW4gb3B0aW1pc3RpYyB1cGRhdGUgcHJvdmlkaW5nIHNvbWUgaW5pdGlhbCBkYXRhLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGxvYWRNb3JlT2ZQYWdpbmF0ZWRRdWVyeSh0b2tlbiwgbnVtSXRlbXMpIHtcbiAgICB0aGlzLm11c3RHZXRQYWdpbmF0ZWRRdWVyeSh0b2tlbik7XG4gICAgY29uc3QgbGFzdFBhZ2VUb2tlbiA9IHRoaXMucXVlcnlUb2tlbkZvckxhc3RQYWdlT2ZQYWdpbmF0ZWRRdWVyeSh0b2tlbik7XG4gICAgY29uc3QgbGFzdFBhZ2VSZXN1bHQgPSB0aGlzLmNsaWVudC5sb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbihsYXN0UGFnZVRva2VuKTtcbiAgICBpZiAoIWxhc3RQYWdlUmVzdWx0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHBhZ2luYXRpb25SZXN1bHQgPSBhc1BhZ2luYXRpb25SZXN1bHQobGFzdFBhZ2VSZXN1bHQpO1xuICAgIGlmIChwYWdpbmF0aW9uUmVzdWx0LmlzRG9uZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmFkZFBhZ2VUb1BhZ2luYXRlZFF1ZXJ5KFxuICAgICAgdG9rZW4sXG4gICAgICBwYWdpbmF0aW9uUmVzdWx0LmNvbnRpbnVlQ3Vyc29yLFxuICAgICAgbnVtSXRlbXNcbiAgICApO1xuICAgIGNvbnN0IGxvYWRNb3JlVHJhbnNpdGlvbiA9IHtcbiAgICAgIHRpbWVzdGFtcDogdGhpcy5sYXN0VHJhbnNpdGlvblRzLFxuICAgICAgcmVmbGVjdGVkTXV0YXRpb25zOiBbXSxcbiAgICAgIHF1ZXJpZXM6IFtdLFxuICAgICAgcGFnaW5hdGVkUXVlcmllczogW1xuICAgICAgICB7XG4gICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgbW9kaWZpY2F0aW9uOiB7XG4gICAgICAgICAgICBraW5kOiBcIlVwZGF0ZWRcIixcbiAgICAgICAgICAgIHJlc3VsdDogdGhpcy5sb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbih0b2tlbilcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuICAgIHRoaXMub25UcmFuc2l0aW9uKGxvYWRNb3JlVHJhbnNpdGlvbik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcXVlcmllc0NvbnRhaW5pbmdUb2tlbnMocXVlcnlUb2tlbnMpIHtcbiAgICBpZiAocXVlcnlUb2tlbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNvbnN0IGNoYW5nZWQgPSBbXTtcbiAgICBjb25zdCBxdWVyeVRva2VuU2V0ID0gbmV3IFNldChxdWVyeVRva2Vucyk7XG4gICAgZm9yIChjb25zdCBbcGFnaW5hdGVkVG9rZW4sIHBhZ2luYXRlZFF1ZXJ5XSBvZiB0aGlzLnBhZ2luYXRlZFF1ZXJ5U2V0KSB7XG4gICAgICBmb3IgKGNvbnN0IHBhZ2VUb2tlbiBvZiB0aGlzLmFsbFF1ZXJ5VG9rZW5zKHBhZ2luYXRlZFF1ZXJ5KSkge1xuICAgICAgICBpZiAocXVlcnlUb2tlblNldC5oYXMocGFnZVRva2VuKSkge1xuICAgICAgICAgIGNoYW5nZWQucHVzaChwYWdpbmF0ZWRUb2tlbik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNoYW5nZWQ7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHJvY2Vzc1BhZ2luYXRlZFF1ZXJ5U3BsaXRzKGNoYW5nZWQsIGdldFJlc3VsdCkge1xuICAgIGZvciAoY29uc3QgcGFnaW5hdGVkUXVlcnlUb2tlbiBvZiBjaGFuZ2VkKSB7XG4gICAgICBjb25zdCBwYWdpbmF0ZWRRdWVyeSA9IHRoaXMubXVzdEdldFBhZ2luYXRlZFF1ZXJ5KHBhZ2luYXRlZFF1ZXJ5VG9rZW4pO1xuICAgICAgY29uc3QgeyBvbmdvaW5nU3BsaXRzLCBwYWdlS2V5VG9RdWVyeSwgcGFnZUtleXMgfSA9IHBhZ2luYXRlZFF1ZXJ5O1xuICAgICAgZm9yIChjb25zdCBbcGFnZUtleSwgW3NwbGl0S2V5MSwgc3BsaXRLZXkyXV0gb2Ygb25nb2luZ1NwbGl0cykge1xuICAgICAgICBjb25zdCBib3RoTmV3UGFnZXNMb2FkZWQgPSBnZXRSZXN1bHQocGFnZUtleVRvUXVlcnkuZ2V0KHNwbGl0S2V5MSkucXVlcnlUb2tlbikgIT09IHZvaWQgMCAmJiBnZXRSZXN1bHQocGFnZUtleVRvUXVlcnkuZ2V0KHNwbGl0S2V5MikucXVlcnlUb2tlbikgIT09IHZvaWQgMDtcbiAgICAgICAgaWYgKGJvdGhOZXdQYWdlc0xvYWRlZCkge1xuICAgICAgICAgIHRoaXMuY29tcGxldGVQYWdpbmF0ZWRRdWVyeVNwbGl0KFxuICAgICAgICAgICAgcGFnaW5hdGVkUXVlcnksXG4gICAgICAgICAgICBwYWdlS2V5LFxuICAgICAgICAgICAgc3BsaXRLZXkxLFxuICAgICAgICAgICAgc3BsaXRLZXkyXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBwYWdlS2V5IG9mIHBhZ2VLZXlzKSB7XG4gICAgICAgIGlmIChvbmdvaW5nU3BsaXRzLmhhcyhwYWdlS2V5KSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhZ2VUb2tlbiA9IHBhZ2VLZXlUb1F1ZXJ5LmdldChwYWdlS2V5KS5xdWVyeVRva2VuO1xuICAgICAgICBjb25zdCBwYWdlUmVzdWx0ID0gZ2V0UmVzdWx0KHBhZ2VUb2tlbik7XG4gICAgICAgIGlmICghcGFnZVJlc3VsdCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGFzUGFnaW5hdGlvblJlc3VsdChwYWdlUmVzdWx0KTtcbiAgICAgICAgY29uc3Qgc2hvdWxkU3BsaXQgPSByZXN1bHQuc3BsaXRDdXJzb3IgJiYgKHJlc3VsdC5wYWdlU3RhdHVzID09PSBcIlNwbGl0UmVjb21tZW5kZWRcIiB8fCByZXN1bHQucGFnZVN0YXR1cyA9PT0gXCJTcGxpdFJlcXVpcmVkXCIgfHwgLy8gVGhpcyBjbGllbnQtZHJpdmVuIHBhZ2Ugc3BsaXR0aW5nIGNvbmRpdGlvbiB3aWxsIGNoYW5nZSBpbiB0aGUgZnV0dXJlLlxuICAgICAgICByZXN1bHQucGFnZS5sZW5ndGggPiBwYWdpbmF0ZWRRdWVyeS5vcHRpb25zLmluaXRpYWxOdW1JdGVtcyAqIDIpO1xuICAgICAgICBpZiAoc2hvdWxkU3BsaXQpIHtcbiAgICAgICAgICB0aGlzLnNwbGl0UGFnaW5hdGVkUXVlcnlQYWdlKFxuICAgICAgICAgICAgcGFnaW5hdGVkUXVlcnksXG4gICAgICAgICAgICBwYWdlS2V5LFxuICAgICAgICAgICAgcmVzdWx0LnNwbGl0Q3Vyc29yLFxuICAgICAgICAgICAgLy8gd2UganVzdCBjaGVja2VkXG4gICAgICAgICAgICByZXN1bHQuY29udGludWVDdXJzb3JcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHNwbGl0UGFnaW5hdGVkUXVlcnlQYWdlKHBhZ2luYXRlZFF1ZXJ5LCBwYWdlS2V5LCBzcGxpdEN1cnNvciwgY29udGludWVDdXJzb3IpIHtcbiAgICBjb25zdCBzcGxpdEtleTEgPSBwYWdpbmF0ZWRRdWVyeS5uZXh0UGFnZUtleSsrO1xuICAgIGNvbnN0IHNwbGl0S2V5MiA9IHBhZ2luYXRlZFF1ZXJ5Lm5leHRQYWdlS2V5Kys7XG4gICAgY29uc3QgcGFnaW5hdGlvbk9wdHMgPSB7XG4gICAgICBjdXJzb3I6IGNvbnRpbnVlQ3Vyc29yLFxuICAgICAgbnVtSXRlbXM6IHBhZ2luYXRlZFF1ZXJ5Lm9wdGlvbnMuaW5pdGlhbE51bUl0ZW1zLFxuICAgICAgaWQ6IHBhZ2luYXRlZFF1ZXJ5LmlkXG4gICAgfTtcbiAgICBjb25zdCBmaXJzdFN1YnNjcmlwdGlvbiA9IHRoaXMuY2xpZW50LnN1YnNjcmliZShcbiAgICAgIHBhZ2luYXRlZFF1ZXJ5LmNhbm9uaWNhbGl6ZWRVZGZQYXRoLFxuICAgICAge1xuICAgICAgICAuLi5wYWdpbmF0ZWRRdWVyeS5hcmdzLFxuICAgICAgICBwYWdpbmF0aW9uT3B0czoge1xuICAgICAgICAgIC4uLnBhZ2luYXRpb25PcHRzLFxuICAgICAgICAgIGN1cnNvcjogbnVsbCxcbiAgICAgICAgICAvLyBTdGFydCBmcm9tIGJlZ2lubmluZyBmb3IgZmlyc3Qgc3BsaXRcbiAgICAgICAgICBlbmRDdXJzb3I6IHNwbGl0Q3Vyc29yXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICAgIHBhZ2luYXRlZFF1ZXJ5LnBhZ2VLZXlUb1F1ZXJ5LnNldChzcGxpdEtleTEsIGZpcnN0U3Vic2NyaXB0aW9uKTtcbiAgICBjb25zdCBzZWNvbmRTdWJzY3JpcHRpb24gPSB0aGlzLmNsaWVudC5zdWJzY3JpYmUoXG4gICAgICBwYWdpbmF0ZWRRdWVyeS5jYW5vbmljYWxpemVkVWRmUGF0aCxcbiAgICAgIHtcbiAgICAgICAgLi4ucGFnaW5hdGVkUXVlcnkuYXJncyxcbiAgICAgICAgcGFnaW5hdGlvbk9wdHM6IHtcbiAgICAgICAgICAuLi5wYWdpbmF0aW9uT3B0cyxcbiAgICAgICAgICBjdXJzb3I6IHNwbGl0Q3Vyc29yLFxuICAgICAgICAgIGVuZEN1cnNvcjogY29udGludWVDdXJzb3JcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgcGFnaW5hdGVkUXVlcnkucGFnZUtleVRvUXVlcnkuc2V0KHNwbGl0S2V5Miwgc2Vjb25kU3Vic2NyaXB0aW9uKTtcbiAgICBwYWdpbmF0ZWRRdWVyeS5vbmdvaW5nU3BsaXRzLnNldChwYWdlS2V5LCBbc3BsaXRLZXkxLCBzcGxpdEtleTJdKTtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBhZGRQYWdlVG9QYWdpbmF0ZWRRdWVyeSh0b2tlbiwgY29udGludWVDdXJzb3IsIG51bUl0ZW1zKSB7XG4gICAgY29uc3QgcGFnaW5hdGVkUXVlcnkgPSB0aGlzLm11c3RHZXRQYWdpbmF0ZWRRdWVyeSh0b2tlbik7XG4gICAgY29uc3QgcGFnZUtleSA9IHBhZ2luYXRlZFF1ZXJ5Lm5leHRQYWdlS2V5Kys7XG4gICAgY29uc3QgcGFnaW5hdGlvbk9wdHMgPSB7XG4gICAgICBjdXJzb3I6IGNvbnRpbnVlQ3Vyc29yLFxuICAgICAgbnVtSXRlbXMsXG4gICAgICBpZDogcGFnaW5hdGVkUXVlcnkuaWRcbiAgICB9O1xuICAgIGNvbnN0IHBhZ2VBcmdzID0ge1xuICAgICAgLi4ucGFnaW5hdGVkUXVlcnkuYXJncyxcbiAgICAgIHBhZ2luYXRpb25PcHRzXG4gICAgfTtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLmNsaWVudC5zdWJzY3JpYmUoXG4gICAgICBwYWdpbmF0ZWRRdWVyeS5jYW5vbmljYWxpemVkVWRmUGF0aCxcbiAgICAgIHBhZ2VBcmdzXG4gICAgKTtcbiAgICBwYWdpbmF0ZWRRdWVyeS5wYWdlS2V5cy5wdXNoKHBhZ2VLZXkpO1xuICAgIHBhZ2luYXRlZFF1ZXJ5LnBhZ2VLZXlUb1F1ZXJ5LnNldChwYWdlS2V5LCBzdWJzY3JpcHRpb24pO1xuICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gIH1cbiAgcmVtb3ZlUGFnaW5hdGVkUXVlcnlTdWJzY3JpYmVyKHRva2VuKSB7XG4gICAgY29uc3QgcGFnaW5hdGVkUXVlcnkgPSB0aGlzLnBhZ2luYXRlZFF1ZXJ5U2V0LmdldCh0b2tlbik7XG4gICAgaWYgKCFwYWdpbmF0ZWRRdWVyeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwYWdpbmF0ZWRRdWVyeS5udW1TdWJzY3JpYmVycyAtPSAxO1xuICAgIGlmIChwYWdpbmF0ZWRRdWVyeS5udW1TdWJzY3JpYmVycyA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yIChjb25zdCBzdWJzY3JpcHRpb24gb2YgcGFnaW5hdGVkUXVlcnkucGFnZUtleVRvUXVlcnkudmFsdWVzKCkpIHtcbiAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbiAgICB0aGlzLnBhZ2luYXRlZFF1ZXJ5U2V0LmRlbGV0ZSh0b2tlbik7XG4gIH1cbiAgY29tcGxldGVQYWdpbmF0ZWRRdWVyeVNwbGl0KHBhZ2luYXRlZFF1ZXJ5LCBwYWdlS2V5LCBzcGxpdEtleTEsIHNwbGl0S2V5Mikge1xuICAgIGNvbnN0IG9yaWdpbmFsUXVlcnkgPSBwYWdpbmF0ZWRRdWVyeS5wYWdlS2V5VG9RdWVyeS5nZXQocGFnZUtleSk7XG4gICAgcGFnaW5hdGVkUXVlcnkucGFnZUtleVRvUXVlcnkuZGVsZXRlKHBhZ2VLZXkpO1xuICAgIGNvbnN0IHBhZ2VJbmRleCA9IHBhZ2luYXRlZFF1ZXJ5LnBhZ2VLZXlzLmluZGV4T2YocGFnZUtleSk7XG4gICAgcGFnaW5hdGVkUXVlcnkucGFnZUtleXMuc3BsaWNlKHBhZ2VJbmRleCwgMSwgc3BsaXRLZXkxLCBzcGxpdEtleTIpO1xuICAgIHBhZ2luYXRlZFF1ZXJ5Lm9uZ29pbmdTcGxpdHMuZGVsZXRlKHBhZ2VLZXkpO1xuICAgIG9yaWdpbmFsUXVlcnkudW5zdWJzY3JpYmUoKTtcbiAgfVxuICAvKiogVGhlIHF1ZXJ5IHRva2VucyBmb3IgYWxsIGFjdGl2ZSBwYWdlcywgaW4gcmVzdWx0IG9yZGVyICovXG4gIGFjdGl2ZVBhZ2VRdWVyeVRva2VucyhwYWdpbmF0ZWRRdWVyeSkge1xuICAgIHJldHVybiBwYWdpbmF0ZWRRdWVyeS5wYWdlS2V5cy5tYXAoXG4gICAgICAocGFnZUtleSkgPT4gcGFnaW5hdGVkUXVlcnkucGFnZUtleVRvUXVlcnkuZ2V0KHBhZ2VLZXkpLnF1ZXJ5VG9rZW5cbiAgICApO1xuICB9XG4gIGFsbFF1ZXJ5VG9rZW5zKHBhZ2luYXRlZFF1ZXJ5KSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20ocGFnaW5hdGVkUXVlcnkucGFnZUtleVRvUXVlcnkudmFsdWVzKCkpLm1hcChcbiAgICAgIChzdWIpID0+IHN1Yi5xdWVyeVRva2VuXG4gICAgKTtcbiAgfVxuICBxdWVyeVRva2VuRm9yTGFzdFBhZ2VPZlBhZ2luYXRlZFF1ZXJ5KHRva2VuKSB7XG4gICAgY29uc3QgcGFnaW5hdGVkUXVlcnkgPSB0aGlzLm11c3RHZXRQYWdpbmF0ZWRRdWVyeSh0b2tlbik7XG4gICAgY29uc3QgbGFzdFBhZ2VLZXkgPSBwYWdpbmF0ZWRRdWVyeS5wYWdlS2V5c1twYWdpbmF0ZWRRdWVyeS5wYWdlS2V5cy5sZW5ndGggLSAxXTtcbiAgICBpZiAobGFzdFBhZ2VLZXkgPT09IHZvaWQgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBwYWdlcyBmb3IgcGFnaW5hdGVkIHF1ZXJ5ICR7dG9rZW59YCk7XG4gICAgfVxuICAgIHJldHVybiBwYWdpbmF0ZWRRdWVyeS5wYWdlS2V5VG9RdWVyeS5nZXQobGFzdFBhZ2VLZXkpLnF1ZXJ5VG9rZW47XG4gIH1cbiAgbXVzdEdldFBhZ2luYXRlZFF1ZXJ5KHRva2VuKSB7XG4gICAgY29uc3QgcGFnaW5hdGVkUXVlcnkgPSB0aGlzLnBhZ2luYXRlZFF1ZXJ5U2V0LmdldCh0b2tlbik7XG4gICAgaWYgKCFwYWdpbmF0ZWRRdWVyeSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwicGFnaW5hdGVkIHF1ZXJ5IG5vIGxvbmdlciBleGlzdHMgZm9yIHRva2VuIFwiICsgdG9rZW4pO1xuICAgIH1cbiAgICByZXR1cm4gcGFnaW5hdGVkUXVlcnk7XG4gIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2luYXRlZF9xdWVyeV9jbGllbnQuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/paginated_query_client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/pagination.js":
/*!*****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/pagination.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   asPaginationArgs: () => (/* binding */ asPaginationArgs),\n/* harmony export */   asPaginationResult: () => (/* binding */ asPaginationResult)\n/* harmony export */ });\n\nfunction asPaginationArgs(value) {\n  if (typeof value.paginationOpts.numItems !== \"number\") {\n    throw new Error(`Not valid paginated query args: ${JSON.stringify(value)}`);\n  }\n  return value;\n}\nfunction asPaginationResult(value) {\n  if (typeof value !== \"object\" || value === null || !Array.isArray(value.page) || typeof value.isDone !== \"boolean\" || typeof value.continueCursor !== \"string\") {\n    throw new Error(`Not a valid paginated query result: ${value?.toString()}`);\n  }\n  return value;\n}\n//# sourceMappingURL=pagination.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9wYWdpbmF0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWE7QUFDTjtBQUNQO0FBQ0EsdURBQXVELHNCQUFzQjtBQUM3RTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsMkRBQTJELGtCQUFrQjtBQUM3RTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxicm93c2VyXFxzeW5jXFxwYWdpbmF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0IGZ1bmN0aW9uIGFzUGFnaW5hdGlvbkFyZ3ModmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZS5wYWdpbmF0aW9uT3B0cy5udW1JdGVtcyAhPT0gXCJudW1iZXJcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihgTm90IHZhbGlkIHBhZ2luYXRlZCBxdWVyeSBhcmdzOiAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNQYWdpbmF0aW9uUmVzdWx0KHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgfHwgdmFsdWUgPT09IG51bGwgfHwgIUFycmF5LmlzQXJyYXkodmFsdWUucGFnZSkgfHwgdHlwZW9mIHZhbHVlLmlzRG9uZSAhPT0gXCJib29sZWFuXCIgfHwgdHlwZW9mIHZhbHVlLmNvbnRpbnVlQ3Vyc29yICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBOb3QgYSB2YWxpZCBwYWdpbmF0ZWQgcXVlcnkgcmVzdWx0OiAke3ZhbHVlPy50b1N0cmluZygpfWApO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2luYXRpb24uanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/pagination.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/protocol.js":
/*!***************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/protocol.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodeClientMessage: () => (/* binding */ encodeClientMessage),\n/* harmony export */   longToU64: () => (/* binding */ longToU64),\n/* harmony export */   parseServerMessage: () => (/* binding */ parseServerMessage),\n/* harmony export */   u64ToLong: () => (/* binding */ u64ToLong)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _vendor_long_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../vendor/long.js */ \"(ssr)/./node_modules/convex/dist/esm/vendor/long.js\");\n\n\n\nfunction u64ToLong(encoded) {\n  const integerBytes = _values_index_js__WEBPACK_IMPORTED_MODULE_0__.Base64.toByteArray(encoded);\n  return _vendor_long_js__WEBPACK_IMPORTED_MODULE_1__.Long.fromBytesLE(Array.from(integerBytes));\n}\nfunction longToU64(raw) {\n  const integerBytes = new Uint8Array(raw.toBytesLE());\n  return _values_index_js__WEBPACK_IMPORTED_MODULE_0__.Base64.fromByteArray(integerBytes);\n}\nfunction parseServerMessage(encoded) {\n  switch (encoded.type) {\n    case \"FatalError\":\n    case \"AuthError\":\n    case \"ActionResponse\":\n    case \"TransitionChunk\":\n    case \"Ping\": {\n      return { ...encoded };\n    }\n    case \"MutationResponse\": {\n      if (encoded.success) {\n        return { ...encoded, ts: u64ToLong(encoded.ts) };\n      } else {\n        return { ...encoded };\n      }\n    }\n    case \"Transition\": {\n      return {\n        ...encoded,\n        startVersion: {\n          ...encoded.startVersion,\n          ts: u64ToLong(encoded.startVersion.ts)\n        },\n        endVersion: {\n          ...encoded.endVersion,\n          ts: u64ToLong(encoded.endVersion.ts)\n        }\n      };\n    }\n    default: {\n      encoded;\n    }\n  }\n  return void 0;\n}\nfunction encodeClientMessage(message) {\n  switch (message.type) {\n    case \"Authenticate\":\n    case \"ModifyQuerySet\":\n    case \"Mutation\":\n    case \"Action\":\n    case \"Event\": {\n      return { ...message };\n    }\n    case \"Connect\": {\n      if (message.maxObservedTimestamp !== void 0) {\n        return {\n          ...message,\n          maxObservedTimestamp: longToU64(message.maxObservedTimestamp)\n        };\n      } else {\n        return { ...message, maxObservedTimestamp: void 0 };\n      }\n    }\n    default: {\n      message;\n    }\n  }\n  return void 0;\n}\n//# sourceMappingURL=protocol.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9wcm90b2NvbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBYTtBQUNrQztBQUNIO0FBQ3JDO0FBQ1AsdUJBQXVCLGdFQUFrQjtBQUN6QyxTQUFTLGlEQUFJO0FBQ2I7QUFDTztBQUNQO0FBQ0EsU0FBUyxrRUFBb0I7QUFDN0I7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsUUFBUTtBQUNSLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcYnJvd3Nlclxcc3luY1xccHJvdG9jb2wuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5pbXBvcnQgeyBCYXNlNjQgfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBMb25nIH0gZnJvbSBcIi4uLy4uL3ZlbmRvci9sb25nLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gdTY0VG9Mb25nKGVuY29kZWQpIHtcbiAgY29uc3QgaW50ZWdlckJ5dGVzID0gQmFzZTY0LnRvQnl0ZUFycmF5KGVuY29kZWQpO1xuICByZXR1cm4gTG9uZy5mcm9tQnl0ZXNMRShBcnJheS5mcm9tKGludGVnZXJCeXRlcykpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxvbmdUb1U2NChyYXcpIHtcbiAgY29uc3QgaW50ZWdlckJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkocmF3LnRvQnl0ZXNMRSgpKTtcbiAgcmV0dXJuIEJhc2U2NC5mcm9tQnl0ZUFycmF5KGludGVnZXJCeXRlcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTZXJ2ZXJNZXNzYWdlKGVuY29kZWQpIHtcbiAgc3dpdGNoIChlbmNvZGVkLnR5cGUpIHtcbiAgICBjYXNlIFwiRmF0YWxFcnJvclwiOlxuICAgIGNhc2UgXCJBdXRoRXJyb3JcIjpcbiAgICBjYXNlIFwiQWN0aW9uUmVzcG9uc2VcIjpcbiAgICBjYXNlIFwiVHJhbnNpdGlvbkNodW5rXCI6XG4gICAgY2FzZSBcIlBpbmdcIjoge1xuICAgICAgcmV0dXJuIHsgLi4uZW5jb2RlZCB9O1xuICAgIH1cbiAgICBjYXNlIFwiTXV0YXRpb25SZXNwb25zZVwiOiB7XG4gICAgICBpZiAoZW5jb2RlZC5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiB7IC4uLmVuY29kZWQsIHRzOiB1NjRUb0xvbmcoZW5jb2RlZC50cykgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7IC4uLmVuY29kZWQgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2FzZSBcIlRyYW5zaXRpb25cIjoge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZW5jb2RlZCxcbiAgICAgICAgc3RhcnRWZXJzaW9uOiB7XG4gICAgICAgICAgLi4uZW5jb2RlZC5zdGFydFZlcnNpb24sXG4gICAgICAgICAgdHM6IHU2NFRvTG9uZyhlbmNvZGVkLnN0YXJ0VmVyc2lvbi50cylcbiAgICAgICAgfSxcbiAgICAgICAgZW5kVmVyc2lvbjoge1xuICAgICAgICAgIC4uLmVuY29kZWQuZW5kVmVyc2lvbixcbiAgICAgICAgICB0czogdTY0VG9Mb25nKGVuY29kZWQuZW5kVmVyc2lvbi50cylcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgZW5jb2RlZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZvaWQgMDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbmNvZGVDbGllbnRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICBjYXNlIFwiQXV0aGVudGljYXRlXCI6XG4gICAgY2FzZSBcIk1vZGlmeVF1ZXJ5U2V0XCI6XG4gICAgY2FzZSBcIk11dGF0aW9uXCI6XG4gICAgY2FzZSBcIkFjdGlvblwiOlxuICAgIGNhc2UgXCJFdmVudFwiOiB7XG4gICAgICByZXR1cm4geyAuLi5tZXNzYWdlIH07XG4gICAgfVxuICAgIGNhc2UgXCJDb25uZWN0XCI6IHtcbiAgICAgIGlmIChtZXNzYWdlLm1heE9ic2VydmVkVGltZXN0YW1wICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5tZXNzYWdlLFxuICAgICAgICAgIG1heE9ic2VydmVkVGltZXN0YW1wOiBsb25nVG9VNjQobWVzc2FnZS5tYXhPYnNlcnZlZFRpbWVzdGFtcClcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7IC4uLm1lc3NhZ2UsIG1heE9ic2VydmVkVGltZXN0YW1wOiB2b2lkIDAgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgbWVzc2FnZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZvaWQgMDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb3RvY29sLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/protocol.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/remote_query_set.js":
/*!***********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/remote_query_set.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RemoteQuerySet: () => (/* binding */ RemoteQuerySet)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _vendor_long_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../vendor/long.js */ \"(ssr)/./node_modules/convex/dist/esm/vendor/long.js\");\n/* harmony import */ var _logging_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logging.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/logging.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\nclass RemoteQuerySet {\n  constructor(queryPath, logger) {\n    __publicField(this, \"version\");\n    __publicField(this, \"remoteQuerySet\");\n    __publicField(this, \"queryPath\");\n    __publicField(this, \"logger\");\n    this.version = { querySet: 0, ts: _vendor_long_js__WEBPACK_IMPORTED_MODULE_1__.Long.fromNumber(0), identity: 0 };\n    this.remoteQuerySet = /* @__PURE__ */ new Map();\n    this.queryPath = queryPath;\n    this.logger = logger;\n  }\n  transition(transition) {\n    const start = transition.startVersion;\n    if (this.version.querySet !== start.querySet || this.version.ts.notEquals(start.ts) || this.version.identity !== start.identity) {\n      throw new Error(\n        `Invalid start version: ${start.ts.toString()}:${start.querySet}:${start.identity}, transitioning from ${this.version.ts.toString()}:${this.version.querySet}:${this.version.identity}`\n      );\n    }\n    for (const modification of transition.modifications) {\n      switch (modification.type) {\n        case \"QueryUpdated\": {\n          const queryPath = this.queryPath(modification.queryId);\n          if (queryPath) {\n            for (const line of modification.logLines) {\n              (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.logForFunction)(this.logger, \"info\", \"query\", queryPath, line);\n            }\n          }\n          const value = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(modification.value ?? null);\n          this.remoteQuerySet.set(modification.queryId, {\n            success: true,\n            value,\n            logLines: modification.logLines\n          });\n          break;\n        }\n        case \"QueryFailed\": {\n          const queryPath = this.queryPath(modification.queryId);\n          if (queryPath) {\n            for (const line of modification.logLines) {\n              (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.logForFunction)(this.logger, \"info\", \"query\", queryPath, line);\n            }\n          }\n          const { errorData } = modification;\n          this.remoteQuerySet.set(modification.queryId, {\n            success: false,\n            errorMessage: modification.errorMessage,\n            errorData: errorData !== void 0 ? (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(errorData) : void 0,\n            logLines: modification.logLines\n          });\n          break;\n        }\n        case \"QueryRemoved\": {\n          this.remoteQuerySet.delete(modification.queryId);\n          break;\n        }\n        default: {\n          modification;\n          throw new Error(`Invalid modification ${modification.type}`);\n        }\n      }\n    }\n    this.version = transition.endVersion;\n  }\n  remoteQueryResults() {\n    return this.remoteQuerySet;\n  }\n  timestamp() {\n    return this.version.ts;\n  }\n}\n//# sourceMappingURL=remote_query_set.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9yZW1vdGVfcXVlcnlfc2V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNxRDtBQUNUO0FBQ0c7QUFDeEM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGlCQUFpQixpREFBSTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLG9CQUFvQixHQUFHLGVBQWUsR0FBRyxlQUFlLHVCQUF1QiwyQkFBMkIsR0FBRyxzQkFBc0IsR0FBRyxzQkFBc0I7QUFDOUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMkRBQWM7QUFDNUI7QUFDQTtBQUNBLHdCQUF3Qiw4REFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDJEQUFjO0FBQzVCO0FBQ0E7QUFDQSxrQkFBa0IsWUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsOERBQVk7QUFDMUQ7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxrQkFBa0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcYnJvd3Nlclxcc3luY1xccmVtb3RlX3F1ZXJ5X3NldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG5pbXBvcnQgeyBqc29uVG9Db252ZXggfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBMb25nIH0gZnJvbSBcIi4uLy4uL3ZlbmRvci9sb25nLmpzXCI7XG5pbXBvcnQgeyBsb2dGb3JGdW5jdGlvbiB9IGZyb20gXCIuLi9sb2dnaW5nLmpzXCI7XG5leHBvcnQgY2xhc3MgUmVtb3RlUXVlcnlTZXQge1xuICBjb25zdHJ1Y3RvcihxdWVyeVBhdGgsIGxvZ2dlcikge1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ2ZXJzaW9uXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJyZW1vdGVRdWVyeVNldFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicXVlcnlQYXRoXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJsb2dnZXJcIik7XG4gICAgdGhpcy52ZXJzaW9uID0geyBxdWVyeVNldDogMCwgdHM6IExvbmcuZnJvbU51bWJlcigwKSwgaWRlbnRpdHk6IDAgfTtcbiAgICB0aGlzLnJlbW90ZVF1ZXJ5U2V0ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLnF1ZXJ5UGF0aCA9IHF1ZXJ5UGF0aDtcbiAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcbiAgfVxuICB0cmFuc2l0aW9uKHRyYW5zaXRpb24pIHtcbiAgICBjb25zdCBzdGFydCA9IHRyYW5zaXRpb24uc3RhcnRWZXJzaW9uO1xuICAgIGlmICh0aGlzLnZlcnNpb24ucXVlcnlTZXQgIT09IHN0YXJ0LnF1ZXJ5U2V0IHx8IHRoaXMudmVyc2lvbi50cy5ub3RFcXVhbHMoc3RhcnQudHMpIHx8IHRoaXMudmVyc2lvbi5pZGVudGl0eSAhPT0gc3RhcnQuaWRlbnRpdHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEludmFsaWQgc3RhcnQgdmVyc2lvbjogJHtzdGFydC50cy50b1N0cmluZygpfToke3N0YXJ0LnF1ZXJ5U2V0fToke3N0YXJ0LmlkZW50aXR5fSwgdHJhbnNpdGlvbmluZyBmcm9tICR7dGhpcy52ZXJzaW9uLnRzLnRvU3RyaW5nKCl9OiR7dGhpcy52ZXJzaW9uLnF1ZXJ5U2V0fToke3RoaXMudmVyc2lvbi5pZGVudGl0eX1gXG4gICAgICApO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IG1vZGlmaWNhdGlvbiBvZiB0cmFuc2l0aW9uLm1vZGlmaWNhdGlvbnMpIHtcbiAgICAgIHN3aXRjaCAobW9kaWZpY2F0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcIlF1ZXJ5VXBkYXRlZFwiOiB7XG4gICAgICAgICAgY29uc3QgcXVlcnlQYXRoID0gdGhpcy5xdWVyeVBhdGgobW9kaWZpY2F0aW9uLnF1ZXJ5SWQpO1xuICAgICAgICAgIGlmIChxdWVyeVBhdGgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBtb2RpZmljYXRpb24ubG9nTGluZXMpIHtcbiAgICAgICAgICAgICAgbG9nRm9yRnVuY3Rpb24odGhpcy5sb2dnZXIsIFwiaW5mb1wiLCBcInF1ZXJ5XCIsIHF1ZXJ5UGF0aCwgbGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHZhbHVlID0ganNvblRvQ29udmV4KG1vZGlmaWNhdGlvbi52YWx1ZSA/PyBudWxsKTtcbiAgICAgICAgICB0aGlzLnJlbW90ZVF1ZXJ5U2V0LnNldChtb2RpZmljYXRpb24ucXVlcnlJZCwge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgbG9nTGluZXM6IG1vZGlmaWNhdGlvbi5sb2dMaW5lc1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJRdWVyeUZhaWxlZFwiOiB7XG4gICAgICAgICAgY29uc3QgcXVlcnlQYXRoID0gdGhpcy5xdWVyeVBhdGgobW9kaWZpY2F0aW9uLnF1ZXJ5SWQpO1xuICAgICAgICAgIGlmIChxdWVyeVBhdGgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBtb2RpZmljYXRpb24ubG9nTGluZXMpIHtcbiAgICAgICAgICAgICAgbG9nRm9yRnVuY3Rpb24odGhpcy5sb2dnZXIsIFwiaW5mb1wiLCBcInF1ZXJ5XCIsIHF1ZXJ5UGF0aCwgbGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHsgZXJyb3JEYXRhIH0gPSBtb2RpZmljYXRpb247XG4gICAgICAgICAgdGhpcy5yZW1vdGVRdWVyeVNldC5zZXQobW9kaWZpY2F0aW9uLnF1ZXJ5SWQsIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBtb2RpZmljYXRpb24uZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgZXJyb3JEYXRhOiBlcnJvckRhdGEgIT09IHZvaWQgMCA/IGpzb25Ub0NvbnZleChlcnJvckRhdGEpIDogdm9pZCAwLFxuICAgICAgICAgICAgbG9nTGluZXM6IG1vZGlmaWNhdGlvbi5sb2dMaW5lc1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJRdWVyeVJlbW92ZWRcIjoge1xuICAgICAgICAgIHRoaXMucmVtb3RlUXVlcnlTZXQuZGVsZXRlKG1vZGlmaWNhdGlvbi5xdWVyeUlkKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgbW9kaWZpY2F0aW9uO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBtb2RpZmljYXRpb24gJHttb2RpZmljYXRpb24udHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnZlcnNpb24gPSB0cmFuc2l0aW9uLmVuZFZlcnNpb247XG4gIH1cbiAgcmVtb3RlUXVlcnlSZXN1bHRzKCkge1xuICAgIHJldHVybiB0aGlzLnJlbW90ZVF1ZXJ5U2V0O1xuICB9XG4gIHRpbWVzdGFtcCgpIHtcbiAgICByZXR1cm4gdGhpcy52ZXJzaW9uLnRzO1xuICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZW1vdGVfcXVlcnlfc2V0LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/remote_query_set.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/request_manager.js":
/*!**********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/request_manager.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RequestManager: () => (/* binding */ RequestManager)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _logging_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../logging.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/logging.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\nclass RequestManager {\n  constructor(logger, markConnectionStateDirty) {\n    this.logger = logger;\n    this.markConnectionStateDirty = markConnectionStateDirty;\n    __publicField(this, \"inflightRequests\");\n    __publicField(this, \"requestsOlderThanRestart\");\n    __publicField(this, \"inflightMutationsCount\", 0);\n    __publicField(this, \"inflightActionsCount\", 0);\n    this.inflightRequests = /* @__PURE__ */ new Map();\n    this.requestsOlderThanRestart = /* @__PURE__ */ new Set();\n  }\n  request(message, sent) {\n    const result = new Promise((resolve) => {\n      const status = sent ? \"Requested\" : \"NotSent\";\n      this.inflightRequests.set(message.requestId, {\n        message,\n        status: { status, requestedAt: /* @__PURE__ */ new Date(), onResult: resolve }\n      });\n      if (message.type === \"Mutation\") {\n        this.inflightMutationsCount++;\n      } else if (message.type === \"Action\") {\n        this.inflightActionsCount++;\n      }\n    });\n    this.markConnectionStateDirty();\n    return result;\n  }\n  /**\n   * Update the state after receiving a response.\n   *\n   * @returns A RequestId if the request is complete and its optimistic update\n   * can be dropped, null otherwise.\n   */\n  onResponse(response) {\n    const requestInfo = this.inflightRequests.get(response.requestId);\n    if (requestInfo === void 0) {\n      return null;\n    }\n    if (requestInfo.status.status === \"Completed\") {\n      return null;\n    }\n    const udfType = requestInfo.message.type === \"Mutation\" ? \"mutation\" : \"action\";\n    const udfPath = requestInfo.message.udfPath;\n    for (const line of response.logLines) {\n      (0,_logging_js__WEBPACK_IMPORTED_MODULE_1__.logForFunction)(this.logger, \"info\", udfType, udfPath, line);\n    }\n    const status = requestInfo.status;\n    let result;\n    let onResolve;\n    if (response.success) {\n      result = {\n        success: true,\n        logLines: response.logLines,\n        value: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(response.result)\n      };\n      onResolve = () => status.onResult(result);\n    } else {\n      const errorMessage = response.result;\n      const { errorData } = response;\n      (0,_logging_js__WEBPACK_IMPORTED_MODULE_1__.logForFunction)(this.logger, \"error\", udfType, udfPath, errorMessage);\n      result = {\n        success: false,\n        errorMessage,\n        errorData: errorData !== void 0 ? (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(errorData) : void 0,\n        logLines: response.logLines\n      };\n      onResolve = () => status.onResult(result);\n    }\n    if (response.type === \"ActionResponse\" || !response.success) {\n      onResolve();\n      this.inflightRequests.delete(response.requestId);\n      this.requestsOlderThanRestart.delete(response.requestId);\n      if (requestInfo.message.type === \"Action\") {\n        this.inflightActionsCount--;\n      } else if (requestInfo.message.type === \"Mutation\") {\n        this.inflightMutationsCount--;\n      }\n      this.markConnectionStateDirty();\n      return { requestId: response.requestId, result };\n    }\n    requestInfo.status = {\n      status: \"Completed\",\n      result,\n      ts: response.ts,\n      onResolve\n    };\n    return null;\n  }\n  // Remove and returns completed requests.\n  removeCompleted(ts) {\n    const completeRequests = /* @__PURE__ */ new Map();\n    for (const [requestId, requestInfo] of this.inflightRequests.entries()) {\n      const status = requestInfo.status;\n      if (status.status === \"Completed\" && status.ts.lessThanOrEqual(ts)) {\n        status.onResolve();\n        completeRequests.set(requestId, status.result);\n        if (requestInfo.message.type === \"Mutation\") {\n          this.inflightMutationsCount--;\n        } else if (requestInfo.message.type === \"Action\") {\n          this.inflightActionsCount--;\n        }\n        this.inflightRequests.delete(requestId);\n        this.requestsOlderThanRestart.delete(requestId);\n      }\n    }\n    if (completeRequests.size > 0) {\n      this.markConnectionStateDirty();\n    }\n    return completeRequests;\n  }\n  restart() {\n    this.requestsOlderThanRestart = new Set(this.inflightRequests.keys());\n    const allMessages = [];\n    for (const [requestId, value] of this.inflightRequests) {\n      if (value.status.status === \"NotSent\") {\n        value.status.status = \"Requested\";\n        allMessages.push(value.message);\n        continue;\n      }\n      if (value.message.type === \"Mutation\") {\n        allMessages.push(value.message);\n      } else if (value.message.type === \"Action\") {\n        this.inflightRequests.delete(requestId);\n        this.requestsOlderThanRestart.delete(requestId);\n        this.inflightActionsCount--;\n        if (value.status.status === \"Completed\") {\n          throw new Error(\"Action should never be in 'Completed' state\");\n        }\n        value.status.onResult({\n          success: false,\n          errorMessage: \"Connection lost while action was in flight\",\n          logLines: []\n        });\n      }\n    }\n    this.markConnectionStateDirty();\n    return allMessages;\n  }\n  resume() {\n    const allMessages = [];\n    for (const [, value] of this.inflightRequests) {\n      if (value.status.status === \"NotSent\") {\n        value.status.status = \"Requested\";\n        allMessages.push(value.message);\n        continue;\n      }\n    }\n    return allMessages;\n  }\n  /**\n   * @returns true if there are any requests that have been requested but have\n   * not be completed yet.\n   */\n  hasIncompleteRequests() {\n    for (const requestInfo of this.inflightRequests.values()) {\n      if (requestInfo.status.status === \"Requested\") {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * @returns true if there are any inflight requests, including ones that have\n   * completed on the server, but have not been applied.\n   */\n  hasInflightRequests() {\n    return this.inflightRequests.size > 0;\n  }\n  /**\n   * @returns true if there are any inflight requests, that have been hanging around\n   * since prior to the most recent restart.\n   */\n  hasSyncedPastLastReconnect() {\n    return this.requestsOlderThanRestart.size === 0;\n  }\n  timeOfOldestInflightRequest() {\n    if (this.inflightRequests.size === 0) {\n      return null;\n    }\n    let oldestInflightRequest = Date.now();\n    for (const request of this.inflightRequests.values()) {\n      if (request.status.status !== \"Completed\") {\n        if (request.status.requestedAt.getTime() < oldestInflightRequest) {\n          oldestInflightRequest = request.status.requestedAt.getTime();\n        }\n      }\n    }\n    return new Date(oldestInflightRequest);\n  }\n  /**\n   * @returns The number of mutations currently in flight.\n   */\n  inflightMutations() {\n    return this.inflightMutationsCount;\n  }\n  /**\n   * @returns The number of actions currently in flight.\n   */\n  inflightActions() {\n    return this.inflightActionsCount;\n  }\n}\n//# sourceMappingURL=request_manager.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9yZXF1ZXN0X21hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWE7QUFDYjtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDcUQ7QUFDTjtBQUN4QztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQixPQUFPO0FBQ1A7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDJEQUFjO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDhEQUFZO0FBQzNCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxjQUFjLFlBQVk7QUFDMUIsTUFBTSwyREFBYztBQUNwQjtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsOERBQVk7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXGJyb3dzZXJcXHN5bmNcXHJlcXVlc3RfbWFuYWdlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG5pbXBvcnQgeyBqc29uVG9Db252ZXggfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBsb2dGb3JGdW5jdGlvbiB9IGZyb20gXCIuLi9sb2dnaW5nLmpzXCI7XG5leHBvcnQgY2xhc3MgUmVxdWVzdE1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcihsb2dnZXIsIG1hcmtDb25uZWN0aW9uU3RhdGVEaXJ0eSkge1xuICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyO1xuICAgIHRoaXMubWFya0Nvbm5lY3Rpb25TdGF0ZURpcnR5ID0gbWFya0Nvbm5lY3Rpb25TdGF0ZURpcnR5O1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJpbmZsaWdodFJlcXVlc3RzXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJyZXF1ZXN0c09sZGVyVGhhblJlc3RhcnRcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImluZmxpZ2h0TXV0YXRpb25zQ291bnRcIiwgMCk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImluZmxpZ2h0QWN0aW9uc0NvdW50XCIsIDApO1xuICAgIHRoaXMuaW5mbGlnaHRSZXF1ZXN0cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgdGhpcy5yZXF1ZXN0c09sZGVyVGhhblJlc3RhcnQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICB9XG4gIHJlcXVlc3QobWVzc2FnZSwgc2VudCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBzdGF0dXMgPSBzZW50ID8gXCJSZXF1ZXN0ZWRcIiA6IFwiTm90U2VudFwiO1xuICAgICAgdGhpcy5pbmZsaWdodFJlcXVlc3RzLnNldChtZXNzYWdlLnJlcXVlc3RJZCwge1xuICAgICAgICBtZXNzYWdlLFxuICAgICAgICBzdGF0dXM6IHsgc3RhdHVzLCByZXF1ZXN0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksIG9uUmVzdWx0OiByZXNvbHZlIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJNdXRhdGlvblwiKSB7XG4gICAgICAgIHRoaXMuaW5mbGlnaHRNdXRhdGlvbnNDb3VudCsrO1xuICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09IFwiQWN0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5pbmZsaWdodEFjdGlvbnNDb3VudCsrO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMubWFya0Nvbm5lY3Rpb25TdGF0ZURpcnR5KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBzdGF0ZSBhZnRlciByZWNlaXZpbmcgYSByZXNwb25zZS5cbiAgICpcbiAgICogQHJldHVybnMgQSBSZXF1ZXN0SWQgaWYgdGhlIHJlcXVlc3QgaXMgY29tcGxldGUgYW5kIGl0cyBvcHRpbWlzdGljIHVwZGF0ZVxuICAgKiBjYW4gYmUgZHJvcHBlZCwgbnVsbCBvdGhlcndpc2UuXG4gICAqL1xuICBvblJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgY29uc3QgcmVxdWVzdEluZm8gPSB0aGlzLmluZmxpZ2h0UmVxdWVzdHMuZ2V0KHJlc3BvbnNlLnJlcXVlc3RJZCk7XG4gICAgaWYgKHJlcXVlc3RJbmZvID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAocmVxdWVzdEluZm8uc3RhdHVzLnN0YXR1cyA9PT0gXCJDb21wbGV0ZWRcIikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHVkZlR5cGUgPSByZXF1ZXN0SW5mby5tZXNzYWdlLnR5cGUgPT09IFwiTXV0YXRpb25cIiA/IFwibXV0YXRpb25cIiA6IFwiYWN0aW9uXCI7XG4gICAgY29uc3QgdWRmUGF0aCA9IHJlcXVlc3RJbmZvLm1lc3NhZ2UudWRmUGF0aDtcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVzcG9uc2UubG9nTGluZXMpIHtcbiAgICAgIGxvZ0ZvckZ1bmN0aW9uKHRoaXMubG9nZ2VyLCBcImluZm9cIiwgdWRmVHlwZSwgdWRmUGF0aCwgbGluZSk7XG4gICAgfVxuICAgIGNvbnN0IHN0YXR1cyA9IHJlcXVlc3RJbmZvLnN0YXR1cztcbiAgICBsZXQgcmVzdWx0O1xuICAgIGxldCBvblJlc29sdmU7XG4gICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbG9nTGluZXM6IHJlc3BvbnNlLmxvZ0xpbmVzLFxuICAgICAgICB2YWx1ZToganNvblRvQ29udmV4KHJlc3BvbnNlLnJlc3VsdClcbiAgICAgIH07XG4gICAgICBvblJlc29sdmUgPSAoKSA9PiBzdGF0dXMub25SZXN1bHQocmVzdWx0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gcmVzcG9uc2UucmVzdWx0O1xuICAgICAgY29uc3QgeyBlcnJvckRhdGEgfSA9IHJlc3BvbnNlO1xuICAgICAgbG9nRm9yRnVuY3Rpb24odGhpcy5sb2dnZXIsIFwiZXJyb3JcIiwgdWRmVHlwZSwgdWRmUGF0aCwgZXJyb3JNZXNzYWdlKTtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yTWVzc2FnZSxcbiAgICAgICAgZXJyb3JEYXRhOiBlcnJvckRhdGEgIT09IHZvaWQgMCA/IGpzb25Ub0NvbnZleChlcnJvckRhdGEpIDogdm9pZCAwLFxuICAgICAgICBsb2dMaW5lczogcmVzcG9uc2UubG9nTGluZXNcbiAgICAgIH07XG4gICAgICBvblJlc29sdmUgPSAoKSA9PiBzdGF0dXMub25SZXN1bHQocmVzdWx0KTtcbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlLnR5cGUgPT09IFwiQWN0aW9uUmVzcG9uc2VcIiB8fCAhcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgb25SZXNvbHZlKCk7XG4gICAgICB0aGlzLmluZmxpZ2h0UmVxdWVzdHMuZGVsZXRlKHJlc3BvbnNlLnJlcXVlc3RJZCk7XG4gICAgICB0aGlzLnJlcXVlc3RzT2xkZXJUaGFuUmVzdGFydC5kZWxldGUocmVzcG9uc2UucmVxdWVzdElkKTtcbiAgICAgIGlmIChyZXF1ZXN0SW5mby5tZXNzYWdlLnR5cGUgPT09IFwiQWN0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5pbmZsaWdodEFjdGlvbnNDb3VudC0tO1xuICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0SW5mby5tZXNzYWdlLnR5cGUgPT09IFwiTXV0YXRpb25cIikge1xuICAgICAgICB0aGlzLmluZmxpZ2h0TXV0YXRpb25zQ291bnQtLTtcbiAgICAgIH1cbiAgICAgIHRoaXMubWFya0Nvbm5lY3Rpb25TdGF0ZURpcnR5KCk7XG4gICAgICByZXR1cm4geyByZXF1ZXN0SWQ6IHJlc3BvbnNlLnJlcXVlc3RJZCwgcmVzdWx0IH07XG4gICAgfVxuICAgIHJlcXVlc3RJbmZvLnN0YXR1cyA9IHtcbiAgICAgIHN0YXR1czogXCJDb21wbGV0ZWRcIixcbiAgICAgIHJlc3VsdCxcbiAgICAgIHRzOiByZXNwb25zZS50cyxcbiAgICAgIG9uUmVzb2x2ZVxuICAgIH07XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLy8gUmVtb3ZlIGFuZCByZXR1cm5zIGNvbXBsZXRlZCByZXF1ZXN0cy5cbiAgcmVtb3ZlQ29tcGxldGVkKHRzKSB7XG4gICAgY29uc3QgY29tcGxldGVSZXF1ZXN0cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBbcmVxdWVzdElkLCByZXF1ZXN0SW5mb10gb2YgdGhpcy5pbmZsaWdodFJlcXVlc3RzLmVudHJpZXMoKSkge1xuICAgICAgY29uc3Qgc3RhdHVzID0gcmVxdWVzdEluZm8uc3RhdHVzO1xuICAgICAgaWYgKHN0YXR1cy5zdGF0dXMgPT09IFwiQ29tcGxldGVkXCIgJiYgc3RhdHVzLnRzLmxlc3NUaGFuT3JFcXVhbCh0cykpIHtcbiAgICAgICAgc3RhdHVzLm9uUmVzb2x2ZSgpO1xuICAgICAgICBjb21wbGV0ZVJlcXVlc3RzLnNldChyZXF1ZXN0SWQsIHN0YXR1cy5yZXN1bHQpO1xuICAgICAgICBpZiAocmVxdWVzdEluZm8ubWVzc2FnZS50eXBlID09PSBcIk11dGF0aW9uXCIpIHtcbiAgICAgICAgICB0aGlzLmluZmxpZ2h0TXV0YXRpb25zQ291bnQtLTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0SW5mby5tZXNzYWdlLnR5cGUgPT09IFwiQWN0aW9uXCIpIHtcbiAgICAgICAgICB0aGlzLmluZmxpZ2h0QWN0aW9uc0NvdW50LS07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbmZsaWdodFJlcXVlc3RzLmRlbGV0ZShyZXF1ZXN0SWQpO1xuICAgICAgICB0aGlzLnJlcXVlc3RzT2xkZXJUaGFuUmVzdGFydC5kZWxldGUocmVxdWVzdElkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNvbXBsZXRlUmVxdWVzdHMuc2l6ZSA+IDApIHtcbiAgICAgIHRoaXMubWFya0Nvbm5lY3Rpb25TdGF0ZURpcnR5KCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wbGV0ZVJlcXVlc3RzO1xuICB9XG4gIHJlc3RhcnQoKSB7XG4gICAgdGhpcy5yZXF1ZXN0c09sZGVyVGhhblJlc3RhcnQgPSBuZXcgU2V0KHRoaXMuaW5mbGlnaHRSZXF1ZXN0cy5rZXlzKCkpO1xuICAgIGNvbnN0IGFsbE1lc3NhZ2VzID0gW107XG4gICAgZm9yIChjb25zdCBbcmVxdWVzdElkLCB2YWx1ZV0gb2YgdGhpcy5pbmZsaWdodFJlcXVlc3RzKSB7XG4gICAgICBpZiAodmFsdWUuc3RhdHVzLnN0YXR1cyA9PT0gXCJOb3RTZW50XCIpIHtcbiAgICAgICAgdmFsdWUuc3RhdHVzLnN0YXR1cyA9IFwiUmVxdWVzdGVkXCI7XG4gICAgICAgIGFsbE1lc3NhZ2VzLnB1c2godmFsdWUubWVzc2FnZSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlLm1lc3NhZ2UudHlwZSA9PT0gXCJNdXRhdGlvblwiKSB7XG4gICAgICAgIGFsbE1lc3NhZ2VzLnB1c2godmFsdWUubWVzc2FnZSk7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlLm1lc3NhZ2UudHlwZSA9PT0gXCJBY3Rpb25cIikge1xuICAgICAgICB0aGlzLmluZmxpZ2h0UmVxdWVzdHMuZGVsZXRlKHJlcXVlc3RJZCk7XG4gICAgICAgIHRoaXMucmVxdWVzdHNPbGRlclRoYW5SZXN0YXJ0LmRlbGV0ZShyZXF1ZXN0SWQpO1xuICAgICAgICB0aGlzLmluZmxpZ2h0QWN0aW9uc0NvdW50LS07XG4gICAgICAgIGlmICh2YWx1ZS5zdGF0dXMuc3RhdHVzID09PSBcIkNvbXBsZXRlZFwiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWN0aW9uIHNob3VsZCBuZXZlciBiZSBpbiAnQ29tcGxldGVkJyBzdGF0ZVwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZS5zdGF0dXMub25SZXN1bHQoe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yTWVzc2FnZTogXCJDb25uZWN0aW9uIGxvc3Qgd2hpbGUgYWN0aW9uIHdhcyBpbiBmbGlnaHRcIixcbiAgICAgICAgICBsb2dMaW5lczogW11cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubWFya0Nvbm5lY3Rpb25TdGF0ZURpcnR5KCk7XG4gICAgcmV0dXJuIGFsbE1lc3NhZ2VzO1xuICB9XG4gIHJlc3VtZSgpIHtcbiAgICBjb25zdCBhbGxNZXNzYWdlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgWywgdmFsdWVdIG9mIHRoaXMuaW5mbGlnaHRSZXF1ZXN0cykge1xuICAgICAgaWYgKHZhbHVlLnN0YXR1cy5zdGF0dXMgPT09IFwiTm90U2VudFwiKSB7XG4gICAgICAgIHZhbHVlLnN0YXR1cy5zdGF0dXMgPSBcIlJlcXVlc3RlZFwiO1xuICAgICAgICBhbGxNZXNzYWdlcy5wdXNoKHZhbHVlLm1lc3NhZ2UpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFsbE1lc3NhZ2VzO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZXJlIGFyZSBhbnkgcmVxdWVzdHMgdGhhdCBoYXZlIGJlZW4gcmVxdWVzdGVkIGJ1dCBoYXZlXG4gICAqIG5vdCBiZSBjb21wbGV0ZWQgeWV0LlxuICAgKi9cbiAgaGFzSW5jb21wbGV0ZVJlcXVlc3RzKCkge1xuICAgIGZvciAoY29uc3QgcmVxdWVzdEluZm8gb2YgdGhpcy5pbmZsaWdodFJlcXVlc3RzLnZhbHVlcygpKSB7XG4gICAgICBpZiAocmVxdWVzdEluZm8uc3RhdHVzLnN0YXR1cyA9PT0gXCJSZXF1ZXN0ZWRcIikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZXJlIGFyZSBhbnkgaW5mbGlnaHQgcmVxdWVzdHMsIGluY2x1ZGluZyBvbmVzIHRoYXQgaGF2ZVxuICAgKiBjb21wbGV0ZWQgb24gdGhlIHNlcnZlciwgYnV0IGhhdmUgbm90IGJlZW4gYXBwbGllZC5cbiAgICovXG4gIGhhc0luZmxpZ2h0UmVxdWVzdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5mbGlnaHRSZXF1ZXN0cy5zaXplID4gMDtcbiAgfVxuICAvKipcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGVyZSBhcmUgYW55IGluZmxpZ2h0IHJlcXVlc3RzLCB0aGF0IGhhdmUgYmVlbiBoYW5naW5nIGFyb3VuZFxuICAgKiBzaW5jZSBwcmlvciB0byB0aGUgbW9zdCByZWNlbnQgcmVzdGFydC5cbiAgICovXG4gIGhhc1N5bmNlZFBhc3RMYXN0UmVjb25uZWN0KCkge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RzT2xkZXJUaGFuUmVzdGFydC5zaXplID09PSAwO1xuICB9XG4gIHRpbWVPZk9sZGVzdEluZmxpZ2h0UmVxdWVzdCgpIHtcbiAgICBpZiAodGhpcy5pbmZsaWdodFJlcXVlc3RzLnNpemUgPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBsZXQgb2xkZXN0SW5mbGlnaHRSZXF1ZXN0ID0gRGF0ZS5ub3coKTtcbiAgICBmb3IgKGNvbnN0IHJlcXVlc3Qgb2YgdGhpcy5pbmZsaWdodFJlcXVlc3RzLnZhbHVlcygpKSB7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMuc3RhdHVzICE9PSBcIkNvbXBsZXRlZFwiKSB7XG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cy5yZXF1ZXN0ZWRBdC5nZXRUaW1lKCkgPCBvbGRlc3RJbmZsaWdodFJlcXVlc3QpIHtcbiAgICAgICAgICBvbGRlc3RJbmZsaWdodFJlcXVlc3QgPSByZXF1ZXN0LnN0YXR1cy5yZXF1ZXN0ZWRBdC5nZXRUaW1lKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBEYXRlKG9sZGVzdEluZmxpZ2h0UmVxdWVzdCk7XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm5zIFRoZSBudW1iZXIgb2YgbXV0YXRpb25zIGN1cnJlbnRseSBpbiBmbGlnaHQuXG4gICAqL1xuICBpbmZsaWdodE11dGF0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5pbmZsaWdodE11dGF0aW9uc0NvdW50O1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIGFjdGlvbnMgY3VycmVudGx5IGluIGZsaWdodC5cbiAgICovXG4gIGluZmxpZ2h0QWN0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5pbmZsaWdodEFjdGlvbnNDb3VudDtcbiAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVxdWVzdF9tYW5hZ2VyLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/request_manager.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/session.js":
/*!**************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/session.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   newSessionId: () => (/* binding */ newSessionId)\n/* harmony export */ });\n\nfunction newSessionId() {\n  return uuidv4();\n}\nfunction uuidv4() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n    const r = Math.random() * 16 | 0, v = c === \"x\" ? r : r & 3 | 8;\n    return v.toString(16);\n  });\n}\n//# sourceMappingURL=session.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9zZXNzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBYTtBQUNOO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcYnJvd3Nlclxcc3luY1xcc2Vzc2lvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmV4cG9ydCBmdW5jdGlvbiBuZXdTZXNzaW9uSWQoKSB7XG4gIHJldHVybiB1dWlkdjQoKTtcbn1cbmZ1bmN0aW9uIHV1aWR2NCgpIHtcbiAgcmV0dXJuIFwieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XCIucmVwbGFjZSgvW3h5XS9nLCAoYykgPT4ge1xuICAgIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwLCB2ID0gYyA9PT0gXCJ4XCIgPyByIDogciAmIDMgfCA4O1xuICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXNzaW9uLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/session.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js":
/*!*********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   canonicalizeUdfPath: () => (/* binding */ canonicalizeUdfPath),\n/* harmony export */   serializePaginatedPathAndArgs: () => (/* binding */ serializePaginatedPathAndArgs),\n/* harmony export */   serializePathAndArgs: () => (/* binding */ serializePathAndArgs),\n/* harmony export */   serializedQueryTokenIsPaginated: () => (/* binding */ serializedQueryTokenIsPaginated)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n\n\nfunction canonicalizeUdfPath(udfPath) {\n  const pieces = udfPath.split(\":\");\n  let moduleName;\n  let functionName;\n  if (pieces.length === 1) {\n    moduleName = pieces[0];\n    functionName = \"default\";\n  } else {\n    moduleName = pieces.slice(0, pieces.length - 1).join(\":\");\n    functionName = pieces[pieces.length - 1];\n  }\n  if (moduleName.endsWith(\".js\")) {\n    moduleName = moduleName.slice(0, -3);\n  }\n  return `${moduleName}:${functionName}`;\n}\nfunction serializePathAndArgs(udfPath, args) {\n  return JSON.stringify({\n    udfPath: canonicalizeUdfPath(udfPath),\n    args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(args)\n  });\n}\nfunction serializePaginatedPathAndArgs(udfPath, args, options) {\n  const { initialNumItems, id } = options;\n  const result = JSON.stringify({\n    type: \"paginated\",\n    udfPath: canonicalizeUdfPath(udfPath),\n    args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(args),\n    options: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)({ initialNumItems, id })\n  });\n  return result;\n}\nfunction serializedQueryTokenIsPaginated(token) {\n  return JSON.parse(token).type === \"paginated\";\n}\n//# sourceMappingURL=udf_path_utils.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy91ZGZfcGF0aF91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFhO0FBQ3dDO0FBQzlDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVyxHQUFHLGFBQWE7QUFDdkM7QUFDTztBQUNQO0FBQ0E7QUFDQSxVQUFVLDhEQUFZO0FBQ3RCLEdBQUc7QUFDSDtBQUNPO0FBQ1AsVUFBVSxzQkFBc0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsVUFBVSw4REFBWTtBQUN0QixhQUFhLDhEQUFZLEdBQUcscUJBQXFCO0FBQ2pELEdBQUc7QUFDSDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcYnJvd3Nlclxcc3luY1xcdWRmX3BhdGhfdXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5pbXBvcnQgeyBjb252ZXhUb0pzb24gfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gY2Fub25pY2FsaXplVWRmUGF0aCh1ZGZQYXRoKSB7XG4gIGNvbnN0IHBpZWNlcyA9IHVkZlBhdGguc3BsaXQoXCI6XCIpO1xuICBsZXQgbW9kdWxlTmFtZTtcbiAgbGV0IGZ1bmN0aW9uTmFtZTtcbiAgaWYgKHBpZWNlcy5sZW5ndGggPT09IDEpIHtcbiAgICBtb2R1bGVOYW1lID0gcGllY2VzWzBdO1xuICAgIGZ1bmN0aW9uTmFtZSA9IFwiZGVmYXVsdFwiO1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZU5hbWUgPSBwaWVjZXMuc2xpY2UoMCwgcGllY2VzLmxlbmd0aCAtIDEpLmpvaW4oXCI6XCIpO1xuICAgIGZ1bmN0aW9uTmFtZSA9IHBpZWNlc1twaWVjZXMubGVuZ3RoIC0gMV07XG4gIH1cbiAgaWYgKG1vZHVsZU5hbWUuZW5kc1dpdGgoXCIuanNcIikpIHtcbiAgICBtb2R1bGVOYW1lID0gbW9kdWxlTmFtZS5zbGljZSgwLCAtMyk7XG4gIH1cbiAgcmV0dXJuIGAke21vZHVsZU5hbWV9OiR7ZnVuY3Rpb25OYW1lfWA7XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplUGF0aEFuZEFyZ3ModWRmUGF0aCwgYXJncykge1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgIHVkZlBhdGg6IGNhbm9uaWNhbGl6ZVVkZlBhdGgodWRmUGF0aCksXG4gICAgYXJnczogY29udmV4VG9Kc29uKGFyZ3MpXG4gIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZVBhZ2luYXRlZFBhdGhBbmRBcmdzKHVkZlBhdGgsIGFyZ3MsIG9wdGlvbnMpIHtcbiAgY29uc3QgeyBpbml0aWFsTnVtSXRlbXMsIGlkIH0gPSBvcHRpb25zO1xuICBjb25zdCByZXN1bHQgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgdHlwZTogXCJwYWdpbmF0ZWRcIixcbiAgICB1ZGZQYXRoOiBjYW5vbmljYWxpemVVZGZQYXRoKHVkZlBhdGgpLFxuICAgIGFyZ3M6IGNvbnZleFRvSnNvbihhcmdzKSxcbiAgICBvcHRpb25zOiBjb252ZXhUb0pzb24oeyBpbml0aWFsTnVtSXRlbXMsIGlkIH0pXG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZWRRdWVyeVRva2VuSXNQYWdpbmF0ZWQodG9rZW4pIHtcbiAgcmV0dXJuIEpTT04ucGFyc2UodG9rZW4pLnR5cGUgPT09IFwicGFnaW5hdGVkXCI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11ZGZfcGF0aF91dGlscy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/web_socket_manager.js":
/*!*************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/web_socket_manager.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebSocketManager: () => (/* binding */ WebSocketManager)\n/* harmony export */ });\n/* harmony import */ var _protocol_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./protocol.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/protocol.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\nconst CLOSE_NORMAL = 1e3;\nconst CLOSE_GOING_AWAY = 1001;\nconst CLOSE_NO_STATUS = 1005;\nconst CLOSE_NOT_FOUND = 4040;\nlet firstTime;\nfunction monotonicMillis() {\n  if (firstTime === void 0) {\n    firstTime = Date.now();\n  }\n  if (typeof performance === \"undefined\" || !performance.now) {\n    return Date.now();\n  }\n  return Math.round(firstTime + performance.now());\n}\nfunction prettyNow() {\n  return `t=${Math.round((monotonicMillis() - firstTime) / 100) / 10}s`;\n}\nconst serverDisconnectErrors = {\n  // A known error, e.g. during a restart or push\n  InternalServerError: { timeout: 1e3 },\n  // ErrorMetadata::overloaded() messages that we realy should back off\n  SubscriptionsWorkerFullError: { timeout: 3e3 },\n  TooManyConcurrentRequests: { timeout: 3e3 },\n  CommitterFullError: { timeout: 3e3 },\n  AwsTooManyRequestsException: { timeout: 3e3 },\n  ExecuteFullError: { timeout: 3e3 },\n  SystemTimeoutError: { timeout: 3e3 },\n  ExpiredInQueue: { timeout: 3e3 },\n  // ErrorMetadata::feature_temporarily_unavailable() that typically indicate a deploy just happened\n  VectorIndexesUnavailable: { timeout: 1e3 },\n  SearchIndexesUnavailable: { timeout: 1e3 },\n  TableSummariesUnavailable: { timeout: 1e3 },\n  // More ErrorMetadata::overloaded()\n  VectorIndexTooLarge: { timeout: 3e3 },\n  SearchIndexTooLarge: { timeout: 3e3 },\n  TooManyWritesInTimePeriod: { timeout: 3e3 }\n};\nfunction classifyDisconnectError(s) {\n  if (s === void 0) return \"Unknown\";\n  for (const prefix of Object.keys(\n    serverDisconnectErrors\n  )) {\n    if (s.startsWith(prefix)) {\n      return prefix;\n    }\n  }\n  return \"Unknown\";\n}\nclass WebSocketManager {\n  constructor(uri, callbacks, webSocketConstructor, logger, markConnectionStateDirty, debug) {\n    this.markConnectionStateDirty = markConnectionStateDirty;\n    this.debug = debug;\n    __publicField(this, \"socket\");\n    __publicField(this, \"connectionCount\");\n    __publicField(this, \"_hasEverConnected\", false);\n    __publicField(this, \"lastCloseReason\");\n    // State for assembling the split-up Transition currently being received.\n    __publicField(this, \"transitionChunkBuffer\", null);\n    /** Upon HTTPS/WSS failure, the first jittered backoff duration, in ms. */\n    __publicField(this, \"defaultInitialBackoff\");\n    /** We backoff exponentially, but we need to cap that--this is the jittered max. */\n    __publicField(this, \"maxBackoff\");\n    /** How many times have we failed consecutively? */\n    __publicField(this, \"retries\");\n    /** How long before lack of server response causes us to initiate a reconnect,\n     * in ms */\n    __publicField(this, \"serverInactivityThreshold\");\n    __publicField(this, \"reconnectDueToServerInactivityTimeout\");\n    /** Scheduled reconnect state: timeout handle and timing info */\n    __publicField(this, \"scheduledReconnect\", null);\n    __publicField(this, \"networkOnlineHandler\", null);\n    /** Pending event to send after reconnecting due to network recovery */\n    __publicField(this, \"pendingNetworkRecoveryInfo\", null);\n    __publicField(this, \"uri\");\n    __publicField(this, \"onOpen\");\n    __publicField(this, \"onResume\");\n    __publicField(this, \"onMessage\");\n    __publicField(this, \"webSocketConstructor\");\n    __publicField(this, \"logger\");\n    __publicField(this, \"onServerDisconnectError\");\n    this.webSocketConstructor = webSocketConstructor;\n    this.socket = { state: \"disconnected\" };\n    this.connectionCount = 0;\n    this.lastCloseReason = \"InitialConnect\";\n    this.defaultInitialBackoff = 1e3;\n    this.maxBackoff = 16e3;\n    this.retries = 0;\n    this.serverInactivityThreshold = 6e4;\n    this.reconnectDueToServerInactivityTimeout = null;\n    this.uri = uri;\n    this.onOpen = callbacks.onOpen;\n    this.onResume = callbacks.onResume;\n    this.onMessage = callbacks.onMessage;\n    this.onServerDisconnectError = callbacks.onServerDisconnectError;\n    this.logger = logger;\n    this.setupNetworkListener();\n    this.connect();\n  }\n  setSocketState(state) {\n    this.socket = state;\n    this._logVerbose(\n      `socket state changed: ${this.socket.state}, paused: ${\"paused\" in this.socket ? this.socket.paused : void 0}`\n    );\n    this.markConnectionStateDirty();\n  }\n  setupNetworkListener() {\n    if (typeof window === \"undefined\" || typeof window.addEventListener !== \"function\") {\n      return;\n    }\n    if (this.networkOnlineHandler !== null) {\n      return;\n    }\n    this.networkOnlineHandler = () => {\n      this._logVerbose(\"network online event detected\");\n      this.tryReconnectImmediately();\n    };\n    window.addEventListener(\"online\", this.networkOnlineHandler);\n    this._logVerbose(\"network online event listener registered\");\n  }\n  cleanupNetworkListener() {\n    if (this.networkOnlineHandler && typeof window !== \"undefined\" && typeof window.removeEventListener === \"function\") {\n      window.removeEventListener(\"online\", this.networkOnlineHandler);\n      this.networkOnlineHandler = null;\n      this._logVerbose(\"network online event listener removed\");\n    }\n  }\n  assembleTransition(chunk) {\n    if (chunk.partNumber < 0 || chunk.partNumber >= chunk.totalParts || chunk.totalParts === 0 || this.transitionChunkBuffer && (this.transitionChunkBuffer.totalParts !== chunk.totalParts || this.transitionChunkBuffer.transitionId !== chunk.transitionId)) {\n      this.transitionChunkBuffer = null;\n      throw new Error(\"Invalid TransitionChunk\");\n    }\n    if (this.transitionChunkBuffer === null) {\n      this.transitionChunkBuffer = {\n        chunks: [],\n        totalParts: chunk.totalParts,\n        transitionId: chunk.transitionId\n      };\n    }\n    if (chunk.partNumber !== this.transitionChunkBuffer.chunks.length) {\n      const expectedLength = this.transitionChunkBuffer.chunks.length;\n      this.transitionChunkBuffer = null;\n      throw new Error(\n        `TransitionChunk received out of order: expected part ${expectedLength}, got ${chunk.partNumber}`\n      );\n    }\n    this.transitionChunkBuffer.chunks.push(chunk.chunk);\n    if (this.transitionChunkBuffer.chunks.length === chunk.totalParts) {\n      const fullJson = this.transitionChunkBuffer.chunks.join(\"\");\n      this.transitionChunkBuffer = null;\n      const transition = (0,_protocol_js__WEBPACK_IMPORTED_MODULE_0__.parseServerMessage)(JSON.parse(fullJson));\n      if (transition.type !== \"Transition\") {\n        throw new Error(\n          `Expected Transition, got ${transition.type} after assembling chunks`\n        );\n      }\n      return transition;\n    }\n    return null;\n  }\n  connect() {\n    if (this.socket.state === \"terminated\") {\n      return;\n    }\n    if (this.socket.state !== \"disconnected\" && this.socket.state !== \"stopped\") {\n      throw new Error(\n        \"Didn't start connection from disconnected state: \" + this.socket.state\n      );\n    }\n    const ws = new this.webSocketConstructor(this.uri);\n    this._logVerbose(\"constructed WebSocket\");\n    this.setSocketState({\n      state: \"connecting\",\n      ws,\n      paused: \"no\"\n    });\n    this.resetServerInactivityTimeout();\n    ws.onopen = () => {\n      this.logger.logVerbose(\"begin ws.onopen\");\n      if (this.socket.state !== \"connecting\") {\n        throw new Error(\"onopen called with socket not in connecting state\");\n      }\n      this.setSocketState({\n        state: \"ready\",\n        ws,\n        paused: this.socket.paused === \"yes\" ? \"uninitialized\" : \"no\"\n      });\n      this.resetServerInactivityTimeout();\n      if (this.socket.paused === \"no\") {\n        this._hasEverConnected = true;\n        this.onOpen({\n          connectionCount: this.connectionCount,\n          lastCloseReason: this.lastCloseReason,\n          clientTs: monotonicMillis()\n        });\n      }\n      if (this.lastCloseReason !== \"InitialConnect\") {\n        if (this.lastCloseReason) {\n          this.logger.log(\n            \"WebSocket reconnected at\",\n            prettyNow(),\n            \"after disconnect due to\",\n            this.lastCloseReason\n          );\n        } else {\n          this.logger.log(\"WebSocket reconnected at\", prettyNow());\n        }\n      }\n      this.connectionCount += 1;\n      this.lastCloseReason = null;\n      if (this.pendingNetworkRecoveryInfo !== null) {\n        const { timeSavedMs } = this.pendingNetworkRecoveryInfo;\n        this.pendingNetworkRecoveryInfo = null;\n        this.sendMessage({\n          type: \"Event\",\n          eventType: \"NetworkRecoveryReconnect\",\n          event: { timeSavedMs }\n        });\n        this.logger.log(\n          `Network recovery reconnect saved ~${Math.round(timeSavedMs / 1e3)}s of waiting`\n        );\n      }\n    };\n    ws.onerror = (error) => {\n      this.transitionChunkBuffer = null;\n      const message = error.message;\n      if (message) {\n        this.logger.log(`WebSocket error message: ${message}`);\n      }\n    };\n    ws.onmessage = (message) => {\n      this.resetServerInactivityTimeout();\n      const messageLength = message.data.length;\n      let serverMessage = (0,_protocol_js__WEBPACK_IMPORTED_MODULE_0__.parseServerMessage)(JSON.parse(message.data));\n      this._logVerbose(`received ws message with type ${serverMessage.type}`);\n      if (serverMessage.type === \"Ping\") {\n        return;\n      }\n      if (serverMessage.type === \"TransitionChunk\") {\n        const transition = this.assembleTransition(serverMessage);\n        if (!transition) {\n          return;\n        }\n        serverMessage = transition;\n        this._logVerbose(\n          `assembled full ws message of type ${serverMessage.type}`\n        );\n      }\n      if (this.transitionChunkBuffer !== null) {\n        this.transitionChunkBuffer = null;\n        this.logger.log(\n          `Received unexpected ${serverMessage.type} while buffering TransitionChunks`\n        );\n      }\n      if (serverMessage.type === \"Transition\") {\n        this.reportLargeTransition({\n          messageLength,\n          transition: serverMessage\n        });\n      }\n      const response = this.onMessage(serverMessage);\n      if (response.hasSyncedPastLastReconnect) {\n        this.retries = 0;\n        this.markConnectionStateDirty();\n      }\n    };\n    ws.onclose = (event) => {\n      this._logVerbose(\"begin ws.onclose\");\n      this.transitionChunkBuffer = null;\n      if (this.lastCloseReason === null) {\n        this.lastCloseReason = event.reason || `closed with code ${event.code}`;\n      }\n      if (event.code !== CLOSE_NORMAL && event.code !== CLOSE_GOING_AWAY && // This commonly gets fired on mobile apps when the app is backgrounded\n      event.code !== CLOSE_NO_STATUS && event.code !== CLOSE_NOT_FOUND) {\n        let msg = `WebSocket closed with code ${event.code}`;\n        if (event.reason) {\n          msg += `: ${event.reason}`;\n        }\n        this.logger.log(msg);\n        if (this.onServerDisconnectError && event.reason) {\n          this.onServerDisconnectError(msg);\n        }\n      }\n      const reason = classifyDisconnectError(event.reason);\n      this.scheduleReconnect(reason);\n      return;\n    };\n  }\n  /**\n   * @returns The state of the {@link Socket}.\n   */\n  socketState() {\n    return this.socket.state;\n  }\n  /**\n   * @param message - A ClientMessage to send.\n   * @returns Whether the message (might have been) sent.\n   */\n  sendMessage(message) {\n    const messageForLog = {\n      type: message.type,\n      ...message.type === \"Authenticate\" && message.tokenType === \"User\" ? {\n        value: `...${message.value.slice(-7)}`\n      } : {}\n    };\n    if (this.socket.state === \"ready\" && this.socket.paused === \"no\") {\n      const encodedMessage = (0,_protocol_js__WEBPACK_IMPORTED_MODULE_0__.encodeClientMessage)(message);\n      const request = JSON.stringify(encodedMessage);\n      let sent = false;\n      try {\n        this.socket.ws.send(request);\n        sent = true;\n      } catch (error) {\n        this.logger.log(\n          `Failed to send message on WebSocket, reconnecting: ${error}`\n        );\n        this.closeAndReconnect(\"FailedToSendMessage\");\n      }\n      this._logVerbose(\n        `${sent ? \"sent\" : \"failed to send\"} message with type ${message.type}: ${JSON.stringify(\n          messageForLog\n        )}`\n      );\n      return true;\n    }\n    this._logVerbose(\n      `message not sent (socket state: ${this.socket.state}, paused: ${\"paused\" in this.socket ? this.socket.paused : void 0}): ${JSON.stringify(\n        messageForLog\n      )}`\n    );\n    return false;\n  }\n  resetServerInactivityTimeout() {\n    if (this.socket.state === \"terminated\") {\n      return;\n    }\n    if (this.reconnectDueToServerInactivityTimeout !== null) {\n      clearTimeout(this.reconnectDueToServerInactivityTimeout);\n      this.reconnectDueToServerInactivityTimeout = null;\n    }\n    this.reconnectDueToServerInactivityTimeout = setTimeout(() => {\n      this.closeAndReconnect(\"InactiveServer\");\n    }, this.serverInactivityThreshold);\n  }\n  scheduleReconnect(reason) {\n    if (this.scheduledReconnect) {\n      clearTimeout(this.scheduledReconnect.timeout);\n      this.scheduledReconnect = null;\n    }\n    this.socket = { state: \"disconnected\" };\n    const backoff = this.nextBackoff(reason);\n    this.markConnectionStateDirty();\n    this.logger.log(`Attempting reconnect in ${Math.round(backoff)}ms`);\n    const scheduledAt = monotonicMillis();\n    const timeoutId = setTimeout(() => {\n      if (this.scheduledReconnect?.timeout === timeoutId) {\n        this.scheduledReconnect = null;\n        this.connect();\n      }\n    }, backoff);\n    this.scheduledReconnect = {\n      timeout: timeoutId,\n      scheduledAt,\n      backoffMs: backoff\n    };\n  }\n  /**\n   * Close the WebSocket and schedule a reconnect.\n   *\n   * This should be used when we hit an error and would like to restart the session.\n   */\n  closeAndReconnect(closeReason) {\n    this._logVerbose(`begin closeAndReconnect with reason ${closeReason}`);\n    switch (this.socket.state) {\n      case \"disconnected\":\n      case \"terminated\":\n      case \"stopped\":\n        return;\n      case \"connecting\":\n      case \"ready\": {\n        this.lastCloseReason = closeReason;\n        void this.close();\n        this.scheduleReconnect(\"client\");\n        return;\n      }\n      default: {\n        this.socket;\n      }\n    }\n  }\n  /**\n   * Close the WebSocket, being careful to clear the onclose handler to avoid re-entrant\n   * calls. Use this instead of directly calling `ws.close()`\n   *\n   * It is the callers responsibility to update the state after this method is called so that the\n   * closed socket is not accessible or used again after this method is called\n   */\n  close() {\n    this.transitionChunkBuffer = null;\n    switch (this.socket.state) {\n      case \"disconnected\":\n      case \"terminated\":\n      case \"stopped\":\n        return Promise.resolve();\n      case \"connecting\": {\n        const ws = this.socket.ws;\n        ws.onmessage = (_message) => {\n          this._logVerbose(\"Ignoring message received after close\");\n        };\n        return new Promise((r) => {\n          ws.onclose = () => {\n            this._logVerbose(\"Closed after connecting\");\n            r();\n          };\n          ws.onopen = () => {\n            this._logVerbose(\"Opened after connecting\");\n            ws.close();\n          };\n        });\n      }\n      case \"ready\": {\n        this._logVerbose(\"ws.close called\");\n        const ws = this.socket.ws;\n        ws.onmessage = (_message) => {\n          this._logVerbose(\"Ignoring message received after close\");\n        };\n        const result = new Promise((r) => {\n          ws.onclose = () => {\n            r();\n          };\n        });\n        ws.close();\n        return result;\n      }\n      default: {\n        this.socket;\n        return Promise.resolve();\n      }\n    }\n  }\n  /**\n   * Close the WebSocket and do not reconnect.\n   * @returns A Promise that resolves when the WebSocket `onClose` callback is called.\n   */\n  terminate() {\n    if (this.reconnectDueToServerInactivityTimeout) {\n      clearTimeout(this.reconnectDueToServerInactivityTimeout);\n    }\n    if (this.scheduledReconnect) {\n      clearTimeout(this.scheduledReconnect.timeout);\n      this.scheduledReconnect = null;\n    }\n    this.cleanupNetworkListener();\n    switch (this.socket.state) {\n      case \"terminated\":\n      case \"stopped\":\n      case \"disconnected\":\n      case \"connecting\":\n      case \"ready\": {\n        const result = this.close();\n        this.setSocketState({ state: \"terminated\" });\n        return result;\n      }\n      default: {\n        this.socket;\n        throw new Error(\n          `Invalid websocket state: ${this.socket.state}`\n        );\n      }\n    }\n  }\n  stop() {\n    switch (this.socket.state) {\n      case \"terminated\":\n        return Promise.resolve();\n      case \"connecting\":\n      case \"stopped\":\n      case \"disconnected\":\n      case \"ready\": {\n        this.cleanupNetworkListener();\n        const result = this.close();\n        this.socket = { state: \"stopped\" };\n        return result;\n      }\n      default: {\n        this.socket;\n        return Promise.resolve();\n      }\n    }\n  }\n  /**\n   * Create a new WebSocket after a previous `stop()`, unless `terminate()` was\n   * called before.\n   */\n  tryRestart() {\n    switch (this.socket.state) {\n      case \"stopped\":\n        break;\n      case \"terminated\":\n      case \"connecting\":\n      case \"ready\":\n      case \"disconnected\":\n        this.logger.logVerbose(\"Restart called without stopping first\");\n        return;\n      default: {\n        this.socket;\n      }\n    }\n    this.setupNetworkListener();\n    this.connect();\n  }\n  pause() {\n    switch (this.socket.state) {\n      case \"disconnected\":\n      case \"stopped\":\n      case \"terminated\":\n        return;\n      case \"connecting\":\n      case \"ready\": {\n        this.socket = { ...this.socket, paused: \"yes\" };\n        return;\n      }\n      default: {\n        this.socket;\n        return;\n      }\n    }\n  }\n  /**\n   * Try to reconnect immediately, canceling any scheduled reconnect.\n   * This is useful when detecting network recovery.\n   * Only takes action if we're in disconnected state (waiting to reconnect).\n   */\n  tryReconnectImmediately() {\n    this._logVerbose(\"tryReconnectImmediately called\");\n    if (this.socket.state !== \"disconnected\") {\n      this._logVerbose(\n        `tryReconnectImmediately called but socket state is ${this.socket.state}, no action taken`\n      );\n      return;\n    }\n    let timeSavedMs = null;\n    if (this.scheduledReconnect) {\n      const elapsed = monotonicMillis() - this.scheduledReconnect.scheduledAt;\n      timeSavedMs = Math.max(0, this.scheduledReconnect.backoffMs - elapsed);\n      this._logVerbose(\n        `would have waited ${Math.round(timeSavedMs)}ms more (backoff was ${Math.round(this.scheduledReconnect.backoffMs)}ms, elapsed ${Math.round(elapsed)}ms)`\n      );\n      clearTimeout(this.scheduledReconnect.timeout);\n      this.scheduledReconnect = null;\n      this._logVerbose(\"canceled scheduled reconnect\");\n    }\n    this.logger.log(\"Network recovery detected, reconnecting immediately\");\n    this.pendingNetworkRecoveryInfo = timeSavedMs !== null ? { timeSavedMs } : null;\n    this.connect();\n  }\n  /**\n   * Resume the state machine if previously paused.\n   */\n  resume() {\n    switch (this.socket.state) {\n      case \"connecting\":\n        this.socket = { ...this.socket, paused: \"no\" };\n        return;\n      case \"ready\":\n        if (this.socket.paused === \"uninitialized\") {\n          this.socket = { ...this.socket, paused: \"no\" };\n          this.onOpen({\n            connectionCount: this.connectionCount,\n            lastCloseReason: this.lastCloseReason,\n            clientTs: monotonicMillis()\n          });\n        } else if (this.socket.paused === \"yes\") {\n          this.socket = { ...this.socket, paused: \"no\" };\n          this.onResume();\n        }\n        return;\n      case \"terminated\":\n      case \"stopped\":\n      case \"disconnected\":\n        return;\n      default: {\n        this.socket;\n      }\n    }\n    this.connect();\n  }\n  connectionState() {\n    return {\n      isConnected: this.socket.state === \"ready\",\n      hasEverConnected: this._hasEverConnected,\n      connectionCount: this.connectionCount,\n      connectionRetries: this.retries\n    };\n  }\n  _logVerbose(message) {\n    this.logger.logVerbose(message);\n  }\n  nextBackoff(reason) {\n    const initialBackoff = reason === \"client\" ? 100 : reason === \"Unknown\" ? this.defaultInitialBackoff : serverDisconnectErrors[reason].timeout;\n    const baseBackoff = initialBackoff * Math.pow(2, this.retries);\n    this.retries += 1;\n    const actualBackoff = Math.min(baseBackoff, this.maxBackoff);\n    const jitter = actualBackoff * (Math.random() - 0.5);\n    return actualBackoff + jitter;\n  }\n  reportLargeTransition({\n    transition,\n    messageLength\n  }) {\n    if (transition.clientClockSkew === void 0 || transition.serverTs === void 0) {\n      return;\n    }\n    const transitionTransitTime = monotonicMillis() - // client time now\n    // clientClockSkew = (server time + upstream latency) - client time\n    // clientClockSkew is \"how many milliseconds behind (slow) is the client clock\"\n    // but the latency of the Connect message inflates this, making it appear further behind\n    transition.clientClockSkew - transition.serverTs / 1e6;\n    const prettyTransitionTime = `${Math.round(transitionTransitTime)}ms`;\n    const prettyMessageMB = `${Math.round(messageLength / 1e4) / 100}MB`;\n    const bytesPerSecond = messageLength / (transitionTransitTime / 1e3);\n    const prettyBytesPerSecond = `${Math.round(bytesPerSecond / 1e4) / 100}MB per second`;\n    this._logVerbose(\n      `received ${prettyMessageMB} transition in ${prettyTransitionTime} at ${prettyBytesPerSecond}`\n    );\n    if (messageLength > 2e7) {\n      this.logger.log(\n        `received query results totaling more that 20MB (${prettyMessageMB}) which will take a long time to download on slower connections`\n      );\n    } else if (transitionTransitTime > 2e4) {\n      this.logger.log(\n        `received query results totaling ${prettyMessageMB} which took more than 20s to arrive (${prettyTransitionTime})`\n      );\n    }\n    if (this.debug) {\n      this.sendMessage({\n        type: \"Event\",\n        eventType: \"ClientReceivedTransition\",\n        event: { transitionTransitTime, messageLength }\n      });\n    }\n  }\n}\n//# sourceMappingURL=web_socket_manager.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy93ZWJfc29ja2V0X21hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUl1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHVEQUF1RDtBQUNyRTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsY0FBYztBQUN2QztBQUNBLGtDQUFrQyxjQUFjO0FBQ2hELCtCQUErQixjQUFjO0FBQzdDLHdCQUF3QixjQUFjO0FBQ3RDLGlDQUFpQyxjQUFjO0FBQy9DLHNCQUFzQixjQUFjO0FBQ3BDLHdCQUF3QixjQUFjO0FBQ3RDLG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0EsOEJBQThCLGNBQWM7QUFDNUMsOEJBQThCLGNBQWM7QUFDNUMsK0JBQStCLGNBQWM7QUFDN0M7QUFDQSx5QkFBeUIsY0FBYztBQUN2Qyx5QkFBeUIsY0FBYztBQUN2QywrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGtCQUFrQixZQUFZLHNEQUFzRDtBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxlQUFlLFFBQVEsaUJBQWlCO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixnRUFBa0I7QUFDM0M7QUFDQTtBQUNBLHNDQUFzQyxpQkFBaUI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixTQUFTO0FBQ1Q7QUFDQSwrQ0FBK0MsOEJBQThCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELFFBQVE7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixnRUFBa0I7QUFDNUMsd0RBQXdELG1CQUFtQjtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxtQkFBbUI7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxvQkFBb0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsV0FBVztBQUM5RTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsV0FBVztBQUMzRDtBQUNBLHNCQUFzQixhQUFhO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxhQUFhO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix3QkFBd0I7QUFDN0MsUUFBUTtBQUNSO0FBQ0E7QUFDQSw2QkFBNkIsaUVBQW1CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxnRUFBZ0UsTUFBTTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsa0NBQWtDLG9CQUFvQixhQUFhLElBQUk7QUFDbEY7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsa0JBQWtCLFlBQVksc0RBQXNELEtBQUs7QUFDbEk7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQSwrQ0FBK0Msb0JBQW9CO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsWUFBWTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHFCQUFxQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGtCQUFrQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsa0JBQWtCO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0JBQXdCLHVCQUF1Qiw4Q0FBOEMsY0FBYyxvQkFBb0I7QUFDNUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGNBQWM7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsVUFBVTtBQUNWLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msa0NBQWtDO0FBQ3RFLCtCQUErQixzQ0FBc0M7QUFDckU7QUFDQSxvQ0FBb0MsdUNBQXVDO0FBQzNFO0FBQ0Esa0JBQWtCLGlCQUFpQixnQkFBZ0Isc0JBQXNCLEtBQUsscUJBQXFCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxnQkFBZ0I7QUFDM0U7QUFDQSxNQUFNO0FBQ047QUFDQSwyQ0FBMkMsaUJBQWlCLHNDQUFzQyxxQkFBcUI7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxicm93c2VyXFxzeW5jXFx3ZWJfc29ja2V0X21hbmFnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuaW1wb3J0IHtcbiAgZW5jb2RlQ2xpZW50TWVzc2FnZSxcbiAgcGFyc2VTZXJ2ZXJNZXNzYWdlXG59IGZyb20gXCIuL3Byb3RvY29sLmpzXCI7XG5jb25zdCBDTE9TRV9OT1JNQUwgPSAxZTM7XG5jb25zdCBDTE9TRV9HT0lOR19BV0FZID0gMTAwMTtcbmNvbnN0IENMT1NFX05PX1NUQVRVUyA9IDEwMDU7XG5jb25zdCBDTE9TRV9OT1RfRk9VTkQgPSA0MDQwO1xubGV0IGZpcnN0VGltZTtcbmZ1bmN0aW9uIG1vbm90b25pY01pbGxpcygpIHtcbiAgaWYgKGZpcnN0VGltZSA9PT0gdm9pZCAwKSB7XG4gICAgZmlyc3RUaW1lID0gRGF0ZS5ub3coKTtcbiAgfVxuICBpZiAodHlwZW9mIHBlcmZvcm1hbmNlID09PSBcInVuZGVmaW5lZFwiIHx8ICFwZXJmb3JtYW5jZS5ub3cpIHtcbiAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgfVxuICByZXR1cm4gTWF0aC5yb3VuZChmaXJzdFRpbWUgKyBwZXJmb3JtYW5jZS5ub3coKSk7XG59XG5mdW5jdGlvbiBwcmV0dHlOb3coKSB7XG4gIHJldHVybiBgdD0ke01hdGgucm91bmQoKG1vbm90b25pY01pbGxpcygpIC0gZmlyc3RUaW1lKSAvIDEwMCkgLyAxMH1zYDtcbn1cbmNvbnN0IHNlcnZlckRpc2Nvbm5lY3RFcnJvcnMgPSB7XG4gIC8vIEEga25vd24gZXJyb3IsIGUuZy4gZHVyaW5nIGEgcmVzdGFydCBvciBwdXNoXG4gIEludGVybmFsU2VydmVyRXJyb3I6IHsgdGltZW91dDogMWUzIH0sXG4gIC8vIEVycm9yTWV0YWRhdGE6Om92ZXJsb2FkZWQoKSBtZXNzYWdlcyB0aGF0IHdlIHJlYWx5IHNob3VsZCBiYWNrIG9mZlxuICBTdWJzY3JpcHRpb25zV29ya2VyRnVsbEVycm9yOiB7IHRpbWVvdXQ6IDNlMyB9LFxuICBUb29NYW55Q29uY3VycmVudFJlcXVlc3RzOiB7IHRpbWVvdXQ6IDNlMyB9LFxuICBDb21taXR0ZXJGdWxsRXJyb3I6IHsgdGltZW91dDogM2UzIH0sXG4gIEF3c1Rvb01hbnlSZXF1ZXN0c0V4Y2VwdGlvbjogeyB0aW1lb3V0OiAzZTMgfSxcbiAgRXhlY3V0ZUZ1bGxFcnJvcjogeyB0aW1lb3V0OiAzZTMgfSxcbiAgU3lzdGVtVGltZW91dEVycm9yOiB7IHRpbWVvdXQ6IDNlMyB9LFxuICBFeHBpcmVkSW5RdWV1ZTogeyB0aW1lb3V0OiAzZTMgfSxcbiAgLy8gRXJyb3JNZXRhZGF0YTo6ZmVhdHVyZV90ZW1wb3JhcmlseV91bmF2YWlsYWJsZSgpIHRoYXQgdHlwaWNhbGx5IGluZGljYXRlIGEgZGVwbG95IGp1c3QgaGFwcGVuZWRcbiAgVmVjdG9ySW5kZXhlc1VuYXZhaWxhYmxlOiB7IHRpbWVvdXQ6IDFlMyB9LFxuICBTZWFyY2hJbmRleGVzVW5hdmFpbGFibGU6IHsgdGltZW91dDogMWUzIH0sXG4gIFRhYmxlU3VtbWFyaWVzVW5hdmFpbGFibGU6IHsgdGltZW91dDogMWUzIH0sXG4gIC8vIE1vcmUgRXJyb3JNZXRhZGF0YTo6b3ZlcmxvYWRlZCgpXG4gIFZlY3RvckluZGV4VG9vTGFyZ2U6IHsgdGltZW91dDogM2UzIH0sXG4gIFNlYXJjaEluZGV4VG9vTGFyZ2U6IHsgdGltZW91dDogM2UzIH0sXG4gIFRvb01hbnlXcml0ZXNJblRpbWVQZXJpb2Q6IHsgdGltZW91dDogM2UzIH1cbn07XG5mdW5jdGlvbiBjbGFzc2lmeURpc2Nvbm5lY3RFcnJvcihzKSB7XG4gIGlmIChzID09PSB2b2lkIDApIHJldHVybiBcIlVua25vd25cIjtcbiAgZm9yIChjb25zdCBwcmVmaXggb2YgT2JqZWN0LmtleXMoXG4gICAgc2VydmVyRGlzY29ubmVjdEVycm9yc1xuICApKSB7XG4gICAgaWYgKHMuc3RhcnRzV2l0aChwcmVmaXgpKSB7XG4gICAgICByZXR1cm4gcHJlZml4O1xuICAgIH1cbiAgfVxuICByZXR1cm4gXCJVbmtub3duXCI7XG59XG5leHBvcnQgY2xhc3MgV2ViU29ja2V0TWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHVyaSwgY2FsbGJhY2tzLCB3ZWJTb2NrZXRDb25zdHJ1Y3RvciwgbG9nZ2VyLCBtYXJrQ29ubmVjdGlvblN0YXRlRGlydHksIGRlYnVnKSB7XG4gICAgdGhpcy5tYXJrQ29ubmVjdGlvblN0YXRlRGlydHkgPSBtYXJrQ29ubmVjdGlvblN0YXRlRGlydHk7XG4gICAgdGhpcy5kZWJ1ZyA9IGRlYnVnO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJzb2NrZXRcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNvbm5lY3Rpb25Db3VudFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX2hhc0V2ZXJDb25uZWN0ZWRcIiwgZmFsc2UpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJsYXN0Q2xvc2VSZWFzb25cIik7XG4gICAgLy8gU3RhdGUgZm9yIGFzc2VtYmxpbmcgdGhlIHNwbGl0LXVwIFRyYW5zaXRpb24gY3VycmVudGx5IGJlaW5nIHJlY2VpdmVkLlxuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ0cmFuc2l0aW9uQ2h1bmtCdWZmZXJcIiwgbnVsbCk7XG4gICAgLyoqIFVwb24gSFRUUFMvV1NTIGZhaWx1cmUsIHRoZSBmaXJzdCBqaXR0ZXJlZCBiYWNrb2ZmIGR1cmF0aW9uLCBpbiBtcy4gKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZGVmYXVsdEluaXRpYWxCYWNrb2ZmXCIpO1xuICAgIC8qKiBXZSBiYWNrb2ZmIGV4cG9uZW50aWFsbHksIGJ1dCB3ZSBuZWVkIHRvIGNhcCB0aGF0LS10aGlzIGlzIHRoZSBqaXR0ZXJlZCBtYXguICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIm1heEJhY2tvZmZcIik7XG4gICAgLyoqIEhvdyBtYW55IHRpbWVzIGhhdmUgd2UgZmFpbGVkIGNvbnNlY3V0aXZlbHk/ICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInJldHJpZXNcIik7XG4gICAgLyoqIEhvdyBsb25nIGJlZm9yZSBsYWNrIG9mIHNlcnZlciByZXNwb25zZSBjYXVzZXMgdXMgdG8gaW5pdGlhdGUgYSByZWNvbm5lY3QsXG4gICAgICogaW4gbXMgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwic2VydmVySW5hY3Rpdml0eVRocmVzaG9sZFwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicmVjb25uZWN0RHVlVG9TZXJ2ZXJJbmFjdGl2aXR5VGltZW91dFwiKTtcbiAgICAvKiogU2NoZWR1bGVkIHJlY29ubmVjdCBzdGF0ZTogdGltZW91dCBoYW5kbGUgYW5kIHRpbWluZyBpbmZvICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNjaGVkdWxlZFJlY29ubmVjdFwiLCBudWxsKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwibmV0d29ya09ubGluZUhhbmRsZXJcIiwgbnVsbCk7XG4gICAgLyoqIFBlbmRpbmcgZXZlbnQgdG8gc2VuZCBhZnRlciByZWNvbm5lY3RpbmcgZHVlIHRvIG5ldHdvcmsgcmVjb3ZlcnkgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicGVuZGluZ05ldHdvcmtSZWNvdmVyeUluZm9cIiwgbnVsbCk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInVyaVwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwib25PcGVuXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJvblJlc3VtZVwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwib25NZXNzYWdlXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ3ZWJTb2NrZXRDb25zdHJ1Y3RvclwiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwibG9nZ2VyXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJvblNlcnZlckRpc2Nvbm5lY3RFcnJvclwiKTtcbiAgICB0aGlzLndlYlNvY2tldENvbnN0cnVjdG9yID0gd2ViU29ja2V0Q29uc3RydWN0b3I7XG4gICAgdGhpcy5zb2NrZXQgPSB7IHN0YXRlOiBcImRpc2Nvbm5lY3RlZFwiIH07XG4gICAgdGhpcy5jb25uZWN0aW9uQ291bnQgPSAwO1xuICAgIHRoaXMubGFzdENsb3NlUmVhc29uID0gXCJJbml0aWFsQ29ubmVjdFwiO1xuICAgIHRoaXMuZGVmYXVsdEluaXRpYWxCYWNrb2ZmID0gMWUzO1xuICAgIHRoaXMubWF4QmFja29mZiA9IDE2ZTM7XG4gICAgdGhpcy5yZXRyaWVzID0gMDtcbiAgICB0aGlzLnNlcnZlckluYWN0aXZpdHlUaHJlc2hvbGQgPSA2ZTQ7XG4gICAgdGhpcy5yZWNvbm5lY3REdWVUb1NlcnZlckluYWN0aXZpdHlUaW1lb3V0ID0gbnVsbDtcbiAgICB0aGlzLnVyaSA9IHVyaTtcbiAgICB0aGlzLm9uT3BlbiA9IGNhbGxiYWNrcy5vbk9wZW47XG4gICAgdGhpcy5vblJlc3VtZSA9IGNhbGxiYWNrcy5vblJlc3VtZTtcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGNhbGxiYWNrcy5vbk1lc3NhZ2U7XG4gICAgdGhpcy5vblNlcnZlckRpc2Nvbm5lY3RFcnJvciA9IGNhbGxiYWNrcy5vblNlcnZlckRpc2Nvbm5lY3RFcnJvcjtcbiAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcbiAgICB0aGlzLnNldHVwTmV0d29ya0xpc3RlbmVyKCk7XG4gICAgdGhpcy5jb25uZWN0KCk7XG4gIH1cbiAgc2V0U29ja2V0U3RhdGUoc3RhdGUpIHtcbiAgICB0aGlzLnNvY2tldCA9IHN0YXRlO1xuICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXG4gICAgICBgc29ja2V0IHN0YXRlIGNoYW5nZWQ6ICR7dGhpcy5zb2NrZXQuc3RhdGV9LCBwYXVzZWQ6ICR7XCJwYXVzZWRcIiBpbiB0aGlzLnNvY2tldCA/IHRoaXMuc29ja2V0LnBhdXNlZCA6IHZvaWQgMH1gXG4gICAgKTtcbiAgICB0aGlzLm1hcmtDb25uZWN0aW9uU3RhdGVEaXJ0eSgpO1xuICB9XG4gIHNldHVwTmV0d29ya0xpc3RlbmVyKCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLm5ldHdvcmtPbmxpbmVIYW5kbGVyICE9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubmV0d29ya09ubGluZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLl9sb2dWZXJib3NlKFwibmV0d29yayBvbmxpbmUgZXZlbnQgZGV0ZWN0ZWRcIik7XG4gICAgICB0aGlzLnRyeVJlY29ubmVjdEltbWVkaWF0ZWx5KCk7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLm5ldHdvcmtPbmxpbmVIYW5kbGVyKTtcbiAgICB0aGlzLl9sb2dWZXJib3NlKFwibmV0d29yayBvbmxpbmUgZXZlbnQgbGlzdGVuZXIgcmVnaXN0ZXJlZFwiKTtcbiAgfVxuICBjbGVhbnVwTmV0d29ya0xpc3RlbmVyKCkge1xuICAgIGlmICh0aGlzLm5ldHdvcmtPbmxpbmVIYW5kbGVyICYmIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMubmV0d29ya09ubGluZUhhbmRsZXIpO1xuICAgICAgdGhpcy5uZXR3b3JrT25saW5lSGFuZGxlciA9IG51bGw7XG4gICAgICB0aGlzLl9sb2dWZXJib3NlKFwibmV0d29yayBvbmxpbmUgZXZlbnQgbGlzdGVuZXIgcmVtb3ZlZFwiKTtcbiAgICB9XG4gIH1cbiAgYXNzZW1ibGVUcmFuc2l0aW9uKGNodW5rKSB7XG4gICAgaWYgKGNodW5rLnBhcnROdW1iZXIgPCAwIHx8IGNodW5rLnBhcnROdW1iZXIgPj0gY2h1bmsudG90YWxQYXJ0cyB8fCBjaHVuay50b3RhbFBhcnRzID09PSAwIHx8IHRoaXMudHJhbnNpdGlvbkNodW5rQnVmZmVyICYmICh0aGlzLnRyYW5zaXRpb25DaHVua0J1ZmZlci50b3RhbFBhcnRzICE9PSBjaHVuay50b3RhbFBhcnRzIHx8IHRoaXMudHJhbnNpdGlvbkNodW5rQnVmZmVyLnRyYW5zaXRpb25JZCAhPT0gY2h1bmsudHJhbnNpdGlvbklkKSkge1xuICAgICAgdGhpcy50cmFuc2l0aW9uQ2h1bmtCdWZmZXIgPSBudWxsO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBUcmFuc2l0aW9uQ2h1bmtcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLnRyYW5zaXRpb25DaHVua0J1ZmZlciA9PT0gbnVsbCkge1xuICAgICAgdGhpcy50cmFuc2l0aW9uQ2h1bmtCdWZmZXIgPSB7XG4gICAgICAgIGNodW5rczogW10sXG4gICAgICAgIHRvdGFsUGFydHM6IGNodW5rLnRvdGFsUGFydHMsXG4gICAgICAgIHRyYW5zaXRpb25JZDogY2h1bmsudHJhbnNpdGlvbklkXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoY2h1bmsucGFydE51bWJlciAhPT0gdGhpcy50cmFuc2l0aW9uQ2h1bmtCdWZmZXIuY2h1bmtzLmxlbmd0aCkge1xuICAgICAgY29uc3QgZXhwZWN0ZWRMZW5ndGggPSB0aGlzLnRyYW5zaXRpb25DaHVua0J1ZmZlci5jaHVua3MubGVuZ3RoO1xuICAgICAgdGhpcy50cmFuc2l0aW9uQ2h1bmtCdWZmZXIgPSBudWxsO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgVHJhbnNpdGlvbkNodW5rIHJlY2VpdmVkIG91dCBvZiBvcmRlcjogZXhwZWN0ZWQgcGFydCAke2V4cGVjdGVkTGVuZ3RofSwgZ290ICR7Y2h1bmsucGFydE51bWJlcn1gXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLnRyYW5zaXRpb25DaHVua0J1ZmZlci5jaHVua3MucHVzaChjaHVuay5jaHVuayk7XG4gICAgaWYgKHRoaXMudHJhbnNpdGlvbkNodW5rQnVmZmVyLmNodW5rcy5sZW5ndGggPT09IGNodW5rLnRvdGFsUGFydHMpIHtcbiAgICAgIGNvbnN0IGZ1bGxKc29uID0gdGhpcy50cmFuc2l0aW9uQ2h1bmtCdWZmZXIuY2h1bmtzLmpvaW4oXCJcIik7XG4gICAgICB0aGlzLnRyYW5zaXRpb25DaHVua0J1ZmZlciA9IG51bGw7XG4gICAgICBjb25zdCB0cmFuc2l0aW9uID0gcGFyc2VTZXJ2ZXJNZXNzYWdlKEpTT04ucGFyc2UoZnVsbEpzb24pKTtcbiAgICAgIGlmICh0cmFuc2l0aW9uLnR5cGUgIT09IFwiVHJhbnNpdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgRXhwZWN0ZWQgVHJhbnNpdGlvbiwgZ290ICR7dHJhbnNpdGlvbi50eXBlfSBhZnRlciBhc3NlbWJsaW5nIGNodW5rc2BcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cmFuc2l0aW9uO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25uZWN0KCkge1xuICAgIGlmICh0aGlzLnNvY2tldC5zdGF0ZSA9PT0gXCJ0ZXJtaW5hdGVkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc29ja2V0LnN0YXRlICE9PSBcImRpc2Nvbm5lY3RlZFwiICYmIHRoaXMuc29ja2V0LnN0YXRlICE9PSBcInN0b3BwZWRcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkRpZG4ndCBzdGFydCBjb25uZWN0aW9uIGZyb20gZGlzY29ubmVjdGVkIHN0YXRlOiBcIiArIHRoaXMuc29ja2V0LnN0YXRlXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCB3cyA9IG5ldyB0aGlzLndlYlNvY2tldENvbnN0cnVjdG9yKHRoaXMudXJpKTtcbiAgICB0aGlzLl9sb2dWZXJib3NlKFwiY29uc3RydWN0ZWQgV2ViU29ja2V0XCIpO1xuICAgIHRoaXMuc2V0U29ja2V0U3RhdGUoe1xuICAgICAgc3RhdGU6IFwiY29ubmVjdGluZ1wiLFxuICAgICAgd3MsXG4gICAgICBwYXVzZWQ6IFwibm9cIlxuICAgIH0pO1xuICAgIHRoaXMucmVzZXRTZXJ2ZXJJbmFjdGl2aXR5VGltZW91dCgpO1xuICAgIHdzLm9ub3BlbiA9ICgpID0+IHtcbiAgICAgIHRoaXMubG9nZ2VyLmxvZ1ZlcmJvc2UoXCJiZWdpbiB3cy5vbm9wZW5cIik7XG4gICAgICBpZiAodGhpcy5zb2NrZXQuc3RhdGUgIT09IFwiY29ubmVjdGluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm9ub3BlbiBjYWxsZWQgd2l0aCBzb2NrZXQgbm90IGluIGNvbm5lY3Rpbmcgc3RhdGVcIik7XG4gICAgICB9XG4gICAgICB0aGlzLnNldFNvY2tldFN0YXRlKHtcbiAgICAgICAgc3RhdGU6IFwicmVhZHlcIixcbiAgICAgICAgd3MsXG4gICAgICAgIHBhdXNlZDogdGhpcy5zb2NrZXQucGF1c2VkID09PSBcInllc1wiID8gXCJ1bmluaXRpYWxpemVkXCIgOiBcIm5vXCJcbiAgICAgIH0pO1xuICAgICAgdGhpcy5yZXNldFNlcnZlckluYWN0aXZpdHlUaW1lb3V0KCk7XG4gICAgICBpZiAodGhpcy5zb2NrZXQucGF1c2VkID09PSBcIm5vXCIpIHtcbiAgICAgICAgdGhpcy5faGFzRXZlckNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub25PcGVuKHtcbiAgICAgICAgICBjb25uZWN0aW9uQ291bnQ6IHRoaXMuY29ubmVjdGlvbkNvdW50LFxuICAgICAgICAgIGxhc3RDbG9zZVJlYXNvbjogdGhpcy5sYXN0Q2xvc2VSZWFzb24sXG4gICAgICAgICAgY2xpZW50VHM6IG1vbm90b25pY01pbGxpcygpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubGFzdENsb3NlUmVhc29uICE9PSBcIkluaXRpYWxDb25uZWN0XCIpIHtcbiAgICAgICAgaWYgKHRoaXMubGFzdENsb3NlUmVhc29uKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIubG9nKFxuICAgICAgICAgICAgXCJXZWJTb2NrZXQgcmVjb25uZWN0ZWQgYXRcIixcbiAgICAgICAgICAgIHByZXR0eU5vdygpLFxuICAgICAgICAgICAgXCJhZnRlciBkaXNjb25uZWN0IGR1ZSB0b1wiLFxuICAgICAgICAgICAgdGhpcy5sYXN0Q2xvc2VSZWFzb25cbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcIldlYlNvY2tldCByZWNvbm5lY3RlZCBhdFwiLCBwcmV0dHlOb3coKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuY29ubmVjdGlvbkNvdW50ICs9IDE7XG4gICAgICB0aGlzLmxhc3RDbG9zZVJlYXNvbiA9IG51bGw7XG4gICAgICBpZiAodGhpcy5wZW5kaW5nTmV0d29ya1JlY292ZXJ5SW5mbyAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB7IHRpbWVTYXZlZE1zIH0gPSB0aGlzLnBlbmRpbmdOZXR3b3JrUmVjb3ZlcnlJbmZvO1xuICAgICAgICB0aGlzLnBlbmRpbmdOZXR3b3JrUmVjb3ZlcnlJbmZvID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgdHlwZTogXCJFdmVudFwiLFxuICAgICAgICAgIGV2ZW50VHlwZTogXCJOZXR3b3JrUmVjb3ZlcnlSZWNvbm5lY3RcIixcbiAgICAgICAgICBldmVudDogeyB0aW1lU2F2ZWRNcyB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coXG4gICAgICAgICAgYE5ldHdvcmsgcmVjb3ZlcnkgcmVjb25uZWN0IHNhdmVkIH4ke01hdGgucm91bmQodGltZVNhdmVkTXMgLyAxZTMpfXMgb2Ygd2FpdGluZ2BcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHdzLm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgIHRoaXMudHJhbnNpdGlvbkNodW5rQnVmZmVyID0gbnVsbDtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKGBXZWJTb2NrZXQgZXJyb3IgbWVzc2FnZTogJHttZXNzYWdlfWApO1xuICAgICAgfVxuICAgIH07XG4gICAgd3Mub25tZXNzYWdlID0gKG1lc3NhZ2UpID0+IHtcbiAgICAgIHRoaXMucmVzZXRTZXJ2ZXJJbmFjdGl2aXR5VGltZW91dCgpO1xuICAgICAgY29uc3QgbWVzc2FnZUxlbmd0aCA9IG1lc3NhZ2UuZGF0YS5sZW5ndGg7XG4gICAgICBsZXQgc2VydmVyTWVzc2FnZSA9IHBhcnNlU2VydmVyTWVzc2FnZShKU09OLnBhcnNlKG1lc3NhZ2UuZGF0YSkpO1xuICAgICAgdGhpcy5fbG9nVmVyYm9zZShgcmVjZWl2ZWQgd3MgbWVzc2FnZSB3aXRoIHR5cGUgJHtzZXJ2ZXJNZXNzYWdlLnR5cGV9YCk7XG4gICAgICBpZiAoc2VydmVyTWVzc2FnZS50eXBlID09PSBcIlBpbmdcIikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoc2VydmVyTWVzc2FnZS50eXBlID09PSBcIlRyYW5zaXRpb25DaHVua1wiKSB7XG4gICAgICAgIGNvbnN0IHRyYW5zaXRpb24gPSB0aGlzLmFzc2VtYmxlVHJhbnNpdGlvbihzZXJ2ZXJNZXNzYWdlKTtcbiAgICAgICAgaWYgKCF0cmFuc2l0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNlcnZlck1lc3NhZ2UgPSB0cmFuc2l0aW9uO1xuICAgICAgICB0aGlzLl9sb2dWZXJib3NlKFxuICAgICAgICAgIGBhc3NlbWJsZWQgZnVsbCB3cyBtZXNzYWdlIG9mIHR5cGUgJHtzZXJ2ZXJNZXNzYWdlLnR5cGV9YFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMudHJhbnNpdGlvbkNodW5rQnVmZmVyICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMudHJhbnNpdGlvbkNodW5rQnVmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKFxuICAgICAgICAgIGBSZWNlaXZlZCB1bmV4cGVjdGVkICR7c2VydmVyTWVzc2FnZS50eXBlfSB3aGlsZSBidWZmZXJpbmcgVHJhbnNpdGlvbkNodW5rc2BcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChzZXJ2ZXJNZXNzYWdlLnR5cGUgPT09IFwiVHJhbnNpdGlvblwiKSB7XG4gICAgICAgIHRoaXMucmVwb3J0TGFyZ2VUcmFuc2l0aW9uKHtcbiAgICAgICAgICBtZXNzYWdlTGVuZ3RoLFxuICAgICAgICAgIHRyYW5zaXRpb246IHNlcnZlck1lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXNwb25zZSA9IHRoaXMub25NZXNzYWdlKHNlcnZlck1lc3NhZ2UpO1xuICAgICAgaWYgKHJlc3BvbnNlLmhhc1N5bmNlZFBhc3RMYXN0UmVjb25uZWN0KSB7XG4gICAgICAgIHRoaXMucmV0cmllcyA9IDA7XG4gICAgICAgIHRoaXMubWFya0Nvbm5lY3Rpb25TdGF0ZURpcnR5KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB3cy5vbmNsb3NlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLl9sb2dWZXJib3NlKFwiYmVnaW4gd3Mub25jbG9zZVwiKTtcbiAgICAgIHRoaXMudHJhbnNpdGlvbkNodW5rQnVmZmVyID0gbnVsbDtcbiAgICAgIGlmICh0aGlzLmxhc3RDbG9zZVJlYXNvbiA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLmxhc3RDbG9zZVJlYXNvbiA9IGV2ZW50LnJlYXNvbiB8fCBgY2xvc2VkIHdpdGggY29kZSAke2V2ZW50LmNvZGV9YDtcbiAgICAgIH1cbiAgICAgIGlmIChldmVudC5jb2RlICE9PSBDTE9TRV9OT1JNQUwgJiYgZXZlbnQuY29kZSAhPT0gQ0xPU0VfR09JTkdfQVdBWSAmJiAvLyBUaGlzIGNvbW1vbmx5IGdldHMgZmlyZWQgb24gbW9iaWxlIGFwcHMgd2hlbiB0aGUgYXBwIGlzIGJhY2tncm91bmRlZFxuICAgICAgZXZlbnQuY29kZSAhPT0gQ0xPU0VfTk9fU1RBVFVTICYmIGV2ZW50LmNvZGUgIT09IENMT1NFX05PVF9GT1VORCkge1xuICAgICAgICBsZXQgbXNnID0gYFdlYlNvY2tldCBjbG9zZWQgd2l0aCBjb2RlICR7ZXZlbnQuY29kZX1gO1xuICAgICAgICBpZiAoZXZlbnQucmVhc29uKSB7XG4gICAgICAgICAgbXNnICs9IGA6ICR7ZXZlbnQucmVhc29ufWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKG1zZyk7XG4gICAgICAgIGlmICh0aGlzLm9uU2VydmVyRGlzY29ubmVjdEVycm9yICYmIGV2ZW50LnJlYXNvbikge1xuICAgICAgICAgIHRoaXMub25TZXJ2ZXJEaXNjb25uZWN0RXJyb3IobXNnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgcmVhc29uID0gY2xhc3NpZnlEaXNjb25uZWN0RXJyb3IoZXZlbnQucmVhc29uKTtcbiAgICAgIHRoaXMuc2NoZWR1bGVSZWNvbm5lY3QocmVhc29uKTtcbiAgICAgIHJldHVybjtcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyBUaGUgc3RhdGUgb2YgdGhlIHtAbGluayBTb2NrZXR9LlxuICAgKi9cbiAgc29ja2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc29ja2V0LnN0YXRlO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0gbWVzc2FnZSAtIEEgQ2xpZW50TWVzc2FnZSB0byBzZW5kLlxuICAgKiBAcmV0dXJucyBXaGV0aGVyIHRoZSBtZXNzYWdlIChtaWdodCBoYXZlIGJlZW4pIHNlbnQuXG4gICAqL1xuICBzZW5kTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgY29uc3QgbWVzc2FnZUZvckxvZyA9IHtcbiAgICAgIHR5cGU6IG1lc3NhZ2UudHlwZSxcbiAgICAgIC4uLm1lc3NhZ2UudHlwZSA9PT0gXCJBdXRoZW50aWNhdGVcIiAmJiBtZXNzYWdlLnRva2VuVHlwZSA9PT0gXCJVc2VyXCIgPyB7XG4gICAgICAgIHZhbHVlOiBgLi4uJHttZXNzYWdlLnZhbHVlLnNsaWNlKC03KX1gXG4gICAgICB9IDoge31cbiAgICB9O1xuICAgIGlmICh0aGlzLnNvY2tldC5zdGF0ZSA9PT0gXCJyZWFkeVwiICYmIHRoaXMuc29ja2V0LnBhdXNlZCA9PT0gXCJub1wiKSB7XG4gICAgICBjb25zdCBlbmNvZGVkTWVzc2FnZSA9IGVuY29kZUNsaWVudE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gSlNPTi5zdHJpbmdpZnkoZW5jb2RlZE1lc3NhZ2UpO1xuICAgICAgbGV0IHNlbnQgPSBmYWxzZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuc29ja2V0LndzLnNlbmQocmVxdWVzdCk7XG4gICAgICAgIHNlbnQgPSB0cnVlO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKFxuICAgICAgICAgIGBGYWlsZWQgdG8gc2VuZCBtZXNzYWdlIG9uIFdlYlNvY2tldCwgcmVjb25uZWN0aW5nOiAke2Vycm9yfWBcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5jbG9zZUFuZFJlY29ubmVjdChcIkZhaWxlZFRvU2VuZE1lc3NhZ2VcIik7XG4gICAgICB9XG4gICAgICB0aGlzLl9sb2dWZXJib3NlKFxuICAgICAgICBgJHtzZW50ID8gXCJzZW50XCIgOiBcImZhaWxlZCB0byBzZW5kXCJ9IG1lc3NhZ2Ugd2l0aCB0eXBlICR7bWVzc2FnZS50eXBlfTogJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICBtZXNzYWdlRm9yTG9nXG4gICAgICAgICl9YFxuICAgICAgKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLl9sb2dWZXJib3NlKFxuICAgICAgYG1lc3NhZ2Ugbm90IHNlbnQgKHNvY2tldCBzdGF0ZTogJHt0aGlzLnNvY2tldC5zdGF0ZX0sIHBhdXNlZDogJHtcInBhdXNlZFwiIGluIHRoaXMuc29ja2V0ID8gdGhpcy5zb2NrZXQucGF1c2VkIDogdm9pZCAwfSk6ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgIG1lc3NhZ2VGb3JMb2dcbiAgICAgICl9YFxuICAgICk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJlc2V0U2VydmVySW5hY3Rpdml0eVRpbWVvdXQoKSB7XG4gICAgaWYgKHRoaXMuc29ja2V0LnN0YXRlID09PSBcInRlcm1pbmF0ZWRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5yZWNvbm5lY3REdWVUb1NlcnZlckluYWN0aXZpdHlUaW1lb3V0ICE9PSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5yZWNvbm5lY3REdWVUb1NlcnZlckluYWN0aXZpdHlUaW1lb3V0KTtcbiAgICAgIHRoaXMucmVjb25uZWN0RHVlVG9TZXJ2ZXJJbmFjdGl2aXR5VGltZW91dCA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMucmVjb25uZWN0RHVlVG9TZXJ2ZXJJbmFjdGl2aXR5VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZUFuZFJlY29ubmVjdChcIkluYWN0aXZlU2VydmVyXCIpO1xuICAgIH0sIHRoaXMuc2VydmVySW5hY3Rpdml0eVRocmVzaG9sZCk7XG4gIH1cbiAgc2NoZWR1bGVSZWNvbm5lY3QocmVhc29uKSB7XG4gICAgaWYgKHRoaXMuc2NoZWR1bGVkUmVjb25uZWN0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5zY2hlZHVsZWRSZWNvbm5lY3QudGltZW91dCk7XG4gICAgICB0aGlzLnNjaGVkdWxlZFJlY29ubmVjdCA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuc29ja2V0ID0geyBzdGF0ZTogXCJkaXNjb25uZWN0ZWRcIiB9O1xuICAgIGNvbnN0IGJhY2tvZmYgPSB0aGlzLm5leHRCYWNrb2ZmKHJlYXNvbik7XG4gICAgdGhpcy5tYXJrQ29ubmVjdGlvblN0YXRlRGlydHkoKTtcbiAgICB0aGlzLmxvZ2dlci5sb2coYEF0dGVtcHRpbmcgcmVjb25uZWN0IGluICR7TWF0aC5yb3VuZChiYWNrb2ZmKX1tc2ApO1xuICAgIGNvbnN0IHNjaGVkdWxlZEF0ID0gbW9ub3RvbmljTWlsbGlzKCk7XG4gICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zY2hlZHVsZWRSZWNvbm5lY3Q/LnRpbWVvdXQgPT09IHRpbWVvdXRJZCkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlZFJlY29ubmVjdCA9IG51bGw7XG4gICAgICAgIHRoaXMuY29ubmVjdCgpO1xuICAgICAgfVxuICAgIH0sIGJhY2tvZmYpO1xuICAgIHRoaXMuc2NoZWR1bGVkUmVjb25uZWN0ID0ge1xuICAgICAgdGltZW91dDogdGltZW91dElkLFxuICAgICAgc2NoZWR1bGVkQXQsXG4gICAgICBiYWNrb2ZmTXM6IGJhY2tvZmZcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBDbG9zZSB0aGUgV2ViU29ja2V0IGFuZCBzY2hlZHVsZSBhIHJlY29ubmVjdC5cbiAgICpcbiAgICogVGhpcyBzaG91bGQgYmUgdXNlZCB3aGVuIHdlIGhpdCBhbiBlcnJvciBhbmQgd291bGQgbGlrZSB0byByZXN0YXJ0IHRoZSBzZXNzaW9uLlxuICAgKi9cbiAgY2xvc2VBbmRSZWNvbm5lY3QoY2xvc2VSZWFzb24pIHtcbiAgICB0aGlzLl9sb2dWZXJib3NlKGBiZWdpbiBjbG9zZUFuZFJlY29ubmVjdCB3aXRoIHJlYXNvbiAke2Nsb3NlUmVhc29ufWApO1xuICAgIHN3aXRjaCAodGhpcy5zb2NrZXQuc3RhdGUpIHtcbiAgICAgIGNhc2UgXCJkaXNjb25uZWN0ZWRcIjpcbiAgICAgIGNhc2UgXCJ0ZXJtaW5hdGVkXCI6XG4gICAgICBjYXNlIFwic3RvcHBlZFwiOlxuICAgICAgICByZXR1cm47XG4gICAgICBjYXNlIFwiY29ubmVjdGluZ1wiOlxuICAgICAgY2FzZSBcInJlYWR5XCI6IHtcbiAgICAgICAgdGhpcy5sYXN0Q2xvc2VSZWFzb24gPSBjbG9zZVJlYXNvbjtcbiAgICAgICAgdm9pZCB0aGlzLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVSZWNvbm5lY3QoXCJjbGllbnRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGhpcy5zb2NrZXQ7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDbG9zZSB0aGUgV2ViU29ja2V0LCBiZWluZyBjYXJlZnVsIHRvIGNsZWFyIHRoZSBvbmNsb3NlIGhhbmRsZXIgdG8gYXZvaWQgcmUtZW50cmFudFxuICAgKiBjYWxscy4gVXNlIHRoaXMgaW5zdGVhZCBvZiBkaXJlY3RseSBjYWxsaW5nIGB3cy5jbG9zZSgpYFxuICAgKlxuICAgKiBJdCBpcyB0aGUgY2FsbGVycyByZXNwb25zaWJpbGl0eSB0byB1cGRhdGUgdGhlIHN0YXRlIGFmdGVyIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCBzbyB0aGF0IHRoZVxuICAgKiBjbG9zZWQgc29ja2V0IGlzIG5vdCBhY2Nlc3NpYmxlIG9yIHVzZWQgYWdhaW4gYWZ0ZXIgdGhpcyBtZXRob2QgaXMgY2FsbGVkXG4gICAqL1xuICBjbG9zZSgpIHtcbiAgICB0aGlzLnRyYW5zaXRpb25DaHVua0J1ZmZlciA9IG51bGw7XG4gICAgc3dpdGNoICh0aGlzLnNvY2tldC5zdGF0ZSkge1xuICAgICAgY2FzZSBcImRpc2Nvbm5lY3RlZFwiOlxuICAgICAgY2FzZSBcInRlcm1pbmF0ZWRcIjpcbiAgICAgIGNhc2UgXCJzdG9wcGVkXCI6XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIGNhc2UgXCJjb25uZWN0aW5nXCI6IHtcbiAgICAgICAgY29uc3Qgd3MgPSB0aGlzLnNvY2tldC53cztcbiAgICAgICAgd3Mub25tZXNzYWdlID0gKF9tZXNzYWdlKSA9PiB7XG4gICAgICAgICAgdGhpcy5fbG9nVmVyYm9zZShcIklnbm9yaW5nIG1lc3NhZ2UgcmVjZWl2ZWQgYWZ0ZXIgY2xvc2VcIik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocikgPT4ge1xuICAgICAgICAgIHdzLm9uY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9sb2dWZXJib3NlKFwiQ2xvc2VkIGFmdGVyIGNvbm5lY3RpbmdcIik7XG4gICAgICAgICAgICByKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB3cy5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9sb2dWZXJib3NlKFwiT3BlbmVkIGFmdGVyIGNvbm5lY3RpbmdcIik7XG4gICAgICAgICAgICB3cy5jbG9zZSgpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY2FzZSBcInJlYWR5XCI6IHtcbiAgICAgICAgdGhpcy5fbG9nVmVyYm9zZShcIndzLmNsb3NlIGNhbGxlZFwiKTtcbiAgICAgICAgY29uc3Qgd3MgPSB0aGlzLnNvY2tldC53cztcbiAgICAgICAgd3Mub25tZXNzYWdlID0gKF9tZXNzYWdlKSA9PiB7XG4gICAgICAgICAgdGhpcy5fbG9nVmVyYm9zZShcIklnbm9yaW5nIG1lc3NhZ2UgcmVjZWl2ZWQgYWZ0ZXIgY2xvc2VcIik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBQcm9taXNlKChyKSA9PiB7XG4gICAgICAgICAgd3Mub25jbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHIoKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgd3MuY2xvc2UoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGhpcy5zb2NrZXQ7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENsb3NlIHRoZSBXZWJTb2NrZXQgYW5kIGRvIG5vdCByZWNvbm5lY3QuXG4gICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIFdlYlNvY2tldCBgb25DbG9zZWAgY2FsbGJhY2sgaXMgY2FsbGVkLlxuICAgKi9cbiAgdGVybWluYXRlKCkge1xuICAgIGlmICh0aGlzLnJlY29ubmVjdER1ZVRvU2VydmVySW5hY3Rpdml0eVRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlY29ubmVjdER1ZVRvU2VydmVySW5hY3Rpdml0eVRpbWVvdXQpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zY2hlZHVsZWRSZWNvbm5lY3QpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNjaGVkdWxlZFJlY29ubmVjdC50aW1lb3V0KTtcbiAgICAgIHRoaXMuc2NoZWR1bGVkUmVjb25uZWN0ID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5jbGVhbnVwTmV0d29ya0xpc3RlbmVyKCk7XG4gICAgc3dpdGNoICh0aGlzLnNvY2tldC5zdGF0ZSkge1xuICAgICAgY2FzZSBcInRlcm1pbmF0ZWRcIjpcbiAgICAgIGNhc2UgXCJzdG9wcGVkXCI6XG4gICAgICBjYXNlIFwiZGlzY29ubmVjdGVkXCI6XG4gICAgICBjYXNlIFwiY29ubmVjdGluZ1wiOlxuICAgICAgY2FzZSBcInJlYWR5XCI6IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLnNldFNvY2tldFN0YXRlKHsgc3RhdGU6IFwidGVybWluYXRlZFwiIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICB0aGlzLnNvY2tldDtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBJbnZhbGlkIHdlYnNvY2tldCBzdGF0ZTogJHt0aGlzLnNvY2tldC5zdGF0ZX1gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHN0b3AoKSB7XG4gICAgc3dpdGNoICh0aGlzLnNvY2tldC5zdGF0ZSkge1xuICAgICAgY2FzZSBcInRlcm1pbmF0ZWRcIjpcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgY2FzZSBcImNvbm5lY3RpbmdcIjpcbiAgICAgIGNhc2UgXCJzdG9wcGVkXCI6XG4gICAgICBjYXNlIFwiZGlzY29ubmVjdGVkXCI6XG4gICAgICBjYXNlIFwicmVhZHlcIjoge1xuICAgICAgICB0aGlzLmNsZWFudXBOZXR3b3JrTGlzdGVuZXIoKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLnNvY2tldCA9IHsgc3RhdGU6IFwic3RvcHBlZFwiIH07XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIHRoaXMuc29ja2V0O1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgV2ViU29ja2V0IGFmdGVyIGEgcHJldmlvdXMgYHN0b3AoKWAsIHVubGVzcyBgdGVybWluYXRlKClgIHdhc1xuICAgKiBjYWxsZWQgYmVmb3JlLlxuICAgKi9cbiAgdHJ5UmVzdGFydCgpIHtcbiAgICBzd2l0Y2ggKHRoaXMuc29ja2V0LnN0YXRlKSB7XG4gICAgICBjYXNlIFwic3RvcHBlZFwiOlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJ0ZXJtaW5hdGVkXCI6XG4gICAgICBjYXNlIFwiY29ubmVjdGluZ1wiOlxuICAgICAgY2FzZSBcInJlYWR5XCI6XG4gICAgICBjYXNlIFwiZGlzY29ubmVjdGVkXCI6XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZ1ZlcmJvc2UoXCJSZXN0YXJ0IGNhbGxlZCB3aXRob3V0IHN0b3BwaW5nIGZpcnN0XCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIHRoaXMuc29ja2V0O1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnNldHVwTmV0d29ya0xpc3RlbmVyKCk7XG4gICAgdGhpcy5jb25uZWN0KCk7XG4gIH1cbiAgcGF1c2UoKSB7XG4gICAgc3dpdGNoICh0aGlzLnNvY2tldC5zdGF0ZSkge1xuICAgICAgY2FzZSBcImRpc2Nvbm5lY3RlZFwiOlxuICAgICAgY2FzZSBcInN0b3BwZWRcIjpcbiAgICAgIGNhc2UgXCJ0ZXJtaW5hdGVkXCI6XG4gICAgICAgIHJldHVybjtcbiAgICAgIGNhc2UgXCJjb25uZWN0aW5nXCI6XG4gICAgICBjYXNlIFwicmVhZHlcIjoge1xuICAgICAgICB0aGlzLnNvY2tldCA9IHsgLi4udGhpcy5zb2NrZXQsIHBhdXNlZDogXCJ5ZXNcIiB9O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIHRoaXMuc29ja2V0O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBUcnkgdG8gcmVjb25uZWN0IGltbWVkaWF0ZWx5LCBjYW5jZWxpbmcgYW55IHNjaGVkdWxlZCByZWNvbm5lY3QuXG4gICAqIFRoaXMgaXMgdXNlZnVsIHdoZW4gZGV0ZWN0aW5nIG5ldHdvcmsgcmVjb3ZlcnkuXG4gICAqIE9ubHkgdGFrZXMgYWN0aW9uIGlmIHdlJ3JlIGluIGRpc2Nvbm5lY3RlZCBzdGF0ZSAod2FpdGluZyB0byByZWNvbm5lY3QpLlxuICAgKi9cbiAgdHJ5UmVjb25uZWN0SW1tZWRpYXRlbHkoKSB7XG4gICAgdGhpcy5fbG9nVmVyYm9zZShcInRyeVJlY29ubmVjdEltbWVkaWF0ZWx5IGNhbGxlZFwiKTtcbiAgICBpZiAodGhpcy5zb2NrZXQuc3RhdGUgIT09IFwiZGlzY29ubmVjdGVkXCIpIHtcbiAgICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXG4gICAgICAgIGB0cnlSZWNvbm5lY3RJbW1lZGlhdGVseSBjYWxsZWQgYnV0IHNvY2tldCBzdGF0ZSBpcyAke3RoaXMuc29ja2V0LnN0YXRlfSwgbm8gYWN0aW9uIHRha2VuYFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHRpbWVTYXZlZE1zID0gbnVsbDtcbiAgICBpZiAodGhpcy5zY2hlZHVsZWRSZWNvbm5lY3QpIHtcbiAgICAgIGNvbnN0IGVsYXBzZWQgPSBtb25vdG9uaWNNaWxsaXMoKSAtIHRoaXMuc2NoZWR1bGVkUmVjb25uZWN0LnNjaGVkdWxlZEF0O1xuICAgICAgdGltZVNhdmVkTXMgPSBNYXRoLm1heCgwLCB0aGlzLnNjaGVkdWxlZFJlY29ubmVjdC5iYWNrb2ZmTXMgLSBlbGFwc2VkKTtcbiAgICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXG4gICAgICAgIGB3b3VsZCBoYXZlIHdhaXRlZCAke01hdGgucm91bmQodGltZVNhdmVkTXMpfW1zIG1vcmUgKGJhY2tvZmYgd2FzICR7TWF0aC5yb3VuZCh0aGlzLnNjaGVkdWxlZFJlY29ubmVjdC5iYWNrb2ZmTXMpfW1zLCBlbGFwc2VkICR7TWF0aC5yb3VuZChlbGFwc2VkKX1tcylgXG4gICAgICApO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2NoZWR1bGVkUmVjb25uZWN0LnRpbWVvdXQpO1xuICAgICAgdGhpcy5zY2hlZHVsZWRSZWNvbm5lY3QgPSBudWxsO1xuICAgICAgdGhpcy5fbG9nVmVyYm9zZShcImNhbmNlbGVkIHNjaGVkdWxlZCByZWNvbm5lY3RcIik7XG4gICAgfVxuICAgIHRoaXMubG9nZ2VyLmxvZyhcIk5ldHdvcmsgcmVjb3ZlcnkgZGV0ZWN0ZWQsIHJlY29ubmVjdGluZyBpbW1lZGlhdGVseVwiKTtcbiAgICB0aGlzLnBlbmRpbmdOZXR3b3JrUmVjb3ZlcnlJbmZvID0gdGltZVNhdmVkTXMgIT09IG51bGwgPyB7IHRpbWVTYXZlZE1zIH0gOiBudWxsO1xuICAgIHRoaXMuY29ubmVjdCgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXN1bWUgdGhlIHN0YXRlIG1hY2hpbmUgaWYgcHJldmlvdXNseSBwYXVzZWQuXG4gICAqL1xuICByZXN1bWUoKSB7XG4gICAgc3dpdGNoICh0aGlzLnNvY2tldC5zdGF0ZSkge1xuICAgICAgY2FzZSBcImNvbm5lY3RpbmdcIjpcbiAgICAgICAgdGhpcy5zb2NrZXQgPSB7IC4uLnRoaXMuc29ja2V0LCBwYXVzZWQ6IFwibm9cIiB9O1xuICAgICAgICByZXR1cm47XG4gICAgICBjYXNlIFwicmVhZHlcIjpcbiAgICAgICAgaWYgKHRoaXMuc29ja2V0LnBhdXNlZCA9PT0gXCJ1bmluaXRpYWxpemVkXCIpIHtcbiAgICAgICAgICB0aGlzLnNvY2tldCA9IHsgLi4udGhpcy5zb2NrZXQsIHBhdXNlZDogXCJub1wiIH07XG4gICAgICAgICAgdGhpcy5vbk9wZW4oe1xuICAgICAgICAgICAgY29ubmVjdGlvbkNvdW50OiB0aGlzLmNvbm5lY3Rpb25Db3VudCxcbiAgICAgICAgICAgIGxhc3RDbG9zZVJlYXNvbjogdGhpcy5sYXN0Q2xvc2VSZWFzb24sXG4gICAgICAgICAgICBjbGllbnRUczogbW9ub3RvbmljTWlsbGlzKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNvY2tldC5wYXVzZWQgPT09IFwieWVzXCIpIHtcbiAgICAgICAgICB0aGlzLnNvY2tldCA9IHsgLi4udGhpcy5zb2NrZXQsIHBhdXNlZDogXCJub1wiIH07XG4gICAgICAgICAgdGhpcy5vblJlc3VtZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIGNhc2UgXCJ0ZXJtaW5hdGVkXCI6XG4gICAgICBjYXNlIFwic3RvcHBlZFwiOlxuICAgICAgY2FzZSBcImRpc2Nvbm5lY3RlZFwiOlxuICAgICAgICByZXR1cm47XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIHRoaXMuc29ja2V0O1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNvbm5lY3QoKTtcbiAgfVxuICBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzQ29ubmVjdGVkOiB0aGlzLnNvY2tldC5zdGF0ZSA9PT0gXCJyZWFkeVwiLFxuICAgICAgaGFzRXZlckNvbm5lY3RlZDogdGhpcy5faGFzRXZlckNvbm5lY3RlZCxcbiAgICAgIGNvbm5lY3Rpb25Db3VudDogdGhpcy5jb25uZWN0aW9uQ291bnQsXG4gICAgICBjb25uZWN0aW9uUmV0cmllczogdGhpcy5yZXRyaWVzXG4gICAgfTtcbiAgfVxuICBfbG9nVmVyYm9zZShtZXNzYWdlKSB7XG4gICAgdGhpcy5sb2dnZXIubG9nVmVyYm9zZShtZXNzYWdlKTtcbiAgfVxuICBuZXh0QmFja29mZihyZWFzb24pIHtcbiAgICBjb25zdCBpbml0aWFsQmFja29mZiA9IHJlYXNvbiA9PT0gXCJjbGllbnRcIiA/IDEwMCA6IHJlYXNvbiA9PT0gXCJVbmtub3duXCIgPyB0aGlzLmRlZmF1bHRJbml0aWFsQmFja29mZiA6IHNlcnZlckRpc2Nvbm5lY3RFcnJvcnNbcmVhc29uXS50aW1lb3V0O1xuICAgIGNvbnN0IGJhc2VCYWNrb2ZmID0gaW5pdGlhbEJhY2tvZmYgKiBNYXRoLnBvdygyLCB0aGlzLnJldHJpZXMpO1xuICAgIHRoaXMucmV0cmllcyArPSAxO1xuICAgIGNvbnN0IGFjdHVhbEJhY2tvZmYgPSBNYXRoLm1pbihiYXNlQmFja29mZiwgdGhpcy5tYXhCYWNrb2ZmKTtcbiAgICBjb25zdCBqaXR0ZXIgPSBhY3R1YWxCYWNrb2ZmICogKE1hdGgucmFuZG9tKCkgLSAwLjUpO1xuICAgIHJldHVybiBhY3R1YWxCYWNrb2ZmICsgaml0dGVyO1xuICB9XG4gIHJlcG9ydExhcmdlVHJhbnNpdGlvbih7XG4gICAgdHJhbnNpdGlvbixcbiAgICBtZXNzYWdlTGVuZ3RoXG4gIH0pIHtcbiAgICBpZiAodHJhbnNpdGlvbi5jbGllbnRDbG9ja1NrZXcgPT09IHZvaWQgMCB8fCB0cmFuc2l0aW9uLnNlcnZlclRzID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdHJhbnNpdGlvblRyYW5zaXRUaW1lID0gbW9ub3RvbmljTWlsbGlzKCkgLSAvLyBjbGllbnQgdGltZSBub3dcbiAgICAvLyBjbGllbnRDbG9ja1NrZXcgPSAoc2VydmVyIHRpbWUgKyB1cHN0cmVhbSBsYXRlbmN5KSAtIGNsaWVudCB0aW1lXG4gICAgLy8gY2xpZW50Q2xvY2tTa2V3IGlzIFwiaG93IG1hbnkgbWlsbGlzZWNvbmRzIGJlaGluZCAoc2xvdykgaXMgdGhlIGNsaWVudCBjbG9ja1wiXG4gICAgLy8gYnV0IHRoZSBsYXRlbmN5IG9mIHRoZSBDb25uZWN0IG1lc3NhZ2UgaW5mbGF0ZXMgdGhpcywgbWFraW5nIGl0IGFwcGVhciBmdXJ0aGVyIGJlaGluZFxuICAgIHRyYW5zaXRpb24uY2xpZW50Q2xvY2tTa2V3IC0gdHJhbnNpdGlvbi5zZXJ2ZXJUcyAvIDFlNjtcbiAgICBjb25zdCBwcmV0dHlUcmFuc2l0aW9uVGltZSA9IGAke01hdGgucm91bmQodHJhbnNpdGlvblRyYW5zaXRUaW1lKX1tc2A7XG4gICAgY29uc3QgcHJldHR5TWVzc2FnZU1CID0gYCR7TWF0aC5yb3VuZChtZXNzYWdlTGVuZ3RoIC8gMWU0KSAvIDEwMH1NQmA7XG4gICAgY29uc3QgYnl0ZXNQZXJTZWNvbmQgPSBtZXNzYWdlTGVuZ3RoIC8gKHRyYW5zaXRpb25UcmFuc2l0VGltZSAvIDFlMyk7XG4gICAgY29uc3QgcHJldHR5Qnl0ZXNQZXJTZWNvbmQgPSBgJHtNYXRoLnJvdW5kKGJ5dGVzUGVyU2Vjb25kIC8gMWU0KSAvIDEwMH1NQiBwZXIgc2Vjb25kYDtcbiAgICB0aGlzLl9sb2dWZXJib3NlKFxuICAgICAgYHJlY2VpdmVkICR7cHJldHR5TWVzc2FnZU1CfSB0cmFuc2l0aW9uIGluICR7cHJldHR5VHJhbnNpdGlvblRpbWV9IGF0ICR7cHJldHR5Qnl0ZXNQZXJTZWNvbmR9YFxuICAgICk7XG4gICAgaWYgKG1lc3NhZ2VMZW5ndGggPiAyZTcpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmxvZyhcbiAgICAgICAgYHJlY2VpdmVkIHF1ZXJ5IHJlc3VsdHMgdG90YWxpbmcgbW9yZSB0aGF0IDIwTUIgKCR7cHJldHR5TWVzc2FnZU1CfSkgd2hpY2ggd2lsbCB0YWtlIGEgbG9uZyB0aW1lIHRvIGRvd25sb2FkIG9uIHNsb3dlciBjb25uZWN0aW9uc2BcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0cmFuc2l0aW9uVHJhbnNpdFRpbWUgPiAyZTQpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmxvZyhcbiAgICAgICAgYHJlY2VpdmVkIHF1ZXJ5IHJlc3VsdHMgdG90YWxpbmcgJHtwcmV0dHlNZXNzYWdlTUJ9IHdoaWNoIHRvb2sgbW9yZSB0aGFuIDIwcyB0byBhcnJpdmUgKCR7cHJldHR5VHJhbnNpdGlvblRpbWV9KWBcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICh0aGlzLmRlYnVnKSB7XG4gICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgdHlwZTogXCJFdmVudFwiLFxuICAgICAgICBldmVudFR5cGU6IFwiQ2xpZW50UmVjZWl2ZWRUcmFuc2l0aW9uXCIsXG4gICAgICAgIGV2ZW50OiB7IHRyYW5zaXRpb25UcmFuc2l0VGltZSwgbWVzc2FnZUxlbmd0aCB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdlYl9zb2NrZXRfbWFuYWdlci5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/web_socket_manager.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/common/index.js":
/*!******************************************************!*\
  !*** ./node_modules/convex/dist/esm/common/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isSimpleObject: () => (/* binding */ isSimpleObject),\n/* harmony export */   parseArgs: () => (/* binding */ parseArgs),\n/* harmony export */   validateDeploymentUrl: () => (/* binding */ validateDeploymentUrl)\n/* harmony export */ });\n\nfunction parseArgs(args) {\n  if (args === void 0) {\n    return {};\n  }\n  if (!isSimpleObject(args)) {\n    throw new Error(\n      `The arguments to a Convex function must be an object. Received: ${args}`\n    );\n  }\n  return args;\n}\nfunction validateDeploymentUrl(deploymentUrl) {\n  if (typeof deploymentUrl === \"undefined\") {\n    throw new Error(\n      `Client created with undefined deployment address. If you used an environment variable, check that it's set.`\n    );\n  }\n  if (typeof deploymentUrl !== \"string\") {\n    throw new Error(\n      `Invalid deployment address: found ${deploymentUrl}\".`\n    );\n  }\n  if (!(deploymentUrl.startsWith(\"http:\") || deploymentUrl.startsWith(\"https:\"))) {\n    throw new Error(\n      `Invalid deployment address: Must start with \"https://\" or \"http://\". Found \"${deploymentUrl}\".`\n    );\n  }\n  try {\n    new URL(deploymentUrl);\n  } catch {\n    throw new Error(\n      `Invalid deployment address: \"${deploymentUrl}\" is not a valid URL. If you believe this URL is correct, use the \\`skipConvexDeploymentUrlCheck\\` option to bypass this.`\n    );\n  }\n  if (deploymentUrl.endsWith(\".convex.site\")) {\n    throw new Error(\n      `Invalid deployment address: \"${deploymentUrl}\" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \\`skipConvexDeploymentUrlCheck\\` option to bypass this.`\n    );\n  }\n}\nfunction isSimpleObject(value) {\n  const isObject = typeof value === \"object\";\n  const prototype = Object.getPrototypeOf(value);\n  const isSimple = prototype === null || prototype === Object.prototype || // Objects generated from other contexts (e.g. across Node.js `vm` modules) will not satisfy the previous\n  // conditions but are still simple objects.\n  prototype?.constructor?.name === \"Object\";\n  return isObject && isSimple;\n}\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2NvbW1vbi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBYTtBQUNOO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxLQUFLO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxjQUFjO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUZBQXFGLGNBQWM7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxzQ0FBc0MsY0FBYztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxjQUFjO0FBQ3BEO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxjb21tb25cXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQXJncyhhcmdzKSB7XG4gIGlmIChhcmdzID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgaWYgKCFpc1NpbXBsZU9iamVjdChhcmdzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgYXJndW1lbnRzIHRvIGEgQ29udmV4IGZ1bmN0aW9uIG11c3QgYmUgYW4gb2JqZWN0LiBSZWNlaXZlZDogJHthcmdzfWBcbiAgICApO1xuICB9XG4gIHJldHVybiBhcmdzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRGVwbG95bWVudFVybChkZXBsb3ltZW50VXJsKSB7XG4gIGlmICh0eXBlb2YgZGVwbG95bWVudFVybCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBDbGllbnQgY3JlYXRlZCB3aXRoIHVuZGVmaW5lZCBkZXBsb3ltZW50IGFkZHJlc3MuIElmIHlvdSB1c2VkIGFuIGVudmlyb25tZW50IHZhcmlhYmxlLCBjaGVjayB0aGF0IGl0J3Mgc2V0LmBcbiAgICApO1xuICB9XG4gIGlmICh0eXBlb2YgZGVwbG95bWVudFVybCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIGRlcGxveW1lbnQgYWRkcmVzczogZm91bmQgJHtkZXBsb3ltZW50VXJsfVwiLmBcbiAgICApO1xuICB9XG4gIGlmICghKGRlcGxveW1lbnRVcmwuc3RhcnRzV2l0aChcImh0dHA6XCIpIHx8IGRlcGxveW1lbnRVcmwuc3RhcnRzV2l0aChcImh0dHBzOlwiKSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW52YWxpZCBkZXBsb3ltZW50IGFkZHJlc3M6IE11c3Qgc3RhcnQgd2l0aCBcImh0dHBzOi8vXCIgb3IgXCJodHRwOi8vXCIuIEZvdW5kIFwiJHtkZXBsb3ltZW50VXJsfVwiLmBcbiAgICApO1xuICB9XG4gIHRyeSB7XG4gICAgbmV3IFVSTChkZXBsb3ltZW50VXJsKTtcbiAgfSBjYXRjaCB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEludmFsaWQgZGVwbG95bWVudCBhZGRyZXNzOiBcIiR7ZGVwbG95bWVudFVybH1cIiBpcyBub3QgYSB2YWxpZCBVUkwuIElmIHlvdSBiZWxpZXZlIHRoaXMgVVJMIGlzIGNvcnJlY3QsIHVzZSB0aGUgXFxgc2tpcENvbnZleERlcGxveW1lbnRVcmxDaGVja1xcYCBvcHRpb24gdG8gYnlwYXNzIHRoaXMuYFxuICAgICk7XG4gIH1cbiAgaWYgKGRlcGxveW1lbnRVcmwuZW5kc1dpdGgoXCIuY29udmV4LnNpdGVcIikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW52YWxpZCBkZXBsb3ltZW50IGFkZHJlc3M6IFwiJHtkZXBsb3ltZW50VXJsfVwiIGVuZHMgd2l0aCAuY29udmV4LnNpdGUsIHdoaWNoIGlzIHVzZWQgZm9yIEhUVFAgQWN0aW9ucy4gQ29udmV4IGRlcGxveW1lbnQgVVJMcyB0eXBpY2FsbHkgZW5kIHdpdGggLmNvbnZleC5jbG91ZD8gSWYgeW91IGJlbGlldmUgdGhpcyBVUkwgaXMgY29ycmVjdCwgdXNlIHRoZSBcXGBza2lwQ29udmV4RGVwbG95bWVudFVybENoZWNrXFxgIG9wdGlvbiB0byBieXBhc3MgdGhpcy5gXG4gICAgKTtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU2ltcGxlT2JqZWN0KHZhbHVlKSB7XG4gIGNvbnN0IGlzT2JqZWN0ID0gdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiO1xuICBjb25zdCBwcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xuICBjb25zdCBpc1NpbXBsZSA9IHByb3RvdHlwZSA9PT0gbnVsbCB8fCBwcm90b3R5cGUgPT09IE9iamVjdC5wcm90b3R5cGUgfHwgLy8gT2JqZWN0cyBnZW5lcmF0ZWQgZnJvbSBvdGhlciBjb250ZXh0cyAoZS5nLiBhY3Jvc3MgTm9kZS5qcyBgdm1gIG1vZHVsZXMpIHdpbGwgbm90IHNhdGlzZnkgdGhlIHByZXZpb3VzXG4gIC8vIGNvbmRpdGlvbnMgYnV0IGFyZSBzdGlsbCBzaW1wbGUgb2JqZWN0cy5cbiAgcHJvdG90eXBlPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gXCJPYmplY3RcIjtcbiAgcmV0dXJuIGlzT2JqZWN0ICYmIGlzU2ltcGxlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/common/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/index.js":
/*!***********************************************!*\
  !*** ./node_modules/convex/dist/esm/index.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n\nconst version = \"1.31.7\";\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBYTtBQUNOO0FBQ1AiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnQgY29uc3QgdmVyc2lvbiA9IFwiMS4zMS43XCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react-clerk/ConvexProviderWithClerk.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react-clerk/ConvexProviderWithClerk.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexProviderWithClerk: () => (/* binding */ ConvexProviderWithClerk)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _react_ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../react/ConvexAuthState.js */ \"(ssr)/./node_modules/convex/dist/esm/react/ConvexAuthState.js\");\n\n\n\n\nfunction ConvexProviderWithClerk({\n  children,\n  client,\n  useAuth\n}) {\n  const useAuthFromClerk = useUseAuthFromClerk(useAuth);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_react_ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_1__.ConvexProviderWithAuth, { client, useAuth: useAuthFromClerk }, children);\n}\nfunction useUseAuthFromClerk(useAuth) {\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => function useAuthFromClerk() {\n      const { isLoaded, isSignedIn, getToken, orgId, orgRole } = useAuth();\n      const fetchAccessToken = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(\n        async ({ forceRefreshToken }) => {\n          try {\n            return await getToken({\n              template: \"convex\",\n              skipCache: forceRefreshToken\n            });\n          } catch {\n            return null;\n          }\n        },\n        // Build a new fetchAccessToken to trigger setAuth() whenever these change.\n        // Anything else from the JWT Clerk wants to be reactive goes here too.\n        // Clerk's Expo useAuth hook is not memoized so we don't include getToken.\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [orgId, orgRole]\n      );\n      return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n        () => ({\n          isLoading: !isLoaded,\n          isAuthenticated: isSignedIn ?? false,\n          fetchAccessToken\n        }),\n        [isLoaded, isSignedIn, fetchAccessToken]\n      );\n    },\n    [useAuth]\n  );\n}\n//# sourceMappingURL=ConvexProviderWithClerk.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0LWNsZXJrL0NvbnZleFByb3ZpZGVyV2l0aENsZXJrLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFhO0FBQ2E7QUFDbUI7QUFDd0I7QUFDOUQ7QUFDUDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSx5QkFBeUIsZ0RBQW1CLENBQUMsNkVBQXNCLElBQUksbUNBQW1DO0FBQzFHO0FBQ0E7QUFDQSxTQUFTLDhDQUFPO0FBQ2hCO0FBQ0EsY0FBYyxpREFBaUQ7QUFDL0QsK0JBQStCLGtEQUFXO0FBQzFDLGlCQUFpQixtQkFBbUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsWUFBWTtBQUNaO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4Q0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHJlYWN0LWNsZXJrXFxDb252ZXhQcm92aWRlcldpdGhDbGVyay5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBDb252ZXhQcm92aWRlcldpdGhBdXRoIH0gZnJvbSBcIi4uL3JlYWN0L0NvbnZleEF1dGhTdGF0ZS5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIENvbnZleFByb3ZpZGVyV2l0aENsZXJrKHtcbiAgY2hpbGRyZW4sXG4gIGNsaWVudCxcbiAgdXNlQXV0aFxufSkge1xuICBjb25zdCB1c2VBdXRoRnJvbUNsZXJrID0gdXNlVXNlQXV0aEZyb21DbGVyayh1c2VBdXRoKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBSZWFjdC5jcmVhdGVFbGVtZW50KENvbnZleFByb3ZpZGVyV2l0aEF1dGgsIHsgY2xpZW50LCB1c2VBdXRoOiB1c2VBdXRoRnJvbUNsZXJrIH0sIGNoaWxkcmVuKTtcbn1cbmZ1bmN0aW9uIHVzZVVzZUF1dGhGcm9tQ2xlcmsodXNlQXV0aCkge1xuICByZXR1cm4gdXNlTWVtbyhcbiAgICAoKSA9PiBmdW5jdGlvbiB1c2VBdXRoRnJvbUNsZXJrKCkge1xuICAgICAgY29uc3QgeyBpc0xvYWRlZCwgaXNTaWduZWRJbiwgZ2V0VG9rZW4sIG9yZ0lkLCBvcmdSb2xlIH0gPSB1c2VBdXRoKCk7XG4gICAgICBjb25zdCBmZXRjaEFjY2Vzc1Rva2VuID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIGFzeW5jICh7IGZvcmNlUmVmcmVzaFRva2VuIH0pID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGdldFRva2VuKHtcbiAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiY29udmV4XCIsXG4gICAgICAgICAgICAgIHNraXBDYWNoZTogZm9yY2VSZWZyZXNoVG9rZW5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvLyBCdWlsZCBhIG5ldyBmZXRjaEFjY2Vzc1Rva2VuIHRvIHRyaWdnZXIgc2V0QXV0aCgpIHdoZW5ldmVyIHRoZXNlIGNoYW5nZS5cbiAgICAgICAgLy8gQW55dGhpbmcgZWxzZSBmcm9tIHRoZSBKV1QgQ2xlcmsgd2FudHMgdG8gYmUgcmVhY3RpdmUgZ29lcyBoZXJlIHRvby5cbiAgICAgICAgLy8gQ2xlcmsncyBFeHBvIHVzZUF1dGggaG9vayBpcyBub3QgbWVtb2l6ZWQgc28gd2UgZG9uJ3QgaW5jbHVkZSBnZXRUb2tlbi5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgICAgICBbb3JnSWQsIG9yZ1JvbGVdXG4gICAgICApO1xuICAgICAgcmV0dXJuIHVzZU1lbW8oXG4gICAgICAgICgpID0+ICh7XG4gICAgICAgICAgaXNMb2FkaW5nOiAhaXNMb2FkZWQsXG4gICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBpc1NpZ25lZEluID8/IGZhbHNlLFxuICAgICAgICAgIGZldGNoQWNjZXNzVG9rZW5cbiAgICAgICAgfSksXG4gICAgICAgIFtpc0xvYWRlZCwgaXNTaWduZWRJbiwgZmV0Y2hBY2Nlc3NUb2tlbl1cbiAgICAgICk7XG4gICAgfSxcbiAgICBbdXNlQXV0aF1cbiAgKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZleFByb3ZpZGVyV2l0aENsZXJrLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react-clerk/ConvexProviderWithClerk.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react-clerk/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/convex/dist/esm/react-clerk/index.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexProviderWithClerk: () => (/* reexport safe */ _ConvexProviderWithClerk_js__WEBPACK_IMPORTED_MODULE_0__.ConvexProviderWithClerk)\n/* harmony export */ });\n/* harmony import */ var _ConvexProviderWithClerk_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ConvexProviderWithClerk.js */ \"(ssr)/./node_modules/convex/dist/esm/react-clerk/ConvexProviderWithClerk.js\");\n\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0LWNsZXJrL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWE7QUFDMEQ7QUFDdkUiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxccmVhY3QtY2xlcmtcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0IHsgQ29udmV4UHJvdmlkZXJXaXRoQ2xlcmsgfSBmcm9tIFwiLi9Db252ZXhQcm92aWRlcldpdGhDbGVyay5qc1wiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react-clerk/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/ConvexAuthState.js":
/*!***************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/ConvexAuthState.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexProviderWithAuth: () => (/* binding */ ConvexProviderWithAuth),\n/* harmony export */   useConvexAuth: () => (/* binding */ useConvexAuth)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./client.js */ \"(ssr)/./node_modules/convex/dist/esm/react/client.js\");\n\n\n\nconst ConvexAuthContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0);\nfunction useConvexAuth() {\n  const authContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ConvexAuthContext);\n  if (authContext === void 0) {\n    throw new Error(\n      \"Could not find `ConvexProviderWithAuth` (or `ConvexProviderWithClerk` or `ConvexProviderWithAuth0`) as an ancestor component. This component may be missing, or you might have two instances of the `convex/react` module loaded in your project.\"\n    );\n  }\n  return authContext;\n}\nfunction ConvexProviderWithAuth({\n  children,\n  client,\n  useAuth\n}) {\n  const {\n    isLoading: authProviderLoading,\n    isAuthenticated: authProviderAuthenticated,\n    fetchAccessToken\n  } = useAuth();\n  const [isConvexAuthenticated, setIsConvexAuthenticated] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  if (authProviderLoading && isConvexAuthenticated !== null) {\n    setIsConvexAuthenticated(null);\n  }\n  if (!authProviderLoading && !authProviderAuthenticated && isConvexAuthenticated !== false) {\n    setIsConvexAuthenticated(false);\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    ConvexAuthContext.Provider,\n    {\n      value: {\n        isLoading: isConvexAuthenticated === null,\n        isAuthenticated: authProviderAuthenticated && (isConvexAuthenticated ?? false)\n      }\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      ConvexAuthStateFirstEffect,\n      {\n        authProviderAuthenticated,\n        fetchAccessToken,\n        authProviderLoading,\n        client,\n        setIsConvexAuthenticated\n      }\n    ),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_client_js__WEBPACK_IMPORTED_MODULE_1__.ConvexProvider, { client }, children),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      ConvexAuthStateLastEffect,\n      {\n        authProviderAuthenticated,\n        fetchAccessToken,\n        authProviderLoading,\n        client,\n        setIsConvexAuthenticated\n      }\n    )\n  );\n}\nfunction ConvexAuthStateFirstEffect({\n  authProviderAuthenticated,\n  fetchAccessToken,\n  authProviderLoading,\n  client,\n  setIsConvexAuthenticated\n}) {\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    let isThisEffectRelevant = true;\n    if (authProviderAuthenticated) {\n      client.setAuth(fetchAccessToken, (backendReportsIsAuthenticated) => {\n        if (isThisEffectRelevant) {\n          setIsConvexAuthenticated(() => backendReportsIsAuthenticated);\n        }\n      });\n      return () => {\n        isThisEffectRelevant = false;\n        setIsConvexAuthenticated(\n          (isConvexAuthenticated) => isConvexAuthenticated ? false : null\n        );\n      };\n    }\n  }, [\n    authProviderAuthenticated,\n    fetchAccessToken,\n    authProviderLoading,\n    client,\n    setIsConvexAuthenticated\n  ]);\n  return null;\n}\nfunction ConvexAuthStateLastEffect({\n  authProviderAuthenticated,\n  fetchAccessToken,\n  authProviderLoading,\n  client,\n  setIsConvexAuthenticated\n}) {\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (authProviderAuthenticated) {\n      return () => {\n        client.clearAuth();\n        setIsConvexAuthenticated(() => null);\n      };\n    }\n  }, [\n    authProviderAuthenticated,\n    fetchAccessToken,\n    authProviderLoading,\n    client,\n    setIsConvexAuthenticated\n  ]);\n  return null;\n}\n//# sourceMappingURL=ConvexAuthState.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L0NvbnZleEF1dGhTdGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWE7QUFNRTtBQUM4QjtBQUM3QywwQkFBMEIsb0RBQWE7QUFDaEM7QUFDUCxzQkFBc0IsaURBQVU7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiw0REFBNEQsK0NBQVE7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGdEQUFtQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsb0JBQW9CLGdEQUFtQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0RBQW1CLENBQUMsc0RBQWMsSUFBSSxRQUFRO0FBQ2xFLG9CQUFvQixnREFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxFQUFFLGdEQUFTO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxccmVhY3RcXENvbnZleEF1dGhTdGF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCBSZWFjdCwge1xuICBjcmVhdGVDb250ZXh0LFxuICB1c2VDb250ZXh0LFxuICB1c2VFZmZlY3QsXG4gIHVzZVN0YXRlXG59IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQ29udmV4UHJvdmlkZXIgfSBmcm9tIFwiLi9jbGllbnQuanNcIjtcbmNvbnN0IENvbnZleEF1dGhDb250ZXh0ID0gY3JlYXRlQ29udGV4dCh2b2lkIDApO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbnZleEF1dGgoKSB7XG4gIGNvbnN0IGF1dGhDb250ZXh0ID0gdXNlQ29udGV4dChDb252ZXhBdXRoQ29udGV4dCk7XG4gIGlmIChhdXRoQ29udGV4dCA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJDb3VsZCBub3QgZmluZCBgQ29udmV4UHJvdmlkZXJXaXRoQXV0aGAgKG9yIGBDb252ZXhQcm92aWRlcldpdGhDbGVya2Agb3IgYENvbnZleFByb3ZpZGVyV2l0aEF1dGgwYCkgYXMgYW4gYW5jZXN0b3IgY29tcG9uZW50LiBUaGlzIGNvbXBvbmVudCBtYXkgYmUgbWlzc2luZywgb3IgeW91IG1pZ2h0IGhhdmUgdHdvIGluc3RhbmNlcyBvZiB0aGUgYGNvbnZleC9yZWFjdGAgbW9kdWxlIGxvYWRlZCBpbiB5b3VyIHByb2plY3QuXCJcbiAgICApO1xuICB9XG4gIHJldHVybiBhdXRoQ29udGV4dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBDb252ZXhQcm92aWRlcldpdGhBdXRoKHtcbiAgY2hpbGRyZW4sXG4gIGNsaWVudCxcbiAgdXNlQXV0aFxufSkge1xuICBjb25zdCB7XG4gICAgaXNMb2FkaW5nOiBhdXRoUHJvdmlkZXJMb2FkaW5nLFxuICAgIGlzQXV0aGVudGljYXRlZDogYXV0aFByb3ZpZGVyQXV0aGVudGljYXRlZCxcbiAgICBmZXRjaEFjY2Vzc1Rva2VuXG4gIH0gPSB1c2VBdXRoKCk7XG4gIGNvbnN0IFtpc0NvbnZleEF1dGhlbnRpY2F0ZWQsIHNldElzQ29udmV4QXV0aGVudGljYXRlZF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgaWYgKGF1dGhQcm92aWRlckxvYWRpbmcgJiYgaXNDb252ZXhBdXRoZW50aWNhdGVkICE9PSBudWxsKSB7XG4gICAgc2V0SXNDb252ZXhBdXRoZW50aWNhdGVkKG51bGwpO1xuICB9XG4gIGlmICghYXV0aFByb3ZpZGVyTG9hZGluZyAmJiAhYXV0aFByb3ZpZGVyQXV0aGVudGljYXRlZCAmJiBpc0NvbnZleEF1dGhlbnRpY2F0ZWQgIT09IGZhbHNlKSB7XG4gICAgc2V0SXNDb252ZXhBdXRoZW50aWNhdGVkKGZhbHNlKTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgQ29udmV4QXV0aENvbnRleHQuUHJvdmlkZXIsXG4gICAge1xuICAgICAgdmFsdWU6IHtcbiAgICAgICAgaXNMb2FkaW5nOiBpc0NvbnZleEF1dGhlbnRpY2F0ZWQgPT09IG51bGwsXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogYXV0aFByb3ZpZGVyQXV0aGVudGljYXRlZCAmJiAoaXNDb252ZXhBdXRoZW50aWNhdGVkID8/IGZhbHNlKVxuICAgICAgfVxuICAgIH0sXG4gICAgLyogQF9fUFVSRV9fICovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICBDb252ZXhBdXRoU3RhdGVGaXJzdEVmZmVjdCxcbiAgICAgIHtcbiAgICAgICAgYXV0aFByb3ZpZGVyQXV0aGVudGljYXRlZCxcbiAgICAgICAgZmV0Y2hBY2Nlc3NUb2tlbixcbiAgICAgICAgYXV0aFByb3ZpZGVyTG9hZGluZyxcbiAgICAgICAgY2xpZW50LFxuICAgICAgICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWRcbiAgICAgIH1cbiAgICApLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBSZWFjdC5jcmVhdGVFbGVtZW50KENvbnZleFByb3ZpZGVyLCB7IGNsaWVudCB9LCBjaGlsZHJlbiksXG4gICAgLyogQF9fUFVSRV9fICovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICBDb252ZXhBdXRoU3RhdGVMYXN0RWZmZWN0LFxuICAgICAge1xuICAgICAgICBhdXRoUHJvdmlkZXJBdXRoZW50aWNhdGVkLFxuICAgICAgICBmZXRjaEFjY2Vzc1Rva2VuLFxuICAgICAgICBhdXRoUHJvdmlkZXJMb2FkaW5nLFxuICAgICAgICBjbGllbnQsXG4gICAgICAgIHNldElzQ29udmV4QXV0aGVudGljYXRlZFxuICAgICAgfVxuICAgIClcbiAgKTtcbn1cbmZ1bmN0aW9uIENvbnZleEF1dGhTdGF0ZUZpcnN0RWZmZWN0KHtcbiAgYXV0aFByb3ZpZGVyQXV0aGVudGljYXRlZCxcbiAgZmV0Y2hBY2Nlc3NUb2tlbixcbiAgYXV0aFByb3ZpZGVyTG9hZGluZyxcbiAgY2xpZW50LFxuICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWRcbn0pIHtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgaXNUaGlzRWZmZWN0UmVsZXZhbnQgPSB0cnVlO1xuICAgIGlmIChhdXRoUHJvdmlkZXJBdXRoZW50aWNhdGVkKSB7XG4gICAgICBjbGllbnQuc2V0QXV0aChmZXRjaEFjY2Vzc1Rva2VuLCAoYmFja2VuZFJlcG9ydHNJc0F1dGhlbnRpY2F0ZWQpID0+IHtcbiAgICAgICAgaWYgKGlzVGhpc0VmZmVjdFJlbGV2YW50KSB7XG4gICAgICAgICAgc2V0SXNDb252ZXhBdXRoZW50aWNhdGVkKCgpID0+IGJhY2tlbmRSZXBvcnRzSXNBdXRoZW50aWNhdGVkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpc1RoaXNFZmZlY3RSZWxldmFudCA9IGZhbHNlO1xuICAgICAgICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWQoXG4gICAgICAgICAgKGlzQ29udmV4QXV0aGVudGljYXRlZCkgPT4gaXNDb252ZXhBdXRoZW50aWNhdGVkID8gZmFsc2UgOiBudWxsXG4gICAgICAgICk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW1xuICAgIGF1dGhQcm92aWRlckF1dGhlbnRpY2F0ZWQsXG4gICAgZmV0Y2hBY2Nlc3NUb2tlbixcbiAgICBhdXRoUHJvdmlkZXJMb2FkaW5nLFxuICAgIGNsaWVudCxcbiAgICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWRcbiAgXSk7XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gQ29udmV4QXV0aFN0YXRlTGFzdEVmZmVjdCh7XG4gIGF1dGhQcm92aWRlckF1dGhlbnRpY2F0ZWQsXG4gIGZldGNoQWNjZXNzVG9rZW4sXG4gIGF1dGhQcm92aWRlckxvYWRpbmcsXG4gIGNsaWVudCxcbiAgc2V0SXNDb252ZXhBdXRoZW50aWNhdGVkXG59KSB7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGF1dGhQcm92aWRlckF1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGNsaWVudC5jbGVhckF1dGgoKTtcbiAgICAgICAgc2V0SXNDb252ZXhBdXRoZW50aWNhdGVkKCgpID0+IG51bGwpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIFtcbiAgICBhdXRoUHJvdmlkZXJBdXRoZW50aWNhdGVkLFxuICAgIGZldGNoQWNjZXNzVG9rZW4sXG4gICAgYXV0aFByb3ZpZGVyTG9hZGluZyxcbiAgICBjbGllbnQsXG4gICAgc2V0SXNDb252ZXhBdXRoZW50aWNhdGVkXG4gIF0pO1xuICByZXR1cm4gbnVsbDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnZleEF1dGhTdGF0ZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/ConvexAuthState.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/auth_helpers.js":
/*!************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/auth_helpers.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthLoading: () => (/* binding */ AuthLoading),\n/* harmony export */   Authenticated: () => (/* binding */ Authenticated),\n/* harmony export */   Unauthenticated: () => (/* binding */ Unauthenticated)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConvexAuthState.js */ \"(ssr)/./node_modules/convex/dist/esm/react/ConvexAuthState.js\");\n\n\n\nfunction Authenticated({ children }) {\n  const { isLoading, isAuthenticated } = (0,_ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_1__.useConvexAuth)();\n  if (isLoading || !isAuthenticated) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, children);\n}\nfunction Unauthenticated({ children }) {\n  const { isLoading, isAuthenticated } = (0,_ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_1__.useConvexAuth)();\n  if (isLoading || isAuthenticated) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, children);\n}\nfunction AuthLoading({ children }) {\n  const { isLoading } = (0,_ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_1__.useConvexAuth)();\n  if (!isLoading) {\n    return null;\n  }\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, children);\n}\n//# sourceMappingURL=auth_helpers.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L2F1dGhfaGVscGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFhO0FBQ2E7QUFDMkI7QUFDOUMseUJBQXlCLFVBQVU7QUFDMUMsVUFBVSw2QkFBNkIsRUFBRSxrRUFBYTtBQUN0RDtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsZ0RBQW1CLENBQUMsMkNBQWM7QUFDM0Q7QUFDTywyQkFBMkIsVUFBVTtBQUM1QyxVQUFVLDZCQUE2QixFQUFFLGtFQUFhO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixnREFBbUIsQ0FBQywyQ0FBYztBQUMzRDtBQUNPLHVCQUF1QixVQUFVO0FBQ3hDLFVBQVUsWUFBWSxFQUFFLGtFQUFhO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixnREFBbUIsQ0FBQywyQ0FBYztBQUMzRDtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHJlYWN0XFxhdXRoX2hlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VDb252ZXhBdXRoIH0gZnJvbSBcIi4vQ29udmV4QXV0aFN0YXRlLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gQXV0aGVudGljYXRlZCh7IGNoaWxkcmVuIH0pIHtcbiAgY29uc3QgeyBpc0xvYWRpbmcsIGlzQXV0aGVudGljYXRlZCB9ID0gdXNlQ29udmV4QXV0aCgpO1xuICBpZiAoaXNMb2FkaW5nIHx8ICFpc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNoaWxkcmVuKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBVbmF1dGhlbnRpY2F0ZWQoeyBjaGlsZHJlbiB9KSB7XG4gIGNvbnN0IHsgaXNMb2FkaW5nLCBpc0F1dGhlbnRpY2F0ZWQgfSA9IHVzZUNvbnZleEF1dGgoKTtcbiAgaWYgKGlzTG9hZGluZyB8fCBpc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNoaWxkcmVuKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBBdXRoTG9hZGluZyh7IGNoaWxkcmVuIH0pIHtcbiAgY29uc3QgeyBpc0xvYWRpbmcgfSA9IHVzZUNvbnZleEF1dGgoKTtcbiAgaWYgKCFpc0xvYWRpbmcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIGNoaWxkcmVuKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1dGhfaGVscGVycy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/auth_helpers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/client.js":
/*!******************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/client.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexProvider: () => (/* binding */ ConvexProvider),\n/* harmony export */   ConvexReactClient: () => (/* binding */ ConvexReactClient),\n/* harmony export */   createMutation: () => (/* binding */ createMutation),\n/* harmony export */   useAction: () => (/* binding */ useAction),\n/* harmony export */   useConvex: () => (/* binding */ useConvex),\n/* harmony export */   useConvexConnectionState: () => (/* binding */ useConvexConnectionState),\n/* harmony export */   useMutation: () => (/* binding */ useMutation),\n/* harmony export */   useQuery: () => (/* binding */ useQuery)\n/* harmony export */ });\n/* harmony import */ var _browser_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../browser/index.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _use_queries_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./use_queries.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_queries.js\");\n/* harmony import */ var _use_subscription_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./use_subscription.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_subscription.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _browser_logging_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../browser/logging.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/logging.js\");\n/* harmony import */ var _browser_sync_paginated_query_client_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../browser/sync/paginated_query_client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/paginated_query_client.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\n\n\n\n\nconst DEFAULT_EXTEND_SUBSCRIPTION_FOR = 5e3;\nif (typeof react__WEBPACK_IMPORTED_MODULE_1__ === \"undefined\") {\n  throw new Error(\"Required dependency 'react' not found\");\n}\nfunction createMutation(mutationReference, client, update) {\n  function mutation(args) {\n    assertNotAccidentalArgument(args);\n    return client.mutation(mutationReference, args, {\n      optimisticUpdate: update\n    });\n  }\n  mutation.withOptimisticUpdate = function withOptimisticUpdate(optimisticUpdate) {\n    if (update !== void 0) {\n      throw new Error(\n        `Already specified optimistic update for mutation ${(0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(\n          mutationReference\n        )}`\n      );\n    }\n    return createMutation(mutationReference, client, optimisticUpdate);\n  };\n  return mutation;\n}\nfunction createAction(actionReference, client) {\n  return function(args) {\n    return client.action(actionReference, args);\n  };\n}\nclass ConvexReactClient {\n  /**\n   * @param address - The url of your Convex deployment, often provided\n   * by an environment variable. E.g. `https://small-mouse-123.convex.cloud`.\n   * @param options - See {@link ConvexReactClientOptions} for a full description.\n   */\n  constructor(address, options) {\n    __publicField(this, \"address\");\n    __publicField(this, \"cachedSync\");\n    __publicField(this, \"cachedPaginatedQueryClient\");\n    __publicField(this, \"listeners\");\n    __publicField(this, \"options\");\n    // \"closed\" means this client is done, not just that the underlying WS connection is closed.\n    __publicField(this, \"closed\", false);\n    __publicField(this, \"_logger\");\n    __publicField(this, \"adminAuth\");\n    __publicField(this, \"fakeUserIdentity\");\n    if (address === void 0) {\n      throw new Error(\n        \"No address provided to ConvexReactClient.\\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.\"\n      );\n    }\n    if (typeof address !== \"string\") {\n      throw new Error(\n        `ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof address} instead.`\n      );\n    }\n    if (!address.includes(\"://\")) {\n      throw new Error(\"Provided address was not an absolute URL.\");\n    }\n    this.address = address;\n    this.listeners = /* @__PURE__ */ new Map();\n    this._logger = options?.logger === false ? (0,_browser_logging_js__WEBPACK_IMPORTED_MODULE_7__.instantiateNoopLogger)({ verbose: options?.verbose ?? false }) : options?.logger !== true && options?.logger ? options.logger : (0,_browser_logging_js__WEBPACK_IMPORTED_MODULE_7__.instantiateDefaultLogger)({ verbose: options?.verbose ?? false });\n    this.options = { ...options, logger: this._logger };\n  }\n  /**\n   * Return the address for this client, useful for creating a new client.\n   *\n   * Not guaranteed to match the address with which this client was constructed:\n   * it may be canonicalized.\n   */\n  get url() {\n    return this.address;\n  }\n  /**\n   * Lazily instantiate the `BaseConvexClient` so we don't create the WebSocket\n   * when server-side rendering.\n   *\n   * @internal\n   */\n  get sync() {\n    if (this.closed) {\n      throw new Error(\"ConvexReactClient has already been closed.\");\n    }\n    if (this.cachedSync) {\n      return this.cachedSync;\n    }\n    this.cachedSync = new _browser_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseConvexClient(\n      this.address,\n      () => {\n      },\n      // Use the PaginatedQueryClient's transition instead.\n      this.options\n    );\n    if (this.adminAuth) {\n      this.cachedSync.setAdminAuth(this.adminAuth, this.fakeUserIdentity);\n    }\n    this.cachedPaginatedQueryClient = new _browser_sync_paginated_query_client_js__WEBPACK_IMPORTED_MODULE_8__.PaginatedQueryClient(\n      this.cachedSync,\n      (transition) => this.handleTransition(transition)\n    );\n    return this.cachedSync;\n  }\n  /**\n   * Lazily instantiate the `PaginatedQueryClient` so we don't create it\n   * when server-side rendering.\n   *\n   * @internal\n   */\n  get paginatedQueryClient() {\n    this.sync;\n    if (this.cachedPaginatedQueryClient) {\n      return this.cachedPaginatedQueryClient;\n    }\n    throw new Error(\"Should already be instantiated\");\n  }\n  /**\n   * Set the authentication token to be used for subsequent queries and mutations.\n   * `fetchToken` will be called automatically again if a token expires.\n   * `fetchToken` should return `null` if the token cannot be retrieved, for example\n   * when the user's rights were permanently revoked.\n   * @param fetchToken - an async function returning the JWT-encoded OpenID Connect Identity Token\n   * @param onChange - a callback that will be called when the authentication status changes\n   */\n  setAuth(fetchToken, onChange) {\n    if (typeof fetchToken === \"string\") {\n      throw new Error(\n        \"Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.\"\n      );\n    }\n    this.sync.setAuth(\n      fetchToken,\n      onChange ?? (() => {\n      })\n    );\n  }\n  /**\n   * Clear the current authentication token if set.\n   */\n  clearAuth() {\n    this.sync.clearAuth();\n  }\n  /**\n   * @internal\n   */\n  setAdminAuth(token, identity) {\n    this.adminAuth = token;\n    this.fakeUserIdentity = identity;\n    if (this.closed) {\n      throw new Error(\"ConvexReactClient has already been closed.\");\n    }\n    if (this.cachedSync) {\n      this.sync.setAdminAuth(token, identity);\n    }\n  }\n  /**\n   * Construct a new {@link Watch} on a Convex query function.\n   *\n   * **Most application code should not call this method directly. Instead use\n   * the {@link useQuery} hook.**\n   *\n   * The act of creating a watch does nothing, a Watch is stateless.\n   *\n   * @param query - A {@link server.FunctionReference} for the public query to run.\n   * @param args - An arguments object for the query. If this is omitted,\n   * the arguments will be `{}`.\n   * @param options - A {@link WatchQueryOptions} options object for this query.\n   *\n   * @returns The {@link Watch} object.\n   */\n  watchQuery(query, ...argsAndOptions) {\n    const [args, options] = argsAndOptions;\n    const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(query);\n    return {\n      onUpdate: (callback) => {\n        const { queryToken, unsubscribe } = this.sync.subscribe(\n          name,\n          args,\n          options\n        );\n        const currentListeners = this.listeners.get(queryToken);\n        if (currentListeners !== void 0) {\n          currentListeners.add(callback);\n        } else {\n          this.listeners.set(queryToken, /* @__PURE__ */ new Set([callback]));\n        }\n        return () => {\n          if (this.closed) {\n            return;\n          }\n          const currentListeners2 = this.listeners.get(queryToken);\n          currentListeners2.delete(callback);\n          if (currentListeners2.size === 0) {\n            this.listeners.delete(queryToken);\n          }\n          unsubscribe();\n        };\n      },\n      localQueryResult: () => {\n        if (this.cachedSync) {\n          return this.cachedSync.localQueryResult(name, args);\n        }\n        return void 0;\n      },\n      localQueryLogs: () => {\n        if (this.cachedSync) {\n          return this.cachedSync.localQueryLogs(name, args);\n        }\n        return void 0;\n      },\n      journal: () => {\n        if (this.cachedSync) {\n          return this.cachedSync.queryJournal(name, args);\n        }\n        return void 0;\n      }\n    };\n  }\n  // Let's try out a queryOptions-style API.\n  // This method is similar to the React Query API `queryClient.prefetchQuery()`.\n  // In the future an ensureQueryData(): Promise<Data> method could exist.\n  /**\n   * Indicates likely future interest in a query subscription.\n   *\n   * The implementation currently immediately subscribes to a query. In the future this method\n   * may prioritize some queries over others, fetch the query result without subscribing, or\n   * do nothing in slow network connections or high load scenarios.\n   *\n   * To use this in a React component, call useQuery() and ignore the return value.\n   *\n   * @param queryOptions - A query (function reference from an api object) and its args, plus\n   * an optional extendSubscriptionFor for how long to subscribe to the query.\n   */\n  prewarmQuery(queryOptions) {\n    const extendSubscriptionFor = queryOptions.extendSubscriptionFor ?? DEFAULT_EXTEND_SUBSCRIPTION_FOR;\n    const watch = this.watchQuery(queryOptions.query, queryOptions.args || {});\n    const unsubscribe = watch.onUpdate(() => {\n    });\n    setTimeout(unsubscribe, extendSubscriptionFor);\n  }\n  /**\n   * Construct a new {@link PaginatedWatch} on a Convex paginated query function.\n   *\n   * **Most application code should not call this method directly. Instead use\n   * the {@link usePaginatedQuery} hook.**\n   *\n   * The act of creating a watch does nothing, a Watch is stateless.\n   *\n   * @param query - A {@link server.FunctionReference} for the public query to run.\n   * @param args - An arguments object for the query. If this is omitted,\n   * the arguments will be `{}`.\n   * @param options - A {@link WatchPaginatedQueryOptions} options object for this query.\n   *\n   * @returns The {@link PaginatedWatch} object.\n   *\n   * @internal\n   */\n  watchPaginatedQuery(query, args, options) {\n    const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(query);\n    return {\n      onUpdate: (callback) => {\n        const { paginatedQueryToken, unsubscribe } = this.paginatedQueryClient.subscribe(name, args || {}, options);\n        const currentListeners = this.listeners.get(paginatedQueryToken);\n        if (currentListeners !== void 0) {\n          currentListeners.add(callback);\n        } else {\n          this.listeners.set(paginatedQueryToken, /* @__PURE__ */ new Set([callback]));\n        }\n        return () => {\n          if (this.closed) {\n            return;\n          }\n          const currentListeners2 = this.listeners.get(paginatedQueryToken);\n          currentListeners2.delete(callback);\n          if (currentListeners2.size === 0) {\n            this.listeners.delete(paginatedQueryToken);\n          }\n          unsubscribe();\n        };\n      },\n      localQueryResult: () => {\n        return this.paginatedQueryClient.localQueryResult(name, args, options);\n      }\n    };\n  }\n  /**\n   * Execute a mutation function.\n   *\n   * @param mutation - A {@link server.FunctionReference} for the public mutation\n   * to run.\n   * @param args - An arguments object for the mutation. If this is omitted,\n   * the arguments will be `{}`.\n   * @param options - A {@link MutationOptions} options object for the mutation.\n   * @returns A promise of the mutation's result.\n   */\n  mutation(mutation, ...argsAndOptions) {\n    const [args, options] = argsAndOptions;\n    const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(mutation);\n    return this.sync.mutation(name, args, options);\n  }\n  /**\n   * Execute an action function.\n   *\n   * @param action - A {@link server.FunctionReference} for the public action\n   * to run.\n   * @param args - An arguments object for the action. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the action's result.\n   */\n  action(action, ...args) {\n    const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(action);\n    return this.sync.action(name, ...args);\n  }\n  /**\n   * Fetch a query result once.\n   *\n   * **Most application code should subscribe to queries instead, using\n   * the {@link useQuery} hook.**\n   *\n   * @param query - A {@link server.FunctionReference} for the public query\n   * to run.\n   * @param args - An arguments object for the query. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the query's result.\n   */\n  query(query, ...args) {\n    const watch = this.watchQuery(query, ...args);\n    const existingResult = watch.localQueryResult();\n    if (existingResult !== void 0) {\n      return Promise.resolve(existingResult);\n    }\n    return new Promise((resolve, reject) => {\n      const unsubscribe = watch.onUpdate(() => {\n        unsubscribe();\n        try {\n          resolve(watch.localQueryResult());\n        } catch (e) {\n          reject(e);\n        }\n      });\n    });\n  }\n  /**\n   * Get the current {@link ConnectionState} between the client and the Convex\n   * backend.\n   *\n   * @returns The {@link ConnectionState} with the Convex backend.\n   */\n  connectionState() {\n    return this.sync.connectionState();\n  }\n  /**\n   * Subscribe to the {@link ConnectionState} between the client and the Convex\n   * backend, calling a callback each time it changes.\n   *\n   * Subscribed callbacks will be called when any part of ConnectionState changes.\n   * ConnectionState may grow in future versions (e.g. to provide a array of\n   * inflight requests) in which case callbacks would be called more frequently.\n   * ConnectionState may also *lose* properties in future versions as we figure\n   * out what information is most useful. As such this API is considered unstable.\n   *\n   * @returns An unsubscribe function to stop listening.\n   */\n  subscribeToConnectionState(cb) {\n    return this.sync.subscribeToConnectionState(cb);\n  }\n  /**\n   * Get the logger for this client.\n   *\n   * @returns The {@link Logger} for this client.\n   */\n  get logger() {\n    return this._logger;\n  }\n  /**\n   * Close any network handles associated with this client and stop all subscriptions.\n   *\n   * Call this method when you're done with a {@link ConvexReactClient} to\n   * dispose of its sockets and resources.\n   *\n   * @returns A `Promise` fulfilled when the connection has been completely closed.\n   */\n  async close() {\n    this.closed = true;\n    this.listeners = /* @__PURE__ */ new Map();\n    if (this.cachedPaginatedQueryClient) {\n      this.cachedPaginatedQueryClient = void 0;\n    }\n    if (this.cachedSync) {\n      const sync = this.cachedSync;\n      this.cachedSync = void 0;\n      await sync.close();\n    }\n  }\n  /**\n   * Handle transitions from both base client and paginated client.\n   * This ensures all transitions are processed synchronously and in order.\n   */\n  handleTransition(transition) {\n    const simple = transition.queries.map((q) => q.token);\n    const paginated = transition.paginatedQueries.map((q) => q.token);\n    this.transition([...simple, ...paginated]);\n  }\n  transition(updatedQueries) {\n    for (const queryToken of updatedQueries) {\n      const callbacks = this.listeners.get(queryToken);\n      if (callbacks) {\n        for (const callback of callbacks) {\n          callback();\n        }\n      }\n    }\n  }\n}\nconst ConvexContext = react__WEBPACK_IMPORTED_MODULE_1__.createContext(\n  void 0\n  // in the future this will be a mocked client for testing\n);\nfunction useConvex() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ConvexContext);\n}\nconst ConvexProvider = ({ client, children }) => {\n  return react__WEBPACK_IMPORTED_MODULE_1__.createElement(\n    ConvexContext.Provider,\n    { value: client },\n    children\n  );\n};\nfunction useQuery(query, ...args) {\n  const skip = args[0] === \"skip\";\n  const argsObject = args[0] === \"skip\" ? {} : (0,_common_index_js__WEBPACK_IMPORTED_MODULE_5__.parseArgs)(args[0]);\n  const queryReference = typeof query === \"string\" ? (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.makeFunctionReference)(query) : query;\n  const queryName = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(queryReference);\n  const queries = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(\n    () => skip ? {} : { query: { query: queryReference, args: argsObject } },\n    // Stringify args so args that are semantically the same don't trigger a\n    // rerender. Saves developers from adding `useMemo` on every args usage.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_2__.convexToJson)(argsObject)), queryName, skip]\n  );\n  const results = (0,_use_queries_js__WEBPACK_IMPORTED_MODULE_3__.useQueries)(queries);\n  const result = results[\"query\"];\n  if (result instanceof Error) {\n    throw result;\n  }\n  return result;\n}\nfunction useMutation(mutation) {\n  const mutationReference = typeof mutation === \"string\" ? (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.makeFunctionReference)(mutation) : mutation;\n  const convex = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ConvexContext);\n  if (convex === void 0) {\n    throw new Error(\n      \"Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app\"\n    );\n  }\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(\n    () => createMutation(mutationReference, convex),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [convex, (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(mutationReference)]\n  );\n}\nfunction useAction(action) {\n  const convex = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ConvexContext);\n  const actionReference = typeof action === \"string\" ? (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.makeFunctionReference)(action) : action;\n  if (convex === void 0) {\n    throw new Error(\n      \"Could not find Convex client! `useAction` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app\"\n    );\n  }\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(\n    () => createAction(actionReference, convex),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [convex, (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(actionReference)]\n  );\n}\nfunction useConvexConnectionState() {\n  const convex = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ConvexContext);\n  if (convex === void 0) {\n    throw new Error(\n      \"Could not find Convex client! `useConvexConnectionState` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app\"\n    );\n  }\n  const getCurrentValue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {\n    return convex.connectionState();\n  }, [convex]);\n  const subscribe = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    (callback) => {\n      return convex.subscribeToConnectionState(() => {\n        callback();\n      });\n    },\n    [convex]\n  );\n  return (0,_use_subscription_js__WEBPACK_IMPORTED_MODULE_4__.useSubscription)({ getCurrentValue, subscribe });\n}\nfunction assertNotAccidentalArgument(value) {\n  if (typeof value === \"object\" && value !== null && \"bubbles\" in value && \"persist\" in value && \"isDefaultPrevented\" in value) {\n    throw new Error(\n      `Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like \\`const handler = () => myMutation();\\` and using \\`handler\\` in the event handler.`\n    );\n  }\n}\n//# sourceMappingURL=client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L2NsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFhO0FBQ2I7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJO0FBQ3VEO0FBQ1M7QUFDZDtBQUNKO0FBQ1U7QUFDVDtBQUlyQjtBQUlLO0FBR29CO0FBQ25EO0FBQ0EsV0FBVyxrQ0FBSztBQUNoQjtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCwrREFBZTtBQUMzRTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0NBQWdDO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0hBQW9ILGdCQUFnQjtBQUNwSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQywwRUFBcUIsR0FBRyxvQ0FBb0MsbUVBQW1FLDZFQUF3QixHQUFHLG9DQUFvQztBQUM3TyxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwrREFBZ0I7QUFDMUM7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMseUZBQW9CO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsYUFBYTtBQUNuQztBQUNBO0FBQ0EsVUFBVSxnQkFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGdDQUFnQztBQUN2RDtBQUNBLDhCQUE4QjtBQUM5Qix5QkFBeUIseUJBQXlCO0FBQ2xEO0FBQ0EsbUJBQW1CLGFBQWE7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFlO0FBQ2hDO0FBQ0E7QUFDQSxnQkFBZ0IsMEJBQTBCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RTtBQUM3RTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0JBQXNCO0FBQzVDO0FBQ0E7QUFDQSxVQUFVLHlCQUF5QjtBQUNuQztBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0NBQWdDO0FBQ3ZEO0FBQ0EsOEJBQThCO0FBQzlCLHlCQUF5QixrQ0FBa0M7QUFDM0Q7QUFDQSxtQkFBbUIsc0JBQXNCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFlO0FBQ2hDO0FBQ0E7QUFDQSxnQkFBZ0IsbUNBQW1DLHNEQUFzRDtBQUN6RztBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixnQ0FBZ0M7QUFDMUQ7QUFDQTtBQUNBLDhCQUE4QjtBQUM5Qix5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFlO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0NBQWdDO0FBQ3hEO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFlO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0JBQWdCO0FBQzFCO0FBQ0EsdUJBQXVCLGdDQUFnQztBQUN2RDtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxzQkFBc0IsdUJBQXVCO0FBQzdDO0FBQ0E7QUFDQSxtQkFBbUIsdUJBQXVCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MseUJBQXlCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixnREFBbUI7QUFDekM7QUFDQTtBQUNBO0FBQ087QUFDUCxTQUFTLGlEQUFVO0FBQ25CO0FBQ08sMEJBQTBCLGtCQUFrQjtBQUNuRCxTQUFTLGdEQUFtQjtBQUM1QjtBQUNBLE1BQU0sZUFBZTtBQUNyQjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsNkNBQTZDLEVBQUUsMkRBQVM7QUFDeEQscURBQXFELHFFQUFxQjtBQUMxRSxvQkFBb0IsK0RBQWU7QUFDbkMsa0JBQWtCLDhDQUFPO0FBQ3pCLG9CQUFvQixJQUFJLFNBQVMsMkNBQTJDO0FBQzVFO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw4REFBWTtBQUNoQztBQUNBLGtCQUFrQiwyREFBVTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLDJEQUEyRCxxRUFBcUI7QUFDaEYsaUJBQWlCLGlEQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDhDQUFPO0FBQ2hCO0FBQ0E7QUFDQSxhQUFhLCtEQUFlO0FBQzVCO0FBQ0E7QUFDTztBQUNQLGlCQUFpQixpREFBVTtBQUMzQix1REFBdUQscUVBQXFCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDhDQUFPO0FBQ2hCO0FBQ0E7QUFDQSxhQUFhLCtEQUFlO0FBQzVCO0FBQ0E7QUFDTztBQUNQLGlCQUFpQixpREFBVTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtEQUFXO0FBQ3JDO0FBQ0EsR0FBRztBQUNILG9CQUFvQixrREFBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxTQUFTLHFFQUFlLEdBQUcsNEJBQTRCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaVVBQWlVO0FBQ2pVO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHJlYWN0XFxjbGllbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuaW1wb3J0IHsgQmFzZUNvbnZleENsaWVudCB9IGZyb20gXCIuLi9icm93c2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUNvbnRleHQsIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGNvbnZleFRvSnNvbiB9IGZyb20gXCIuLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IHVzZVF1ZXJpZXMgfSBmcm9tIFwiLi91c2VfcXVlcmllcy5qc1wiO1xuaW1wb3J0IHsgdXNlU3Vic2NyaXB0aW9uIH0gZnJvbSBcIi4vdXNlX3N1YnNjcmlwdGlvbi5qc1wiO1xuaW1wb3J0IHsgcGFyc2VBcmdzIH0gZnJvbSBcIi4uL2NvbW1vbi9pbmRleC5qc1wiO1xuaW1wb3J0IHtcbiAgZ2V0RnVuY3Rpb25OYW1lLFxuICBtYWtlRnVuY3Rpb25SZWZlcmVuY2Vcbn0gZnJvbSBcIi4uL3NlcnZlci9hcGkuanNcIjtcbmltcG9ydCB7XG4gIGluc3RhbnRpYXRlRGVmYXVsdExvZ2dlcixcbiAgaW5zdGFudGlhdGVOb29wTG9nZ2VyXG59IGZyb20gXCIuLi9icm93c2VyL2xvZ2dpbmcuanNcIjtcbmltcG9ydCB7XG4gIFBhZ2luYXRlZFF1ZXJ5Q2xpZW50XG59IGZyb20gXCIuLi9icm93c2VyL3N5bmMvcGFnaW5hdGVkX3F1ZXJ5X2NsaWVudC5qc1wiO1xuY29uc3QgREVGQVVMVF9FWFRFTkRfU1VCU0NSSVBUSU9OX0ZPUiA9IDVlMztcbmlmICh0eXBlb2YgUmVhY3QgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwiUmVxdWlyZWQgZGVwZW5kZW5jeSAncmVhY3QnIG5vdCBmb3VuZFwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNdXRhdGlvbihtdXRhdGlvblJlZmVyZW5jZSwgY2xpZW50LCB1cGRhdGUpIHtcbiAgZnVuY3Rpb24gbXV0YXRpb24oYXJncykge1xuICAgIGFzc2VydE5vdEFjY2lkZW50YWxBcmd1bWVudChhcmdzKTtcbiAgICByZXR1cm4gY2xpZW50Lm11dGF0aW9uKG11dGF0aW9uUmVmZXJlbmNlLCBhcmdzLCB7XG4gICAgICBvcHRpbWlzdGljVXBkYXRlOiB1cGRhdGVcbiAgICB9KTtcbiAgfVxuICBtdXRhdGlvbi53aXRoT3B0aW1pc3RpY1VwZGF0ZSA9IGZ1bmN0aW9uIHdpdGhPcHRpbWlzdGljVXBkYXRlKG9wdGltaXN0aWNVcGRhdGUpIHtcbiAgICBpZiAodXBkYXRlICE9PSB2b2lkIDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEFscmVhZHkgc3BlY2lmaWVkIG9wdGltaXN0aWMgdXBkYXRlIGZvciBtdXRhdGlvbiAke2dldEZ1bmN0aW9uTmFtZShcbiAgICAgICAgICBtdXRhdGlvblJlZmVyZW5jZVxuICAgICAgICApfWBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVNdXRhdGlvbihtdXRhdGlvblJlZmVyZW5jZSwgY2xpZW50LCBvcHRpbWlzdGljVXBkYXRlKTtcbiAgfTtcbiAgcmV0dXJuIG11dGF0aW9uO1xufVxuZnVuY3Rpb24gY3JlYXRlQWN0aW9uKGFjdGlvblJlZmVyZW5jZSwgY2xpZW50KSB7XG4gIHJldHVybiBmdW5jdGlvbihhcmdzKSB7XG4gICAgcmV0dXJuIGNsaWVudC5hY3Rpb24oYWN0aW9uUmVmZXJlbmNlLCBhcmdzKTtcbiAgfTtcbn1cbmV4cG9ydCBjbGFzcyBDb252ZXhSZWFjdENsaWVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0gYWRkcmVzcyAtIFRoZSB1cmwgb2YgeW91ciBDb252ZXggZGVwbG95bWVudCwgb2Z0ZW4gcHJvdmlkZWRcbiAgICogYnkgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUuIEUuZy4gYGh0dHBzOi8vc21hbGwtbW91c2UtMTIzLmNvbnZleC5jbG91ZGAuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gU2VlIHtAbGluayBDb252ZXhSZWFjdENsaWVudE9wdGlvbnN9IGZvciBhIGZ1bGwgZGVzY3JpcHRpb24uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhZGRyZXNzLCBvcHRpb25zKSB7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImFkZHJlc3NcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNhY2hlZFN5bmNcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNhY2hlZFBhZ2luYXRlZFF1ZXJ5Q2xpZW50XCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJsaXN0ZW5lcnNcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIm9wdGlvbnNcIik7XG4gICAgLy8gXCJjbG9zZWRcIiBtZWFucyB0aGlzIGNsaWVudCBpcyBkb25lLCBub3QganVzdCB0aGF0IHRoZSB1bmRlcmx5aW5nIFdTIGNvbm5lY3Rpb24gaXMgY2xvc2VkLlxuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJjbG9zZWRcIiwgZmFsc2UpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfbG9nZ2VyXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJhZG1pbkF1dGhcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImZha2VVc2VySWRlbnRpdHlcIik7XG4gICAgaWYgKGFkZHJlc3MgPT09IHZvaWQgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIk5vIGFkZHJlc3MgcHJvdmlkZWQgdG8gQ29udmV4UmVhY3RDbGllbnQuXFxuSWYgdHJ5aW5nIHRvIGRlcGxveSB0byBwcm9kdWN0aW9uLCBtYWtlIHN1cmUgdG8gZm9sbG93IGFsbCB0aGUgaW5zdHJ1Y3Rpb25zIGZvdW5kIGF0IGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3Byb2R1Y3Rpb24vaG9zdGluZy9cXG5JZiBydW5uaW5nIGxvY2FsbHksIG1ha2Ugc3VyZSB0byBydW4gYGNvbnZleCBkZXZgIGFuZCBlbnN1cmUgdGhlIC5lbnYubG9jYWwgZmlsZSBpcyBwb3B1bGF0ZWQuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYWRkcmVzcyAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ29udmV4UmVhY3RDbGllbnQgcmVxdWlyZXMgYSBVUkwgbGlrZSAnaHR0cHM6Ly9oYXBweS1vdHRlci0xMjMuY29udmV4LmNsb3VkJywgcmVjZWl2ZWQgc29tZXRoaW5nIG9mIHR5cGUgJHt0eXBlb2YgYWRkcmVzc30gaW5zdGVhZC5gXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoIWFkZHJlc3MuaW5jbHVkZXMoXCI6Ly9cIikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3ZpZGVkIGFkZHJlc3Mgd2FzIG5vdCBhbiBhYnNvbHV0ZSBVUkwuXCIpO1xuICAgIH1cbiAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgIHRoaXMubGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLl9sb2dnZXIgPSBvcHRpb25zPy5sb2dnZXIgPT09IGZhbHNlID8gaW5zdGFudGlhdGVOb29wTG9nZ2VyKHsgdmVyYm9zZTogb3B0aW9ucz8udmVyYm9zZSA/PyBmYWxzZSB9KSA6IG9wdGlvbnM/LmxvZ2dlciAhPT0gdHJ1ZSAmJiBvcHRpb25zPy5sb2dnZXIgPyBvcHRpb25zLmxvZ2dlciA6IGluc3RhbnRpYXRlRGVmYXVsdExvZ2dlcih7IHZlcmJvc2U6IG9wdGlvbnM/LnZlcmJvc2UgPz8gZmFsc2UgfSk7XG4gICAgdGhpcy5vcHRpb25zID0geyAuLi5vcHRpb25zLCBsb2dnZXI6IHRoaXMuX2xvZ2dlciB9O1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGFkZHJlc3MgZm9yIHRoaXMgY2xpZW50LCB1c2VmdWwgZm9yIGNyZWF0aW5nIGEgbmV3IGNsaWVudC5cbiAgICpcbiAgICogTm90IGd1YXJhbnRlZWQgdG8gbWF0Y2ggdGhlIGFkZHJlc3Mgd2l0aCB3aGljaCB0aGlzIGNsaWVudCB3YXMgY29uc3RydWN0ZWQ6XG4gICAqIGl0IG1heSBiZSBjYW5vbmljYWxpemVkLlxuICAgKi9cbiAgZ2V0IHVybCgpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRyZXNzO1xuICB9XG4gIC8qKlxuICAgKiBMYXppbHkgaW5zdGFudGlhdGUgdGhlIGBCYXNlQ29udmV4Q2xpZW50YCBzbyB3ZSBkb24ndCBjcmVhdGUgdGhlIFdlYlNvY2tldFxuICAgKiB3aGVuIHNlcnZlci1zaWRlIHJlbmRlcmluZy5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXQgc3luYygpIHtcbiAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnZleFJlYWN0Q2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gY2xvc2VkLlwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2FjaGVkU3luYykge1xuICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkU3luYztcbiAgICB9XG4gICAgdGhpcy5jYWNoZWRTeW5jID0gbmV3IEJhc2VDb252ZXhDbGllbnQoXG4gICAgICB0aGlzLmFkZHJlc3MsXG4gICAgICAoKSA9PiB7XG4gICAgICB9LFxuICAgICAgLy8gVXNlIHRoZSBQYWdpbmF0ZWRRdWVyeUNsaWVudCdzIHRyYW5zaXRpb24gaW5zdGVhZC5cbiAgICAgIHRoaXMub3B0aW9uc1xuICAgICk7XG4gICAgaWYgKHRoaXMuYWRtaW5BdXRoKSB7XG4gICAgICB0aGlzLmNhY2hlZFN5bmMuc2V0QWRtaW5BdXRoKHRoaXMuYWRtaW5BdXRoLCB0aGlzLmZha2VVc2VySWRlbnRpdHkpO1xuICAgIH1cbiAgICB0aGlzLmNhY2hlZFBhZ2luYXRlZFF1ZXJ5Q2xpZW50ID0gbmV3IFBhZ2luYXRlZFF1ZXJ5Q2xpZW50KFxuICAgICAgdGhpcy5jYWNoZWRTeW5jLFxuICAgICAgKHRyYW5zaXRpb24pID0+IHRoaXMuaGFuZGxlVHJhbnNpdGlvbih0cmFuc2l0aW9uKVxuICAgICk7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGVkU3luYztcbiAgfVxuICAvKipcbiAgICogTGF6aWx5IGluc3RhbnRpYXRlIHRoZSBgUGFnaW5hdGVkUXVlcnlDbGllbnRgIHNvIHdlIGRvbid0IGNyZWF0ZSBpdFxuICAgKiB3aGVuIHNlcnZlci1zaWRlIHJlbmRlcmluZy5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXQgcGFnaW5hdGVkUXVlcnlDbGllbnQoKSB7XG4gICAgdGhpcy5zeW5jO1xuICAgIGlmICh0aGlzLmNhY2hlZFBhZ2luYXRlZFF1ZXJ5Q2xpZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5jYWNoZWRQYWdpbmF0ZWRRdWVyeUNsaWVudDtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU2hvdWxkIGFscmVhZHkgYmUgaW5zdGFudGlhdGVkXCIpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGF1dGhlbnRpY2F0aW9uIHRva2VuIHRvIGJlIHVzZWQgZm9yIHN1YnNlcXVlbnQgcXVlcmllcyBhbmQgbXV0YXRpb25zLlxuICAgKiBgZmV0Y2hUb2tlbmAgd2lsbCBiZSBjYWxsZWQgYXV0b21hdGljYWxseSBhZ2FpbiBpZiBhIHRva2VuIGV4cGlyZXMuXG4gICAqIGBmZXRjaFRva2VuYCBzaG91bGQgcmV0dXJuIGBudWxsYCBpZiB0aGUgdG9rZW4gY2Fubm90IGJlIHJldHJpZXZlZCwgZm9yIGV4YW1wbGVcbiAgICogd2hlbiB0aGUgdXNlcidzIHJpZ2h0cyB3ZXJlIHBlcm1hbmVudGx5IHJldm9rZWQuXG4gICAqIEBwYXJhbSBmZXRjaFRva2VuIC0gYW4gYXN5bmMgZnVuY3Rpb24gcmV0dXJuaW5nIHRoZSBKV1QtZW5jb2RlZCBPcGVuSUQgQ29ubmVjdCBJZGVudGl0eSBUb2tlblxuICAgKiBAcGFyYW0gb25DaGFuZ2UgLSBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgYXV0aGVudGljYXRpb24gc3RhdHVzIGNoYW5nZXNcbiAgICovXG4gIHNldEF1dGgoZmV0Y2hUb2tlbiwgb25DaGFuZ2UpIHtcbiAgICBpZiAodHlwZW9mIGZldGNoVG9rZW4gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJQYXNzaW5nIGEgc3RyaW5nIHRvIENvbnZleFJlYWN0Q2xpZW50LnNldEF1dGggaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCwgcGxlYXNlIHVwZ3JhZGUgdG8gcGFzc2luZyBpbiBhbiBhc3luYyBmdW5jdGlvbiB0byBoYW5kbGUgcmVhdXRoZW50aWNhdGlvbi5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5zeW5jLnNldEF1dGgoXG4gICAgICBmZXRjaFRva2VuLFxuICAgICAgb25DaGFuZ2UgPz8gKCgpID0+IHtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQ2xlYXIgdGhlIGN1cnJlbnQgYXV0aGVudGljYXRpb24gdG9rZW4gaWYgc2V0LlxuICAgKi9cbiAgY2xlYXJBdXRoKCkge1xuICAgIHRoaXMuc3luYy5jbGVhckF1dGgoKTtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBzZXRBZG1pbkF1dGgodG9rZW4sIGlkZW50aXR5KSB7XG4gICAgdGhpcy5hZG1pbkF1dGggPSB0b2tlbjtcbiAgICB0aGlzLmZha2VVc2VySWRlbnRpdHkgPSBpZGVudGl0eTtcbiAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnZleFJlYWN0Q2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gY2xvc2VkLlwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2FjaGVkU3luYykge1xuICAgICAgdGhpcy5zeW5jLnNldEFkbWluQXV0aCh0b2tlbiwgaWRlbnRpdHkpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ29uc3RydWN0IGEgbmV3IHtAbGluayBXYXRjaH0gb24gYSBDb252ZXggcXVlcnkgZnVuY3Rpb24uXG4gICAqXG4gICAqICoqTW9zdCBhcHBsaWNhdGlvbiBjb2RlIHNob3VsZCBub3QgY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseS4gSW5zdGVhZCB1c2VcbiAgICogdGhlIHtAbGluayB1c2VRdWVyeX0gaG9vay4qKlxuICAgKlxuICAgKiBUaGUgYWN0IG9mIGNyZWF0aW5nIGEgd2F0Y2ggZG9lcyBub3RoaW5nLCBhIFdhdGNoIGlzIHN0YXRlbGVzcy5cbiAgICpcbiAgICogQHBhcmFtIHF1ZXJ5IC0gQSB7QGxpbmsgc2VydmVyLkZ1bmN0aW9uUmVmZXJlbmNlfSBmb3IgdGhlIHB1YmxpYyBxdWVyeSB0byBydW4uXG4gICAqIEBwYXJhbSBhcmdzIC0gQW4gYXJndW1lbnRzIG9iamVjdCBmb3IgdGhlIHF1ZXJ5LiBJZiB0aGlzIGlzIG9taXR0ZWQsXG4gICAqIHRoZSBhcmd1bWVudHMgd2lsbCBiZSBge31gLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIEEge0BsaW5rIFdhdGNoUXVlcnlPcHRpb25zfSBvcHRpb25zIG9iamVjdCBmb3IgdGhpcyBxdWVyeS5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIHtAbGluayBXYXRjaH0gb2JqZWN0LlxuICAgKi9cbiAgd2F0Y2hRdWVyeShxdWVyeSwgLi4uYXJnc0FuZE9wdGlvbnMpIHtcbiAgICBjb25zdCBbYXJncywgb3B0aW9uc10gPSBhcmdzQW5kT3B0aW9ucztcbiAgICBjb25zdCBuYW1lID0gZ2V0RnVuY3Rpb25OYW1lKHF1ZXJ5KTtcbiAgICByZXR1cm4ge1xuICAgICAgb25VcGRhdGU6IChjYWxsYmFjaykgPT4ge1xuICAgICAgICBjb25zdCB7IHF1ZXJ5VG9rZW4sIHVuc3Vic2NyaWJlIH0gPSB0aGlzLnN5bmMuc3Vic2NyaWJlKFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgYXJncyxcbiAgICAgICAgICBvcHRpb25zXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycy5nZXQocXVlcnlUb2tlbik7XG4gICAgICAgIGlmIChjdXJyZW50TGlzdGVuZXJzICE9PSB2b2lkIDApIHtcbiAgICAgICAgICBjdXJyZW50TGlzdGVuZXJzLmFkZChjYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5saXN0ZW5lcnMuc2V0KHF1ZXJ5VG9rZW4sIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtjYWxsYmFja10pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjdXJyZW50TGlzdGVuZXJzMiA9IHRoaXMubGlzdGVuZXJzLmdldChxdWVyeVRva2VuKTtcbiAgICAgICAgICBjdXJyZW50TGlzdGVuZXJzMi5kZWxldGUoY2FsbGJhY2spO1xuICAgICAgICAgIGlmIChjdXJyZW50TGlzdGVuZXJzMi5zaXplID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5kZWxldGUocXVlcnlUb2tlbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgbG9jYWxRdWVyeVJlc3VsdDogKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5jYWNoZWRTeW5jKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkU3luYy5sb2NhbFF1ZXJ5UmVzdWx0KG5hbWUsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICB9LFxuICAgICAgbG9jYWxRdWVyeUxvZ3M6ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuY2FjaGVkU3luYykge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlZFN5bmMubG9jYWxRdWVyeUxvZ3MobmFtZSwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgIH0sXG4gICAgICBqb3VybmFsOiAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlZFN5bmMpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZWRTeW5jLnF1ZXJ5Sm91cm5hbChuYW1lLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgLy8gTGV0J3MgdHJ5IG91dCBhIHF1ZXJ5T3B0aW9ucy1zdHlsZSBBUEkuXG4gIC8vIFRoaXMgbWV0aG9kIGlzIHNpbWlsYXIgdG8gdGhlIFJlYWN0IFF1ZXJ5IEFQSSBgcXVlcnlDbGllbnQucHJlZmV0Y2hRdWVyeSgpYC5cbiAgLy8gSW4gdGhlIGZ1dHVyZSBhbiBlbnN1cmVRdWVyeURhdGEoKTogUHJvbWlzZTxEYXRhPiBtZXRob2QgY291bGQgZXhpc3QuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgbGlrZWx5IGZ1dHVyZSBpbnRlcmVzdCBpbiBhIHF1ZXJ5IHN1YnNjcmlwdGlvbi5cbiAgICpcbiAgICogVGhlIGltcGxlbWVudGF0aW9uIGN1cnJlbnRseSBpbW1lZGlhdGVseSBzdWJzY3JpYmVzIHRvIGEgcXVlcnkuIEluIHRoZSBmdXR1cmUgdGhpcyBtZXRob2RcbiAgICogbWF5IHByaW9yaXRpemUgc29tZSBxdWVyaWVzIG92ZXIgb3RoZXJzLCBmZXRjaCB0aGUgcXVlcnkgcmVzdWx0IHdpdGhvdXQgc3Vic2NyaWJpbmcsIG9yXG4gICAqIGRvIG5vdGhpbmcgaW4gc2xvdyBuZXR3b3JrIGNvbm5lY3Rpb25zIG9yIGhpZ2ggbG9hZCBzY2VuYXJpb3MuXG4gICAqXG4gICAqIFRvIHVzZSB0aGlzIGluIGEgUmVhY3QgY29tcG9uZW50LCBjYWxsIHVzZVF1ZXJ5KCkgYW5kIGlnbm9yZSB0aGUgcmV0dXJuIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0gcXVlcnlPcHRpb25zIC0gQSBxdWVyeSAoZnVuY3Rpb24gcmVmZXJlbmNlIGZyb20gYW4gYXBpIG9iamVjdCkgYW5kIGl0cyBhcmdzLCBwbHVzXG4gICAqIGFuIG9wdGlvbmFsIGV4dGVuZFN1YnNjcmlwdGlvbkZvciBmb3IgaG93IGxvbmcgdG8gc3Vic2NyaWJlIHRvIHRoZSBxdWVyeS5cbiAgICovXG4gIHByZXdhcm1RdWVyeShxdWVyeU9wdGlvbnMpIHtcbiAgICBjb25zdCBleHRlbmRTdWJzY3JpcHRpb25Gb3IgPSBxdWVyeU9wdGlvbnMuZXh0ZW5kU3Vic2NyaXB0aW9uRm9yID8/IERFRkFVTFRfRVhURU5EX1NVQlNDUklQVElPTl9GT1I7XG4gICAgY29uc3Qgd2F0Y2ggPSB0aGlzLndhdGNoUXVlcnkocXVlcnlPcHRpb25zLnF1ZXJ5LCBxdWVyeU9wdGlvbnMuYXJncyB8fCB7fSk7XG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSB3YXRjaC5vblVwZGF0ZSgoKSA9PiB7XG4gICAgfSk7XG4gICAgc2V0VGltZW91dCh1bnN1YnNjcmliZSwgZXh0ZW5kU3Vic2NyaXB0aW9uRm9yKTtcbiAgfVxuICAvKipcbiAgICogQ29uc3RydWN0IGEgbmV3IHtAbGluayBQYWdpbmF0ZWRXYXRjaH0gb24gYSBDb252ZXggcGFnaW5hdGVkIHF1ZXJ5IGZ1bmN0aW9uLlxuICAgKlxuICAgKiAqKk1vc3QgYXBwbGljYXRpb24gY29kZSBzaG91bGQgbm90IGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkuIEluc3RlYWQgdXNlXG4gICAqIHRoZSB7QGxpbmsgdXNlUGFnaW5hdGVkUXVlcnl9IGhvb2suKipcbiAgICpcbiAgICogVGhlIGFjdCBvZiBjcmVhdGluZyBhIHdhdGNoIGRvZXMgbm90aGluZywgYSBXYXRjaCBpcyBzdGF0ZWxlc3MuXG4gICAqXG4gICAqIEBwYXJhbSBxdWVyeSAtIEEge0BsaW5rIHNlcnZlci5GdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBwdWJsaWMgcXVlcnkgdG8gcnVuLlxuICAgKiBAcGFyYW0gYXJncyAtIEFuIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBxdWVyeS4gSWYgdGhpcyBpcyBvbWl0dGVkLFxuICAgKiB0aGUgYXJndW1lbnRzIHdpbGwgYmUgYHt9YC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBBIHtAbGluayBXYXRjaFBhZ2luYXRlZFF1ZXJ5T3B0aW9uc30gb3B0aW9ucyBvYmplY3QgZm9yIHRoaXMgcXVlcnkuXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgUGFnaW5hdGVkV2F0Y2h9IG9iamVjdC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICB3YXRjaFBhZ2luYXRlZFF1ZXJ5KHF1ZXJ5LCBhcmdzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgbmFtZSA9IGdldEZ1bmN0aW9uTmFtZShxdWVyeSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uVXBkYXRlOiAoY2FsbGJhY2spID0+IHtcbiAgICAgICAgY29uc3QgeyBwYWdpbmF0ZWRRdWVyeVRva2VuLCB1bnN1YnNjcmliZSB9ID0gdGhpcy5wYWdpbmF0ZWRRdWVyeUNsaWVudC5zdWJzY3JpYmUobmFtZSwgYXJncyB8fCB7fSwgb3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycy5nZXQocGFnaW5hdGVkUXVlcnlUb2tlbik7XG4gICAgICAgIGlmIChjdXJyZW50TGlzdGVuZXJzICE9PSB2b2lkIDApIHtcbiAgICAgICAgICBjdXJyZW50TGlzdGVuZXJzLmFkZChjYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5saXN0ZW5lcnMuc2V0KHBhZ2luYXRlZFF1ZXJ5VG9rZW4sIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtjYWxsYmFja10pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjdXJyZW50TGlzdGVuZXJzMiA9IHRoaXMubGlzdGVuZXJzLmdldChwYWdpbmF0ZWRRdWVyeVRva2VuKTtcbiAgICAgICAgICBjdXJyZW50TGlzdGVuZXJzMi5kZWxldGUoY2FsbGJhY2spO1xuICAgICAgICAgIGlmIChjdXJyZW50TGlzdGVuZXJzMi5zaXplID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5kZWxldGUocGFnaW5hdGVkUXVlcnlUb2tlbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgbG9jYWxRdWVyeVJlc3VsdDogKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5wYWdpbmF0ZWRRdWVyeUNsaWVudC5sb2NhbFF1ZXJ5UmVzdWx0KG5hbWUsIGFyZ3MsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSBtdXRhdGlvbiBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIG11dGF0aW9uIC0gQSB7QGxpbmsgc2VydmVyLkZ1bmN0aW9uUmVmZXJlbmNlfSBmb3IgdGhlIHB1YmxpYyBtdXRhdGlvblxuICAgKiB0byBydW4uXG4gICAqIEBwYXJhbSBhcmdzIC0gQW4gYXJndW1lbnRzIG9iamVjdCBmb3IgdGhlIG11dGF0aW9uLiBJZiB0aGlzIGlzIG9taXR0ZWQsXG4gICAqIHRoZSBhcmd1bWVudHMgd2lsbCBiZSBge31gLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIEEge0BsaW5rIE11dGF0aW9uT3B0aW9uc30gb3B0aW9ucyBvYmplY3QgZm9yIHRoZSBtdXRhdGlvbi5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIG9mIHRoZSBtdXRhdGlvbidzIHJlc3VsdC5cbiAgICovXG4gIG11dGF0aW9uKG11dGF0aW9uLCAuLi5hcmdzQW5kT3B0aW9ucykge1xuICAgIGNvbnN0IFthcmdzLCBvcHRpb25zXSA9IGFyZ3NBbmRPcHRpb25zO1xuICAgIGNvbnN0IG5hbWUgPSBnZXRGdW5jdGlvbk5hbWUobXV0YXRpb24pO1xuICAgIHJldHVybiB0aGlzLnN5bmMubXV0YXRpb24obmFtZSwgYXJncywgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYW4gYWN0aW9uIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gYWN0aW9uIC0gQSB7QGxpbmsgc2VydmVyLkZ1bmN0aW9uUmVmZXJlbmNlfSBmb3IgdGhlIHB1YmxpYyBhY3Rpb25cbiAgICogdG8gcnVuLlxuICAgKiBAcGFyYW0gYXJncyAtIEFuIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBhY3Rpb24uIElmIHRoaXMgaXMgb21pdHRlZCxcbiAgICogdGhlIGFyZ3VtZW50cyB3aWxsIGJlIGB7fWAuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgYWN0aW9uJ3MgcmVzdWx0LlxuICAgKi9cbiAgYWN0aW9uKGFjdGlvbiwgLi4uYXJncykge1xuICAgIGNvbnN0IG5hbWUgPSBnZXRGdW5jdGlvbk5hbWUoYWN0aW9uKTtcbiAgICByZXR1cm4gdGhpcy5zeW5jLmFjdGlvbihuYW1lLCAuLi5hcmdzKTtcbiAgfVxuICAvKipcbiAgICogRmV0Y2ggYSBxdWVyeSByZXN1bHQgb25jZS5cbiAgICpcbiAgICogKipNb3N0IGFwcGxpY2F0aW9uIGNvZGUgc2hvdWxkIHN1YnNjcmliZSB0byBxdWVyaWVzIGluc3RlYWQsIHVzaW5nXG4gICAqIHRoZSB7QGxpbmsgdXNlUXVlcnl9IGhvb2suKipcbiAgICpcbiAgICogQHBhcmFtIHF1ZXJ5IC0gQSB7QGxpbmsgc2VydmVyLkZ1bmN0aW9uUmVmZXJlbmNlfSBmb3IgdGhlIHB1YmxpYyBxdWVyeVxuICAgKiB0byBydW4uXG4gICAqIEBwYXJhbSBhcmdzIC0gQW4gYXJndW1lbnRzIG9iamVjdCBmb3IgdGhlIHF1ZXJ5LiBJZiB0aGlzIGlzIG9taXR0ZWQsXG4gICAqIHRoZSBhcmd1bWVudHMgd2lsbCBiZSBge31gLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2Ugb2YgdGhlIHF1ZXJ5J3MgcmVzdWx0LlxuICAgKi9cbiAgcXVlcnkocXVlcnksIC4uLmFyZ3MpIHtcbiAgICBjb25zdCB3YXRjaCA9IHRoaXMud2F0Y2hRdWVyeShxdWVyeSwgLi4uYXJncyk7XG4gICAgY29uc3QgZXhpc3RpbmdSZXN1bHQgPSB3YXRjaC5sb2NhbFF1ZXJ5UmVzdWx0KCk7XG4gICAgaWYgKGV4aXN0aW5nUmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZXhpc3RpbmdSZXN1bHQpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSB3YXRjaC5vblVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVzb2x2ZSh3YXRjaC5sb2NhbFF1ZXJ5UmVzdWx0KCkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHtAbGluayBDb25uZWN0aW9uU3RhdGV9IGJldHdlZW4gdGhlIGNsaWVudCBhbmQgdGhlIENvbnZleFxuICAgKiBiYWNrZW5kLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIENvbm5lY3Rpb25TdGF0ZX0gd2l0aCB0aGUgQ29udmV4IGJhY2tlbmQuXG4gICAqL1xuICBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3luYy5jb25uZWN0aW9uU3RhdGUoKTtcbiAgfVxuICAvKipcbiAgICogU3Vic2NyaWJlIHRvIHRoZSB7QGxpbmsgQ29ubmVjdGlvblN0YXRlfSBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIHRoZSBDb252ZXhcbiAgICogYmFja2VuZCwgY2FsbGluZyBhIGNhbGxiYWNrIGVhY2ggdGltZSBpdCBjaGFuZ2VzLlxuICAgKlxuICAgKiBTdWJzY3JpYmVkIGNhbGxiYWNrcyB3aWxsIGJlIGNhbGxlZCB3aGVuIGFueSBwYXJ0IG9mIENvbm5lY3Rpb25TdGF0ZSBjaGFuZ2VzLlxuICAgKiBDb25uZWN0aW9uU3RhdGUgbWF5IGdyb3cgaW4gZnV0dXJlIHZlcnNpb25zIChlLmcuIHRvIHByb3ZpZGUgYSBhcnJheSBvZlxuICAgKiBpbmZsaWdodCByZXF1ZXN0cykgaW4gd2hpY2ggY2FzZSBjYWxsYmFja3Mgd291bGQgYmUgY2FsbGVkIG1vcmUgZnJlcXVlbnRseS5cbiAgICogQ29ubmVjdGlvblN0YXRlIG1heSBhbHNvICpsb3NlKiBwcm9wZXJ0aWVzIGluIGZ1dHVyZSB2ZXJzaW9ucyBhcyB3ZSBmaWd1cmVcbiAgICogb3V0IHdoYXQgaW5mb3JtYXRpb24gaXMgbW9zdCB1c2VmdWwuIEFzIHN1Y2ggdGhpcyBBUEkgaXMgY29uc2lkZXJlZCB1bnN0YWJsZS5cbiAgICpcbiAgICogQHJldHVybnMgQW4gdW5zdWJzY3JpYmUgZnVuY3Rpb24gdG8gc3RvcCBsaXN0ZW5pbmcuXG4gICAqL1xuICBzdWJzY3JpYmVUb0Nvbm5lY3Rpb25TdGF0ZShjYikge1xuICAgIHJldHVybiB0aGlzLnN5bmMuc3Vic2NyaWJlVG9Db25uZWN0aW9uU3RhdGUoY2IpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGxvZ2dlciBmb3IgdGhpcyBjbGllbnQuXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgTG9nZ2VyfSBmb3IgdGhpcyBjbGllbnQuXG4gICAqL1xuICBnZXQgbG9nZ2VyKCkge1xuICAgIHJldHVybiB0aGlzLl9sb2dnZXI7XG4gIH1cbiAgLyoqXG4gICAqIENsb3NlIGFueSBuZXR3b3JrIGhhbmRsZXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgY2xpZW50IGFuZCBzdG9wIGFsbCBzdWJzY3JpcHRpb25zLlxuICAgKlxuICAgKiBDYWxsIHRoaXMgbWV0aG9kIHdoZW4geW91J3JlIGRvbmUgd2l0aCBhIHtAbGluayBDb252ZXhSZWFjdENsaWVudH0gdG9cbiAgICogZGlzcG9zZSBvZiBpdHMgc29ja2V0cyBhbmQgcmVzb3VyY2VzLlxuICAgKlxuICAgKiBAcmV0dXJucyBBIGBQcm9taXNlYCBmdWxmaWxsZWQgd2hlbiB0aGUgY29ubmVjdGlvbiBoYXMgYmVlbiBjb21wbGV0ZWx5IGNsb3NlZC5cbiAgICovXG4gIGFzeW5jIGNsb3NlKCkge1xuICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICB0aGlzLmxpc3RlbmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgaWYgKHRoaXMuY2FjaGVkUGFnaW5hdGVkUXVlcnlDbGllbnQpIHtcbiAgICAgIHRoaXMuY2FjaGVkUGFnaW5hdGVkUXVlcnlDbGllbnQgPSB2b2lkIDA7XG4gICAgfVxuICAgIGlmICh0aGlzLmNhY2hlZFN5bmMpIHtcbiAgICAgIGNvbnN0IHN5bmMgPSB0aGlzLmNhY2hlZFN5bmM7XG4gICAgICB0aGlzLmNhY2hlZFN5bmMgPSB2b2lkIDA7XG4gICAgICBhd2FpdCBzeW5jLmNsb3NlKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBIYW5kbGUgdHJhbnNpdGlvbnMgZnJvbSBib3RoIGJhc2UgY2xpZW50IGFuZCBwYWdpbmF0ZWQgY2xpZW50LlxuICAgKiBUaGlzIGVuc3VyZXMgYWxsIHRyYW5zaXRpb25zIGFyZSBwcm9jZXNzZWQgc3luY2hyb25vdXNseSBhbmQgaW4gb3JkZXIuXG4gICAqL1xuICBoYW5kbGVUcmFuc2l0aW9uKHRyYW5zaXRpb24pIHtcbiAgICBjb25zdCBzaW1wbGUgPSB0cmFuc2l0aW9uLnF1ZXJpZXMubWFwKChxKSA9PiBxLnRva2VuKTtcbiAgICBjb25zdCBwYWdpbmF0ZWQgPSB0cmFuc2l0aW9uLnBhZ2luYXRlZFF1ZXJpZXMubWFwKChxKSA9PiBxLnRva2VuKTtcbiAgICB0aGlzLnRyYW5zaXRpb24oWy4uLnNpbXBsZSwgLi4ucGFnaW5hdGVkXSk7XG4gIH1cbiAgdHJhbnNpdGlvbih1cGRhdGVkUXVlcmllcykge1xuICAgIGZvciAoY29uc3QgcXVlcnlUb2tlbiBvZiB1cGRhdGVkUXVlcmllcykge1xuICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5saXN0ZW5lcnMuZ2V0KHF1ZXJ5VG9rZW4pO1xuICAgICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmNvbnN0IENvbnZleENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KFxuICB2b2lkIDBcbiAgLy8gaW4gdGhlIGZ1dHVyZSB0aGlzIHdpbGwgYmUgYSBtb2NrZWQgY2xpZW50IGZvciB0ZXN0aW5nXG4pO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbnZleCgpIHtcbiAgcmV0dXJuIHVzZUNvbnRleHQoQ29udmV4Q29udGV4dCk7XG59XG5leHBvcnQgY29uc3QgQ29udmV4UHJvdmlkZXIgPSAoeyBjbGllbnQsIGNoaWxkcmVuIH0pID0+IHtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgQ29udmV4Q29udGV4dC5Qcm92aWRlcixcbiAgICB7IHZhbHVlOiBjbGllbnQgfSxcbiAgICBjaGlsZHJlblxuICApO1xufTtcbmV4cG9ydCBmdW5jdGlvbiB1c2VRdWVyeShxdWVyeSwgLi4uYXJncykge1xuICBjb25zdCBza2lwID0gYXJnc1swXSA9PT0gXCJza2lwXCI7XG4gIGNvbnN0IGFyZ3NPYmplY3QgPSBhcmdzWzBdID09PSBcInNraXBcIiA/IHt9IDogcGFyc2VBcmdzKGFyZ3NbMF0pO1xuICBjb25zdCBxdWVyeVJlZmVyZW5jZSA9IHR5cGVvZiBxdWVyeSA9PT0gXCJzdHJpbmdcIiA/IG1ha2VGdW5jdGlvblJlZmVyZW5jZShxdWVyeSkgOiBxdWVyeTtcbiAgY29uc3QgcXVlcnlOYW1lID0gZ2V0RnVuY3Rpb25OYW1lKHF1ZXJ5UmVmZXJlbmNlKTtcbiAgY29uc3QgcXVlcmllcyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gc2tpcCA/IHt9IDogeyBxdWVyeTogeyBxdWVyeTogcXVlcnlSZWZlcmVuY2UsIGFyZ3M6IGFyZ3NPYmplY3QgfSB9LFxuICAgIC8vIFN0cmluZ2lmeSBhcmdzIHNvIGFyZ3MgdGhhdCBhcmUgc2VtYW50aWNhbGx5IHRoZSBzYW1lIGRvbid0IHRyaWdnZXIgYVxuICAgIC8vIHJlcmVuZGVyLiBTYXZlcyBkZXZlbG9wZXJzIGZyb20gYWRkaW5nIGB1c2VNZW1vYCBvbiBldmVyeSBhcmdzIHVzYWdlLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICBbSlNPTi5zdHJpbmdpZnkoY29udmV4VG9Kc29uKGFyZ3NPYmplY3QpKSwgcXVlcnlOYW1lLCBza2lwXVxuICApO1xuICBjb25zdCByZXN1bHRzID0gdXNlUXVlcmllcyhxdWVyaWVzKTtcbiAgY29uc3QgcmVzdWx0ID0gcmVzdWx0c1tcInF1ZXJ5XCJdO1xuICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICB0aHJvdyByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1c2VNdXRhdGlvbihtdXRhdGlvbikge1xuICBjb25zdCBtdXRhdGlvblJlZmVyZW5jZSA9IHR5cGVvZiBtdXRhdGlvbiA9PT0gXCJzdHJpbmdcIiA/IG1ha2VGdW5jdGlvblJlZmVyZW5jZShtdXRhdGlvbikgOiBtdXRhdGlvbjtcbiAgY29uc3QgY29udmV4ID0gdXNlQ29udGV4dChDb252ZXhDb250ZXh0KTtcbiAgaWYgKGNvbnZleCA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJDb3VsZCBub3QgZmluZCBDb252ZXggY2xpZW50ISBgdXNlTXV0YXRpb25gIG11c3QgYmUgdXNlZCBpbiB0aGUgUmVhY3QgY29tcG9uZW50IHRyZWUgdW5kZXIgYENvbnZleFByb3ZpZGVyYC4gRGlkIHlvdSBmb3JnZXQgaXQ/IFNlZSBodHRwczovL2RvY3MuY29udmV4LmRldi9xdWljay1zdGFydCNzZXQtdXAtY29udmV4LWluLXlvdXItcmVhY3QtYXBwXCJcbiAgICApO1xuICB9XG4gIHJldHVybiB1c2VNZW1vKFxuICAgICgpID0+IGNyZWF0ZU11dGF0aW9uKG11dGF0aW9uUmVmZXJlbmNlLCBjb252ZXgpLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICBbY29udmV4LCBnZXRGdW5jdGlvbk5hbWUobXV0YXRpb25SZWZlcmVuY2UpXVxuICApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVzZUFjdGlvbihhY3Rpb24pIHtcbiAgY29uc3QgY29udmV4ID0gdXNlQ29udGV4dChDb252ZXhDb250ZXh0KTtcbiAgY29uc3QgYWN0aW9uUmVmZXJlbmNlID0gdHlwZW9mIGFjdGlvbiA9PT0gXCJzdHJpbmdcIiA/IG1ha2VGdW5jdGlvblJlZmVyZW5jZShhY3Rpb24pIDogYWN0aW9uO1xuICBpZiAoY29udmV4ID09PSB2b2lkIDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIkNvdWxkIG5vdCBmaW5kIENvbnZleCBjbGllbnQhIGB1c2VBY3Rpb25gIG11c3QgYmUgdXNlZCBpbiB0aGUgUmVhY3QgY29tcG9uZW50IHRyZWUgdW5kZXIgYENvbnZleFByb3ZpZGVyYC4gRGlkIHlvdSBmb3JnZXQgaXQ/IFNlZSBodHRwczovL2RvY3MuY29udmV4LmRldi9xdWljay1zdGFydCNzZXQtdXAtY29udmV4LWluLXlvdXItcmVhY3QtYXBwXCJcbiAgICApO1xuICB9XG4gIHJldHVybiB1c2VNZW1vKFxuICAgICgpID0+IGNyZWF0ZUFjdGlvbihhY3Rpb25SZWZlcmVuY2UsIGNvbnZleCksXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIFtjb252ZXgsIGdldEZ1bmN0aW9uTmFtZShhY3Rpb25SZWZlcmVuY2UpXVxuICApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbnZleENvbm5lY3Rpb25TdGF0ZSgpIHtcbiAgY29uc3QgY29udmV4ID0gdXNlQ29udGV4dChDb252ZXhDb250ZXh0KTtcbiAgaWYgKGNvbnZleCA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJDb3VsZCBub3QgZmluZCBDb252ZXggY2xpZW50ISBgdXNlQ29udmV4Q29ubmVjdGlvblN0YXRlYCBtdXN0IGJlIHVzZWQgaW4gdGhlIFJlYWN0IGNvbXBvbmVudCB0cmVlIHVuZGVyIGBDb252ZXhQcm92aWRlcmAuIERpZCB5b3UgZm9yZ2V0IGl0PyBTZWUgaHR0cHM6Ly9kb2NzLmNvbnZleC5kZXYvcXVpY2stc3RhcnQjc2V0LXVwLWNvbnZleC1pbi15b3VyLXJlYWN0LWFwcFwiXG4gICAgKTtcbiAgfVxuICBjb25zdCBnZXRDdXJyZW50VmFsdWUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcmV0dXJuIGNvbnZleC5jb25uZWN0aW9uU3RhdGUoKTtcbiAgfSwgW2NvbnZleF0pO1xuICBjb25zdCBzdWJzY3JpYmUgPSB1c2VDYWxsYmFjayhcbiAgICAoY2FsbGJhY2spID0+IHtcbiAgICAgIHJldHVybiBjb252ZXguc3Vic2NyaWJlVG9Db25uZWN0aW9uU3RhdGUoKCkgPT4ge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbY29udmV4XVxuICApO1xuICByZXR1cm4gdXNlU3Vic2NyaXB0aW9uKHsgZ2V0Q3VycmVudFZhbHVlLCBzdWJzY3JpYmUgfSk7XG59XG5mdW5jdGlvbiBhc3NlcnROb3RBY2NpZGVudGFsQXJndW1lbnQodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiBcImJ1YmJsZXNcIiBpbiB2YWx1ZSAmJiBcInBlcnNpc3RcIiBpbiB2YWx1ZSAmJiBcImlzRGVmYXVsdFByZXZlbnRlZFwiIGluIHZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYENvbnZleCBmdW5jdGlvbiBjYWxsZWQgd2l0aCBTeW50aGV0aWNFdmVudCBvYmplY3QuIERpZCB5b3UgdXNlIGEgQ29udmV4IGZ1bmN0aW9uIGFzIGFuIGV2ZW50IGhhbmRsZXIgZGlyZWN0bHk/IEV2ZW50IGhhbmRsZXJzIGxpa2Ugb25DbGljayByZWNlaXZlIGFuIGV2ZW50IG9iamVjdCBhcyB0aGVpciBmaXJzdCBhcmd1bWVudC4gVGhlc2UgU3ludGhldGljRXZlbnQgb2JqZWN0cyBhcmUgbm90IHZhbGlkIENvbnZleCB2YWx1ZXMuIFRyeSB3cmFwcGluZyB0aGUgZnVuY3Rpb24gbGlrZSBcXGBjb25zdCBoYW5kbGVyID0gKCkgPT4gbXlNdXRhdGlvbigpO1xcYCBhbmQgdXNpbmcgXFxgaGFuZGxlclxcYCBpbiB0aGUgZXZlbnQgaGFuZGxlci5gXG4gICAgKTtcbiAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/hydration.js":
/*!*********************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/hydration.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePreloadedQuery: () => (/* binding */ usePreloadedQuery)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _react_client_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../react/client.js */ \"(ssr)/./node_modules/convex/dist/esm/react/client.js\");\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n\n\n\n\n\nfunction usePreloadedQuery(preloadedQuery) {\n  const args = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(preloadedQuery._argsJSON),\n    [preloadedQuery._argsJSON]\n  );\n  const preloadedResult = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(preloadedQuery._valueJSON),\n    [preloadedQuery._valueJSON]\n  );\n  const result = (0,_react_client_js__WEBPACK_IMPORTED_MODULE_1__.useQuery)(\n    (0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.makeFunctionReference)(preloadedQuery._name),\n    args\n  );\n  return result === void 0 ? preloadedResult : result;\n}\n//# sourceMappingURL=hydration.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L2h5ZHJhdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFhO0FBQ21CO0FBQ2M7QUFDVztBQUNQO0FBQzNDO0FBQ1AsZUFBZSw4Q0FBTztBQUN0QixVQUFVLDhEQUFZO0FBQ3RCO0FBQ0E7QUFDQSwwQkFBMEIsOENBQU87QUFDakMsVUFBVSw4REFBWTtBQUN0QjtBQUNBO0FBQ0EsaUJBQWlCLDBEQUFRO0FBQ3pCLElBQUkscUVBQXFCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxccmVhY3RcXGh5ZHJhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCB7IHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVF1ZXJ5IH0gZnJvbSBcIi4uL3JlYWN0L2NsaWVudC5qc1wiO1xuaW1wb3J0IHsgbWFrZUZ1bmN0aW9uUmVmZXJlbmNlIH0gZnJvbSBcIi4uL3NlcnZlci9hcGkuanNcIjtcbmltcG9ydCB7IGpzb25Ub0NvbnZleCB9IGZyb20gXCIuLi92YWx1ZXMvaW5kZXguanNcIjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VQcmVsb2FkZWRRdWVyeShwcmVsb2FkZWRRdWVyeSkge1xuICBjb25zdCBhcmdzID0gdXNlTWVtbyhcbiAgICAoKSA9PiBqc29uVG9Db252ZXgocHJlbG9hZGVkUXVlcnkuX2FyZ3NKU09OKSxcbiAgICBbcHJlbG9hZGVkUXVlcnkuX2FyZ3NKU09OXVxuICApO1xuICBjb25zdCBwcmVsb2FkZWRSZXN1bHQgPSB1c2VNZW1vKFxuICAgICgpID0+IGpzb25Ub0NvbnZleChwcmVsb2FkZWRRdWVyeS5fdmFsdWVKU09OKSxcbiAgICBbcHJlbG9hZGVkUXVlcnkuX3ZhbHVlSlNPTl1cbiAgKTtcbiAgY29uc3QgcmVzdWx0ID0gdXNlUXVlcnkoXG4gICAgbWFrZUZ1bmN0aW9uUmVmZXJlbmNlKHByZWxvYWRlZFF1ZXJ5Ll9uYW1lKSxcbiAgICBhcmdzXG4gICk7XG4gIHJldHVybiByZXN1bHQgPT09IHZvaWQgMCA/IHByZWxvYWRlZFJlc3VsdCA6IHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWh5ZHJhdGlvbi5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/hydration.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthLoading: () => (/* reexport safe */ _auth_helpers_js__WEBPACK_IMPORTED_MODULE_3__.AuthLoading),\n/* harmony export */   Authenticated: () => (/* reexport safe */ _auth_helpers_js__WEBPACK_IMPORTED_MODULE_3__.Authenticated),\n/* harmony export */   ConvexProvider: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.ConvexProvider),\n/* harmony export */   ConvexProviderWithAuth: () => (/* reexport safe */ _ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_4__.ConvexProviderWithAuth),\n/* harmony export */   ConvexReactClient: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.ConvexReactClient),\n/* harmony export */   Unauthenticated: () => (/* reexport safe */ _auth_helpers_js__WEBPACK_IMPORTED_MODULE_3__.Unauthenticated),\n/* harmony export */   includePage: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.includePage),\n/* harmony export */   insertAtBottomIfLoaded: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.insertAtBottomIfLoaded),\n/* harmony export */   insertAtPosition: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.insertAtPosition),\n/* harmony export */   insertAtTop: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.insertAtTop),\n/* harmony export */   optimisticallyUpdateValueInPaginatedQuery: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.optimisticallyUpdateValueInPaginatedQuery),\n/* harmony export */   page: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.page),\n/* harmony export */   resetPaginationId: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.resetPaginationId),\n/* harmony export */   useAction: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.useAction),\n/* harmony export */   useConvex: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.useConvex),\n/* harmony export */   useConvexAuth: () => (/* reexport safe */ _ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_4__.useConvexAuth),\n/* harmony export */   useConvexConnectionState: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.useConvexConnectionState),\n/* harmony export */   useMutation: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.useMutation),\n/* harmony export */   usePaginatedQuery: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.usePaginatedQuery),\n/* harmony export */   usePaginatedQueryInternal: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.usePaginatedQueryInternal),\n/* harmony export */   usePaginatedQuery_experimental: () => (/* reexport safe */ _use_paginated_query2_js__WEBPACK_IMPORTED_MODULE_1__.usePaginatedQuery_experimental),\n/* harmony export */   usePreloadedQuery: () => (/* reexport safe */ _hydration_js__WEBPACK_IMPORTED_MODULE_5__.usePreloadedQuery),\n/* harmony export */   useQueries: () => (/* reexport safe */ _use_queries_js__WEBPACK_IMPORTED_MODULE_2__.useQueries),\n/* harmony export */   useQuery: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.useQuery),\n/* harmony export */   useSubscription: () => (/* reexport safe */ _use_subscription_js__WEBPACK_IMPORTED_MODULE_6__.useSubscription)\n/* harmony export */ });\n/* harmony import */ var _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./use_paginated_query.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_paginated_query.js\");\n/* harmony import */ var _use_paginated_query2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./use_paginated_query2.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_paginated_query2.js\");\n/* harmony import */ var _use_queries_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./use_queries.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_queries.js\");\n/* harmony import */ var _auth_helpers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./auth_helpers.js */ \"(ssr)/./node_modules/convex/dist/esm/react/auth_helpers.js\");\n/* harmony import */ var _ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ConvexAuthState.js */ \"(ssr)/./node_modules/convex/dist/esm/react/ConvexAuthState.js\");\n/* harmony import */ var _hydration_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hydration.js */ \"(ssr)/./node_modules/convex/dist/esm/react/hydration.js\");\n/* harmony import */ var _use_subscription_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./use_subscription.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_subscription.js\");\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./client.js */ \"(ssr)/./node_modules/convex/dist/esm/react/client.js\");\n\n\n\n\n\n\n\n\n\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFhO0FBQzRCO0FBQ2tDO0FBQ2Q7QUFDZjtBQUNaO0FBQ0c7QUFDTjtBQUN5QjtBQVNuQztBQUNyQiIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxyZWFjdFxcaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5leHBvcnQgKiBmcm9tIFwiLi91c2VfcGFnaW5hdGVkX3F1ZXJ5LmpzXCI7XG5leHBvcnQgeyB1c2VQYWdpbmF0ZWRRdWVyeV9leHBlcmltZW50YWwgfSBmcm9tIFwiLi91c2VfcGFnaW5hdGVkX3F1ZXJ5Mi5qc1wiO1xuZXhwb3J0IHsgdXNlUGFnaW5hdGVkUXVlcnkgfSBmcm9tIFwiLi91c2VfcGFnaW5hdGVkX3F1ZXJ5LmpzXCI7XG5leHBvcnQgeyB1c2VRdWVyaWVzIH0gZnJvbSBcIi4vdXNlX3F1ZXJpZXMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2F1dGhfaGVscGVycy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vQ29udmV4QXV0aFN0YXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9oeWRyYXRpb24uanNcIjtcbmV4cG9ydCB7IHVzZVN1YnNjcmlwdGlvbiB9IGZyb20gXCIuL3VzZV9zdWJzY3JpcHRpb24uanNcIjtcbmV4cG9ydCB7XG4gIENvbnZleFJlYWN0Q2xpZW50LFxuICB1c2VDb252ZXgsXG4gIENvbnZleFByb3ZpZGVyLFxuICB1c2VRdWVyeSxcbiAgdXNlTXV0YXRpb24sXG4gIHVzZUFjdGlvbixcbiAgdXNlQ29udmV4Q29ubmVjdGlvblN0YXRlXG59IGZyb20gXCIuL2NsaWVudC5qc1wiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/queries_observer.js":
/*!****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/queries_observer.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueriesObserver: () => (/* binding */ QueriesObserver)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\nclass QueriesObserver {\n  constructor(createWatch) {\n    __publicField(this, \"createWatch\");\n    __publicField(this, \"queries\");\n    __publicField(this, \"listeners\");\n    this.createWatch = createWatch;\n    this.queries = {};\n    this.listeners = /* @__PURE__ */ new Set();\n  }\n  setQueries(newQueries) {\n    for (const identifier of Object.keys(newQueries)) {\n      const { query, args, paginationOptions } = newQueries[identifier];\n      (0,_server_api_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionName)(query);\n      if (this.queries[identifier] === void 0) {\n        this.addQuery(\n          identifier,\n          query,\n          args,\n          paginationOptions ? { paginationOptions } : {}\n        );\n      } else {\n        const existingInfo = this.queries[identifier];\n        if ((0,_server_api_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionName)(query) !== (0,_server_api_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionName)(existingInfo.query) || JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(args)) !== JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(existingInfo.args)) || JSON.stringify(paginationOptions) !== JSON.stringify(existingInfo.paginationOptions)) {\n          this.removeQuery(identifier);\n          this.addQuery(\n            identifier,\n            query,\n            args,\n            paginationOptions ? { paginationOptions } : {}\n          );\n        }\n      }\n    }\n    for (const identifier of Object.keys(this.queries)) {\n      if (newQueries[identifier] === void 0) {\n        this.removeQuery(identifier);\n      }\n    }\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    return () => {\n      this.listeners.delete(listener);\n    };\n  }\n  getLocalResults(queries) {\n    const result = {};\n    for (const identifier of Object.keys(queries)) {\n      const { query, args } = queries[identifier];\n      const paginationOptions = queries[identifier].paginationOptions;\n      (0,_server_api_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionName)(query);\n      const watch = this.createWatch(\n        query,\n        args,\n        paginationOptions ? { paginationOptions } : {}\n      );\n      let value;\n      try {\n        value = watch.localQueryResult();\n      } catch (e) {\n        if (e instanceof Error) {\n          value = e;\n        } else {\n          throw e;\n        }\n      }\n      result[identifier] = value;\n    }\n    return result;\n  }\n  setCreateWatch(createWatch) {\n    this.createWatch = createWatch;\n    for (const identifier of Object.keys(this.queries)) {\n      const { query, args, watch, paginationOptions } = this.queries[identifier];\n      const journal = \"journal\" in watch ? watch.journal() : void 0;\n      this.removeQuery(identifier);\n      this.addQuery(identifier, query, args, {\n        ...journal ? { journal } : [],\n        ...paginationOptions ? { paginationOptions } : {}\n      });\n    }\n  }\n  destroy() {\n    for (const identifier of Object.keys(this.queries)) {\n      this.removeQuery(identifier);\n    }\n    this.listeners = /* @__PURE__ */ new Set();\n  }\n  addQuery(identifier, query, args, {\n    paginationOptions,\n    journal\n  }) {\n    if (this.queries[identifier] !== void 0) {\n      throw new Error(\n        `Tried to add a new query with identifier ${identifier} when it already exists.`\n      );\n    }\n    const watch = this.createWatch(query, args, {\n      ...journal ? { journal } : [],\n      ...paginationOptions ? { paginationOptions } : {}\n    });\n    const unsubscribe = watch.onUpdate(() => this.notifyListeners());\n    this.queries[identifier] = {\n      query,\n      args,\n      watch,\n      unsubscribe,\n      ...paginationOptions ? { paginationOptions } : {}\n    };\n  }\n  removeQuery(identifier) {\n    const info = this.queries[identifier];\n    if (info === void 0) {\n      throw new Error(`No query found with identifier ${identifier}.`);\n    }\n    info.unsubscribe();\n    delete this.queries[identifier];\n  }\n  notifyListeners() {\n    for (const listener of this.listeners) {\n      listener();\n    }\n  }\n}\n//# sourceMappingURL=queries_observer.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L3F1ZXJpZXNfb2JzZXJ2ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWE7QUFDYjtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDa0Q7QUFDQztBQUM1QztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpQ0FBaUM7QUFDL0MsTUFBTSwrREFBZTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG9CQUFvQjtBQUNwRDtBQUNBLFFBQVE7QUFDUjtBQUNBLFlBQVksK0RBQWUsWUFBWSwrREFBZSx1Q0FBdUMsOERBQVksMkJBQTJCLDhEQUFZO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msb0JBQW9CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxjQUFjO0FBQzVCO0FBQ0EsTUFBTSwrREFBZTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsb0JBQW9CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHdDQUF3QztBQUN0RDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsVUFBVTtBQUNqQyxpQ0FBaUMsb0JBQW9CO0FBQ3JELE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxvREFBb0QsWUFBWTtBQUNoRTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsVUFBVTtBQUMvQiwrQkFBK0Isb0JBQW9CO0FBQ25ELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isb0JBQW9CO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsV0FBVztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHJlYWN0XFxxdWVyaWVzX29ic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbmltcG9ydCB7IGNvbnZleFRvSnNvbiB9IGZyb20gXCIuLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGdldEZ1bmN0aW9uTmFtZSB9IGZyb20gXCIuLi9zZXJ2ZXIvYXBpLmpzXCI7XG5leHBvcnQgY2xhc3MgUXVlcmllc09ic2VydmVyIHtcbiAgY29uc3RydWN0b3IoY3JlYXRlV2F0Y2gpIHtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiY3JlYXRlV2F0Y2hcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInF1ZXJpZXNcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImxpc3RlbmVyc1wiKTtcbiAgICB0aGlzLmNyZWF0ZVdhdGNoID0gY3JlYXRlV2F0Y2g7XG4gICAgdGhpcy5xdWVyaWVzID0ge307XG4gICAgdGhpcy5saXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICB9XG4gIHNldFF1ZXJpZXMobmV3UXVlcmllcykge1xuICAgIGZvciAoY29uc3QgaWRlbnRpZmllciBvZiBPYmplY3Qua2V5cyhuZXdRdWVyaWVzKSkge1xuICAgICAgY29uc3QgeyBxdWVyeSwgYXJncywgcGFnaW5hdGlvbk9wdGlvbnMgfSA9IG5ld1F1ZXJpZXNbaWRlbnRpZmllcl07XG4gICAgICBnZXRGdW5jdGlvbk5hbWUocXVlcnkpO1xuICAgICAgaWYgKHRoaXMucXVlcmllc1tpZGVudGlmaWVyXSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRoaXMuYWRkUXVlcnkoXG4gICAgICAgICAgaWRlbnRpZmllcixcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICBhcmdzLFxuICAgICAgICAgIHBhZ2luYXRpb25PcHRpb25zID8geyBwYWdpbmF0aW9uT3B0aW9ucyB9IDoge31cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSW5mbyA9IHRoaXMucXVlcmllc1tpZGVudGlmaWVyXTtcbiAgICAgICAgaWYgKGdldEZ1bmN0aW9uTmFtZShxdWVyeSkgIT09IGdldEZ1bmN0aW9uTmFtZShleGlzdGluZ0luZm8ucXVlcnkpIHx8IEpTT04uc3RyaW5naWZ5KGNvbnZleFRvSnNvbihhcmdzKSkgIT09IEpTT04uc3RyaW5naWZ5KGNvbnZleFRvSnNvbihleGlzdGluZ0luZm8uYXJncykpIHx8IEpTT04uc3RyaW5naWZ5KHBhZ2luYXRpb25PcHRpb25zKSAhPT0gSlNPTi5zdHJpbmdpZnkoZXhpc3RpbmdJbmZvLnBhZ2luYXRpb25PcHRpb25zKSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlUXVlcnkoaWRlbnRpZmllcik7XG4gICAgICAgICAgdGhpcy5hZGRRdWVyeShcbiAgICAgICAgICAgIGlkZW50aWZpZXIsXG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucyA/IHsgcGFnaW5hdGlvbk9wdGlvbnMgfSA6IHt9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGlkZW50aWZpZXIgb2YgT2JqZWN0LmtleXModGhpcy5xdWVyaWVzKSkge1xuICAgICAgaWYgKG5ld1F1ZXJpZXNbaWRlbnRpZmllcl0gPT09IHZvaWQgMCkge1xuICAgICAgICB0aGlzLnJlbW92ZVF1ZXJ5KGlkZW50aWZpZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBzdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICB0aGlzLmxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLmxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgIH07XG4gIH1cbiAgZ2V0TG9jYWxSZXN1bHRzKHF1ZXJpZXMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGlkZW50aWZpZXIgb2YgT2JqZWN0LmtleXMocXVlcmllcykpIHtcbiAgICAgIGNvbnN0IHsgcXVlcnksIGFyZ3MgfSA9IHF1ZXJpZXNbaWRlbnRpZmllcl07XG4gICAgICBjb25zdCBwYWdpbmF0aW9uT3B0aW9ucyA9IHF1ZXJpZXNbaWRlbnRpZmllcl0ucGFnaW5hdGlvbk9wdGlvbnM7XG4gICAgICBnZXRGdW5jdGlvbk5hbWUocXVlcnkpO1xuICAgICAgY29uc3Qgd2F0Y2ggPSB0aGlzLmNyZWF0ZVdhdGNoKFxuICAgICAgICBxdWVyeSxcbiAgICAgICAgYXJncyxcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMgPyB7IHBhZ2luYXRpb25PcHRpb25zIH0gOiB7fVxuICAgICAgKTtcbiAgICAgIGxldCB2YWx1ZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhbHVlID0gd2F0Y2gubG9jYWxRdWVyeVJlc3VsdCgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgdmFsdWUgPSBlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlc3VsdFtpZGVudGlmaWVyXSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIHNldENyZWF0ZVdhdGNoKGNyZWF0ZVdhdGNoKSB7XG4gICAgdGhpcy5jcmVhdGVXYXRjaCA9IGNyZWF0ZVdhdGNoO1xuICAgIGZvciAoY29uc3QgaWRlbnRpZmllciBvZiBPYmplY3Qua2V5cyh0aGlzLnF1ZXJpZXMpKSB7XG4gICAgICBjb25zdCB7IHF1ZXJ5LCBhcmdzLCB3YXRjaCwgcGFnaW5hdGlvbk9wdGlvbnMgfSA9IHRoaXMucXVlcmllc1tpZGVudGlmaWVyXTtcbiAgICAgIGNvbnN0IGpvdXJuYWwgPSBcImpvdXJuYWxcIiBpbiB3YXRjaCA/IHdhdGNoLmpvdXJuYWwoKSA6IHZvaWQgMDtcbiAgICAgIHRoaXMucmVtb3ZlUXVlcnkoaWRlbnRpZmllcik7XG4gICAgICB0aGlzLmFkZFF1ZXJ5KGlkZW50aWZpZXIsIHF1ZXJ5LCBhcmdzLCB7XG4gICAgICAgIC4uLmpvdXJuYWwgPyB7IGpvdXJuYWwgfSA6IFtdLFxuICAgICAgICAuLi5wYWdpbmF0aW9uT3B0aW9ucyA/IHsgcGFnaW5hdGlvbk9wdGlvbnMgfSA6IHt9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZGVzdHJveSgpIHtcbiAgICBmb3IgKGNvbnN0IGlkZW50aWZpZXIgb2YgT2JqZWN0LmtleXModGhpcy5xdWVyaWVzKSkge1xuICAgICAgdGhpcy5yZW1vdmVRdWVyeShpZGVudGlmaWVyKTtcbiAgICB9XG4gICAgdGhpcy5saXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICB9XG4gIGFkZFF1ZXJ5KGlkZW50aWZpZXIsIHF1ZXJ5LCBhcmdzLCB7XG4gICAgcGFnaW5hdGlvbk9wdGlvbnMsXG4gICAgam91cm5hbFxuICB9KSB7XG4gICAgaWYgKHRoaXMucXVlcmllc1tpZGVudGlmaWVyXSAhPT0gdm9pZCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBUcmllZCB0byBhZGQgYSBuZXcgcXVlcnkgd2l0aCBpZGVudGlmaWVyICR7aWRlbnRpZmllcn0gd2hlbiBpdCBhbHJlYWR5IGV4aXN0cy5gXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCB3YXRjaCA9IHRoaXMuY3JlYXRlV2F0Y2gocXVlcnksIGFyZ3MsIHtcbiAgICAgIC4uLmpvdXJuYWwgPyB7IGpvdXJuYWwgfSA6IFtdLFxuICAgICAgLi4ucGFnaW5hdGlvbk9wdGlvbnMgPyB7IHBhZ2luYXRpb25PcHRpb25zIH0gOiB7fVxuICAgIH0pO1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gd2F0Y2gub25VcGRhdGUoKCkgPT4gdGhpcy5ub3RpZnlMaXN0ZW5lcnMoKSk7XG4gICAgdGhpcy5xdWVyaWVzW2lkZW50aWZpZXJdID0ge1xuICAgICAgcXVlcnksXG4gICAgICBhcmdzLFxuICAgICAgd2F0Y2gsXG4gICAgICB1bnN1YnNjcmliZSxcbiAgICAgIC4uLnBhZ2luYXRpb25PcHRpb25zID8geyBwYWdpbmF0aW9uT3B0aW9ucyB9IDoge31cbiAgICB9O1xuICB9XG4gIHJlbW92ZVF1ZXJ5KGlkZW50aWZpZXIpIHtcbiAgICBjb25zdCBpbmZvID0gdGhpcy5xdWVyaWVzW2lkZW50aWZpZXJdO1xuICAgIGlmIChpbmZvID09PSB2b2lkIDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gcXVlcnkgZm91bmQgd2l0aCBpZGVudGlmaWVyICR7aWRlbnRpZmllcn0uYCk7XG4gICAgfVxuICAgIGluZm8udW5zdWJzY3JpYmUoKTtcbiAgICBkZWxldGUgdGhpcy5xdWVyaWVzW2lkZW50aWZpZXJdO1xuICB9XG4gIG5vdGlmeUxpc3RlbmVycygpIHtcbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lcigpO1xuICAgIH1cbiAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVlcmllc19vYnNlcnZlci5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/queries_observer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/use_paginated_query.js":
/*!*******************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/use_paginated_query.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   includePage: () => (/* binding */ includePage),\n/* harmony export */   insertAtBottomIfLoaded: () => (/* binding */ insertAtBottomIfLoaded),\n/* harmony export */   insertAtPosition: () => (/* binding */ insertAtPosition),\n/* harmony export */   insertAtTop: () => (/* binding */ insertAtTop),\n/* harmony export */   optimisticallyUpdateValueInPaginatedQuery: () => (/* binding */ optimisticallyUpdateValueInPaginatedQuery),\n/* harmony export */   page: () => (/* binding */ page),\n/* harmony export */   resetPaginationId: () => (/* binding */ resetPaginationId),\n/* harmony export */   usePaginatedQuery: () => (/* binding */ usePaginatedQuery),\n/* harmony export */   usePaginatedQueryInternal: () => (/* binding */ usePaginatedQueryInternal)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _use_queries_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./use_queries.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_queries.js\");\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./client.js */ \"(ssr)/./node_modules/convex/dist/esm/react/client.js\");\n/* harmony import */ var _values_compare_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../values/compare.js */ \"(ssr)/./node_modules/convex/dist/esm/values/compare.js\");\n\n\n\n\n\n\n\nconst splitQuery = (key, splitCursor, continueCursor) => (prevState) => {\n  const queries = { ...prevState.queries };\n  const splitKey1 = prevState.nextPageKey;\n  const splitKey2 = prevState.nextPageKey + 1;\n  const nextPageKey = prevState.nextPageKey + 2;\n  queries[splitKey1] = {\n    query: prevState.query,\n    args: {\n      ...prevState.args,\n      paginationOpts: {\n        ...prevState.queries[key].args.paginationOpts,\n        endCursor: splitCursor\n      }\n    }\n  };\n  queries[splitKey2] = {\n    query: prevState.query,\n    args: {\n      ...prevState.args,\n      paginationOpts: {\n        ...prevState.queries[key].args.paginationOpts,\n        cursor: splitCursor,\n        endCursor: continueCursor\n      }\n    }\n  };\n  const ongoingSplits = { ...prevState.ongoingSplits };\n  ongoingSplits[key] = [splitKey1, splitKey2];\n  return {\n    ...prevState,\n    nextPageKey,\n    queries,\n    ongoingSplits\n  };\n};\nconst completeSplitQuery = (key) => (prevState) => {\n  const completedSplit = prevState.ongoingSplits[key];\n  if (completedSplit === void 0) {\n    return prevState;\n  }\n  const queries = { ...prevState.queries };\n  delete queries[key];\n  const ongoingSplits = { ...prevState.ongoingSplits };\n  delete ongoingSplits[key];\n  let pageKeys = prevState.pageKeys.slice();\n  const pageIndex = prevState.pageKeys.findIndex((v) => v === key);\n  if (pageIndex >= 0) {\n    pageKeys = [\n      ...prevState.pageKeys.slice(0, pageIndex),\n      ...completedSplit,\n      ...prevState.pageKeys.slice(pageIndex + 1)\n    ];\n  }\n  return {\n    ...prevState,\n    queries,\n    pageKeys,\n    ongoingSplits\n  };\n};\nfunction usePaginatedQuery(query, args, options) {\n  const { user } = usePaginatedQueryInternal(query, args, options);\n  return user;\n}\nconst includePage = Symbol(\"includePageKeys\");\nconst page = Symbol(\"page\");\nfunction usePaginatedQueryInternal(query, args, options) {\n  if (typeof options?.initialNumItems !== \"number\" || options.initialNumItems < 0) {\n    throw new Error(\n      `\\`options.initialNumItems\\` must be a positive number. Received \\`${options?.initialNumItems}\\`.`\n    );\n  }\n  const skip = args === \"skip\";\n  const argsObject = skip ? {} : args;\n  const queryName = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_3__.getFunctionName)(query);\n  const createInitialState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return () => {\n      const id = nextPaginationId();\n      return {\n        query,\n        args: argsObject,\n        id,\n        nextPageKey: 1,\n        pageKeys: skip ? [] : [0],\n        queries: skip ? {} : {\n          0: {\n            query,\n            args: {\n              ...argsObject,\n              paginationOpts: {\n                numItems: options.initialNumItems,\n                cursor: null,\n                id\n              }\n            }\n          }\n        },\n        ongoingSplits: {},\n        skip\n      };\n    };\n  }, [\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(argsObject)),\n    queryName,\n    options.initialNumItems,\n    skip\n  ]);\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(createInitialState);\n  let currState = state;\n  if ((0,_server_api_js__WEBPACK_IMPORTED_MODULE_3__.getFunctionName)(query) !== (0,_server_api_js__WEBPACK_IMPORTED_MODULE_3__.getFunctionName)(state.query) || JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(argsObject)) !== JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(state.args)) || skip !== state.skip) {\n    currState = createInitialState();\n    setState(currState);\n  }\n  const convexClient = (0,_client_js__WEBPACK_IMPORTED_MODULE_4__.useConvex)();\n  const logger = convexClient.logger;\n  const resultsObject = (0,_use_queries_js__WEBPACK_IMPORTED_MODULE_2__.useQueries)(currState.queries);\n  const isIncludingPageKeys = options[includePage] ?? false;\n  const [results, maybeLastResult] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    let currResult = void 0;\n    const allItems = [];\n    for (const pageKey of currState.pageKeys) {\n      currResult = resultsObject[pageKey];\n      if (currResult === void 0) {\n        break;\n      }\n      if (currResult instanceof Error) {\n        if (currResult.message.includes(\"InvalidCursor\") || currResult instanceof _values_index_js__WEBPACK_IMPORTED_MODULE_1__.ConvexError && typeof currResult.data === \"object\" && currResult.data?.isConvexSystemError === true && currResult.data?.paginationError === \"InvalidCursor\") {\n          logger.warn(\n            \"usePaginatedQuery hit error, resetting pagination state: \" + currResult.message\n          );\n          setState(createInitialState);\n          return [[], void 0];\n        } else {\n          throw currResult;\n        }\n      }\n      const ongoingSplit = currState.ongoingSplits[pageKey];\n      if (ongoingSplit !== void 0) {\n        if (resultsObject[ongoingSplit[0]] !== void 0 && resultsObject[ongoingSplit[1]] !== void 0) {\n          setState(completeSplitQuery(pageKey));\n        }\n      } else if (currResult.splitCursor && (currResult.pageStatus === \"SplitRecommended\" || currResult.pageStatus === \"SplitRequired\" || currResult.page.length > options.initialNumItems * 2)) {\n        setState(\n          splitQuery(\n            pageKey,\n            currResult.splitCursor,\n            currResult.continueCursor\n          )\n        );\n      }\n      if (currResult.pageStatus === \"SplitRequired\") {\n        return [allItems, void 0];\n      }\n      allItems.push(\n        ...isIncludingPageKeys ? currResult.page.map((i) => ({\n          ...i,\n          [page]: pageKey.toString()\n        })) : currResult.page\n      );\n    }\n    return [allItems, currResult];\n  }, [\n    resultsObject,\n    currState.pageKeys,\n    currState.ongoingSplits,\n    options.initialNumItems,\n    createInitialState,\n    logger,\n    isIncludingPageKeys\n  ]);\n  const statusObject = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    if (maybeLastResult === void 0) {\n      if (currState.nextPageKey === 1) {\n        return {\n          status: \"LoadingFirstPage\",\n          isLoading: true,\n          loadMore: (_numItems) => {\n          }\n        };\n      } else {\n        return {\n          status: \"LoadingMore\",\n          isLoading: true,\n          loadMore: (_numItems) => {\n          }\n        };\n      }\n    }\n    if (maybeLastResult.isDone) {\n      return {\n        status: \"Exhausted\",\n        isLoading: false,\n        loadMore: (_numItems) => {\n        }\n      };\n    }\n    const continueCursor = maybeLastResult.continueCursor;\n    let alreadyLoadingMore = false;\n    return {\n      status: \"CanLoadMore\",\n      isLoading: false,\n      loadMore: (numItems) => {\n        if (!alreadyLoadingMore) {\n          alreadyLoadingMore = true;\n          setState((prevState) => {\n            const pageKeys = [...prevState.pageKeys, prevState.nextPageKey];\n            const queries = { ...prevState.queries };\n            queries[prevState.nextPageKey] = {\n              query: prevState.query,\n              args: {\n                ...prevState.args,\n                paginationOpts: {\n                  numItems,\n                  cursor: continueCursor,\n                  id: prevState.id\n                }\n              }\n            };\n            return {\n              ...prevState,\n              nextPageKey: prevState.nextPageKey + 1,\n              pageKeys,\n              queries\n            };\n          });\n        }\n      }\n    };\n  }, [maybeLastResult, currState.nextPageKey]);\n  return {\n    user: {\n      results,\n      ...statusObject\n    },\n    internal: { state: currState }\n  };\n}\nlet paginationId = 0;\nfunction nextPaginationId() {\n  paginationId++;\n  return paginationId;\n}\nfunction resetPaginationId() {\n  paginationId = 0;\n}\nfunction optimisticallyUpdateValueInPaginatedQuery(localStore, query, args, updateValue) {\n  const expectedArgs = JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(args));\n  for (const queryResult of localStore.getAllQueries(query)) {\n    if (queryResult.value !== void 0) {\n      const { paginationOpts: _, ...innerArgs } = queryResult.args;\n      if (JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(innerArgs)) === expectedArgs) {\n        const value = queryResult.value;\n        if (typeof value === \"object\" && value !== null && Array.isArray(value.page)) {\n          localStore.setQuery(query, queryResult.args, {\n            ...value,\n            page: value.page.map(updateValue)\n          });\n        }\n      }\n    }\n  }\n}\nfunction insertAtTop(options) {\n  const { paginatedQuery, argsToMatch, localQueryStore, item } = options;\n  const queries = localQueryStore.getAllQueries(paginatedQuery);\n  const queriesThatMatch = queries.filter((q) => {\n    if (argsToMatch === void 0) {\n      return true;\n    }\n    return Object.keys(argsToMatch).every(\n      // @ts-expect-error -- This should be safe since both should be plain objects\n      (k) => (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(argsToMatch[k], q.args[k]) === 0\n    );\n  });\n  const firstPage = queriesThatMatch.find(\n    (q) => q.args.paginationOpts.cursor === null\n  );\n  if (firstPage === void 0 || firstPage.value === void 0) {\n    return;\n  }\n  localQueryStore.setQuery(paginatedQuery, firstPage.args, {\n    ...firstPage.value,\n    page: [item, ...firstPage.value.page]\n  });\n}\nfunction insertAtBottomIfLoaded(options) {\n  const { paginatedQuery, localQueryStore, item, argsToMatch } = options;\n  const queries = localQueryStore.getAllQueries(paginatedQuery);\n  const queriesThatMatch = queries.filter((q) => {\n    if (argsToMatch === void 0) {\n      return true;\n    }\n    return Object.keys(argsToMatch).every(\n      // @ts-expect-error -- This should be safe since both should be plain objects\n      (k) => (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(argsToMatch[k], q.args[k]) === 0\n    );\n  });\n  const lastPage = queriesThatMatch.find(\n    (q) => q.value !== void 0 && q.value.isDone\n  );\n  if (lastPage === void 0) {\n    return;\n  }\n  localQueryStore.setQuery(paginatedQuery, lastPage.args, {\n    ...lastPage.value,\n    page: [...lastPage.value.page, item]\n  });\n}\nfunction insertAtPosition(options) {\n  const {\n    paginatedQuery,\n    sortOrder,\n    sortKeyFromItem,\n    localQueryStore,\n    item,\n    argsToMatch\n  } = options;\n  const queries = localQueryStore.getAllQueries(paginatedQuery);\n  const queryGroups = {};\n  for (const query of queries) {\n    if (argsToMatch !== void 0 && !Object.keys(argsToMatch).every(\n      (k) => (\n        // @ts-ignore why is this not working?\n        argsToMatch[k] === query.args[k]\n      )\n    )) {\n      continue;\n    }\n    const key = JSON.stringify(\n      Object.fromEntries(\n        Object.entries(query.args).map(([k, v]) => [\n          k,\n          k === \"paginationOpts\" ? v.id : v\n        ])\n      )\n    );\n    queryGroups[key] ?? (queryGroups[key] = []);\n    queryGroups[key].push(query);\n  }\n  for (const pageQueries of Object.values(queryGroups)) {\n    insertAtPositionInPages({\n      pageQueries,\n      paginatedQuery,\n      sortOrder,\n      sortKeyFromItem,\n      localQueryStore,\n      item\n    });\n  }\n}\nfunction insertAtPositionInPages(options) {\n  const {\n    pageQueries,\n    sortOrder,\n    sortKeyFromItem,\n    localQueryStore,\n    item,\n    paginatedQuery\n  } = options;\n  const insertedKey = sortKeyFromItem(item);\n  const loadedPages = pageQueries.filter(\n    (q) => q.value !== void 0 && q.value.page.length > 0\n  );\n  const sortedPages = loadedPages.sort((a, b) => {\n    const aKey = sortKeyFromItem(a.value.page[0]);\n    const bKey = sortKeyFromItem(b.value.page[0]);\n    if (sortOrder === \"asc\") {\n      return (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(aKey, bKey);\n    } else {\n      return (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(bKey, aKey);\n    }\n  });\n  const firstLoadedPage = sortedPages[0];\n  if (firstLoadedPage === void 0) {\n    return;\n  }\n  const firstPageKey = sortKeyFromItem(firstLoadedPage.value.page[0]);\n  const isBeforeFirstPage = sortOrder === \"asc\" ? (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(insertedKey, firstPageKey) <= 0 : (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(insertedKey, firstPageKey) >= 0;\n  if (isBeforeFirstPage) {\n    if (firstLoadedPage.args.paginationOpts.cursor === null) {\n      localQueryStore.setQuery(paginatedQuery, firstLoadedPage.args, {\n        ...firstLoadedPage.value,\n        page: [item, ...firstLoadedPage.value.page]\n      });\n    } else {\n      return;\n    }\n    return;\n  }\n  const lastLoadedPage = sortedPages[sortedPages.length - 1];\n  if (lastLoadedPage === void 0) {\n    return;\n  }\n  const lastPageKey = sortKeyFromItem(\n    lastLoadedPage.value.page[lastLoadedPage.value.page.length - 1]\n  );\n  const isAfterLastPage = sortOrder === \"asc\" ? (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(insertedKey, lastPageKey) >= 0 : (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(insertedKey, lastPageKey) <= 0;\n  if (isAfterLastPage) {\n    if (lastLoadedPage.value.isDone) {\n      localQueryStore.setQuery(paginatedQuery, lastLoadedPage.args, {\n        ...lastLoadedPage.value,\n        page: [...lastLoadedPage.value.page, item]\n      });\n    }\n    return;\n  }\n  const successorPageIndex = sortedPages.findIndex(\n    (p) => sortOrder === \"asc\" ? (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(sortKeyFromItem(p.value.page[0]), insertedKey) > 0 : (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(sortKeyFromItem(p.value.page[0]), insertedKey) < 0\n  );\n  const pageToUpdate = successorPageIndex === -1 ? sortedPages[sortedPages.length - 1] : sortedPages[successorPageIndex - 1];\n  if (pageToUpdate === void 0) {\n    return;\n  }\n  const indexWithinPage = pageToUpdate.value.page.findIndex(\n    (e) => sortOrder === \"asc\" ? (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(sortKeyFromItem(e), insertedKey) >= 0 : (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(sortKeyFromItem(e), insertedKey) <= 0\n  );\n  const newPage = indexWithinPage === -1 ? [...pageToUpdate.value.page, item] : [\n    ...pageToUpdate.value.page.slice(0, indexWithinPage),\n    item,\n    ...pageToUpdate.value.page.slice(indexWithinPage)\n  ];\n  localQueryStore.setQuery(paginatedQuery, pageToUpdate.args, {\n    ...pageToUpdate.value,\n    page: newPage\n  });\n}\n//# sourceMappingURL=use_paginated_query.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L3VzZV9wYWdpbmF0ZWRfcXVlcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWE7QUFDNkI7QUFDcUI7QUFDakI7QUFHcEI7QUFDYztBQUNhO0FBQ3JEO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxVQUFVLE9BQU87QUFDakI7QUFDQTtBQUNPO0FBQ0E7QUFDQTtBQUNQO0FBQ0E7QUFDQSwyRUFBMkUseUJBQXlCO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQixvQkFBb0IsK0RBQWU7QUFDbkMsNkJBQTZCLDhDQUFPO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsbUJBQW1CLDhEQUFZO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLCtDQUFRO0FBQ3BDO0FBQ0EsTUFBTSwrREFBZSxZQUFZLCtEQUFlLGdDQUFnQyw4REFBWSxpQ0FBaUMsOERBQVk7QUFDekk7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHFEQUFTO0FBQ2hDO0FBQ0Esd0JBQXdCLDJEQUFVO0FBQ2xDO0FBQ0EscUNBQXFDLDhDQUFPO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRkFBa0YseURBQVc7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw4Q0FBTztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUCxzQ0FBc0MsOERBQVk7QUFDbEQ7QUFDQTtBQUNBLGNBQWMsa0NBQWtDO0FBQ2hELHlCQUF5Qiw4REFBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFVBQVUscURBQXFEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxpRUFBYTtBQUMxQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDTztBQUNQLFVBQVUscURBQXFEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxpRUFBYTtBQUMxQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxpRUFBYTtBQUMxQixNQUFNO0FBQ04sYUFBYSxpRUFBYTtBQUMxQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGlFQUFhLG1DQUFtQyxpRUFBYTtBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELGlFQUFhLGtDQUFrQyxpRUFBYTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlFQUFhLHNEQUFzRCxpRUFBYTtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsaUVBQWEseUNBQXlDLGlFQUFhO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHJlYWN0XFx1c2VfcGFnaW5hdGVkX3F1ZXJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuaW1wb3J0IHsgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IENvbnZleEVycm9yLCBjb252ZXhUb0pzb24gfSBmcm9tIFwiLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB1c2VRdWVyaWVzIH0gZnJvbSBcIi4vdXNlX3F1ZXJpZXMuanNcIjtcbmltcG9ydCB7XG4gIGdldEZ1bmN0aW9uTmFtZVxufSBmcm9tIFwiLi4vc2VydmVyL2FwaS5qc1wiO1xuaW1wb3J0IHsgdXNlQ29udmV4IH0gZnJvbSBcIi4vY2xpZW50LmpzXCI7XG5pbXBvcnQgeyBjb21wYXJlVmFsdWVzIH0gZnJvbSBcIi4uL3ZhbHVlcy9jb21wYXJlLmpzXCI7XG5jb25zdCBzcGxpdFF1ZXJ5ID0gKGtleSwgc3BsaXRDdXJzb3IsIGNvbnRpbnVlQ3Vyc29yKSA9PiAocHJldlN0YXRlKSA9PiB7XG4gIGNvbnN0IHF1ZXJpZXMgPSB7IC4uLnByZXZTdGF0ZS5xdWVyaWVzIH07XG4gIGNvbnN0IHNwbGl0S2V5MSA9IHByZXZTdGF0ZS5uZXh0UGFnZUtleTtcbiAgY29uc3Qgc3BsaXRLZXkyID0gcHJldlN0YXRlLm5leHRQYWdlS2V5ICsgMTtcbiAgY29uc3QgbmV4dFBhZ2VLZXkgPSBwcmV2U3RhdGUubmV4dFBhZ2VLZXkgKyAyO1xuICBxdWVyaWVzW3NwbGl0S2V5MV0gPSB7XG4gICAgcXVlcnk6IHByZXZTdGF0ZS5xdWVyeSxcbiAgICBhcmdzOiB7XG4gICAgICAuLi5wcmV2U3RhdGUuYXJncyxcbiAgICAgIHBhZ2luYXRpb25PcHRzOiB7XG4gICAgICAgIC4uLnByZXZTdGF0ZS5xdWVyaWVzW2tleV0uYXJncy5wYWdpbmF0aW9uT3B0cyxcbiAgICAgICAgZW5kQ3Vyc29yOiBzcGxpdEN1cnNvclxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgcXVlcmllc1tzcGxpdEtleTJdID0ge1xuICAgIHF1ZXJ5OiBwcmV2U3RhdGUucXVlcnksXG4gICAgYXJnczoge1xuICAgICAgLi4ucHJldlN0YXRlLmFyZ3MsXG4gICAgICBwYWdpbmF0aW9uT3B0czoge1xuICAgICAgICAuLi5wcmV2U3RhdGUucXVlcmllc1trZXldLmFyZ3MucGFnaW5hdGlvbk9wdHMsXG4gICAgICAgIGN1cnNvcjogc3BsaXRDdXJzb3IsXG4gICAgICAgIGVuZEN1cnNvcjogY29udGludWVDdXJzb3JcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IG9uZ29pbmdTcGxpdHMgPSB7IC4uLnByZXZTdGF0ZS5vbmdvaW5nU3BsaXRzIH07XG4gIG9uZ29pbmdTcGxpdHNba2V5XSA9IFtzcGxpdEtleTEsIHNwbGl0S2V5Ml07XG4gIHJldHVybiB7XG4gICAgLi4ucHJldlN0YXRlLFxuICAgIG5leHRQYWdlS2V5LFxuICAgIHF1ZXJpZXMsXG4gICAgb25nb2luZ1NwbGl0c1xuICB9O1xufTtcbmNvbnN0IGNvbXBsZXRlU3BsaXRRdWVyeSA9IChrZXkpID0+IChwcmV2U3RhdGUpID0+IHtcbiAgY29uc3QgY29tcGxldGVkU3BsaXQgPSBwcmV2U3RhdGUub25nb2luZ1NwbGl0c1trZXldO1xuICBpZiAoY29tcGxldGVkU3BsaXQgPT09IHZvaWQgMCkge1xuICAgIHJldHVybiBwcmV2U3RhdGU7XG4gIH1cbiAgY29uc3QgcXVlcmllcyA9IHsgLi4ucHJldlN0YXRlLnF1ZXJpZXMgfTtcbiAgZGVsZXRlIHF1ZXJpZXNba2V5XTtcbiAgY29uc3Qgb25nb2luZ1NwbGl0cyA9IHsgLi4ucHJldlN0YXRlLm9uZ29pbmdTcGxpdHMgfTtcbiAgZGVsZXRlIG9uZ29pbmdTcGxpdHNba2V5XTtcbiAgbGV0IHBhZ2VLZXlzID0gcHJldlN0YXRlLnBhZ2VLZXlzLnNsaWNlKCk7XG4gIGNvbnN0IHBhZ2VJbmRleCA9IHByZXZTdGF0ZS5wYWdlS2V5cy5maW5kSW5kZXgoKHYpID0+IHYgPT09IGtleSk7XG4gIGlmIChwYWdlSW5kZXggPj0gMCkge1xuICAgIHBhZ2VLZXlzID0gW1xuICAgICAgLi4ucHJldlN0YXRlLnBhZ2VLZXlzLnNsaWNlKDAsIHBhZ2VJbmRleCksXG4gICAgICAuLi5jb21wbGV0ZWRTcGxpdCxcbiAgICAgIC4uLnByZXZTdGF0ZS5wYWdlS2V5cy5zbGljZShwYWdlSW5kZXggKyAxKVxuICAgIF07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICAuLi5wcmV2U3RhdGUsXG4gICAgcXVlcmllcyxcbiAgICBwYWdlS2V5cyxcbiAgICBvbmdvaW5nU3BsaXRzXG4gIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVBhZ2luYXRlZFF1ZXJ5KHF1ZXJ5LCBhcmdzLCBvcHRpb25zKSB7XG4gIGNvbnN0IHsgdXNlciB9ID0gdXNlUGFnaW5hdGVkUXVlcnlJbnRlcm5hbChxdWVyeSwgYXJncywgb3B0aW9ucyk7XG4gIHJldHVybiB1c2VyO1xufVxuZXhwb3J0IGNvbnN0IGluY2x1ZGVQYWdlID0gU3ltYm9sKFwiaW5jbHVkZVBhZ2VLZXlzXCIpO1xuZXhwb3J0IGNvbnN0IHBhZ2UgPSBTeW1ib2woXCJwYWdlXCIpO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVBhZ2luYXRlZFF1ZXJ5SW50ZXJuYWwocXVlcnksIGFyZ3MsIG9wdGlvbnMpIHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zPy5pbml0aWFsTnVtSXRlbXMgIT09IFwibnVtYmVyXCIgfHwgb3B0aW9ucy5pbml0aWFsTnVtSXRlbXMgPCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFxcYG9wdGlvbnMuaW5pdGlhbE51bUl0ZW1zXFxgIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXIuIFJlY2VpdmVkIFxcYCR7b3B0aW9ucz8uaW5pdGlhbE51bUl0ZW1zfVxcYC5gXG4gICAgKTtcbiAgfVxuICBjb25zdCBza2lwID0gYXJncyA9PT0gXCJza2lwXCI7XG4gIGNvbnN0IGFyZ3NPYmplY3QgPSBza2lwID8ge30gOiBhcmdzO1xuICBjb25zdCBxdWVyeU5hbWUgPSBnZXRGdW5jdGlvbk5hbWUocXVlcnkpO1xuICBjb25zdCBjcmVhdGVJbml0aWFsU3RhdGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgaWQgPSBuZXh0UGFnaW5hdGlvbklkKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBxdWVyeSxcbiAgICAgICAgYXJnczogYXJnc09iamVjdCxcbiAgICAgICAgaWQsXG4gICAgICAgIG5leHRQYWdlS2V5OiAxLFxuICAgICAgICBwYWdlS2V5czogc2tpcCA/IFtdIDogWzBdLFxuICAgICAgICBxdWVyaWVzOiBza2lwID8ge30gOiB7XG4gICAgICAgICAgMDoge1xuICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICBhcmdzOiB7XG4gICAgICAgICAgICAgIC4uLmFyZ3NPYmplY3QsXG4gICAgICAgICAgICAgIHBhZ2luYXRpb25PcHRzOiB7XG4gICAgICAgICAgICAgICAgbnVtSXRlbXM6IG9wdGlvbnMuaW5pdGlhbE51bUl0ZW1zLFxuICAgICAgICAgICAgICAgIGN1cnNvcjogbnVsbCxcbiAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbmdvaW5nU3BsaXRzOiB7fSxcbiAgICAgICAgc2tpcFxuICAgICAgfTtcbiAgICB9O1xuICB9LCBbXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIEpTT04uc3RyaW5naWZ5KGNvbnZleFRvSnNvbihhcmdzT2JqZWN0KSksXG4gICAgcXVlcnlOYW1lLFxuICAgIG9wdGlvbnMuaW5pdGlhbE51bUl0ZW1zLFxuICAgIHNraXBcbiAgXSk7XG4gIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoY3JlYXRlSW5pdGlhbFN0YXRlKTtcbiAgbGV0IGN1cnJTdGF0ZSA9IHN0YXRlO1xuICBpZiAoZ2V0RnVuY3Rpb25OYW1lKHF1ZXJ5KSAhPT0gZ2V0RnVuY3Rpb25OYW1lKHN0YXRlLnF1ZXJ5KSB8fCBKU09OLnN0cmluZ2lmeShjb252ZXhUb0pzb24oYXJnc09iamVjdCkpICE9PSBKU09OLnN0cmluZ2lmeShjb252ZXhUb0pzb24oc3RhdGUuYXJncykpIHx8IHNraXAgIT09IHN0YXRlLnNraXApIHtcbiAgICBjdXJyU3RhdGUgPSBjcmVhdGVJbml0aWFsU3RhdGUoKTtcbiAgICBzZXRTdGF0ZShjdXJyU3RhdGUpO1xuICB9XG4gIGNvbnN0IGNvbnZleENsaWVudCA9IHVzZUNvbnZleCgpO1xuICBjb25zdCBsb2dnZXIgPSBjb252ZXhDbGllbnQubG9nZ2VyO1xuICBjb25zdCByZXN1bHRzT2JqZWN0ID0gdXNlUXVlcmllcyhjdXJyU3RhdGUucXVlcmllcyk7XG4gIGNvbnN0IGlzSW5jbHVkaW5nUGFnZUtleXMgPSBvcHRpb25zW2luY2x1ZGVQYWdlXSA/PyBmYWxzZTtcbiAgY29uc3QgW3Jlc3VsdHMsIG1heWJlTGFzdFJlc3VsdF0gPSB1c2VNZW1vKCgpID0+IHtcbiAgICBsZXQgY3VyclJlc3VsdCA9IHZvaWQgMDtcbiAgICBjb25zdCBhbGxJdGVtcyA9IFtdO1xuICAgIGZvciAoY29uc3QgcGFnZUtleSBvZiBjdXJyU3RhdGUucGFnZUtleXMpIHtcbiAgICAgIGN1cnJSZXN1bHQgPSByZXN1bHRzT2JqZWN0W3BhZ2VLZXldO1xuICAgICAgaWYgKGN1cnJSZXN1bHQgPT09IHZvaWQgMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyUmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgaWYgKGN1cnJSZXN1bHQubWVzc2FnZS5pbmNsdWRlcyhcIkludmFsaWRDdXJzb3JcIikgfHwgY3VyclJlc3VsdCBpbnN0YW5jZW9mIENvbnZleEVycm9yICYmIHR5cGVvZiBjdXJyUmVzdWx0LmRhdGEgPT09IFwib2JqZWN0XCIgJiYgY3VyclJlc3VsdC5kYXRhPy5pc0NvbnZleFN5c3RlbUVycm9yID09PSB0cnVlICYmIGN1cnJSZXN1bHQuZGF0YT8ucGFnaW5hdGlvbkVycm9yID09PSBcIkludmFsaWRDdXJzb3JcIikge1xuICAgICAgICAgIGxvZ2dlci53YXJuKFxuICAgICAgICAgICAgXCJ1c2VQYWdpbmF0ZWRRdWVyeSBoaXQgZXJyb3IsIHJlc2V0dGluZyBwYWdpbmF0aW9uIHN0YXRlOiBcIiArIGN1cnJSZXN1bHQubWVzc2FnZVxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0U3RhdGUoY3JlYXRlSW5pdGlhbFN0YXRlKTtcbiAgICAgICAgICByZXR1cm4gW1tdLCB2b2lkIDBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IGN1cnJSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IG9uZ29pbmdTcGxpdCA9IGN1cnJTdGF0ZS5vbmdvaW5nU3BsaXRzW3BhZ2VLZXldO1xuICAgICAgaWYgKG9uZ29pbmdTcGxpdCAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGlmIChyZXN1bHRzT2JqZWN0W29uZ29pbmdTcGxpdFswXV0gIT09IHZvaWQgMCAmJiByZXN1bHRzT2JqZWN0W29uZ29pbmdTcGxpdFsxXV0gIT09IHZvaWQgMCkge1xuICAgICAgICAgIHNldFN0YXRlKGNvbXBsZXRlU3BsaXRRdWVyeShwYWdlS2V5KSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY3VyclJlc3VsdC5zcGxpdEN1cnNvciAmJiAoY3VyclJlc3VsdC5wYWdlU3RhdHVzID09PSBcIlNwbGl0UmVjb21tZW5kZWRcIiB8fCBjdXJyUmVzdWx0LnBhZ2VTdGF0dXMgPT09IFwiU3BsaXRSZXF1aXJlZFwiIHx8IGN1cnJSZXN1bHQucGFnZS5sZW5ndGggPiBvcHRpb25zLmluaXRpYWxOdW1JdGVtcyAqIDIpKSB7XG4gICAgICAgIHNldFN0YXRlKFxuICAgICAgICAgIHNwbGl0UXVlcnkoXG4gICAgICAgICAgICBwYWdlS2V5LFxuICAgICAgICAgICAgY3VyclJlc3VsdC5zcGxpdEN1cnNvcixcbiAgICAgICAgICAgIGN1cnJSZXN1bHQuY29udGludWVDdXJzb3JcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoY3VyclJlc3VsdC5wYWdlU3RhdHVzID09PSBcIlNwbGl0UmVxdWlyZWRcIikge1xuICAgICAgICByZXR1cm4gW2FsbEl0ZW1zLCB2b2lkIDBdO1xuICAgICAgfVxuICAgICAgYWxsSXRlbXMucHVzaChcbiAgICAgICAgLi4uaXNJbmNsdWRpbmdQYWdlS2V5cyA/IGN1cnJSZXN1bHQucGFnZS5tYXAoKGkpID0+ICh7XG4gICAgICAgICAgLi4uaSxcbiAgICAgICAgICBbcGFnZV06IHBhZ2VLZXkudG9TdHJpbmcoKVxuICAgICAgICB9KSkgOiBjdXJyUmVzdWx0LnBhZ2VcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBbYWxsSXRlbXMsIGN1cnJSZXN1bHRdO1xuICB9LCBbXG4gICAgcmVzdWx0c09iamVjdCxcbiAgICBjdXJyU3RhdGUucGFnZUtleXMsXG4gICAgY3VyclN0YXRlLm9uZ29pbmdTcGxpdHMsXG4gICAgb3B0aW9ucy5pbml0aWFsTnVtSXRlbXMsXG4gICAgY3JlYXRlSW5pdGlhbFN0YXRlLFxuICAgIGxvZ2dlcixcbiAgICBpc0luY2x1ZGluZ1BhZ2VLZXlzXG4gIF0pO1xuICBjb25zdCBzdGF0dXNPYmplY3QgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAobWF5YmVMYXN0UmVzdWx0ID09PSB2b2lkIDApIHtcbiAgICAgIGlmIChjdXJyU3RhdGUubmV4dFBhZ2VLZXkgPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdGF0dXM6IFwiTG9hZGluZ0ZpcnN0UGFnZVwiLFxuICAgICAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICBsb2FkTW9yZTogKF9udW1JdGVtcykgPT4ge1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3RhdHVzOiBcIkxvYWRpbmdNb3JlXCIsXG4gICAgICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgICAgIGxvYWRNb3JlOiAoX251bUl0ZW1zKSA9PiB7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWF5YmVMYXN0UmVzdWx0LmlzRG9uZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiBcIkV4aGF1c3RlZFwiLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBsb2FkTW9yZTogKF9udW1JdGVtcykgPT4ge1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBjb250aW51ZUN1cnNvciA9IG1heWJlTGFzdFJlc3VsdC5jb250aW51ZUN1cnNvcjtcbiAgICBsZXQgYWxyZWFkeUxvYWRpbmdNb3JlID0gZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogXCJDYW5Mb2FkTW9yZVwiLFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgIGxvYWRNb3JlOiAobnVtSXRlbXMpID0+IHtcbiAgICAgICAgaWYgKCFhbHJlYWR5TG9hZGluZ01vcmUpIHtcbiAgICAgICAgICBhbHJlYWR5TG9hZGluZ01vcmUgPSB0cnVlO1xuICAgICAgICAgIHNldFN0YXRlKChwcmV2U3RhdGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VLZXlzID0gWy4uLnByZXZTdGF0ZS5wYWdlS2V5cywgcHJldlN0YXRlLm5leHRQYWdlS2V5XTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJpZXMgPSB7IC4uLnByZXZTdGF0ZS5xdWVyaWVzIH07XG4gICAgICAgICAgICBxdWVyaWVzW3ByZXZTdGF0ZS5uZXh0UGFnZUtleV0gPSB7XG4gICAgICAgICAgICAgIHF1ZXJ5OiBwcmV2U3RhdGUucXVlcnksXG4gICAgICAgICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgICAgICAuLi5wcmV2U3RhdGUuYXJncyxcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uT3B0czoge1xuICAgICAgICAgICAgICAgICAgbnVtSXRlbXMsXG4gICAgICAgICAgICAgICAgICBjdXJzb3I6IGNvbnRpbnVlQ3Vyc29yLFxuICAgICAgICAgICAgICAgICAgaWQ6IHByZXZTdGF0ZS5pZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgICAgICAgICAgbmV4dFBhZ2VLZXk6IHByZXZTdGF0ZS5uZXh0UGFnZUtleSArIDEsXG4gICAgICAgICAgICAgIHBhZ2VLZXlzLFxuICAgICAgICAgICAgICBxdWVyaWVzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW21heWJlTGFzdFJlc3VsdCwgY3VyclN0YXRlLm5leHRQYWdlS2V5XSk7XG4gIHJldHVybiB7XG4gICAgdXNlcjoge1xuICAgICAgcmVzdWx0cyxcbiAgICAgIC4uLnN0YXR1c09iamVjdFxuICAgIH0sXG4gICAgaW50ZXJuYWw6IHsgc3RhdGU6IGN1cnJTdGF0ZSB9XG4gIH07XG59XG5sZXQgcGFnaW5hdGlvbklkID0gMDtcbmZ1bmN0aW9uIG5leHRQYWdpbmF0aW9uSWQoKSB7XG4gIHBhZ2luYXRpb25JZCsrO1xuICByZXR1cm4gcGFnaW5hdGlvbklkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0UGFnaW5hdGlvbklkKCkge1xuICBwYWdpbmF0aW9uSWQgPSAwO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG9wdGltaXN0aWNhbGx5VXBkYXRlVmFsdWVJblBhZ2luYXRlZFF1ZXJ5KGxvY2FsU3RvcmUsIHF1ZXJ5LCBhcmdzLCB1cGRhdGVWYWx1ZSkge1xuICBjb25zdCBleHBlY3RlZEFyZ3MgPSBKU09OLnN0cmluZ2lmeShjb252ZXhUb0pzb24oYXJncykpO1xuICBmb3IgKGNvbnN0IHF1ZXJ5UmVzdWx0IG9mIGxvY2FsU3RvcmUuZ2V0QWxsUXVlcmllcyhxdWVyeSkpIHtcbiAgICBpZiAocXVlcnlSZXN1bHQudmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgY29uc3QgeyBwYWdpbmF0aW9uT3B0czogXywgLi4uaW5uZXJBcmdzIH0gPSBxdWVyeVJlc3VsdC5hcmdzO1xuICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KGNvbnZleFRvSnNvbihpbm5lckFyZ3MpKSA9PT0gZXhwZWN0ZWRBcmdzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcXVlcnlSZXN1bHQudmFsdWU7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZS5wYWdlKSkge1xuICAgICAgICAgIGxvY2FsU3RvcmUuc2V0UXVlcnkocXVlcnksIHF1ZXJ5UmVzdWx0LmFyZ3MsIHtcbiAgICAgICAgICAgIC4uLnZhbHVlLFxuICAgICAgICAgICAgcGFnZTogdmFsdWUucGFnZS5tYXAodXBkYXRlVmFsdWUpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRBdFRvcChvcHRpb25zKSB7XG4gIGNvbnN0IHsgcGFnaW5hdGVkUXVlcnksIGFyZ3NUb01hdGNoLCBsb2NhbFF1ZXJ5U3RvcmUsIGl0ZW0gfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHF1ZXJpZXMgPSBsb2NhbFF1ZXJ5U3RvcmUuZ2V0QWxsUXVlcmllcyhwYWdpbmF0ZWRRdWVyeSk7XG4gIGNvbnN0IHF1ZXJpZXNUaGF0TWF0Y2ggPSBxdWVyaWVzLmZpbHRlcigocSkgPT4ge1xuICAgIGlmIChhcmdzVG9NYXRjaCA9PT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGFyZ3NUb01hdGNoKS5ldmVyeShcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLS0gVGhpcyBzaG91bGQgYmUgc2FmZSBzaW5jZSBib3RoIHNob3VsZCBiZSBwbGFpbiBvYmplY3RzXG4gICAgICAoaykgPT4gY29tcGFyZVZhbHVlcyhhcmdzVG9NYXRjaFtrXSwgcS5hcmdzW2tdKSA9PT0gMFxuICAgICk7XG4gIH0pO1xuICBjb25zdCBmaXJzdFBhZ2UgPSBxdWVyaWVzVGhhdE1hdGNoLmZpbmQoXG4gICAgKHEpID0+IHEuYXJncy5wYWdpbmF0aW9uT3B0cy5jdXJzb3IgPT09IG51bGxcbiAgKTtcbiAgaWYgKGZpcnN0UGFnZSA9PT0gdm9pZCAwIHx8IGZpcnN0UGFnZS52YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxvY2FsUXVlcnlTdG9yZS5zZXRRdWVyeShwYWdpbmF0ZWRRdWVyeSwgZmlyc3RQYWdlLmFyZ3MsIHtcbiAgICAuLi5maXJzdFBhZ2UudmFsdWUsXG4gICAgcGFnZTogW2l0ZW0sIC4uLmZpcnN0UGFnZS52YWx1ZS5wYWdlXVxuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRBdEJvdHRvbUlmTG9hZGVkKG9wdGlvbnMpIHtcbiAgY29uc3QgeyBwYWdpbmF0ZWRRdWVyeSwgbG9jYWxRdWVyeVN0b3JlLCBpdGVtLCBhcmdzVG9NYXRjaCB9ID0gb3B0aW9ucztcbiAgY29uc3QgcXVlcmllcyA9IGxvY2FsUXVlcnlTdG9yZS5nZXRBbGxRdWVyaWVzKHBhZ2luYXRlZFF1ZXJ5KTtcbiAgY29uc3QgcXVlcmllc1RoYXRNYXRjaCA9IHF1ZXJpZXMuZmlsdGVyKChxKSA9PiB7XG4gICAgaWYgKGFyZ3NUb01hdGNoID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmtleXMoYXJnc1RvTWF0Y2gpLmV2ZXJ5KFxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtLSBUaGlzIHNob3VsZCBiZSBzYWZlIHNpbmNlIGJvdGggc2hvdWxkIGJlIHBsYWluIG9iamVjdHNcbiAgICAgIChrKSA9PiBjb21wYXJlVmFsdWVzKGFyZ3NUb01hdGNoW2tdLCBxLmFyZ3Nba10pID09PSAwXG4gICAgKTtcbiAgfSk7XG4gIGNvbnN0IGxhc3RQYWdlID0gcXVlcmllc1RoYXRNYXRjaC5maW5kKFxuICAgIChxKSA9PiBxLnZhbHVlICE9PSB2b2lkIDAgJiYgcS52YWx1ZS5pc0RvbmVcbiAgKTtcbiAgaWYgKGxhc3RQYWdlID09PSB2b2lkIDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbG9jYWxRdWVyeVN0b3JlLnNldFF1ZXJ5KHBhZ2luYXRlZFF1ZXJ5LCBsYXN0UGFnZS5hcmdzLCB7XG4gICAgLi4ubGFzdFBhZ2UudmFsdWUsXG4gICAgcGFnZTogWy4uLmxhc3RQYWdlLnZhbHVlLnBhZ2UsIGl0ZW1dXG4gIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydEF0UG9zaXRpb24ob3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgcGFnaW5hdGVkUXVlcnksXG4gICAgc29ydE9yZGVyLFxuICAgIHNvcnRLZXlGcm9tSXRlbSxcbiAgICBsb2NhbFF1ZXJ5U3RvcmUsXG4gICAgaXRlbSxcbiAgICBhcmdzVG9NYXRjaFxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgcXVlcmllcyA9IGxvY2FsUXVlcnlTdG9yZS5nZXRBbGxRdWVyaWVzKHBhZ2luYXRlZFF1ZXJ5KTtcbiAgY29uc3QgcXVlcnlHcm91cHMgPSB7fTtcbiAgZm9yIChjb25zdCBxdWVyeSBvZiBxdWVyaWVzKSB7XG4gICAgaWYgKGFyZ3NUb01hdGNoICE9PSB2b2lkIDAgJiYgIU9iamVjdC5rZXlzKGFyZ3NUb01hdGNoKS5ldmVyeShcbiAgICAgIChrKSA9PiAoXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgd2h5IGlzIHRoaXMgbm90IHdvcmtpbmc/XG4gICAgICAgIGFyZ3NUb01hdGNoW2tdID09PSBxdWVyeS5hcmdzW2tdXG4gICAgICApXG4gICAgKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KFxuICAgICAgT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICBPYmplY3QuZW50cmllcyhxdWVyeS5hcmdzKS5tYXAoKFtrLCB2XSkgPT4gW1xuICAgICAgICAgIGssXG4gICAgICAgICAgayA9PT0gXCJwYWdpbmF0aW9uT3B0c1wiID8gdi5pZCA6IHZcbiAgICAgICAgXSlcbiAgICAgIClcbiAgICApO1xuICAgIHF1ZXJ5R3JvdXBzW2tleV0gPz8gKHF1ZXJ5R3JvdXBzW2tleV0gPSBbXSk7XG4gICAgcXVlcnlHcm91cHNba2V5XS5wdXNoKHF1ZXJ5KTtcbiAgfVxuICBmb3IgKGNvbnN0IHBhZ2VRdWVyaWVzIG9mIE9iamVjdC52YWx1ZXMocXVlcnlHcm91cHMpKSB7XG4gICAgaW5zZXJ0QXRQb3NpdGlvbkluUGFnZXMoe1xuICAgICAgcGFnZVF1ZXJpZXMsXG4gICAgICBwYWdpbmF0ZWRRdWVyeSxcbiAgICAgIHNvcnRPcmRlcixcbiAgICAgIHNvcnRLZXlGcm9tSXRlbSxcbiAgICAgIGxvY2FsUXVlcnlTdG9yZSxcbiAgICAgIGl0ZW1cbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gaW5zZXJ0QXRQb3NpdGlvbkluUGFnZXMob3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgcGFnZVF1ZXJpZXMsXG4gICAgc29ydE9yZGVyLFxuICAgIHNvcnRLZXlGcm9tSXRlbSxcbiAgICBsb2NhbFF1ZXJ5U3RvcmUsXG4gICAgaXRlbSxcbiAgICBwYWdpbmF0ZWRRdWVyeVxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgaW5zZXJ0ZWRLZXkgPSBzb3J0S2V5RnJvbUl0ZW0oaXRlbSk7XG4gIGNvbnN0IGxvYWRlZFBhZ2VzID0gcGFnZVF1ZXJpZXMuZmlsdGVyKFxuICAgIChxKSA9PiBxLnZhbHVlICE9PSB2b2lkIDAgJiYgcS52YWx1ZS5wYWdlLmxlbmd0aCA+IDBcbiAgKTtcbiAgY29uc3Qgc29ydGVkUGFnZXMgPSBsb2FkZWRQYWdlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgY29uc3QgYUtleSA9IHNvcnRLZXlGcm9tSXRlbShhLnZhbHVlLnBhZ2VbMF0pO1xuICAgIGNvbnN0IGJLZXkgPSBzb3J0S2V5RnJvbUl0ZW0oYi52YWx1ZS5wYWdlWzBdKTtcbiAgICBpZiAoc29ydE9yZGVyID09PSBcImFzY1wiKSB7XG4gICAgICByZXR1cm4gY29tcGFyZVZhbHVlcyhhS2V5LCBiS2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbXBhcmVWYWx1ZXMoYktleSwgYUtleSk7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgZmlyc3RMb2FkZWRQYWdlID0gc29ydGVkUGFnZXNbMF07XG4gIGlmIChmaXJzdExvYWRlZFBhZ2UgPT09IHZvaWQgMCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBmaXJzdFBhZ2VLZXkgPSBzb3J0S2V5RnJvbUl0ZW0oZmlyc3RMb2FkZWRQYWdlLnZhbHVlLnBhZ2VbMF0pO1xuICBjb25zdCBpc0JlZm9yZUZpcnN0UGFnZSA9IHNvcnRPcmRlciA9PT0gXCJhc2NcIiA/IGNvbXBhcmVWYWx1ZXMoaW5zZXJ0ZWRLZXksIGZpcnN0UGFnZUtleSkgPD0gMCA6IGNvbXBhcmVWYWx1ZXMoaW5zZXJ0ZWRLZXksIGZpcnN0UGFnZUtleSkgPj0gMDtcbiAgaWYgKGlzQmVmb3JlRmlyc3RQYWdlKSB7XG4gICAgaWYgKGZpcnN0TG9hZGVkUGFnZS5hcmdzLnBhZ2luYXRpb25PcHRzLmN1cnNvciA9PT0gbnVsbCkge1xuICAgICAgbG9jYWxRdWVyeVN0b3JlLnNldFF1ZXJ5KHBhZ2luYXRlZFF1ZXJ5LCBmaXJzdExvYWRlZFBhZ2UuYXJncywge1xuICAgICAgICAuLi5maXJzdExvYWRlZFBhZ2UudmFsdWUsXG4gICAgICAgIHBhZ2U6IFtpdGVtLCAuLi5maXJzdExvYWRlZFBhZ2UudmFsdWUucGFnZV1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBsYXN0TG9hZGVkUGFnZSA9IHNvcnRlZFBhZ2VzW3NvcnRlZFBhZ2VzLmxlbmd0aCAtIDFdO1xuICBpZiAobGFzdExvYWRlZFBhZ2UgPT09IHZvaWQgMCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBsYXN0UGFnZUtleSA9IHNvcnRLZXlGcm9tSXRlbShcbiAgICBsYXN0TG9hZGVkUGFnZS52YWx1ZS5wYWdlW2xhc3RMb2FkZWRQYWdlLnZhbHVlLnBhZ2UubGVuZ3RoIC0gMV1cbiAgKTtcbiAgY29uc3QgaXNBZnRlckxhc3RQYWdlID0gc29ydE9yZGVyID09PSBcImFzY1wiID8gY29tcGFyZVZhbHVlcyhpbnNlcnRlZEtleSwgbGFzdFBhZ2VLZXkpID49IDAgOiBjb21wYXJlVmFsdWVzKGluc2VydGVkS2V5LCBsYXN0UGFnZUtleSkgPD0gMDtcbiAgaWYgKGlzQWZ0ZXJMYXN0UGFnZSkge1xuICAgIGlmIChsYXN0TG9hZGVkUGFnZS52YWx1ZS5pc0RvbmUpIHtcbiAgICAgIGxvY2FsUXVlcnlTdG9yZS5zZXRRdWVyeShwYWdpbmF0ZWRRdWVyeSwgbGFzdExvYWRlZFBhZ2UuYXJncywge1xuICAgICAgICAuLi5sYXN0TG9hZGVkUGFnZS52YWx1ZSxcbiAgICAgICAgcGFnZTogWy4uLmxhc3RMb2FkZWRQYWdlLnZhbHVlLnBhZ2UsIGl0ZW1dXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHN1Y2Nlc3NvclBhZ2VJbmRleCA9IHNvcnRlZFBhZ2VzLmZpbmRJbmRleChcbiAgICAocCkgPT4gc29ydE9yZGVyID09PSBcImFzY1wiID8gY29tcGFyZVZhbHVlcyhzb3J0S2V5RnJvbUl0ZW0ocC52YWx1ZS5wYWdlWzBdKSwgaW5zZXJ0ZWRLZXkpID4gMCA6IGNvbXBhcmVWYWx1ZXMoc29ydEtleUZyb21JdGVtKHAudmFsdWUucGFnZVswXSksIGluc2VydGVkS2V5KSA8IDBcbiAgKTtcbiAgY29uc3QgcGFnZVRvVXBkYXRlID0gc3VjY2Vzc29yUGFnZUluZGV4ID09PSAtMSA/IHNvcnRlZFBhZ2VzW3NvcnRlZFBhZ2VzLmxlbmd0aCAtIDFdIDogc29ydGVkUGFnZXNbc3VjY2Vzc29yUGFnZUluZGV4IC0gMV07XG4gIGlmIChwYWdlVG9VcGRhdGUgPT09IHZvaWQgMCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBpbmRleFdpdGhpblBhZ2UgPSBwYWdlVG9VcGRhdGUudmFsdWUucGFnZS5maW5kSW5kZXgoXG4gICAgKGUpID0+IHNvcnRPcmRlciA9PT0gXCJhc2NcIiA/IGNvbXBhcmVWYWx1ZXMoc29ydEtleUZyb21JdGVtKGUpLCBpbnNlcnRlZEtleSkgPj0gMCA6IGNvbXBhcmVWYWx1ZXMoc29ydEtleUZyb21JdGVtKGUpLCBpbnNlcnRlZEtleSkgPD0gMFxuICApO1xuICBjb25zdCBuZXdQYWdlID0gaW5kZXhXaXRoaW5QYWdlID09PSAtMSA/IFsuLi5wYWdlVG9VcGRhdGUudmFsdWUucGFnZSwgaXRlbV0gOiBbXG4gICAgLi4ucGFnZVRvVXBkYXRlLnZhbHVlLnBhZ2Uuc2xpY2UoMCwgaW5kZXhXaXRoaW5QYWdlKSxcbiAgICBpdGVtLFxuICAgIC4uLnBhZ2VUb1VwZGF0ZS52YWx1ZS5wYWdlLnNsaWNlKGluZGV4V2l0aGluUGFnZSlcbiAgXTtcbiAgbG9jYWxRdWVyeVN0b3JlLnNldFF1ZXJ5KHBhZ2luYXRlZFF1ZXJ5LCBwYWdlVG9VcGRhdGUuYXJncywge1xuICAgIC4uLnBhZ2VUb1VwZGF0ZS52YWx1ZSxcbiAgICBwYWdlOiBuZXdQYWdlXG4gIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlX3BhZ2luYXRlZF9xdWVyeS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/use_paginated_query.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/use_paginated_query2.js":
/*!********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/use_paginated_query2.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   resetPaginationId: () => (/* binding */ resetPaginationId),\n/* harmony export */   usePaginatedQuery_experimental: () => (/* binding */ usePaginatedQuery_experimental)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n/* harmony import */ var _use_queries_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./use_queries.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_queries.js\");\n/* harmony import */ var _values_errors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../values/errors.js */ \"(ssr)/./node_modules/convex/dist/esm/values/errors.js\");\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./client.js */ \"(ssr)/./node_modules/convex/dist/esm/react/client.js\");\n\n\n\n\n\n\n\nfunction usePaginatedQuery_experimental(query, args, options) {\n  if (typeof options?.initialNumItems !== \"number\" || options.initialNumItems < 0) {\n    throw new Error(\n      `\\`options.initialNumItems\\` must be a positive number. Received \\`${options?.initialNumItems}\\`.`\n    );\n  }\n  const skip = args === \"skip\";\n  const argsObject = skip ? {} : args;\n  const convexClient = (0,_client_js__WEBPACK_IMPORTED_MODULE_5__.useConvex)();\n  const logger = convexClient.logger;\n  const createInitialState = () => {\n    const id = nextPaginationId();\n    return {\n      query,\n      args: argsObject,\n      id,\n      // Queries will contain zero or one queries forever.\n      queries: skip ? {} : {\n        paginatedQuery: {\n          query,\n          args: {\n            ...argsObject\n          },\n          paginationOptions: {\n            initialNumItems: options.initialNumItems,\n            id\n          }\n        }\n      },\n      skip\n    };\n  };\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(createInitialState);\n  let currState = state;\n  if ((0,_server_api_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionName)(query) !== (0,_server_api_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionName)(state.query) || JSON.stringify((0,_values_value_js__WEBPACK_IMPORTED_MODULE_2__.convexToJson)(argsObject)) !== JSON.stringify((0,_values_value_js__WEBPACK_IMPORTED_MODULE_2__.convexToJson)(state.args)) || skip !== state.skip) {\n    currState = createInitialState();\n    setState(currState);\n  }\n  const resultsObject = (0,_use_queries_js__WEBPACK_IMPORTED_MODULE_3__.useQueries)(currState.queries);\n  if (!(\"paginatedQuery\" in resultsObject)) {\n    if (!skip) {\n      throw new Error(\"Why is it missing?\");\n    }\n    return {\n      results: [],\n      status: \"LoadingFirstPage\",\n      isLoading: true,\n      loadMore: function skipNOP(_numItems) {\n        return false;\n      }\n    };\n  }\n  const result = resultsObject.paginatedQuery;\n  if (result === void 0) {\n    return {\n      results: [],\n      loadMore: () => false,\n      isLoading: true,\n      status: \"LoadingFirstPage\"\n    };\n  }\n  if (result instanceof Error) {\n    if (result.message.includes(\"InvalidCursor\") || result instanceof _values_errors_js__WEBPACK_IMPORTED_MODULE_4__.ConvexError && typeof result.data === \"object\" && result.data?.isConvexSystemError === true && result.data?.paginationError === \"InvalidCursor\") {\n      logger.warn(\n        \"usePaginatedQuery hit error, resetting pagination state: \" + result.message\n      );\n      setState(createInitialState);\n      return {\n        results: [],\n        loadMore: () => false,\n        isLoading: true,\n        status: \"LoadingFirstPage\"\n      };\n    } else {\n      throw result;\n    }\n  }\n  return {\n    ...result,\n    loadMore: (num) => {\n      return result.loadMore(num);\n    },\n    isLoading: result.status === \"LoadingFirstPage\" ? true : result.status === \"LoadingMore\" ? true : false\n  };\n}\nlet paginationId = 0;\nfunction nextPaginationId() {\n  paginationId++;\n  return paginationId;\n}\nfunction resetPaginationId() {\n  paginationId = 0;\n}\n//# sourceMappingURL=use_paginated_query2.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L3VzZV9wYWdpbmF0ZWRfcXVlcnkyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWE7QUFDb0I7QUFDa0I7QUFDRDtBQUNKO0FBQ0k7QUFDVjtBQUNqQztBQUNQO0FBQ0E7QUFDQSwyRUFBMkUseUJBQXlCO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQix1QkFBdUIscURBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwrQ0FBUTtBQUNwQztBQUNBLE1BQU0sK0RBQWUsWUFBWSwrREFBZSxnQ0FBZ0MsOERBQVksaUNBQWlDLDhEQUFZO0FBQ3pJO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyREFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLDBEQUFXO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxyZWFjdFxcdXNlX3BhZ2luYXRlZF9xdWVyeTIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZ2V0RnVuY3Rpb25OYW1lIH0gZnJvbSBcIi4uL3NlcnZlci9hcGkuanNcIjtcbmltcG9ydCB7IGNvbnZleFRvSnNvbiB9IGZyb20gXCIuLi92YWx1ZXMvdmFsdWUuanNcIjtcbmltcG9ydCB7IHVzZVF1ZXJpZXMgfSBmcm9tIFwiLi91c2VfcXVlcmllcy5qc1wiO1xuaW1wb3J0IHsgQ29udmV4RXJyb3IgfSBmcm9tIFwiLi4vdmFsdWVzL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgdXNlQ29udmV4IH0gZnJvbSBcIi4vY2xpZW50LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gdXNlUGFnaW5hdGVkUXVlcnlfZXhwZXJpbWVudGFsKHF1ZXJ5LCBhcmdzLCBvcHRpb25zKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucz8uaW5pdGlhbE51bUl0ZW1zICE9PSBcIm51bWJlclwiIHx8IG9wdGlvbnMuaW5pdGlhbE51bUl0ZW1zIDwgMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBcXGBvcHRpb25zLmluaXRpYWxOdW1JdGVtc1xcYCBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyLiBSZWNlaXZlZCBcXGAke29wdGlvbnM/LmluaXRpYWxOdW1JdGVtc31cXGAuYFxuICAgICk7XG4gIH1cbiAgY29uc3Qgc2tpcCA9IGFyZ3MgPT09IFwic2tpcFwiO1xuICBjb25zdCBhcmdzT2JqZWN0ID0gc2tpcCA/IHt9IDogYXJncztcbiAgY29uc3QgY29udmV4Q2xpZW50ID0gdXNlQ29udmV4KCk7XG4gIGNvbnN0IGxvZ2dlciA9IGNvbnZleENsaWVudC5sb2dnZXI7XG4gIGNvbnN0IGNyZWF0ZUluaXRpYWxTdGF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBpZCA9IG5leHRQYWdpbmF0aW9uSWQoKTtcbiAgICByZXR1cm4ge1xuICAgICAgcXVlcnksXG4gICAgICBhcmdzOiBhcmdzT2JqZWN0LFxuICAgICAgaWQsXG4gICAgICAvLyBRdWVyaWVzIHdpbGwgY29udGFpbiB6ZXJvIG9yIG9uZSBxdWVyaWVzIGZvcmV2ZXIuXG4gICAgICBxdWVyaWVzOiBza2lwID8ge30gOiB7XG4gICAgICAgIHBhZ2luYXRlZFF1ZXJ5OiB7XG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgYXJnczoge1xuICAgICAgICAgICAgLi4uYXJnc09iamVjdFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnM6IHtcbiAgICAgICAgICAgIGluaXRpYWxOdW1JdGVtczogb3B0aW9ucy5pbml0aWFsTnVtSXRlbXMsXG4gICAgICAgICAgICBpZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNraXBcbiAgICB9O1xuICB9O1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKGNyZWF0ZUluaXRpYWxTdGF0ZSk7XG4gIGxldCBjdXJyU3RhdGUgPSBzdGF0ZTtcbiAgaWYgKGdldEZ1bmN0aW9uTmFtZShxdWVyeSkgIT09IGdldEZ1bmN0aW9uTmFtZShzdGF0ZS5xdWVyeSkgfHwgSlNPTi5zdHJpbmdpZnkoY29udmV4VG9Kc29uKGFyZ3NPYmplY3QpKSAhPT0gSlNPTi5zdHJpbmdpZnkoY29udmV4VG9Kc29uKHN0YXRlLmFyZ3MpKSB8fCBza2lwICE9PSBzdGF0ZS5za2lwKSB7XG4gICAgY3VyclN0YXRlID0gY3JlYXRlSW5pdGlhbFN0YXRlKCk7XG4gICAgc2V0U3RhdGUoY3VyclN0YXRlKTtcbiAgfVxuICBjb25zdCByZXN1bHRzT2JqZWN0ID0gdXNlUXVlcmllcyhjdXJyU3RhdGUucXVlcmllcyk7XG4gIGlmICghKFwicGFnaW5hdGVkUXVlcnlcIiBpbiByZXN1bHRzT2JqZWN0KSkge1xuICAgIGlmICghc2tpcCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2h5IGlzIGl0IG1pc3Npbmc/XCIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0czogW10sXG4gICAgICBzdGF0dXM6IFwiTG9hZGluZ0ZpcnN0UGFnZVwiLFxuICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgbG9hZE1vcmU6IGZ1bmN0aW9uIHNraXBOT1AoX251bUl0ZW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGNvbnN0IHJlc3VsdCA9IHJlc3VsdHNPYmplY3QucGFnaW5hdGVkUXVlcnk7XG4gIGlmIChyZXN1bHQgPT09IHZvaWQgMCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN1bHRzOiBbXSxcbiAgICAgIGxvYWRNb3JlOiAoKSA9PiBmYWxzZSxcbiAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgIHN0YXR1czogXCJMb2FkaW5nRmlyc3RQYWdlXCJcbiAgICB9O1xuICB9XG4gIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIGlmIChyZXN1bHQubWVzc2FnZS5pbmNsdWRlcyhcIkludmFsaWRDdXJzb3JcIikgfHwgcmVzdWx0IGluc3RhbmNlb2YgQ29udmV4RXJyb3IgJiYgdHlwZW9mIHJlc3VsdC5kYXRhID09PSBcIm9iamVjdFwiICYmIHJlc3VsdC5kYXRhPy5pc0NvbnZleFN5c3RlbUVycm9yID09PSB0cnVlICYmIHJlc3VsdC5kYXRhPy5wYWdpbmF0aW9uRXJyb3IgPT09IFwiSW52YWxpZEN1cnNvclwiKSB7XG4gICAgICBsb2dnZXIud2FybihcbiAgICAgICAgXCJ1c2VQYWdpbmF0ZWRRdWVyeSBoaXQgZXJyb3IsIHJlc2V0dGluZyBwYWdpbmF0aW9uIHN0YXRlOiBcIiArIHJlc3VsdC5tZXNzYWdlXG4gICAgICApO1xuICAgICAgc2V0U3RhdGUoY3JlYXRlSW5pdGlhbFN0YXRlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3VsdHM6IFtdLFxuICAgICAgICBsb2FkTW9yZTogKCkgPT4gZmFsc2UsXG4gICAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgICAgc3RhdHVzOiBcIkxvYWRpbmdGaXJzdFBhZ2VcIlxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgcmVzdWx0O1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIC4uLnJlc3VsdCxcbiAgICBsb2FkTW9yZTogKG51bSkgPT4ge1xuICAgICAgcmV0dXJuIHJlc3VsdC5sb2FkTW9yZShudW0pO1xuICAgIH0sXG4gICAgaXNMb2FkaW5nOiByZXN1bHQuc3RhdHVzID09PSBcIkxvYWRpbmdGaXJzdFBhZ2VcIiA/IHRydWUgOiByZXN1bHQuc3RhdHVzID09PSBcIkxvYWRpbmdNb3JlXCIgPyB0cnVlIDogZmFsc2VcbiAgfTtcbn1cbmxldCBwYWdpbmF0aW9uSWQgPSAwO1xuZnVuY3Rpb24gbmV4dFBhZ2luYXRpb25JZCgpIHtcbiAgcGFnaW5hdGlvbklkKys7XG4gIHJldHVybiBwYWdpbmF0aW9uSWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzZXRQYWdpbmF0aW9uSWQoKSB7XG4gIHBhZ2luYXRpb25JZCA9IDA7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2VfcGFnaW5hdGVkX3F1ZXJ5Mi5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/use_paginated_query2.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/use_queries.js":
/*!***********************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/use_queries.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useQueries: () => (/* binding */ useQueries),\n/* harmony export */   useQueriesHelper: () => (/* binding */ useQueriesHelper)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./client.js */ \"(ssr)/./node_modules/convex/dist/esm/react/client.js\");\n/* harmony import */ var _queries_observer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./queries_observer.js */ \"(ssr)/./node_modules/convex/dist/esm/react/queries_observer.js\");\n/* harmony import */ var _use_subscription_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./use_subscription.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_subscription.js\");\n\n\n\n\n\nfunction useQueries(queries) {\n  const convex = (0,_client_js__WEBPACK_IMPORTED_MODULE_1__.useConvex)();\n  if (convex === void 0) {\n    throw new Error(\n      \"Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app\"\n    );\n  }\n  const createWatch = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    return (query, args, {\n      journal,\n      paginationOptions\n    }) => {\n      if (paginationOptions) {\n        return convex.watchPaginatedQuery(query, args, paginationOptions);\n      } else {\n        return convex.watchQuery(query, args, journal ? { journal } : {});\n      }\n    };\n  }, [convex]);\n  return useQueriesHelper(queries, createWatch);\n}\nfunction useQueriesHelper(queries, createWatch) {\n  const [observer] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => new _queries_observer_js__WEBPACK_IMPORTED_MODULE_2__.QueriesObserver(createWatch));\n  if (observer.createWatch !== createWatch) {\n    observer.setCreateWatch(createWatch);\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => () => observer.destroy(), [observer]);\n  const subscription = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(\n    () => ({\n      getCurrentValue: () => {\n        return observer.getLocalResults(queries);\n      },\n      subscribe: (callback) => {\n        observer.setQueries(queries);\n        return observer.subscribe(callback);\n      }\n    }),\n    [observer, queries]\n  );\n  return (0,_use_subscription_js__WEBPACK_IMPORTED_MODULE_3__.useSubscription)(subscription);\n}\n//# sourceMappingURL=use_queries.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L3VzZV9xdWVyaWVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFhO0FBQ3dDO0FBQ2I7QUFDZ0I7QUFDQTtBQUNqRDtBQUNQLGlCQUFpQixxREFBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhDQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsUUFBUTtBQUNSLDBEQUEwRCxVQUFVLElBQUk7QUFDeEU7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ087QUFDUCxxQkFBcUIsK0NBQVEsV0FBVyxpRUFBZTtBQUN2RDtBQUNBO0FBQ0E7QUFDQSxFQUFFLGdEQUFTO0FBQ1gsdUJBQXVCLDhDQUFPO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsU0FBUyxxRUFBZTtBQUN4QjtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHJlYWN0XFx1c2VfcXVlcmllcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUNvbnZleCB9IGZyb20gXCIuL2NsaWVudC5qc1wiO1xuaW1wb3J0IHsgUXVlcmllc09ic2VydmVyIH0gZnJvbSBcIi4vcXVlcmllc19vYnNlcnZlci5qc1wiO1xuaW1wb3J0IHsgdXNlU3Vic2NyaXB0aW9uIH0gZnJvbSBcIi4vdXNlX3N1YnNjcmlwdGlvbi5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVF1ZXJpZXMocXVlcmllcykge1xuICBjb25zdCBjb252ZXggPSB1c2VDb252ZXgoKTtcbiAgaWYgKGNvbnZleCA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJDb3VsZCBub3QgZmluZCBDb252ZXggY2xpZW50ISBgdXNlUXVlcnlgIG11c3QgYmUgdXNlZCBpbiB0aGUgUmVhY3QgY29tcG9uZW50IHRyZWUgdW5kZXIgYENvbnZleFByb3ZpZGVyYC4gRGlkIHlvdSBmb3JnZXQgaXQ/IFNlZSBodHRwczovL2RvY3MuY29udmV4LmRldi9xdWljay1zdGFydCNzZXQtdXAtY29udmV4LWluLXlvdXItcmVhY3QtYXBwXCJcbiAgICApO1xuICB9XG4gIGNvbnN0IGNyZWF0ZVdhdGNoID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIChxdWVyeSwgYXJncywge1xuICAgICAgam91cm5hbCxcbiAgICAgIHBhZ2luYXRpb25PcHRpb25zXG4gICAgfSkgPT4ge1xuICAgICAgaWYgKHBhZ2luYXRpb25PcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBjb252ZXgud2F0Y2hQYWdpbmF0ZWRRdWVyeShxdWVyeSwgYXJncywgcGFnaW5hdGlvbk9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbnZleC53YXRjaFF1ZXJ5KHF1ZXJ5LCBhcmdzLCBqb3VybmFsID8geyBqb3VybmFsIH0gOiB7fSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2NvbnZleF0pO1xuICByZXR1cm4gdXNlUXVlcmllc0hlbHBlcihxdWVyaWVzLCBjcmVhdGVXYXRjaCk7XG59XG5leHBvcnQgZnVuY3Rpb24gdXNlUXVlcmllc0hlbHBlcihxdWVyaWVzLCBjcmVhdGVXYXRjaCkge1xuICBjb25zdCBbb2JzZXJ2ZXJdID0gdXNlU3RhdGUoKCkgPT4gbmV3IFF1ZXJpZXNPYnNlcnZlcihjcmVhdGVXYXRjaCkpO1xuICBpZiAob2JzZXJ2ZXIuY3JlYXRlV2F0Y2ggIT09IGNyZWF0ZVdhdGNoKSB7XG4gICAgb2JzZXJ2ZXIuc2V0Q3JlYXRlV2F0Y2goY3JlYXRlV2F0Y2gpO1xuICB9XG4gIHVzZUVmZmVjdCgoKSA9PiAoKSA9PiBvYnNlcnZlci5kZXN0cm95KCksIFtvYnNlcnZlcl0pO1xuICBjb25zdCBzdWJzY3JpcHRpb24gPSB1c2VNZW1vKFxuICAgICgpID0+ICh7XG4gICAgICBnZXRDdXJyZW50VmFsdWU6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmVyLmdldExvY2FsUmVzdWx0cyhxdWVyaWVzKTtcbiAgICAgIH0sXG4gICAgICBzdWJzY3JpYmU6IChjYWxsYmFjaykgPT4ge1xuICAgICAgICBvYnNlcnZlci5zZXRRdWVyaWVzKHF1ZXJpZXMpO1xuICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuc3Vic2NyaWJlKGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICB9KSxcbiAgICBbb2JzZXJ2ZXIsIHF1ZXJpZXNdXG4gICk7XG4gIHJldHVybiB1c2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZV9xdWVyaWVzLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/use_queries.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/use_subscription.js":
/*!****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/use_subscription.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSubscription: () => (/* binding */ useSubscription)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n\n\nfunction useSubscription({\n  // (Synchronously) returns the current value of our subscription.\n  getCurrentValue,\n  // This function is passed an event handler to attach to the subscription.\n  // It should return an unsubscribe function that removes the handler.\n  subscribe\n}) {\n  const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => ({\n    getCurrentValue,\n    subscribe,\n    value: getCurrentValue()\n  }));\n  let valueToReturn = state.value;\n  if (state.getCurrentValue !== getCurrentValue || state.subscribe !== subscribe) {\n    valueToReturn = getCurrentValue();\n    setState({\n      getCurrentValue,\n      subscribe,\n      value: valueToReturn\n    });\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    let didUnsubscribe = false;\n    const checkForUpdates = () => {\n      if (didUnsubscribe) {\n        return;\n      }\n      setState((prevState) => {\n        if (prevState.getCurrentValue !== getCurrentValue || prevState.subscribe !== subscribe) {\n          return prevState;\n        }\n        const value = getCurrentValue();\n        if (prevState.value === value) {\n          return prevState;\n        }\n        return { ...prevState, value };\n      });\n    };\n    const unsubscribe = subscribe(checkForUpdates);\n    checkForUpdates();\n    return () => {\n      didUnsubscribe = true;\n      unsubscribe();\n    };\n  }, [getCurrentValue, subscribe]);\n  return valueToReturn;\n}\n//# sourceMappingURL=use_subscription.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L3VzZV9zdWJzY3JpcHRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBYTtBQUMrQjtBQUNyQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNEJBQTRCLCtDQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHJlYWN0XFx1c2Vfc3Vic2NyaXB0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVN1YnNjcmlwdGlvbih7XG4gIC8vIChTeW5jaHJvbm91c2x5KSByZXR1cm5zIHRoZSBjdXJyZW50IHZhbHVlIG9mIG91ciBzdWJzY3JpcHRpb24uXG4gIGdldEN1cnJlbnRWYWx1ZSxcbiAgLy8gVGhpcyBmdW5jdGlvbiBpcyBwYXNzZWQgYW4gZXZlbnQgaGFuZGxlciB0byBhdHRhY2ggdG8gdGhlIHN1YnNjcmlwdGlvbi5cbiAgLy8gSXQgc2hvdWxkIHJldHVybiBhbiB1bnN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IHJlbW92ZXMgdGhlIGhhbmRsZXIuXG4gIHN1YnNjcmliZVxufSkge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKCgpID0+ICh7XG4gICAgZ2V0Q3VycmVudFZhbHVlLFxuICAgIHN1YnNjcmliZSxcbiAgICB2YWx1ZTogZ2V0Q3VycmVudFZhbHVlKClcbiAgfSkpO1xuICBsZXQgdmFsdWVUb1JldHVybiA9IHN0YXRlLnZhbHVlO1xuICBpZiAoc3RhdGUuZ2V0Q3VycmVudFZhbHVlICE9PSBnZXRDdXJyZW50VmFsdWUgfHwgc3RhdGUuc3Vic2NyaWJlICE9PSBzdWJzY3JpYmUpIHtcbiAgICB2YWx1ZVRvUmV0dXJuID0gZ2V0Q3VycmVudFZhbHVlKCk7XG4gICAgc2V0U3RhdGUoe1xuICAgICAgZ2V0Q3VycmVudFZhbHVlLFxuICAgICAgc3Vic2NyaWJlLFxuICAgICAgdmFsdWU6IHZhbHVlVG9SZXR1cm5cbiAgICB9KTtcbiAgfVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBkaWRVbnN1YnNjcmliZSA9IGZhbHNlO1xuICAgIGNvbnN0IGNoZWNrRm9yVXBkYXRlcyA9ICgpID0+IHtcbiAgICAgIGlmIChkaWRVbnN1YnNjcmliZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZXRTdGF0ZSgocHJldlN0YXRlKSA9PiB7XG4gICAgICAgIGlmIChwcmV2U3RhdGUuZ2V0Q3VycmVudFZhbHVlICE9PSBnZXRDdXJyZW50VmFsdWUgfHwgcHJldlN0YXRlLnN1YnNjcmliZSAhPT0gc3Vic2NyaWJlKSB7XG4gICAgICAgICAgcmV0dXJuIHByZXZTdGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IGdldEN1cnJlbnRWYWx1ZSgpO1xuICAgICAgICBpZiAocHJldlN0YXRlLnZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBwcmV2U3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgLi4ucHJldlN0YXRlLCB2YWx1ZSB9O1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCB1bnN1YnNjcmliZSA9IHN1YnNjcmliZShjaGVja0ZvclVwZGF0ZXMpO1xuICAgIGNoZWNrRm9yVXBkYXRlcygpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkaWRVbnN1YnNjcmliZSA9IHRydWU7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgIH07XG4gIH0sIFtnZXRDdXJyZW50VmFsdWUsIHN1YnNjcmliZV0pO1xuICByZXR1cm4gdmFsdWVUb1JldHVybjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZV9zdWJzY3JpcHRpb24uanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/use_subscription.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/api.js":
/*!****************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/api.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   anyApi: () => (/* binding */ anyApi),\n/* harmony export */   filterApi: () => (/* binding */ filterApi),\n/* harmony export */   getFunctionName: () => (/* binding */ getFunctionName),\n/* harmony export */   justActions: () => (/* binding */ justActions),\n/* harmony export */   justInternal: () => (/* binding */ justInternal),\n/* harmony export */   justMutations: () => (/* binding */ justMutations),\n/* harmony export */   justPaginatedQueries: () => (/* binding */ justPaginatedQueries),\n/* harmony export */   justPublic: () => (/* binding */ justPublic),\n/* harmony export */   justQueries: () => (/* binding */ justQueries),\n/* harmony export */   justSchedulable: () => (/* binding */ justSchedulable),\n/* harmony export */   makeFunctionReference: () => (/* binding */ makeFunctionReference)\n/* harmony export */ });\n/* harmony import */ var _functionName_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./functionName.js */ \"(ssr)/./node_modules/convex/dist/esm/server/functionName.js\");\n/* harmony import */ var _components_paths_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/paths.js */ \"(ssr)/./node_modules/convex/dist/esm/server/components/paths.js\");\n\n\n\nfunction getFunctionName(functionReference) {\n  const address = (0,_components_paths_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionAddress)(functionReference);\n  if (address.name === void 0) {\n    if (address.functionHandle !== void 0) {\n      throw new Error(\n        `Expected function reference like \"api.file.func\" or \"internal.file.func\", but received function handle ${address.functionHandle}`\n      );\n    } else if (address.reference !== void 0) {\n      throw new Error(\n        `Expected function reference in the current component like \"api.file.func\" or \"internal.file.func\", but received reference ${address.reference}`\n      );\n    }\n    throw new Error(\n      `Expected function reference like \"api.file.func\" or \"internal.file.func\", but received ${JSON.stringify(address)}`\n    );\n  }\n  if (typeof functionReference === \"string\") return functionReference;\n  const name = functionReference[_functionName_js__WEBPACK_IMPORTED_MODULE_0__.functionName];\n  if (!name) {\n    throw new Error(`${functionReference} is not a functionReference`);\n  }\n  return name;\n}\nfunction makeFunctionReference(name) {\n  return { [_functionName_js__WEBPACK_IMPORTED_MODULE_0__.functionName]: name };\n}\nfunction createApi(pathParts = []) {\n  const handler = {\n    get(_, prop) {\n      if (typeof prop === \"string\") {\n        const newParts = [...pathParts, prop];\n        return createApi(newParts);\n      } else if (prop === _functionName_js__WEBPACK_IMPORTED_MODULE_0__.functionName) {\n        if (pathParts.length < 2) {\n          const found = [\"api\", ...pathParts].join(\".\");\n          throw new Error(\n            `API path is expected to be of the form \\`api.moduleName.functionName\\`. Found: \\`${found}\\``\n          );\n        }\n        const path = pathParts.slice(0, -1).join(\"/\");\n        const exportName = pathParts[pathParts.length - 1];\n        if (exportName === \"default\") {\n          return path;\n        } else {\n          return path + \":\" + exportName;\n        }\n      } else if (prop === Symbol.toStringTag) {\n        return \"FunctionReference\";\n      } else {\n        return void 0;\n      }\n    }\n  };\n  return new Proxy({}, handler);\n}\nfunction filterApi(api) {\n  return api;\n}\nfunction justInternal(api) {\n  return api;\n}\nfunction justPublic(api) {\n  return api;\n}\nfunction justQueries(api) {\n  return api;\n}\nfunction justMutations(api) {\n  return api;\n}\nfunction justActions(api) {\n  return api;\n}\nfunction justPaginatedQueries(api) {\n  return api;\n}\nfunction justSchedulable(api) {\n  return api;\n}\nconst anyApi = createApi();\n//# sourceMappingURL=api.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9hcGkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFhO0FBQ29DO0FBQ1U7QUFDcEQ7QUFDUCxrQkFBa0Isd0VBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLGtIQUFrSCx1QkFBdUI7QUFDekk7QUFDQSxNQUFNO0FBQ047QUFDQSxxSUFBcUksa0JBQWtCO0FBQ3ZKO0FBQ0E7QUFDQTtBQUNBLGdHQUFnRyx3QkFBd0I7QUFDeEg7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDBEQUFZO0FBQzdDO0FBQ0EsdUJBQXVCLG1CQUFtQjtBQUMxQztBQUNBO0FBQ0E7QUFDTztBQUNQLFdBQVcsQ0FBQywwREFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsa0JBQWtCLDBEQUFZO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLGdHQUFnRyxNQUFNO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUCIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxzZXJ2ZXJcXGFwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCB7IGZ1bmN0aW9uTmFtZSB9IGZyb20gXCIuL2Z1bmN0aW9uTmFtZS5qc1wiO1xuaW1wb3J0IHsgZ2V0RnVuY3Rpb25BZGRyZXNzIH0gZnJvbSBcIi4vY29tcG9uZW50cy9wYXRocy5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZ1bmN0aW9uTmFtZShmdW5jdGlvblJlZmVyZW5jZSkge1xuICBjb25zdCBhZGRyZXNzID0gZ2V0RnVuY3Rpb25BZGRyZXNzKGZ1bmN0aW9uUmVmZXJlbmNlKTtcbiAgaWYgKGFkZHJlc3MubmFtZSA9PT0gdm9pZCAwKSB7XG4gICAgaWYgKGFkZHJlc3MuZnVuY3Rpb25IYW5kbGUgIT09IHZvaWQgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgRXhwZWN0ZWQgZnVuY3Rpb24gcmVmZXJlbmNlIGxpa2UgXCJhcGkuZmlsZS5mdW5jXCIgb3IgXCJpbnRlcm5hbC5maWxlLmZ1bmNcIiwgYnV0IHJlY2VpdmVkIGZ1bmN0aW9uIGhhbmRsZSAke2FkZHJlc3MuZnVuY3Rpb25IYW5kbGV9YFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGFkZHJlc3MucmVmZXJlbmNlICE9PSB2b2lkIDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEV4cGVjdGVkIGZ1bmN0aW9uIHJlZmVyZW5jZSBpbiB0aGUgY3VycmVudCBjb21wb25lbnQgbGlrZSBcImFwaS5maWxlLmZ1bmNcIiBvciBcImludGVybmFsLmZpbGUuZnVuY1wiLCBidXQgcmVjZWl2ZWQgcmVmZXJlbmNlICR7YWRkcmVzcy5yZWZlcmVuY2V9YFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEV4cGVjdGVkIGZ1bmN0aW9uIHJlZmVyZW5jZSBsaWtlIFwiYXBpLmZpbGUuZnVuY1wiIG9yIFwiaW50ZXJuYWwuZmlsZS5mdW5jXCIsIGJ1dCByZWNlaXZlZCAke0pTT04uc3RyaW5naWZ5KGFkZHJlc3MpfWBcbiAgICApO1xuICB9XG4gIGlmICh0eXBlb2YgZnVuY3Rpb25SZWZlcmVuY2UgPT09IFwic3RyaW5nXCIpIHJldHVybiBmdW5jdGlvblJlZmVyZW5jZTtcbiAgY29uc3QgbmFtZSA9IGZ1bmN0aW9uUmVmZXJlbmNlW2Z1bmN0aW9uTmFtZV07XG4gIGlmICghbmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtmdW5jdGlvblJlZmVyZW5jZX0gaXMgbm90IGEgZnVuY3Rpb25SZWZlcmVuY2VgKTtcbiAgfVxuICByZXR1cm4gbmFtZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlRnVuY3Rpb25SZWZlcmVuY2UobmFtZSkge1xuICByZXR1cm4geyBbZnVuY3Rpb25OYW1lXTogbmFtZSB9O1xufVxuZnVuY3Rpb24gY3JlYXRlQXBpKHBhdGhQYXJ0cyA9IFtdKSB7XG4gIGNvbnN0IGhhbmRsZXIgPSB7XG4gICAgZ2V0KF8sIHByb3ApIHtcbiAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBuZXdQYXJ0cyA9IFsuLi5wYXRoUGFydHMsIHByb3BdO1xuICAgICAgICByZXR1cm4gY3JlYXRlQXBpKG5ld1BhcnRzKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gZnVuY3Rpb25OYW1lKSB7XG4gICAgICAgIGlmIChwYXRoUGFydHMubGVuZ3RoIDwgMikge1xuICAgICAgICAgIGNvbnN0IGZvdW5kID0gW1wiYXBpXCIsIC4uLnBhdGhQYXJ0c10uam9pbihcIi5cIik7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEFQSSBwYXRoIGlzIGV4cGVjdGVkIHRvIGJlIG9mIHRoZSBmb3JtIFxcYGFwaS5tb2R1bGVOYW1lLmZ1bmN0aW9uTmFtZVxcYC4gRm91bmQ6IFxcYCR7Zm91bmR9XFxgYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0aCA9IHBhdGhQYXJ0cy5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgIGNvbnN0IGV4cG9ydE5hbWUgPSBwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoZXhwb3J0TmFtZSA9PT0gXCJkZWZhdWx0XCIpIHtcbiAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcGF0aCArIFwiOlwiICsgZXhwb3J0TmFtZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiAgICAgICAgcmV0dXJuIFwiRnVuY3Rpb25SZWZlcmVuY2VcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICByZXR1cm4gbmV3IFByb3h5KHt9LCBoYW5kbGVyKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJBcGkoYXBpKSB7XG4gIHJldHVybiBhcGk7XG59XG5leHBvcnQgZnVuY3Rpb24ganVzdEludGVybmFsKGFwaSkge1xuICByZXR1cm4gYXBpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGp1c3RQdWJsaWMoYXBpKSB7XG4gIHJldHVybiBhcGk7XG59XG5leHBvcnQgZnVuY3Rpb24ganVzdFF1ZXJpZXMoYXBpKSB7XG4gIHJldHVybiBhcGk7XG59XG5leHBvcnQgZnVuY3Rpb24ganVzdE11dGF0aW9ucyhhcGkpIHtcbiAgcmV0dXJuIGFwaTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBqdXN0QWN0aW9ucyhhcGkpIHtcbiAgcmV0dXJuIGFwaTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBqdXN0UGFnaW5hdGVkUXVlcmllcyhhcGkpIHtcbiAgcmV0dXJuIGFwaTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBqdXN0U2NoZWR1bGFibGUoYXBpKSB7XG4gIHJldHVybiBhcGk7XG59XG5leHBvcnQgY29uc3QgYW55QXBpID0gY3JlYXRlQXBpKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcGkuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/api.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/components/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/components/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   componentsGeneric: () => (/* binding */ componentsGeneric),\n/* harmony export */   createFunctionHandle: () => (/* binding */ createFunctionHandle),\n/* harmony export */   currentSystemUdfInComponent: () => (/* binding */ currentSystemUdfInComponent),\n/* harmony export */   defineApp: () => (/* binding */ defineApp),\n/* harmony export */   defineComponent: () => (/* binding */ defineComponent),\n/* harmony export */   getFunctionAddress: () => (/* reexport safe */ _paths_js__WEBPACK_IMPORTED_MODULE_3__.getFunctionAddress)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _impl_syscall_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../impl/syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _paths_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./paths.js */ \"(ssr)/./node_modules/convex/dist/esm/server/components/paths.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\nasync function createFunctionHandle(functionReference) {\n  const address = (0,_paths_js__WEBPACK_IMPORTED_MODULE_3__.getFunctionAddress)(functionReference);\n  return await (0,_impl_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/createFunctionHandle\", {\n    ...address,\n    version: _index_js__WEBPACK_IMPORTED_MODULE_1__.version\n  });\n}\nclass InstalledComponent {\n  constructor(definition, name) {\n    /**\n     * @internal\n     */\n    __publicField(this, \"_definition\");\n    /**\n     * @internal\n     */\n    __publicField(this, \"_name\");\n    this._definition = definition;\n    this._name = name;\n    (0,_paths_js__WEBPACK_IMPORTED_MODULE_3__.setReferencePath)(this, `_reference/childComponent/${name}`);\n  }\n  get exports() {\n    return createExports(this._name, []);\n  }\n}\nfunction createExports(name, pathParts) {\n  const handler = {\n    get(_, prop) {\n      if (typeof prop === \"string\") {\n        const newParts = [...pathParts, prop];\n        return createExports(name, newParts);\n      } else if (prop === _paths_js__WEBPACK_IMPORTED_MODULE_3__.toReferencePath) {\n        let reference = `_reference/childComponent/${name}`;\n        for (const part of pathParts) {\n          reference += `/${part}`;\n        }\n        return reference;\n      } else {\n        return void 0;\n      }\n    }\n  };\n  return new Proxy({}, handler);\n}\nfunction use(definition, options) {\n  const importedComponentDefinition = definition;\n  if (typeof importedComponentDefinition.componentDefinitionPath !== \"string\") {\n    throw new Error(\n      \"Component definition does not have the required componentDefinitionPath property. This code only works in Convex runtime.\"\n    );\n  }\n  const name = options?.name ?? // added recently\n  importedComponentDefinition.defaultName ?? // can be removed once backend is out\n  importedComponentDefinition.componentDefinitionPath.split(\"/\").pop();\n  if (typeof name !== \"string\") {\n    throw new Error(\n      `Component name must be a string. Received: ${typeof name}`\n    );\n  }\n  if (name.length === 0) {\n    throw new Error(\"Component name cannot be empty.\");\n  }\n  this._childComponents.push([name, importedComponentDefinition, {}]);\n  return new InstalledComponent(definition, name);\n}\nfunction exportAppForAnalysis() {\n  const definitionType = { type: \"app\" };\n  const childComponents = serializeChildComponents(this._childComponents);\n  return {\n    definitionType,\n    childComponents,\n    httpMounts: {},\n    exports: serializeExportTree(this._exportTree)\n  };\n}\nfunction serializeExportTree(tree) {\n  const branch = [];\n  for (const [key, child] of Object.entries(tree)) {\n    let node;\n    if (typeof child === \"string\") {\n      node = { type: \"leaf\", leaf: child };\n    } else {\n      node = serializeExportTree(child);\n    }\n    branch.push([key, node]);\n  }\n  return { type: \"branch\", branch };\n}\nfunction serializeChildComponents(childComponents) {\n  return childComponents.map(([name, definition, p]) => {\n    let args = null;\n    if (p !== null) {\n      args = [];\n      for (const [name2, value] of Object.entries(p)) {\n        if (value !== void 0) {\n          args.push([\n            name2,\n            { type: \"value\", value: JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(value)) }\n          ]);\n        }\n      }\n    }\n    const path = definition.componentDefinitionPath;\n    if (!path)\n      throw new Error(\n        \"no .componentPath for component definition \" + JSON.stringify(definition, null, 2)\n      );\n    return {\n      name,\n      path,\n      args\n    };\n  });\n}\nfunction exportComponentForAnalysis() {\n  const args = Object.entries(\n    this._args\n  ).map(([name, validator]) => [\n    name,\n    {\n      type: \"value\",\n      value: JSON.stringify(validator.json)\n    }\n  ]);\n  const definitionType = {\n    type: \"childComponent\",\n    name: this._name,\n    args\n  };\n  const childComponents = serializeChildComponents(this._childComponents);\n  return {\n    name: this._name,\n    definitionType,\n    childComponents,\n    httpMounts: {},\n    exports: serializeExportTree(this._exportTree)\n  };\n}\nfunction defineComponent(name) {\n  const ret = {\n    _isRoot: false,\n    _name: name,\n    _args: {},\n    _childComponents: [],\n    _exportTree: {},\n    _onInitCallbacks: {},\n    export: exportComponentForAnalysis,\n    use,\n    // pretend to conform to ComponentDefinition, which temporarily expects __args\n    ...{}\n  };\n  return ret;\n}\nfunction defineApp() {\n  const ret = {\n    _isRoot: true,\n    _childComponents: [],\n    _exportTree: {},\n    export: exportAppForAnalysis,\n    use\n  };\n  return ret;\n}\nfunction currentSystemUdfInComponent(componentId) {\n  return {\n    [_paths_js__WEBPACK_IMPORTED_MODULE_3__.toReferencePath]: `_reference/currentSystemUdfInComponent/${componentId}`\n  };\n}\nfunction createChildComponents(root, pathParts) {\n  const handler = {\n    get(_, prop) {\n      if (typeof prop === \"string\") {\n        const newParts = [...pathParts, prop];\n        return createChildComponents(root, newParts);\n      } else if (prop === _paths_js__WEBPACK_IMPORTED_MODULE_3__.toReferencePath) {\n        if (pathParts.length < 1) {\n          const found = [root, ...pathParts].join(\".\");\n          throw new Error(\n            `API path is expected to be of the form \\`${root}.childComponent.functionName\\`. Found: \\`${found}\\``\n          );\n        }\n        return `_reference/childComponent/` + pathParts.join(\"/\");\n      } else {\n        return void 0;\n      }\n    }\n  };\n  return new Proxy({}, handler);\n}\nconst componentsGeneric = () => createChildComponents(\"components\", []);\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9jb21wb25lbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNxRDtBQUNaO0FBQ2dCO0FBS3JDO0FBQzRCO0FBQ3pDO0FBQ1Asa0JBQWtCLDZEQUFrQjtBQUNwQyxlQUFlLHFFQUFtQjtBQUNsQztBQUNBLFdBQVc7QUFDWCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDJEQUFnQixvQ0FBb0MsS0FBSztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrQkFBa0Isc0RBQWU7QUFDekMscURBQXFELEtBQUs7QUFDMUQ7QUFDQSwyQkFBMkIsS0FBSztBQUNoQztBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELFlBQVk7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRTtBQUNuRTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHFDQUFxQyw4REFBWTtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLG1CQUFtQjtBQUNuQix3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLEtBQUssc0RBQWUsNkNBQTZDLFlBQVk7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsa0JBQWtCLHNEQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxLQUFLLDJDQUEyQyxNQUFNO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNPO0FBQ1AiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxjb21wb25lbnRzXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG5pbXBvcnQgeyBjb252ZXhUb0pzb24gfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uLy4uL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBwZXJmb3JtQXN5bmNTeXNjYWxsIH0gZnJvbSBcIi4uL2ltcGwvc3lzY2FsbC5qc1wiO1xuaW1wb3J0IHtcbiAgZ2V0RnVuY3Rpb25BZGRyZXNzLFxuICBzZXRSZWZlcmVuY2VQYXRoLFxuICB0b1JlZmVyZW5jZVBhdGhcbn0gZnJvbSBcIi4vcGF0aHMuanNcIjtcbmV4cG9ydCB7IGdldEZ1bmN0aW9uQWRkcmVzcyB9IGZyb20gXCIuL3BhdGhzLmpzXCI7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRnVuY3Rpb25IYW5kbGUoZnVuY3Rpb25SZWZlcmVuY2UpIHtcbiAgY29uc3QgYWRkcmVzcyA9IGdldEZ1bmN0aW9uQWRkcmVzcyhmdW5jdGlvblJlZmVyZW5jZSk7XG4gIHJldHVybiBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL2NyZWF0ZUZ1bmN0aW9uSGFuZGxlXCIsIHtcbiAgICAuLi5hZGRyZXNzLFxuICAgIHZlcnNpb25cbiAgfSk7XG59XG5jbGFzcyBJbnN0YWxsZWRDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcihkZWZpbml0aW9uLCBuYW1lKSB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9kZWZpbml0aW9uXCIpO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfbmFtZVwiKTtcbiAgICB0aGlzLl9kZWZpbml0aW9uID0gZGVmaW5pdGlvbjtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICBzZXRSZWZlcmVuY2VQYXRoKHRoaXMsIGBfcmVmZXJlbmNlL2NoaWxkQ29tcG9uZW50LyR7bmFtZX1gKTtcbiAgfVxuICBnZXQgZXhwb3J0cygpIHtcbiAgICByZXR1cm4gY3JlYXRlRXhwb3J0cyh0aGlzLl9uYW1lLCBbXSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZUV4cG9ydHMobmFtZSwgcGF0aFBhcnRzKSB7XG4gIGNvbnN0IGhhbmRsZXIgPSB7XG4gICAgZ2V0KF8sIHByb3ApIHtcbiAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBuZXdQYXJ0cyA9IFsuLi5wYXRoUGFydHMsIHByb3BdO1xuICAgICAgICByZXR1cm4gY3JlYXRlRXhwb3J0cyhuYW1lLCBuZXdQYXJ0cyk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IHRvUmVmZXJlbmNlUGF0aCkge1xuICAgICAgICBsZXQgcmVmZXJlbmNlID0gYF9yZWZlcmVuY2UvY2hpbGRDb21wb25lbnQvJHtuYW1lfWA7XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXRoUGFydHMpIHtcbiAgICAgICAgICByZWZlcmVuY2UgKz0gYC8ke3BhcnR9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVmZXJlbmNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiBuZXcgUHJveHkoe30sIGhhbmRsZXIpO1xufVxuZnVuY3Rpb24gdXNlKGRlZmluaXRpb24sIG9wdGlvbnMpIHtcbiAgY29uc3QgaW1wb3J0ZWRDb21wb25lbnREZWZpbml0aW9uID0gZGVmaW5pdGlvbjtcbiAgaWYgKHR5cGVvZiBpbXBvcnRlZENvbXBvbmVudERlZmluaXRpb24uY29tcG9uZW50RGVmaW5pdGlvblBhdGggIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIkNvbXBvbmVudCBkZWZpbml0aW9uIGRvZXMgbm90IGhhdmUgdGhlIHJlcXVpcmVkIGNvbXBvbmVudERlZmluaXRpb25QYXRoIHByb3BlcnR5LiBUaGlzIGNvZGUgb25seSB3b3JrcyBpbiBDb252ZXggcnVudGltZS5cIlxuICAgICk7XG4gIH1cbiAgY29uc3QgbmFtZSA9IG9wdGlvbnM/Lm5hbWUgPz8gLy8gYWRkZWQgcmVjZW50bHlcbiAgaW1wb3J0ZWRDb21wb25lbnREZWZpbml0aW9uLmRlZmF1bHROYW1lID8/IC8vIGNhbiBiZSByZW1vdmVkIG9uY2UgYmFja2VuZCBpcyBvdXRcbiAgaW1wb3J0ZWRDb21wb25lbnREZWZpbml0aW9uLmNvbXBvbmVudERlZmluaXRpb25QYXRoLnNwbGl0KFwiL1wiKS5wb3AoKTtcbiAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYENvbXBvbmVudCBuYW1lIG11c3QgYmUgYSBzdHJpbmcuIFJlY2VpdmVkOiAke3R5cGVvZiBuYW1lfWBcbiAgICApO1xuICB9XG4gIGlmIChuYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvbXBvbmVudCBuYW1lIGNhbm5vdCBiZSBlbXB0eS5cIik7XG4gIH1cbiAgdGhpcy5fY2hpbGRDb21wb25lbnRzLnB1c2goW25hbWUsIGltcG9ydGVkQ29tcG9uZW50RGVmaW5pdGlvbiwge31dKTtcbiAgcmV0dXJuIG5ldyBJbnN0YWxsZWRDb21wb25lbnQoZGVmaW5pdGlvbiwgbmFtZSk7XG59XG5mdW5jdGlvbiBleHBvcnRBcHBGb3JBbmFseXNpcygpIHtcbiAgY29uc3QgZGVmaW5pdGlvblR5cGUgPSB7IHR5cGU6IFwiYXBwXCIgfTtcbiAgY29uc3QgY2hpbGRDb21wb25lbnRzID0gc2VyaWFsaXplQ2hpbGRDb21wb25lbnRzKHRoaXMuX2NoaWxkQ29tcG9uZW50cyk7XG4gIHJldHVybiB7XG4gICAgZGVmaW5pdGlvblR5cGUsXG4gICAgY2hpbGRDb21wb25lbnRzLFxuICAgIGh0dHBNb3VudHM6IHt9LFxuICAgIGV4cG9ydHM6IHNlcmlhbGl6ZUV4cG9ydFRyZWUodGhpcy5fZXhwb3J0VHJlZSlcbiAgfTtcbn1cbmZ1bmN0aW9uIHNlcmlhbGl6ZUV4cG9ydFRyZWUodHJlZSkge1xuICBjb25zdCBicmFuY2ggPSBbXTtcbiAgZm9yIChjb25zdCBba2V5LCBjaGlsZF0gb2YgT2JqZWN0LmVudHJpZXModHJlZSkpIHtcbiAgICBsZXQgbm9kZTtcbiAgICBpZiAodHlwZW9mIGNoaWxkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBub2RlID0geyB0eXBlOiBcImxlYWZcIiwgbGVhZjogY2hpbGQgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZSA9IHNlcmlhbGl6ZUV4cG9ydFRyZWUoY2hpbGQpO1xuICAgIH1cbiAgICBicmFuY2gucHVzaChba2V5LCBub2RlXSk7XG4gIH1cbiAgcmV0dXJuIHsgdHlwZTogXCJicmFuY2hcIiwgYnJhbmNoIH07XG59XG5mdW5jdGlvbiBzZXJpYWxpemVDaGlsZENvbXBvbmVudHMoY2hpbGRDb21wb25lbnRzKSB7XG4gIHJldHVybiBjaGlsZENvbXBvbmVudHMubWFwKChbbmFtZSwgZGVmaW5pdGlvbiwgcF0pID0+IHtcbiAgICBsZXQgYXJncyA9IG51bGw7XG4gICAgaWYgKHAgIT09IG51bGwpIHtcbiAgICAgIGFyZ3MgPSBbXTtcbiAgICAgIGZvciAoY29uc3QgW25hbWUyLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocCkpIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICBhcmdzLnB1c2goW1xuICAgICAgICAgICAgbmFtZTIsXG4gICAgICAgICAgICB7IHR5cGU6IFwidmFsdWVcIiwgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGNvbnZleFRvSnNvbih2YWx1ZSkpIH1cbiAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwYXRoID0gZGVmaW5pdGlvbi5jb21wb25lbnREZWZpbml0aW9uUGF0aDtcbiAgICBpZiAoIXBhdGgpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwibm8gLmNvbXBvbmVudFBhdGggZm9yIGNvbXBvbmVudCBkZWZpbml0aW9uIFwiICsgSlNPTi5zdHJpbmdpZnkoZGVmaW5pdGlvbiwgbnVsbCwgMilcbiAgICAgICk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWUsXG4gICAgICBwYXRoLFxuICAgICAgYXJnc1xuICAgIH07XG4gIH0pO1xufVxuZnVuY3Rpb24gZXhwb3J0Q29tcG9uZW50Rm9yQW5hbHlzaXMoKSB7XG4gIGNvbnN0IGFyZ3MgPSBPYmplY3QuZW50cmllcyhcbiAgICB0aGlzLl9hcmdzXG4gICkubWFwKChbbmFtZSwgdmFsaWRhdG9yXSkgPT4gW1xuICAgIG5hbWUsXG4gICAge1xuICAgICAgdHlwZTogXCJ2YWx1ZVwiLFxuICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHZhbGlkYXRvci5qc29uKVxuICAgIH1cbiAgXSk7XG4gIGNvbnN0IGRlZmluaXRpb25UeXBlID0ge1xuICAgIHR5cGU6IFwiY2hpbGRDb21wb25lbnRcIixcbiAgICBuYW1lOiB0aGlzLl9uYW1lLFxuICAgIGFyZ3NcbiAgfTtcbiAgY29uc3QgY2hpbGRDb21wb25lbnRzID0gc2VyaWFsaXplQ2hpbGRDb21wb25lbnRzKHRoaXMuX2NoaWxkQ29tcG9uZW50cyk7XG4gIHJldHVybiB7XG4gICAgbmFtZTogdGhpcy5fbmFtZSxcbiAgICBkZWZpbml0aW9uVHlwZSxcbiAgICBjaGlsZENvbXBvbmVudHMsXG4gICAgaHR0cE1vdW50czoge30sXG4gICAgZXhwb3J0czogc2VyaWFsaXplRXhwb3J0VHJlZSh0aGlzLl9leHBvcnRUcmVlKVxuICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZUNvbXBvbmVudChuYW1lKSB7XG4gIGNvbnN0IHJldCA9IHtcbiAgICBfaXNSb290OiBmYWxzZSxcbiAgICBfbmFtZTogbmFtZSxcbiAgICBfYXJnczoge30sXG4gICAgX2NoaWxkQ29tcG9uZW50czogW10sXG4gICAgX2V4cG9ydFRyZWU6IHt9LFxuICAgIF9vbkluaXRDYWxsYmFja3M6IHt9LFxuICAgIGV4cG9ydDogZXhwb3J0Q29tcG9uZW50Rm9yQW5hbHlzaXMsXG4gICAgdXNlLFxuICAgIC8vIHByZXRlbmQgdG8gY29uZm9ybSB0byBDb21wb25lbnREZWZpbml0aW9uLCB3aGljaCB0ZW1wb3JhcmlseSBleHBlY3RzIF9fYXJnc1xuICAgIC4uLnt9XG4gIH07XG4gIHJldHVybiByZXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lQXBwKCkge1xuICBjb25zdCByZXQgPSB7XG4gICAgX2lzUm9vdDogdHJ1ZSxcbiAgICBfY2hpbGRDb21wb25lbnRzOiBbXSxcbiAgICBfZXhwb3J0VHJlZToge30sXG4gICAgZXhwb3J0OiBleHBvcnRBcHBGb3JBbmFseXNpcyxcbiAgICB1c2VcbiAgfTtcbiAgcmV0dXJuIHJldDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjdXJyZW50U3lzdGVtVWRmSW5Db21wb25lbnQoY29tcG9uZW50SWQpIHtcbiAgcmV0dXJuIHtcbiAgICBbdG9SZWZlcmVuY2VQYXRoXTogYF9yZWZlcmVuY2UvY3VycmVudFN5c3RlbVVkZkluQ29tcG9uZW50LyR7Y29tcG9uZW50SWR9YFxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlQ2hpbGRDb21wb25lbnRzKHJvb3QsIHBhdGhQYXJ0cykge1xuICBjb25zdCBoYW5kbGVyID0ge1xuICAgIGdldChfLCBwcm9wKSB7XG4gICAgICBpZiAodHlwZW9mIHByb3AgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgbmV3UGFydHMgPSBbLi4ucGF0aFBhcnRzLCBwcm9wXTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUNoaWxkQ29tcG9uZW50cyhyb290LCBuZXdQYXJ0cyk7XG4gICAgICB9IGVsc2UgaWYgKHByb3AgPT09IHRvUmVmZXJlbmNlUGF0aCkge1xuICAgICAgICBpZiAocGF0aFBhcnRzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICBjb25zdCBmb3VuZCA9IFtyb290LCAuLi5wYXRoUGFydHNdLmpvaW4oXCIuXCIpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBBUEkgcGF0aCBpcyBleHBlY3RlZCB0byBiZSBvZiB0aGUgZm9ybSBcXGAke3Jvb3R9LmNoaWxkQ29tcG9uZW50LmZ1bmN0aW9uTmFtZVxcYC4gRm91bmQ6IFxcYCR7Zm91bmR9XFxgYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBfcmVmZXJlbmNlL2NoaWxkQ29tcG9uZW50L2AgKyBwYXRoUGFydHMuam9pbihcIi9cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgcmV0dXJuIG5ldyBQcm94eSh7fSwgaGFuZGxlcik7XG59XG5leHBvcnQgY29uc3QgY29tcG9uZW50c0dlbmVyaWMgPSAoKSA9PiBjcmVhdGVDaGlsZENvbXBvbmVudHMoXCJjb21wb25lbnRzXCIsIFtdKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/components/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/components/paths.js":
/*!*****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/components/paths.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractReferencePath: () => (/* binding */ extractReferencePath),\n/* harmony export */   getFunctionAddress: () => (/* binding */ getFunctionAddress),\n/* harmony export */   isFunctionHandle: () => (/* binding */ isFunctionHandle),\n/* harmony export */   setReferencePath: () => (/* binding */ setReferencePath),\n/* harmony export */   toReferencePath: () => (/* binding */ toReferencePath)\n/* harmony export */ });\n/* harmony import */ var _functionName_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../functionName.js */ \"(ssr)/./node_modules/convex/dist/esm/server/functionName.js\");\n\n\nconst toReferencePath = Symbol.for(\"toReferencePath\");\nfunction setReferencePath(obj, value) {\n  obj[toReferencePath] = value;\n}\nfunction extractReferencePath(reference) {\n  return reference[toReferencePath] ?? null;\n}\nfunction isFunctionHandle(s) {\n  return s.startsWith(\"function://\");\n}\nfunction getFunctionAddress(functionReference) {\n  let functionAddress;\n  if (typeof functionReference === \"string\") {\n    if (isFunctionHandle(functionReference)) {\n      functionAddress = { functionHandle: functionReference };\n    } else {\n      functionAddress = { name: functionReference };\n    }\n  } else if (functionReference[_functionName_js__WEBPACK_IMPORTED_MODULE_0__.functionName]) {\n    functionAddress = { name: functionReference[_functionName_js__WEBPACK_IMPORTED_MODULE_0__.functionName] };\n  } else {\n    const referencePath = extractReferencePath(functionReference);\n    if (!referencePath) {\n      throw new Error(`${functionReference} is not a functionReference`);\n    }\n    functionAddress = { reference: referencePath };\n  }\n  return functionAddress;\n}\n//# sourceMappingURL=paths.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9jb21wb25lbnRzL3BhdGhzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFhO0FBQ3FDO0FBQzNDO0FBQ0E7QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUIsTUFBTTtBQUNOLDBCQUEwQjtBQUMxQjtBQUNBLElBQUksMkJBQTJCLDBEQUFZO0FBQzNDLHdCQUF3Qix3QkFBd0IsMERBQVk7QUFDNUQsSUFBSTtBQUNKO0FBQ0E7QUFDQSx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHNlcnZlclxcY29tcG9uZW50c1xccGF0aHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5pbXBvcnQgeyBmdW5jdGlvbk5hbWUgfSBmcm9tIFwiLi4vZnVuY3Rpb25OYW1lLmpzXCI7XG5leHBvcnQgY29uc3QgdG9SZWZlcmVuY2VQYXRoID0gU3ltYm9sLmZvcihcInRvUmVmZXJlbmNlUGF0aFwiKTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRSZWZlcmVuY2VQYXRoKG9iaiwgdmFsdWUpIHtcbiAgb2JqW3RvUmVmZXJlbmNlUGF0aF0gPSB2YWx1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0UmVmZXJlbmNlUGF0aChyZWZlcmVuY2UpIHtcbiAgcmV0dXJuIHJlZmVyZW5jZVt0b1JlZmVyZW5jZVBhdGhdID8/IG51bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbkhhbmRsZShzKSB7XG4gIHJldHVybiBzLnN0YXJ0c1dpdGgoXCJmdW5jdGlvbjovL1wiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRGdW5jdGlvbkFkZHJlc3MoZnVuY3Rpb25SZWZlcmVuY2UpIHtcbiAgbGV0IGZ1bmN0aW9uQWRkcmVzcztcbiAgaWYgKHR5cGVvZiBmdW5jdGlvblJlZmVyZW5jZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChpc0Z1bmN0aW9uSGFuZGxlKGZ1bmN0aW9uUmVmZXJlbmNlKSkge1xuICAgICAgZnVuY3Rpb25BZGRyZXNzID0geyBmdW5jdGlvbkhhbmRsZTogZnVuY3Rpb25SZWZlcmVuY2UgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnVuY3Rpb25BZGRyZXNzID0geyBuYW1lOiBmdW5jdGlvblJlZmVyZW5jZSB9O1xuICAgIH1cbiAgfSBlbHNlIGlmIChmdW5jdGlvblJlZmVyZW5jZVtmdW5jdGlvbk5hbWVdKSB7XG4gICAgZnVuY3Rpb25BZGRyZXNzID0geyBuYW1lOiBmdW5jdGlvblJlZmVyZW5jZVtmdW5jdGlvbk5hbWVdIH07XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcmVmZXJlbmNlUGF0aCA9IGV4dHJhY3RSZWZlcmVuY2VQYXRoKGZ1bmN0aW9uUmVmZXJlbmNlKTtcbiAgICBpZiAoIXJlZmVyZW5jZVBhdGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgJHtmdW5jdGlvblJlZmVyZW5jZX0gaXMgbm90IGEgZnVuY3Rpb25SZWZlcmVuY2VgKTtcbiAgICB9XG4gICAgZnVuY3Rpb25BZGRyZXNzID0geyByZWZlcmVuY2U6IHJlZmVyZW5jZVBhdGggfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb25BZGRyZXNzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGF0aHMuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/components/paths.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/cron.js":
/*!*****************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/cron.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Crons: () => (/* binding */ Crons),\n/* harmony export */   cronJobs: () => (/* binding */ cronJobs)\n/* harmony export */ });\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\nconst DAYS_OF_WEEK = [\n  \"sunday\",\n  \"monday\",\n  \"tuesday\",\n  \"wednesday\",\n  \"thursday\",\n  \"friday\",\n  \"saturday\"\n];\nconst cronJobs = () => new Crons();\nfunction validateIntervalNumber(n) {\n  if (!Number.isInteger(n) || n <= 0) {\n    throw new Error(\"Interval must be an integer greater than 0\");\n  }\n}\nfunction validatedDayOfMonth(n) {\n  if (!Number.isInteger(n) || n < 1 || n > 31) {\n    throw new Error(\"Day of month must be an integer from 1 to 31\");\n  }\n  return n;\n}\nfunction validatedDayOfWeek(s) {\n  if (!DAYS_OF_WEEK.includes(s)) {\n    throw new Error('Day of week must be a string like \"monday\".');\n  }\n  return s;\n}\nfunction validatedHourOfDay(n) {\n  if (!Number.isInteger(n) || n < 0 || n > 23) {\n    throw new Error(\"Hour of day must be an integer from 0 to 23\");\n  }\n  return n;\n}\nfunction validatedMinuteOfHour(n) {\n  if (!Number.isInteger(n) || n < 0 || n > 59) {\n    throw new Error(\"Minute of hour must be an integer from 0 to 59\");\n  }\n  return n;\n}\nfunction validatedCronString(s) {\n  return s;\n}\nfunction validatedCronIdentifier(s) {\n  if (!s.match(/^[ -~]*$/)) {\n    throw new Error(\n      `Invalid cron identifier ${s}: use ASCII letters that are not control characters`\n    );\n  }\n  return s;\n}\nclass Crons {\n  constructor() {\n    __publicField(this, \"crons\");\n    __publicField(this, \"isCrons\");\n    this.isCrons = true;\n    this.crons = {};\n  }\n  /** @internal */\n  schedule(cronIdentifier, schedule, functionReference, args) {\n    const cronArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args);\n    validatedCronIdentifier(cronIdentifier);\n    if (cronIdentifier in this.crons) {\n      throw new Error(`Cron identifier registered twice: ${cronIdentifier}`);\n    }\n    this.crons[cronIdentifier] = {\n      name: (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(functionReference),\n      args: [(0,_values_index_js__WEBPACK_IMPORTED_MODULE_2__.convexToJson)(cronArgs)],\n      schedule\n    };\n  }\n  /**\n   * Schedule a mutation or action to run at some interval.\n   *\n   * ```js\n   * crons.interval(\"Clear presence data\", {seconds: 30}, api.presence.clear);\n   * ```\n   *\n   * @param identifier - A unique name for this scheduled job.\n   * @param schedule - The time between runs for this scheduled job.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */\n  interval(cronIdentifier, schedule, functionReference, ...args) {\n    const s = schedule;\n    const hasSeconds = +(\"seconds\" in s && s.seconds !== void 0);\n    const hasMinutes = +(\"minutes\" in s && s.minutes !== void 0);\n    const hasHours = +(\"hours\" in s && s.hours !== void 0);\n    const total = hasSeconds + hasMinutes + hasHours;\n    if (total !== 1) {\n      throw new Error(\"Must specify one of seconds, minutes, or hours\");\n    }\n    if (hasSeconds) {\n      validateIntervalNumber(schedule.seconds);\n    } else if (hasMinutes) {\n      validateIntervalNumber(schedule.minutes);\n    } else if (hasHours) {\n      validateIntervalNumber(schedule.hours);\n    }\n    this.schedule(\n      cronIdentifier,\n      { ...schedule, type: \"interval\" },\n      functionReference,\n      ...args\n    );\n  }\n  /**\n   * Schedule a mutation or action to run on an hourly basis.\n   *\n   * ```js\n   * crons.hourly(\n   *   \"Reset high scores\",\n   *   {\n   *     minuteUTC: 30,\n   *   },\n   *   api.scores.reset\n   * )\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param schedule - What time (UTC) each day to run this function.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */\n  hourly(cronIdentifier, schedule, functionReference, ...args) {\n    const minuteUTC = validatedMinuteOfHour(schedule.minuteUTC);\n    this.schedule(\n      cronIdentifier,\n      { minuteUTC, type: \"hourly\" },\n      functionReference,\n      ...args\n    );\n  }\n  /**\n   * Schedule a mutation or action to run on a daily basis.\n   *\n   * ```js\n   * crons.daily(\n   *   \"Reset high scores\",\n   *   {\n   *     hourUTC: 17, // (9:30am Pacific/10:30am Daylight Savings Pacific)\n   *     minuteUTC: 30,\n   *   },\n   *   api.scores.reset\n   * )\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param schedule - What time (UTC) each day to run this function.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */\n  daily(cronIdentifier, schedule, functionReference, ...args) {\n    const hourUTC = validatedHourOfDay(schedule.hourUTC);\n    const minuteUTC = validatedMinuteOfHour(schedule.minuteUTC);\n    this.schedule(\n      cronIdentifier,\n      { hourUTC, minuteUTC, type: \"daily\" },\n      functionReference,\n      ...args\n    );\n  }\n  /**\n   * Schedule a mutation or action to run on a weekly basis.\n   *\n   * ```js\n   * crons.weekly(\n   *   \"Weekly re-engagement email\",\n   *   {\n   *     dayOfWeek: \"Tuesday\",\n   *     hourUTC: 17, // (9:30am Pacific/10:30am Daylight Savings Pacific)\n   *     minuteUTC: 30,\n   *   },\n   *   api.emails.send\n   * )\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param schedule - What day and time (UTC) each week to run this function.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   */\n  weekly(cronIdentifier, schedule, functionReference, ...args) {\n    const dayOfWeek = validatedDayOfWeek(schedule.dayOfWeek);\n    const hourUTC = validatedHourOfDay(schedule.hourUTC);\n    const minuteUTC = validatedMinuteOfHour(schedule.minuteUTC);\n    this.schedule(\n      cronIdentifier,\n      { dayOfWeek, hourUTC, minuteUTC, type: \"weekly\" },\n      functionReference,\n      ...args\n    );\n  }\n  /**\n   * Schedule a mutation or action to run on a monthly basis.\n   *\n   * Note that some months have fewer days than others, so e.g. a function\n   * scheduled to run on the 30th will not run in February.\n   *\n   * ```js\n   * crons.monthly(\n   *   \"Bill customers at \",\n   *   {\n   *     hourUTC: 17, // (9:30am Pacific/10:30am Daylight Savings Pacific)\n   *     minuteUTC: 30,\n   *     day: 1,\n   *   },\n   *   api.billing.billCustomers\n   * )\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param schedule - What day and time (UTC) each month to run this function.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */\n  monthly(cronIdentifier, schedule, functionReference, ...args) {\n    const day = validatedDayOfMonth(schedule.day);\n    const hourUTC = validatedHourOfDay(schedule.hourUTC);\n    const minuteUTC = validatedMinuteOfHour(schedule.minuteUTC);\n    this.schedule(\n      cronIdentifier,\n      { day, hourUTC, minuteUTC, type: \"monthly\" },\n      functionReference,\n      ...args\n    );\n  }\n  /**\n   * Schedule a mutation or action to run on a recurring basis.\n   *\n   * Like the unix command `cron`, Sunday is 0, Monday is 1, etc.\n   *\n   * ```\n   *   minute (0 - 59)\n   *    hour (0 - 23)\n   *     day of the month (1 - 31)\n   *      month (1 - 12)\n   *       day of the week (0 - 6) (Sunday to Saturday)\n   * \"* * * * *\"\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param cron - Cron string like `\"15 7 * * *\"` (Every day at 7:15 UTC)\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */\n  cron(cronIdentifier, cron, functionReference, ...args) {\n    const c = validatedCronString(cron);\n    this.schedule(\n      cronIdentifier,\n      { cron: c, type: \"cron\" },\n      functionReference,\n      ...args\n    );\n  }\n  /** @internal */\n  export() {\n    return JSON.stringify(this.crons);\n  }\n}\n//# sourceMappingURL=cron.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9jcm9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWE7QUFDYjtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDbUQ7QUFDSjtBQUNHO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxFQUFFO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJEQUFTO0FBQzlCO0FBQ0E7QUFDQSwyREFBMkQsZUFBZTtBQUMxRTtBQUNBO0FBQ0EsWUFBWSwrREFBZTtBQUMzQixhQUFhLDhEQUFZO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFlBQVk7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMseUJBQXlCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLCtCQUErQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHlCQUF5QjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMkJBQTJCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx5QkFBeUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsbUNBQW1DO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHlCQUF5QjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrQ0FBK0M7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMseUJBQXlCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQTBDO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMseUJBQXlCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1QkFBdUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxjcm9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbmltcG9ydCB7IGdldEZ1bmN0aW9uTmFtZSB9IGZyb20gXCIuLi9zZXJ2ZXIvYXBpLmpzXCI7XG5pbXBvcnQgeyBwYXJzZUFyZ3MgfSBmcm9tIFwiLi4vY29tbW9uL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBjb252ZXhUb0pzb24gfSBmcm9tIFwiLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5jb25zdCBEQVlTX09GX1dFRUsgPSBbXG4gIFwic3VuZGF5XCIsXG4gIFwibW9uZGF5XCIsXG4gIFwidHVlc2RheVwiLFxuICBcIndlZG5lc2RheVwiLFxuICBcInRodXJzZGF5XCIsXG4gIFwiZnJpZGF5XCIsXG4gIFwic2F0dXJkYXlcIlxuXTtcbmV4cG9ydCBjb25zdCBjcm9uSm9icyA9ICgpID0+IG5ldyBDcm9ucygpO1xuZnVuY3Rpb24gdmFsaWRhdGVJbnRlcnZhbE51bWJlcihuKSB7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihuKSB8fCBuIDw9IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnRlcnZhbCBtdXN0IGJlIGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIDBcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlZERheU9mTW9udGgobikge1xuICBpZiAoIU51bWJlci5pc0ludGVnZXIobikgfHwgbiA8IDEgfHwgbiA+IDMxKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGF5IG9mIG1vbnRoIG11c3QgYmUgYW4gaW50ZWdlciBmcm9tIDEgdG8gMzFcIik7XG4gIH1cbiAgcmV0dXJuIG47XG59XG5mdW5jdGlvbiB2YWxpZGF0ZWREYXlPZldlZWsocykge1xuICBpZiAoIURBWVNfT0ZfV0VFSy5pbmNsdWRlcyhzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignRGF5IG9mIHdlZWsgbXVzdCBiZSBhIHN0cmluZyBsaWtlIFwibW9uZGF5XCIuJyk7XG4gIH1cbiAgcmV0dXJuIHM7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZWRIb3VyT2ZEYXkobikge1xuICBpZiAoIU51bWJlci5pc0ludGVnZXIobikgfHwgbiA8IDAgfHwgbiA+IDIzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSG91ciBvZiBkYXkgbXVzdCBiZSBhbiBpbnRlZ2VyIGZyb20gMCB0byAyM1wiKTtcbiAgfVxuICByZXR1cm4gbjtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlZE1pbnV0ZU9mSG91cihuKSB7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihuKSB8fCBuIDwgMCB8fCBuID4gNTkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaW51dGUgb2YgaG91ciBtdXN0IGJlIGFuIGludGVnZXIgZnJvbSAwIHRvIDU5XCIpO1xuICB9XG4gIHJldHVybiBuO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVkQ3JvblN0cmluZyhzKSB7XG4gIHJldHVybiBzO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVkQ3JvbklkZW50aWZpZXIocykge1xuICBpZiAoIXMubWF0Y2goL15bIC1+XSokLykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW52YWxpZCBjcm9uIGlkZW50aWZpZXIgJHtzfTogdXNlIEFTQ0lJIGxldHRlcnMgdGhhdCBhcmUgbm90IGNvbnRyb2wgY2hhcmFjdGVyc2BcbiAgICApO1xuICB9XG4gIHJldHVybiBzO1xufVxuZXhwb3J0IGNsYXNzIENyb25zIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImNyb25zXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJpc0Nyb25zXCIpO1xuICAgIHRoaXMuaXNDcm9ucyA9IHRydWU7XG4gICAgdGhpcy5jcm9ucyA9IHt9O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgc2NoZWR1bGUoY3JvbklkZW50aWZpZXIsIHNjaGVkdWxlLCBmdW5jdGlvblJlZmVyZW5jZSwgYXJncykge1xuICAgIGNvbnN0IGNyb25BcmdzID0gcGFyc2VBcmdzKGFyZ3MpO1xuICAgIHZhbGlkYXRlZENyb25JZGVudGlmaWVyKGNyb25JZGVudGlmaWVyKTtcbiAgICBpZiAoY3JvbklkZW50aWZpZXIgaW4gdGhpcy5jcm9ucykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDcm9uIGlkZW50aWZpZXIgcmVnaXN0ZXJlZCB0d2ljZTogJHtjcm9uSWRlbnRpZmllcn1gKTtcbiAgICB9XG4gICAgdGhpcy5jcm9uc1tjcm9uSWRlbnRpZmllcl0gPSB7XG4gICAgICBuYW1lOiBnZXRGdW5jdGlvbk5hbWUoZnVuY3Rpb25SZWZlcmVuY2UpLFxuICAgICAgYXJnczogW2NvbnZleFRvSnNvbihjcm9uQXJncyldLFxuICAgICAgc2NoZWR1bGVcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhIG11dGF0aW9uIG9yIGFjdGlvbiB0byBydW4gYXQgc29tZSBpbnRlcnZhbC5cbiAgICpcbiAgICogYGBganNcbiAgICogY3JvbnMuaW50ZXJ2YWwoXCJDbGVhciBwcmVzZW5jZSBkYXRhXCIsIHtzZWNvbmRzOiAzMH0sIGFwaS5wcmVzZW5jZS5jbGVhcik7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gaWRlbnRpZmllciAtIEEgdW5pcXVlIG5hbWUgZm9yIHRoaXMgc2NoZWR1bGVkIGpvYi5cbiAgICogQHBhcmFtIHNjaGVkdWxlIC0gVGhlIHRpbWUgYmV0d2VlbiBydW5zIGZvciB0aGlzIHNjaGVkdWxlZCBqb2IuXG4gICAqIEBwYXJhbSBmdW5jdGlvblJlZmVyZW5jZSAtIEEge0BsaW5rIEZ1bmN0aW9uUmVmZXJlbmNlfSBmb3IgdGhlIGZ1bmN0aW9uXG4gICAqIHRvIHNjaGVkdWxlLlxuICAgKiBAcGFyYW0gYXJncyAtIFRoZSBhcmd1bWVudHMgdG8gdGhlIGZ1bmN0aW9uLlxuICAgKi9cbiAgaW50ZXJ2YWwoY3JvbklkZW50aWZpZXIsIHNjaGVkdWxlLCBmdW5jdGlvblJlZmVyZW5jZSwgLi4uYXJncykge1xuICAgIGNvbnN0IHMgPSBzY2hlZHVsZTtcbiAgICBjb25zdCBoYXNTZWNvbmRzID0gKyhcInNlY29uZHNcIiBpbiBzICYmIHMuc2Vjb25kcyAhPT0gdm9pZCAwKTtcbiAgICBjb25zdCBoYXNNaW51dGVzID0gKyhcIm1pbnV0ZXNcIiBpbiBzICYmIHMubWludXRlcyAhPT0gdm9pZCAwKTtcbiAgICBjb25zdCBoYXNIb3VycyA9ICsoXCJob3Vyc1wiIGluIHMgJiYgcy5ob3VycyAhPT0gdm9pZCAwKTtcbiAgICBjb25zdCB0b3RhbCA9IGhhc1NlY29uZHMgKyBoYXNNaW51dGVzICsgaGFzSG91cnM7XG4gICAgaWYgKHRvdGFsICE9PSAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHNwZWNpZnkgb25lIG9mIHNlY29uZHMsIG1pbnV0ZXMsIG9yIGhvdXJzXCIpO1xuICAgIH1cbiAgICBpZiAoaGFzU2Vjb25kcykge1xuICAgICAgdmFsaWRhdGVJbnRlcnZhbE51bWJlcihzY2hlZHVsZS5zZWNvbmRzKTtcbiAgICB9IGVsc2UgaWYgKGhhc01pbnV0ZXMpIHtcbiAgICAgIHZhbGlkYXRlSW50ZXJ2YWxOdW1iZXIoc2NoZWR1bGUubWludXRlcyk7XG4gICAgfSBlbHNlIGlmIChoYXNIb3Vycykge1xuICAgICAgdmFsaWRhdGVJbnRlcnZhbE51bWJlcihzY2hlZHVsZS5ob3Vycyk7XG4gICAgfVxuICAgIHRoaXMuc2NoZWR1bGUoXG4gICAgICBjcm9uSWRlbnRpZmllcixcbiAgICAgIHsgLi4uc2NoZWR1bGUsIHR5cGU6IFwiaW50ZXJ2YWxcIiB9LFxuICAgICAgZnVuY3Rpb25SZWZlcmVuY2UsXG4gICAgICAuLi5hcmdzXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogU2NoZWR1bGUgYSBtdXRhdGlvbiBvciBhY3Rpb24gdG8gcnVuIG9uIGFuIGhvdXJseSBiYXNpcy5cbiAgICpcbiAgICogYGBganNcbiAgICogY3JvbnMuaG91cmx5KFxuICAgKiAgIFwiUmVzZXQgaGlnaCBzY29yZXNcIixcbiAgICogICB7XG4gICAqICAgICBtaW51dGVVVEM6IDMwLFxuICAgKiAgIH0sXG4gICAqICAgYXBpLnNjb3Jlcy5yZXNldFxuICAgKiApXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gY3JvbklkZW50aWZpZXIgLSBBIHVuaXF1ZSBuYW1lIGZvciB0aGlzIHNjaGVkdWxlZCBqb2IuXG4gICAqIEBwYXJhbSBzY2hlZHVsZSAtIFdoYXQgdGltZSAoVVRDKSBlYWNoIGRheSB0byBydW4gdGhpcyBmdW5jdGlvbi5cbiAgICogQHBhcmFtIGZ1bmN0aW9uUmVmZXJlbmNlIC0gQSB7QGxpbmsgRnVuY3Rpb25SZWZlcmVuY2V9IGZvciB0aGUgZnVuY3Rpb25cbiAgICogdG8gc2NoZWR1bGUuXG4gICAqIEBwYXJhbSBhcmdzIC0gVGhlIGFyZ3VtZW50cyB0byB0aGUgZnVuY3Rpb24uXG4gICAqL1xuICBob3VybHkoY3JvbklkZW50aWZpZXIsIHNjaGVkdWxlLCBmdW5jdGlvblJlZmVyZW5jZSwgLi4uYXJncykge1xuICAgIGNvbnN0IG1pbnV0ZVVUQyA9IHZhbGlkYXRlZE1pbnV0ZU9mSG91cihzY2hlZHVsZS5taW51dGVVVEMpO1xuICAgIHRoaXMuc2NoZWR1bGUoXG4gICAgICBjcm9uSWRlbnRpZmllcixcbiAgICAgIHsgbWludXRlVVRDLCB0eXBlOiBcImhvdXJseVwiIH0sXG4gICAgICBmdW5jdGlvblJlZmVyZW5jZSxcbiAgICAgIC4uLmFyZ3NcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhIG11dGF0aW9uIG9yIGFjdGlvbiB0byBydW4gb24gYSBkYWlseSBiYXNpcy5cbiAgICpcbiAgICogYGBganNcbiAgICogY3JvbnMuZGFpbHkoXG4gICAqICAgXCJSZXNldCBoaWdoIHNjb3Jlc1wiLFxuICAgKiAgIHtcbiAgICogICAgIGhvdXJVVEM6IDE3LCAvLyAoOTozMGFtIFBhY2lmaWMvMTA6MzBhbSBEYXlsaWdodCBTYXZpbmdzIFBhY2lmaWMpXG4gICAqICAgICBtaW51dGVVVEM6IDMwLFxuICAgKiAgIH0sXG4gICAqICAgYXBpLnNjb3Jlcy5yZXNldFxuICAgKiApXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gY3JvbklkZW50aWZpZXIgLSBBIHVuaXF1ZSBuYW1lIGZvciB0aGlzIHNjaGVkdWxlZCBqb2IuXG4gICAqIEBwYXJhbSBzY2hlZHVsZSAtIFdoYXQgdGltZSAoVVRDKSBlYWNoIGRheSB0byBydW4gdGhpcyBmdW5jdGlvbi5cbiAgICogQHBhcmFtIGZ1bmN0aW9uUmVmZXJlbmNlIC0gQSB7QGxpbmsgRnVuY3Rpb25SZWZlcmVuY2V9IGZvciB0aGUgZnVuY3Rpb25cbiAgICogdG8gc2NoZWR1bGUuXG4gICAqIEBwYXJhbSBhcmdzIC0gVGhlIGFyZ3VtZW50cyB0byB0aGUgZnVuY3Rpb24uXG4gICAqL1xuICBkYWlseShjcm9uSWRlbnRpZmllciwgc2NoZWR1bGUsIGZ1bmN0aW9uUmVmZXJlbmNlLCAuLi5hcmdzKSB7XG4gICAgY29uc3QgaG91clVUQyA9IHZhbGlkYXRlZEhvdXJPZkRheShzY2hlZHVsZS5ob3VyVVRDKTtcbiAgICBjb25zdCBtaW51dGVVVEMgPSB2YWxpZGF0ZWRNaW51dGVPZkhvdXIoc2NoZWR1bGUubWludXRlVVRDKTtcbiAgICB0aGlzLnNjaGVkdWxlKFxuICAgICAgY3JvbklkZW50aWZpZXIsXG4gICAgICB7IGhvdXJVVEMsIG1pbnV0ZVVUQywgdHlwZTogXCJkYWlseVwiIH0sXG4gICAgICBmdW5jdGlvblJlZmVyZW5jZSxcbiAgICAgIC4uLmFyZ3NcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhIG11dGF0aW9uIG9yIGFjdGlvbiB0byBydW4gb24gYSB3ZWVrbHkgYmFzaXMuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGNyb25zLndlZWtseShcbiAgICogICBcIldlZWtseSByZS1lbmdhZ2VtZW50IGVtYWlsXCIsXG4gICAqICAge1xuICAgKiAgICAgZGF5T2ZXZWVrOiBcIlR1ZXNkYXlcIixcbiAgICogICAgIGhvdXJVVEM6IDE3LCAvLyAoOTozMGFtIFBhY2lmaWMvMTA6MzBhbSBEYXlsaWdodCBTYXZpbmdzIFBhY2lmaWMpXG4gICAqICAgICBtaW51dGVVVEM6IDMwLFxuICAgKiAgIH0sXG4gICAqICAgYXBpLmVtYWlscy5zZW5kXG4gICAqIClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBjcm9uSWRlbnRpZmllciAtIEEgdW5pcXVlIG5hbWUgZm9yIHRoaXMgc2NoZWR1bGVkIGpvYi5cbiAgICogQHBhcmFtIHNjaGVkdWxlIC0gV2hhdCBkYXkgYW5kIHRpbWUgKFVUQykgZWFjaCB3ZWVrIHRvIHJ1biB0aGlzIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0gZnVuY3Rpb25SZWZlcmVuY2UgLSBBIHtAbGluayBGdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBmdW5jdGlvblxuICAgKiB0byBzY2hlZHVsZS5cbiAgICovXG4gIHdlZWtseShjcm9uSWRlbnRpZmllciwgc2NoZWR1bGUsIGZ1bmN0aW9uUmVmZXJlbmNlLCAuLi5hcmdzKSB7XG4gICAgY29uc3QgZGF5T2ZXZWVrID0gdmFsaWRhdGVkRGF5T2ZXZWVrKHNjaGVkdWxlLmRheU9mV2Vlayk7XG4gICAgY29uc3QgaG91clVUQyA9IHZhbGlkYXRlZEhvdXJPZkRheShzY2hlZHVsZS5ob3VyVVRDKTtcbiAgICBjb25zdCBtaW51dGVVVEMgPSB2YWxpZGF0ZWRNaW51dGVPZkhvdXIoc2NoZWR1bGUubWludXRlVVRDKTtcbiAgICB0aGlzLnNjaGVkdWxlKFxuICAgICAgY3JvbklkZW50aWZpZXIsXG4gICAgICB7IGRheU9mV2VlaywgaG91clVUQywgbWludXRlVVRDLCB0eXBlOiBcIndlZWtseVwiIH0sXG4gICAgICBmdW5jdGlvblJlZmVyZW5jZSxcbiAgICAgIC4uLmFyZ3NcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhIG11dGF0aW9uIG9yIGFjdGlvbiB0byBydW4gb24gYSBtb250aGx5IGJhc2lzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgc29tZSBtb250aHMgaGF2ZSBmZXdlciBkYXlzIHRoYW4gb3RoZXJzLCBzbyBlLmcuIGEgZnVuY3Rpb25cbiAgICogc2NoZWR1bGVkIHRvIHJ1biBvbiB0aGUgMzB0aCB3aWxsIG5vdCBydW4gaW4gRmVicnVhcnkuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGNyb25zLm1vbnRobHkoXG4gICAqICAgXCJCaWxsIGN1c3RvbWVycyBhdCBcIixcbiAgICogICB7XG4gICAqICAgICBob3VyVVRDOiAxNywgLy8gKDk6MzBhbSBQYWNpZmljLzEwOjMwYW0gRGF5bGlnaHQgU2F2aW5ncyBQYWNpZmljKVxuICAgKiAgICAgbWludXRlVVRDOiAzMCxcbiAgICogICAgIGRheTogMSxcbiAgICogICB9LFxuICAgKiAgIGFwaS5iaWxsaW5nLmJpbGxDdXN0b21lcnNcbiAgICogKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGNyb25JZGVudGlmaWVyIC0gQSB1bmlxdWUgbmFtZSBmb3IgdGhpcyBzY2hlZHVsZWQgam9iLlxuICAgKiBAcGFyYW0gc2NoZWR1bGUgLSBXaGF0IGRheSBhbmQgdGltZSAoVVRDKSBlYWNoIG1vbnRoIHRvIHJ1biB0aGlzIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0gZnVuY3Rpb25SZWZlcmVuY2UgLSBBIHtAbGluayBGdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBmdW5jdGlvblxuICAgKiB0byBzY2hlZHVsZS5cbiAgICogQHBhcmFtIGFyZ3MgLSBUaGUgYXJndW1lbnRzIHRvIHRoZSBmdW5jdGlvbi5cbiAgICovXG4gIG1vbnRobHkoY3JvbklkZW50aWZpZXIsIHNjaGVkdWxlLCBmdW5jdGlvblJlZmVyZW5jZSwgLi4uYXJncykge1xuICAgIGNvbnN0IGRheSA9IHZhbGlkYXRlZERheU9mTW9udGgoc2NoZWR1bGUuZGF5KTtcbiAgICBjb25zdCBob3VyVVRDID0gdmFsaWRhdGVkSG91ck9mRGF5KHNjaGVkdWxlLmhvdXJVVEMpO1xuICAgIGNvbnN0IG1pbnV0ZVVUQyA9IHZhbGlkYXRlZE1pbnV0ZU9mSG91cihzY2hlZHVsZS5taW51dGVVVEMpO1xuICAgIHRoaXMuc2NoZWR1bGUoXG4gICAgICBjcm9uSWRlbnRpZmllcixcbiAgICAgIHsgZGF5LCBob3VyVVRDLCBtaW51dGVVVEMsIHR5cGU6IFwibW9udGhseVwiIH0sXG4gICAgICBmdW5jdGlvblJlZmVyZW5jZSxcbiAgICAgIC4uLmFyZ3NcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhIG11dGF0aW9uIG9yIGFjdGlvbiB0byBydW4gb24gYSByZWN1cnJpbmcgYmFzaXMuXG4gICAqXG4gICAqIExpa2UgdGhlIHVuaXggY29tbWFuZCBgY3JvbmAsIFN1bmRheSBpcyAwLCBNb25kYXkgaXMgMSwgZXRjLlxuICAgKlxuICAgKiBgYGBcbiAgICogIOKUjOKUgCBtaW51dGUgKDAgLSA1OSlcbiAgICogIOKUgiDilIzilIAgaG91ciAoMCAtIDIzKVxuICAgKiAg4pSCIOKUgiDilIzilIAgZGF5IG9mIHRoZSBtb250aCAoMSAtIDMxKVxuICAgKiAg4pSCIOKUgiDilIIg4pSM4pSAIG1vbnRoICgxIC0gMTIpXG4gICAqICDilIIg4pSCIOKUgiDilIIg4pSM4pSAIGRheSBvZiB0aGUgd2VlayAoMCAtIDYpIChTdW5kYXkgdG8gU2F0dXJkYXkpXG4gICAqIFwiKiAqICogKiAqXCJcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBjcm9uSWRlbnRpZmllciAtIEEgdW5pcXVlIG5hbWUgZm9yIHRoaXMgc2NoZWR1bGVkIGpvYi5cbiAgICogQHBhcmFtIGNyb24gLSBDcm9uIHN0cmluZyBsaWtlIGBcIjE1IDcgKiAqICpcImAgKEV2ZXJ5IGRheSBhdCA3OjE1IFVUQylcbiAgICogQHBhcmFtIGZ1bmN0aW9uUmVmZXJlbmNlIC0gQSB7QGxpbmsgRnVuY3Rpb25SZWZlcmVuY2V9IGZvciB0aGUgZnVuY3Rpb25cbiAgICogdG8gc2NoZWR1bGUuXG4gICAqIEBwYXJhbSBhcmdzIC0gVGhlIGFyZ3VtZW50cyB0byB0aGUgZnVuY3Rpb24uXG4gICAqL1xuICBjcm9uKGNyb25JZGVudGlmaWVyLCBjcm9uLCBmdW5jdGlvblJlZmVyZW5jZSwgLi4uYXJncykge1xuICAgIGNvbnN0IGMgPSB2YWxpZGF0ZWRDcm9uU3RyaW5nKGNyb24pO1xuICAgIHRoaXMuc2NoZWR1bGUoXG4gICAgICBjcm9uSWRlbnRpZmllcixcbiAgICAgIHsgY3JvbjogYywgdHlwZTogXCJjcm9uXCIgfSxcbiAgICAgIGZ1bmN0aW9uUmVmZXJlbmNlLFxuICAgICAgLi4uYXJnc1xuICAgICk7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBleHBvcnQoKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuY3JvbnMpO1xuICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcm9uLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/cron.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/database.js":
/*!*********************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/database.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceMappingURL=database.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9kYXRhYmFzZS5qcyIsIm1hcHBpbmdzIjoiO0FBQWE7QUFDYiIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxzZXJ2ZXJcXGRhdGFiYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YWJhc2UuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/database.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/filter_builder.js":
/*!***************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/filter_builder.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Expression: () => (/* binding */ Expression)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nclass Expression {\n  /**\n   * @internal\n   */\n  constructor() {\n    // Property for nominal type support.\n    __publicField(this, \"_isExpression\");\n    // Property to distinguish expressions by the type they resolve to.\n    __publicField(this, \"_value\");\n  }\n}\n//# sourceMappingURL=filter_builder.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9maWx0ZXJfYnVpbGRlci5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQWE7QUFDYjtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxmaWx0ZXJfYnVpbGRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG5leHBvcnQgY2xhc3MgRXhwcmVzc2lvbiB7XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIFByb3BlcnR5IGZvciBub21pbmFsIHR5cGUgc3VwcG9ydC5cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX2lzRXhwcmVzc2lvblwiKTtcbiAgICAvLyBQcm9wZXJ0eSB0byBkaXN0aW5ndWlzaCBleHByZXNzaW9ucyBieSB0aGUgdHlwZSB0aGV5IHJlc29sdmUgdG8uXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl92YWx1ZVwiKTtcbiAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsdGVyX2J1aWxkZXIuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/filter_builder.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/functionName.js":
/*!*************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/functionName.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   functionName: () => (/* binding */ functionName)\n/* harmony export */ });\n\nconst functionName = Symbol.for(\"functionName\");\n//# sourceMappingURL=functionName.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9mdW5jdGlvbk5hbWUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFhO0FBQ047QUFDUCIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxzZXJ2ZXJcXGZ1bmN0aW9uTmFtZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmV4cG9ydCBjb25zdCBmdW5jdGlvbk5hbWUgPSBTeW1ib2wuZm9yKFwiZnVuY3Rpb25OYW1lXCIpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnVuY3Rpb25OYW1lLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/functionName.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/actions_impl.js":
/*!******************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/actions_impl.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setupActionCalls: () => (/* binding */ setupActionCalls)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _components_paths_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/paths.js */ \"(ssr)/./node_modules/convex/dist/esm/server/components/paths.js\");\n\n\n\n\n\n\nfunction syscallArgs(requestId, functionReference, args) {\n  const address = (0,_components_paths_js__WEBPACK_IMPORTED_MODULE_4__.getFunctionAddress)(functionReference);\n  return {\n    ...address,\n    args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)((0,_common_index_js__WEBPACK_IMPORTED_MODULE_3__.parseArgs)(args)),\n    version: _index_js__WEBPACK_IMPORTED_MODULE_1__.version,\n    requestId\n  };\n}\nfunction setupActionCalls(requestId) {\n  return {\n    runQuery: async (query, args) => {\n      const result = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\n        \"1.0/actions/query\",\n        syscallArgs(requestId, query, args)\n      );\n      return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(result);\n    },\n    runMutation: async (mutation, args) => {\n      const result = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\n        \"1.0/actions/mutation\",\n        syscallArgs(requestId, mutation, args)\n      );\n      return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(result);\n    },\n    runAction: async (action, args) => {\n      const result = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\n        \"1.0/actions/action\",\n        syscallArgs(requestId, action, args)\n      );\n      return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(result);\n    }\n  };\n}\n//# sourceMappingURL=actions_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL2FjdGlvbnNfaW1wbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBYTtBQUNzRDtBQUMxQjtBQUNVO0FBQ0Q7QUFDVTtBQUM1RDtBQUNBLGtCQUFrQix3RUFBa0I7QUFDcEM7QUFDQTtBQUNBLFVBQVUsOERBQVksQ0FBQywyREFBUztBQUNoQyxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsMkJBQTJCLGdFQUFtQjtBQUM5QztBQUNBO0FBQ0E7QUFDQSxhQUFhLDhEQUFZO0FBQ3pCLEtBQUs7QUFDTDtBQUNBLDJCQUEyQixnRUFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4REFBWTtBQUN6QixLQUFLO0FBQ0w7QUFDQSwyQkFBMkIsZ0VBQW1CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLGFBQWEsOERBQVk7QUFDekI7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxpbXBsXFxhY3Rpb25zX2ltcGwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5pbXBvcnQgeyBjb252ZXhUb0pzb24sIGpzb25Ub0NvbnZleCB9IGZyb20gXCIuLi8uLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vLi4vaW5kZXguanNcIjtcbmltcG9ydCB7IHBlcmZvcm1Bc3luY1N5c2NhbGwgfSBmcm9tIFwiLi9zeXNjYWxsLmpzXCI7XG5pbXBvcnQgeyBwYXJzZUFyZ3MgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXRGdW5jdGlvbkFkZHJlc3MgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9wYXRocy5qc1wiO1xuZnVuY3Rpb24gc3lzY2FsbEFyZ3MocmVxdWVzdElkLCBmdW5jdGlvblJlZmVyZW5jZSwgYXJncykge1xuICBjb25zdCBhZGRyZXNzID0gZ2V0RnVuY3Rpb25BZGRyZXNzKGZ1bmN0aW9uUmVmZXJlbmNlKTtcbiAgcmV0dXJuIHtcbiAgICAuLi5hZGRyZXNzLFxuICAgIGFyZ3M6IGNvbnZleFRvSnNvbihwYXJzZUFyZ3MoYXJncykpLFxuICAgIHZlcnNpb24sXG4gICAgcmVxdWVzdElkXG4gIH07XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0dXBBY3Rpb25DYWxscyhyZXF1ZXN0SWQpIHtcbiAgcmV0dXJuIHtcbiAgICBydW5RdWVyeTogYXN5bmMgKHF1ZXJ5LCBhcmdzKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFxuICAgICAgICBcIjEuMC9hY3Rpb25zL3F1ZXJ5XCIsXG4gICAgICAgIHN5c2NhbGxBcmdzKHJlcXVlc3RJZCwgcXVlcnksIGFyZ3MpXG4gICAgICApO1xuICAgICAgcmV0dXJuIGpzb25Ub0NvbnZleChyZXN1bHQpO1xuICAgIH0sXG4gICAgcnVuTXV0YXRpb246IGFzeW5jIChtdXRhdGlvbiwgYXJncykgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcbiAgICAgICAgXCIxLjAvYWN0aW9ucy9tdXRhdGlvblwiLFxuICAgICAgICBzeXNjYWxsQXJncyhyZXF1ZXN0SWQsIG11dGF0aW9uLCBhcmdzKVxuICAgICAgKTtcbiAgICAgIHJldHVybiBqc29uVG9Db252ZXgocmVzdWx0KTtcbiAgICB9LFxuICAgIHJ1bkFjdGlvbjogYXN5bmMgKGFjdGlvbiwgYXJncykgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcbiAgICAgICAgXCIxLjAvYWN0aW9ucy9hY3Rpb25cIixcbiAgICAgICAgc3lzY2FsbEFyZ3MocmVxdWVzdElkLCBhY3Rpb24sIGFyZ3MpXG4gICAgICApO1xuICAgICAgcmV0dXJuIGpzb25Ub0NvbnZleChyZXN1bHQpO1xuICAgIH1cbiAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFjdGlvbnNfaW1wbC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/actions_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/authentication_impl.js":
/*!*************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/authentication_impl.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setupAuth: () => (/* binding */ setupAuth)\n/* harmony export */ });\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n\n\nfunction setupAuth(requestId) {\n  return {\n    getUserIdentity: async () => {\n      return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_0__.performAsyncSyscall)(\"1.0/getUserIdentity\", {\n        requestId\n      });\n    }\n  };\n}\n//# sourceMappingURL=authentication_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL2F1dGhlbnRpY2F0aW9uX2ltcGwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBYTtBQUNzQztBQUM1QztBQUNQO0FBQ0E7QUFDQSxtQkFBbUIsZ0VBQW1CO0FBQ3RDO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHNlcnZlclxcaW1wbFxcYXV0aGVudGljYXRpb25faW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCB7IHBlcmZvcm1Bc3luY1N5c2NhbGwgfSBmcm9tIFwiLi9zeXNjYWxsLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gc2V0dXBBdXRoKHJlcXVlc3RJZCkge1xuICByZXR1cm4ge1xuICAgIGdldFVzZXJJZGVudGl0eTogYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHBlcmZvcm1Bc3luY1N5c2NhbGwoXCIxLjAvZ2V0VXNlcklkZW50aXR5XCIsIHtcbiAgICAgICAgcmVxdWVzdElkXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdXRoZW50aWNhdGlvbl9pbXBsLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/authentication_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/database_impl.js":
/*!*******************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/database_impl.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setupReader: () => (/* binding */ setupReader),\n/* harmony export */   setupWriter: () => (/* binding */ setupWriter)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _query_impl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/query_impl.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n\n\n\n\n\n\n\nasync function get(table, id, isSystem) {\n  (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(id, 1, \"get\", \"id\");\n  if (typeof id !== \"string\") {\n    throw new Error(\n      `Invalid argument \\`id\\` for \\`db.get\\`, expected string but got '${typeof id}': ${id}`\n    );\n  }\n  const args = {\n    id: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(id),\n    isSystem,\n    version: _index_js__WEBPACK_IMPORTED_MODULE_4__.version,\n    table\n  };\n  const syscallJSON = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/get\", args);\n  return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(syscallJSON);\n}\nfunction setupReader() {\n  const reader = (isSystem = false) => {\n    return {\n      get: async (arg0, arg1) => {\n        return arg1 !== void 0 ? await get(arg0, arg1, isSystem) : await get(void 0, arg0, isSystem);\n      },\n      query: (tableName) => {\n        return new TableReader(tableName, isSystem).query();\n      },\n      normalizeId: (tableName, id) => {\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(tableName, 1, \"normalizeId\", \"tableName\");\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(id, 2, \"normalizeId\", \"id\");\n        const accessingSystemTable = tableName.startsWith(\"_\");\n        if (accessingSystemTable !== isSystem) {\n          throw new Error(\n            `${accessingSystemTable ? \"System\" : \"User\"} tables can only be accessed from db.${isSystem ? \"\" : \"system.\"}normalizeId().`\n          );\n        }\n        const syscallJSON = (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performSyscall)(\"1.0/db/normalizeId\", {\n          table: tableName,\n          idString: id\n        });\n        const syscallResult = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(syscallJSON);\n        return syscallResult.id;\n      },\n      // We set the system reader on the next line\n      system: null,\n      table: (tableName) => {\n        return new TableReader(tableName, isSystem);\n      }\n    };\n  };\n  const { system: _, ...rest } = reader(true);\n  const r = reader();\n  r.system = rest;\n  return r;\n}\nasync function insert(tableName, value) {\n  if (tableName.startsWith(\"_\")) {\n    throw new Error(\"System tables (prefixed with `_`) are read-only.\");\n  }\n  (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(tableName, 1, \"insert\", \"table\");\n  (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(value, 2, \"insert\", \"value\");\n  const syscallJSON = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/insert\", {\n    table: tableName,\n    value: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(value)\n  });\n  const syscallResult = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(syscallJSON);\n  return syscallResult._id;\n}\nasync function patch(table, id, value) {\n  (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(id, 1, \"patch\", \"id\");\n  (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(value, 2, \"patch\", \"value\");\n  await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/shallowMerge\", {\n    id: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(id),\n    value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_5__.patchValueToJson)(value),\n    table\n  });\n}\nasync function replace(table, id, value) {\n  (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(id, 1, \"replace\", \"id\");\n  (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(value, 2, \"replace\", \"value\");\n  await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/replace\", {\n    id: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(id),\n    value: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(value),\n    table\n  });\n}\nasync function delete_(table, id) {\n  (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(id, 1, \"delete\", \"id\");\n  await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/remove\", {\n    id: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(id),\n    table\n  });\n}\nfunction setupWriter() {\n  const reader = setupReader();\n  return {\n    get: reader.get,\n    query: reader.query,\n    normalizeId: reader.normalizeId,\n    system: reader.system,\n    insert: async (table, value) => {\n      return await insert(table, value);\n    },\n    patch: async (arg0, arg1, arg2) => {\n      return arg2 !== void 0 ? await patch(arg0, arg1, arg2) : await patch(void 0, arg0, arg1);\n    },\n    replace: async (arg0, arg1, arg2) => {\n      return arg2 !== void 0 ? await replace(arg0, arg1, arg2) : await replace(void 0, arg0, arg1);\n    },\n    delete: async (arg0, arg1) => {\n      return arg1 !== void 0 ? await delete_(arg0, arg1) : await delete_(void 0, arg0);\n    },\n    table: (tableName) => {\n      return new TableWriter(tableName, false);\n    }\n  };\n}\nclass TableReader {\n  constructor(tableName, isSystem) {\n    this.tableName = tableName;\n    this.isSystem = isSystem;\n  }\n  async get(id) {\n    return get(this.tableName, id, this.isSystem);\n  }\n  query() {\n    const accessingSystemTable = this.tableName.startsWith(\"_\");\n    if (accessingSystemTable !== this.isSystem) {\n      throw new Error(\n        `${accessingSystemTable ? \"System\" : \"User\"} tables can only be accessed from db.${this.isSystem ? \"\" : \"system.\"}query().`\n      );\n    }\n    return new _query_impl_js__WEBPACK_IMPORTED_MODULE_2__.QueryInitializerImpl(this.tableName);\n  }\n}\nclass TableWriter extends TableReader {\n  async insert(value) {\n    return insert(this.tableName, value);\n  }\n  async patch(id, value) {\n    return patch(this.tableName, id, value);\n  }\n  async replace(id, value) {\n    return replace(this.tableName, id, value);\n  }\n  async delete(id) {\n    return delete_(this.tableName, id);\n  }\n}\n//# sourceMappingURL=database_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL2RhdGFiYXNlX2ltcGwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBYTtBQUlrQjtBQUNvQztBQUNaO0FBQ1g7QUFDSDtBQUNnQjtBQUN6RDtBQUNBLEVBQUUseURBQVc7QUFDYjtBQUNBO0FBQ0EsMEVBQTBFLFVBQVUsS0FBSyxHQUFHO0FBQzVGO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOERBQVk7QUFDcEI7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLDRCQUE0QixnRUFBbUI7QUFDL0MsU0FBUyw4REFBWTtBQUNyQjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLFFBQVEseURBQVc7QUFDbkIsUUFBUSx5REFBVztBQUNuQjtBQUNBO0FBQ0E7QUFDQSxlQUFlLDBDQUEwQyxzQ0FBc0MsMEJBQTBCO0FBQ3pIO0FBQ0E7QUFDQSw0QkFBNEIsMkRBQWM7QUFDMUM7QUFDQTtBQUNBLFNBQVM7QUFDVCw4QkFBOEIsOERBQVk7QUFDMUM7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFCQUFxQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSx5REFBVztBQUNiLEVBQUUseURBQVc7QUFDYiw0QkFBNEIsZ0VBQW1CO0FBQy9DO0FBQ0EsV0FBVyw4REFBWTtBQUN2QixHQUFHO0FBQ0gsd0JBQXdCLDhEQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLEVBQUUseURBQVc7QUFDYixFQUFFLHlEQUFXO0FBQ2IsUUFBUSxnRUFBbUI7QUFDM0IsUUFBUSw4REFBWTtBQUNwQixXQUFXLGtFQUFnQjtBQUMzQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRSx5REFBVztBQUNiLEVBQUUseURBQVc7QUFDYixRQUFRLGdFQUFtQjtBQUMzQixRQUFRLDhEQUFZO0FBQ3BCLFdBQVcsOERBQVk7QUFDdkI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUUseURBQVc7QUFDYixRQUFRLGdFQUFtQjtBQUMzQixRQUFRLDhEQUFZO0FBQ3BCO0FBQ0EsR0FBRztBQUNIO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDBDQUEwQyxzQ0FBc0MsK0JBQStCO0FBQzFIO0FBQ0E7QUFDQSxlQUFlLGdFQUFvQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHNlcnZlclxcaW1wbFxcZGF0YWJhc2VfaW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCB7XG4gIGNvbnZleFRvSnNvbixcbiAganNvblRvQ29udmV4XG59IGZyb20gXCIuLi8uLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IHBlcmZvcm1Bc3luY1N5c2NhbGwsIHBlcmZvcm1TeXNjYWxsIH0gZnJvbSBcIi4vc3lzY2FsbC5qc1wiO1xuaW1wb3J0IHsgUXVlcnlJbml0aWFsaXplckltcGwgfSBmcm9tIFwiLi9xdWVyeV9pbXBsLmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUFyZyB9IGZyb20gXCIuL3ZhbGlkYXRlLmpzXCI7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uLy4uL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBwYXRjaFZhbHVlVG9Kc29uIH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy92YWx1ZS5qc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0KHRhYmxlLCBpZCwgaXNTeXN0ZW0pIHtcbiAgdmFsaWRhdGVBcmcoaWQsIDEsIFwiZ2V0XCIsIFwiaWRcIik7XG4gIGlmICh0eXBlb2YgaWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW52YWxpZCBhcmd1bWVudCBcXGBpZFxcYCBmb3IgXFxgZGIuZ2V0XFxgLCBleHBlY3RlZCBzdHJpbmcgYnV0IGdvdCAnJHt0eXBlb2YgaWR9JzogJHtpZH1gXG4gICAgKTtcbiAgfVxuICBjb25zdCBhcmdzID0ge1xuICAgIGlkOiBjb252ZXhUb0pzb24oaWQpLFxuICAgIGlzU3lzdGVtLFxuICAgIHZlcnNpb24sXG4gICAgdGFibGVcbiAgfTtcbiAgY29uc3Qgc3lzY2FsbEpTT04gPSBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL2dldFwiLCBhcmdzKTtcbiAgcmV0dXJuIGpzb25Ub0NvbnZleChzeXNjYWxsSlNPTik7XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0dXBSZWFkZXIoKSB7XG4gIGNvbnN0IHJlYWRlciA9IChpc1N5c3RlbSA9IGZhbHNlKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldDogYXN5bmMgKGFyZzAsIGFyZzEpID0+IHtcbiAgICAgICAgcmV0dXJuIGFyZzEgIT09IHZvaWQgMCA/IGF3YWl0IGdldChhcmcwLCBhcmcxLCBpc1N5c3RlbSkgOiBhd2FpdCBnZXQodm9pZCAwLCBhcmcwLCBpc1N5c3RlbSk7XG4gICAgICB9LFxuICAgICAgcXVlcnk6ICh0YWJsZU5hbWUpID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYWJsZVJlYWRlcih0YWJsZU5hbWUsIGlzU3lzdGVtKS5xdWVyeSgpO1xuICAgICAgfSxcbiAgICAgIG5vcm1hbGl6ZUlkOiAodGFibGVOYW1lLCBpZCkgPT4ge1xuICAgICAgICB2YWxpZGF0ZUFyZyh0YWJsZU5hbWUsIDEsIFwibm9ybWFsaXplSWRcIiwgXCJ0YWJsZU5hbWVcIik7XG4gICAgICAgIHZhbGlkYXRlQXJnKGlkLCAyLCBcIm5vcm1hbGl6ZUlkXCIsIFwiaWRcIik7XG4gICAgICAgIGNvbnN0IGFjY2Vzc2luZ1N5c3RlbVRhYmxlID0gdGFibGVOYW1lLnN0YXJ0c1dpdGgoXCJfXCIpO1xuICAgICAgICBpZiAoYWNjZXNzaW5nU3lzdGVtVGFibGUgIT09IGlzU3lzdGVtKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYCR7YWNjZXNzaW5nU3lzdGVtVGFibGUgPyBcIlN5c3RlbVwiIDogXCJVc2VyXCJ9IHRhYmxlcyBjYW4gb25seSBiZSBhY2Nlc3NlZCBmcm9tIGRiLiR7aXNTeXN0ZW0gPyBcIlwiIDogXCJzeXN0ZW0uXCJ9bm9ybWFsaXplSWQoKS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzeXNjYWxsSlNPTiA9IHBlcmZvcm1TeXNjYWxsKFwiMS4wL2RiL25vcm1hbGl6ZUlkXCIsIHtcbiAgICAgICAgICB0YWJsZTogdGFibGVOYW1lLFxuICAgICAgICAgIGlkU3RyaW5nOiBpZFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3lzY2FsbFJlc3VsdCA9IGpzb25Ub0NvbnZleChzeXNjYWxsSlNPTik7XG4gICAgICAgIHJldHVybiBzeXNjYWxsUmVzdWx0LmlkO1xuICAgICAgfSxcbiAgICAgIC8vIFdlIHNldCB0aGUgc3lzdGVtIHJlYWRlciBvbiB0aGUgbmV4dCBsaW5lXG4gICAgICBzeXN0ZW06IG51bGwsXG4gICAgICB0YWJsZTogKHRhYmxlTmFtZSkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFRhYmxlUmVhZGVyKHRhYmxlTmFtZSwgaXNTeXN0ZW0pO1xuICAgICAgfVxuICAgIH07XG4gIH07XG4gIGNvbnN0IHsgc3lzdGVtOiBfLCAuLi5yZXN0IH0gPSByZWFkZXIodHJ1ZSk7XG4gIGNvbnN0IHIgPSByZWFkZXIoKTtcbiAgci5zeXN0ZW0gPSByZXN0O1xuICByZXR1cm4gcjtcbn1cbmFzeW5jIGZ1bmN0aW9uIGluc2VydCh0YWJsZU5hbWUsIHZhbHVlKSB7XG4gIGlmICh0YWJsZU5hbWUuc3RhcnRzV2l0aChcIl9cIikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTeXN0ZW0gdGFibGVzIChwcmVmaXhlZCB3aXRoIGBfYCkgYXJlIHJlYWQtb25seS5cIik7XG4gIH1cbiAgdmFsaWRhdGVBcmcodGFibGVOYW1lLCAxLCBcImluc2VydFwiLCBcInRhYmxlXCIpO1xuICB2YWxpZGF0ZUFyZyh2YWx1ZSwgMiwgXCJpbnNlcnRcIiwgXCJ2YWx1ZVwiKTtcbiAgY29uc3Qgc3lzY2FsbEpTT04gPSBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL2luc2VydFwiLCB7XG4gICAgdGFibGU6IHRhYmxlTmFtZSxcbiAgICB2YWx1ZTogY29udmV4VG9Kc29uKHZhbHVlKVxuICB9KTtcbiAgY29uc3Qgc3lzY2FsbFJlc3VsdCA9IGpzb25Ub0NvbnZleChzeXNjYWxsSlNPTik7XG4gIHJldHVybiBzeXNjYWxsUmVzdWx0Ll9pZDtcbn1cbmFzeW5jIGZ1bmN0aW9uIHBhdGNoKHRhYmxlLCBpZCwgdmFsdWUpIHtcbiAgdmFsaWRhdGVBcmcoaWQsIDEsIFwicGF0Y2hcIiwgXCJpZFwiKTtcbiAgdmFsaWRhdGVBcmcodmFsdWUsIDIsIFwicGF0Y2hcIiwgXCJ2YWx1ZVwiKTtcbiAgYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9zaGFsbG93TWVyZ2VcIiwge1xuICAgIGlkOiBjb252ZXhUb0pzb24oaWQpLFxuICAgIHZhbHVlOiBwYXRjaFZhbHVlVG9Kc29uKHZhbHVlKSxcbiAgICB0YWJsZVxuICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlcGxhY2UodGFibGUsIGlkLCB2YWx1ZSkge1xuICB2YWxpZGF0ZUFyZyhpZCwgMSwgXCJyZXBsYWNlXCIsIFwiaWRcIik7XG4gIHZhbGlkYXRlQXJnKHZhbHVlLCAyLCBcInJlcGxhY2VcIiwgXCJ2YWx1ZVwiKTtcbiAgYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9yZXBsYWNlXCIsIHtcbiAgICBpZDogY29udmV4VG9Kc29uKGlkKSxcbiAgICB2YWx1ZTogY29udmV4VG9Kc29uKHZhbHVlKSxcbiAgICB0YWJsZVxuICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZV8odGFibGUsIGlkKSB7XG4gIHZhbGlkYXRlQXJnKGlkLCAxLCBcImRlbGV0ZVwiLCBcImlkXCIpO1xuICBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL3JlbW92ZVwiLCB7XG4gICAgaWQ6IGNvbnZleFRvSnNvbihpZCksXG4gICAgdGFibGVcbiAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0dXBXcml0ZXIoKSB7XG4gIGNvbnN0IHJlYWRlciA9IHNldHVwUmVhZGVyKCk7XG4gIHJldHVybiB7XG4gICAgZ2V0OiByZWFkZXIuZ2V0LFxuICAgIHF1ZXJ5OiByZWFkZXIucXVlcnksXG4gICAgbm9ybWFsaXplSWQ6IHJlYWRlci5ub3JtYWxpemVJZCxcbiAgICBzeXN0ZW06IHJlYWRlci5zeXN0ZW0sXG4gICAgaW5zZXJ0OiBhc3luYyAodGFibGUsIHZhbHVlKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgaW5zZXJ0KHRhYmxlLCB2YWx1ZSk7XG4gICAgfSxcbiAgICBwYXRjaDogYXN5bmMgKGFyZzAsIGFyZzEsIGFyZzIpID0+IHtcbiAgICAgIHJldHVybiBhcmcyICE9PSB2b2lkIDAgPyBhd2FpdCBwYXRjaChhcmcwLCBhcmcxLCBhcmcyKSA6IGF3YWl0IHBhdGNoKHZvaWQgMCwgYXJnMCwgYXJnMSk7XG4gICAgfSxcbiAgICByZXBsYWNlOiBhc3luYyAoYXJnMCwgYXJnMSwgYXJnMikgPT4ge1xuICAgICAgcmV0dXJuIGFyZzIgIT09IHZvaWQgMCA/IGF3YWl0IHJlcGxhY2UoYXJnMCwgYXJnMSwgYXJnMikgOiBhd2FpdCByZXBsYWNlKHZvaWQgMCwgYXJnMCwgYXJnMSk7XG4gICAgfSxcbiAgICBkZWxldGU6IGFzeW5jIChhcmcwLCBhcmcxKSA9PiB7XG4gICAgICByZXR1cm4gYXJnMSAhPT0gdm9pZCAwID8gYXdhaXQgZGVsZXRlXyhhcmcwLCBhcmcxKSA6IGF3YWl0IGRlbGV0ZV8odm9pZCAwLCBhcmcwKTtcbiAgICB9LFxuICAgIHRhYmxlOiAodGFibGVOYW1lKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFRhYmxlV3JpdGVyKHRhYmxlTmFtZSwgZmFsc2UpO1xuICAgIH1cbiAgfTtcbn1cbmNsYXNzIFRhYmxlUmVhZGVyIHtcbiAgY29uc3RydWN0b3IodGFibGVOYW1lLCBpc1N5c3RlbSkge1xuICAgIHRoaXMudGFibGVOYW1lID0gdGFibGVOYW1lO1xuICAgIHRoaXMuaXNTeXN0ZW0gPSBpc1N5c3RlbTtcbiAgfVxuICBhc3luYyBnZXQoaWQpIHtcbiAgICByZXR1cm4gZ2V0KHRoaXMudGFibGVOYW1lLCBpZCwgdGhpcy5pc1N5c3RlbSk7XG4gIH1cbiAgcXVlcnkoKSB7XG4gICAgY29uc3QgYWNjZXNzaW5nU3lzdGVtVGFibGUgPSB0aGlzLnRhYmxlTmFtZS5zdGFydHNXaXRoKFwiX1wiKTtcbiAgICBpZiAoYWNjZXNzaW5nU3lzdGVtVGFibGUgIT09IHRoaXMuaXNTeXN0ZW0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYCR7YWNjZXNzaW5nU3lzdGVtVGFibGUgPyBcIlN5c3RlbVwiIDogXCJVc2VyXCJ9IHRhYmxlcyBjYW4gb25seSBiZSBhY2Nlc3NlZCBmcm9tIGRiLiR7dGhpcy5pc1N5c3RlbSA/IFwiXCIgOiBcInN5c3RlbS5cIn1xdWVyeSgpLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUXVlcnlJbml0aWFsaXplckltcGwodGhpcy50YWJsZU5hbWUpO1xuICB9XG59XG5jbGFzcyBUYWJsZVdyaXRlciBleHRlbmRzIFRhYmxlUmVhZGVyIHtcbiAgYXN5bmMgaW5zZXJ0KHZhbHVlKSB7XG4gICAgcmV0dXJuIGluc2VydCh0aGlzLnRhYmxlTmFtZSwgdmFsdWUpO1xuICB9XG4gIGFzeW5jIHBhdGNoKGlkLCB2YWx1ZSkge1xuICAgIHJldHVybiBwYXRjaCh0aGlzLnRhYmxlTmFtZSwgaWQsIHZhbHVlKTtcbiAgfVxuICBhc3luYyByZXBsYWNlKGlkLCB2YWx1ZSkge1xuICAgIHJldHVybiByZXBsYWNlKHRoaXMudGFibGVOYW1lLCBpZCwgdmFsdWUpO1xuICB9XG4gIGFzeW5jIGRlbGV0ZShpZCkge1xuICAgIHJldHVybiBkZWxldGVfKHRoaXMudGFibGVOYW1lLCBpZCk7XG4gIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGFiYXNlX2ltcGwuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/database_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/filter_builder_impl.js":
/*!*************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/filter_builder_impl.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExpressionImpl: () => (/* binding */ ExpressionImpl),\n/* harmony export */   filterBuilderImpl: () => (/* binding */ filterBuilderImpl),\n/* harmony export */   serializeExpression: () => (/* binding */ serializeExpression)\n/* harmony export */ });\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n/* harmony import */ var _filter_builder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter_builder.js */ \"(ssr)/./node_modules/convex/dist/esm/server/filter_builder.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\nclass ExpressionImpl extends _filter_builder_js__WEBPACK_IMPORTED_MODULE_1__.Expression {\n  constructor(inner) {\n    super();\n    __publicField(this, \"inner\");\n    this.inner = inner;\n  }\n  serialize() {\n    return this.inner;\n  }\n}\nfunction serializeExpression(expr) {\n  if (expr instanceof ExpressionImpl) {\n    return expr.serialize();\n  } else {\n    return { $literal: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(expr) };\n  }\n}\nconst filterBuilderImpl = {\n  //  Comparisons  /////////////////////////////////////////////////////////////\n  eq(l, r) {\n    return new ExpressionImpl({\n      $eq: [serializeExpression(l), serializeExpression(r)]\n    });\n  },\n  neq(l, r) {\n    return new ExpressionImpl({\n      $neq: [serializeExpression(l), serializeExpression(r)]\n    });\n  },\n  lt(l, r) {\n    return new ExpressionImpl({\n      $lt: [serializeExpression(l), serializeExpression(r)]\n    });\n  },\n  lte(l, r) {\n    return new ExpressionImpl({\n      $lte: [serializeExpression(l), serializeExpression(r)]\n    });\n  },\n  gt(l, r) {\n    return new ExpressionImpl({\n      $gt: [serializeExpression(l), serializeExpression(r)]\n    });\n  },\n  gte(l, r) {\n    return new ExpressionImpl({\n      $gte: [serializeExpression(l), serializeExpression(r)]\n    });\n  },\n  //  Arithmetic  //////////////////////////////////////////////////////////////\n  add(l, r) {\n    return new ExpressionImpl({\n      $add: [serializeExpression(l), serializeExpression(r)]\n    });\n  },\n  sub(l, r) {\n    return new ExpressionImpl({\n      $sub: [serializeExpression(l), serializeExpression(r)]\n    });\n  },\n  mul(l, r) {\n    return new ExpressionImpl({\n      $mul: [serializeExpression(l), serializeExpression(r)]\n    });\n  },\n  div(l, r) {\n    return new ExpressionImpl({\n      $div: [serializeExpression(l), serializeExpression(r)]\n    });\n  },\n  mod(l, r) {\n    return new ExpressionImpl({\n      $mod: [serializeExpression(l), serializeExpression(r)]\n    });\n  },\n  neg(x) {\n    return new ExpressionImpl({ $neg: serializeExpression(x) });\n  },\n  //  Logic  ///////////////////////////////////////////////////////////////////\n  and(...exprs) {\n    return new ExpressionImpl({ $and: exprs.map(serializeExpression) });\n  },\n  or(...exprs) {\n    return new ExpressionImpl({ $or: exprs.map(serializeExpression) });\n  },\n  not(x) {\n    return new ExpressionImpl({ $not: serializeExpression(x) });\n  },\n  //  Other  ///////////////////////////////////////////////////////////////////\n  field(fieldPath) {\n    return new ExpressionImpl({ $field: fieldPath });\n  }\n};\n//# sourceMappingURL=filter_builder_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL2ZpbHRlcl9idWlsZGVyX2ltcGwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNnRTtBQUdsQztBQUN2Qiw2QkFBNkIsMERBQVU7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsSUFBSTtBQUNKLGFBQWEsVUFBVSx5RUFBdUI7QUFDOUM7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLGdDQUFnQyw4QkFBOEI7QUFDOUQsR0FBRztBQUNIO0FBQ0E7QUFDQSxnQ0FBZ0Msc0NBQXNDO0FBQ3RFLEdBQUc7QUFDSDtBQUNBLGdDQUFnQyxxQ0FBcUM7QUFDckUsR0FBRztBQUNIO0FBQ0EsZ0NBQWdDLDhCQUE4QjtBQUM5RCxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdDQUFnQyxtQkFBbUI7QUFDbkQ7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHNlcnZlclxcaW1wbFxcZmlsdGVyX2J1aWxkZXJfaW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG5pbXBvcnQgeyBjb252ZXhPclVuZGVmaW5lZFRvSnNvbiB9IGZyb20gXCIuLi8uLi92YWx1ZXMvdmFsdWUuanNcIjtcbmltcG9ydCB7XG4gIEV4cHJlc3Npb25cbn0gZnJvbSBcIi4uL2ZpbHRlcl9idWlsZGVyLmpzXCI7XG5leHBvcnQgY2xhc3MgRXhwcmVzc2lvbkltcGwgZXh0ZW5kcyBFeHByZXNzaW9uIHtcbiAgY29uc3RydWN0b3IoaW5uZXIpIHtcbiAgICBzdXBlcigpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJpbm5lclwiKTtcbiAgICB0aGlzLmlubmVyID0gaW5uZXI7XG4gIH1cbiAgc2VyaWFsaXplKCkge1xuICAgIHJldHVybiB0aGlzLmlubmVyO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplRXhwcmVzc2lvbihleHByKSB7XG4gIGlmIChleHByIGluc3RhbmNlb2YgRXhwcmVzc2lvbkltcGwpIHtcbiAgICByZXR1cm4gZXhwci5zZXJpYWxpemUoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geyAkbGl0ZXJhbDogY29udmV4T3JVbmRlZmluZWRUb0pzb24oZXhwcikgfTtcbiAgfVxufVxuZXhwb3J0IGNvbnN0IGZpbHRlckJ1aWxkZXJJbXBsID0ge1xuICAvLyAgQ29tcGFyaXNvbnMgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgZXEobCwgcikge1xuICAgIHJldHVybiBuZXcgRXhwcmVzc2lvbkltcGwoe1xuICAgICAgJGVxOiBbc2VyaWFsaXplRXhwcmVzc2lvbihsKSwgc2VyaWFsaXplRXhwcmVzc2lvbihyKV1cbiAgICB9KTtcbiAgfSxcbiAgbmVxKGwsIHIpIHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHtcbiAgICAgICRuZXE6IFtzZXJpYWxpemVFeHByZXNzaW9uKGwpLCBzZXJpYWxpemVFeHByZXNzaW9uKHIpXVxuICAgIH0pO1xuICB9LFxuICBsdChsLCByKSB7XG4gICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uSW1wbCh7XG4gICAgICAkbHQ6IFtzZXJpYWxpemVFeHByZXNzaW9uKGwpLCBzZXJpYWxpemVFeHByZXNzaW9uKHIpXVxuICAgIH0pO1xuICB9LFxuICBsdGUobCwgcikge1xuICAgIHJldHVybiBuZXcgRXhwcmVzc2lvbkltcGwoe1xuICAgICAgJGx0ZTogW3NlcmlhbGl6ZUV4cHJlc3Npb24obCksIHNlcmlhbGl6ZUV4cHJlc3Npb24ocildXG4gICAgfSk7XG4gIH0sXG4gIGd0KGwsIHIpIHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHtcbiAgICAgICRndDogW3NlcmlhbGl6ZUV4cHJlc3Npb24obCksIHNlcmlhbGl6ZUV4cHJlc3Npb24ocildXG4gICAgfSk7XG4gIH0sXG4gIGd0ZShsLCByKSB7XG4gICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uSW1wbCh7XG4gICAgICAkZ3RlOiBbc2VyaWFsaXplRXhwcmVzc2lvbihsKSwgc2VyaWFsaXplRXhwcmVzc2lvbihyKV1cbiAgICB9KTtcbiAgfSxcbiAgLy8gIEFyaXRobWV0aWMgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIGFkZChsLCByKSB7XG4gICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uSW1wbCh7XG4gICAgICAkYWRkOiBbc2VyaWFsaXplRXhwcmVzc2lvbihsKSwgc2VyaWFsaXplRXhwcmVzc2lvbihyKV1cbiAgICB9KTtcbiAgfSxcbiAgc3ViKGwsIHIpIHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHtcbiAgICAgICRzdWI6IFtzZXJpYWxpemVFeHByZXNzaW9uKGwpLCBzZXJpYWxpemVFeHByZXNzaW9uKHIpXVxuICAgIH0pO1xuICB9LFxuICBtdWwobCwgcikge1xuICAgIHJldHVybiBuZXcgRXhwcmVzc2lvbkltcGwoe1xuICAgICAgJG11bDogW3NlcmlhbGl6ZUV4cHJlc3Npb24obCksIHNlcmlhbGl6ZUV4cHJlc3Npb24ocildXG4gICAgfSk7XG4gIH0sXG4gIGRpdihsLCByKSB7XG4gICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uSW1wbCh7XG4gICAgICAkZGl2OiBbc2VyaWFsaXplRXhwcmVzc2lvbihsKSwgc2VyaWFsaXplRXhwcmVzc2lvbihyKV1cbiAgICB9KTtcbiAgfSxcbiAgbW9kKGwsIHIpIHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHtcbiAgICAgICRtb2Q6IFtzZXJpYWxpemVFeHByZXNzaW9uKGwpLCBzZXJpYWxpemVFeHByZXNzaW9uKHIpXVxuICAgIH0pO1xuICB9LFxuICBuZWcoeCkge1xuICAgIHJldHVybiBuZXcgRXhwcmVzc2lvbkltcGwoeyAkbmVnOiBzZXJpYWxpemVFeHByZXNzaW9uKHgpIH0pO1xuICB9LFxuICAvLyAgTG9naWMgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgYW5kKC4uLmV4cHJzKSB7XG4gICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uSW1wbCh7ICRhbmQ6IGV4cHJzLm1hcChzZXJpYWxpemVFeHByZXNzaW9uKSB9KTtcbiAgfSxcbiAgb3IoLi4uZXhwcnMpIHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHsgJG9yOiBleHBycy5tYXAoc2VyaWFsaXplRXhwcmVzc2lvbikgfSk7XG4gIH0sXG4gIG5vdCh4KSB7XG4gICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uSW1wbCh7ICRub3Q6IHNlcmlhbGl6ZUV4cHJlc3Npb24oeCkgfSk7XG4gIH0sXG4gIC8vICBPdGhlciAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBmaWVsZChmaWVsZFBhdGgpIHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHsgJGZpZWxkOiBmaWVsZFBhdGggfSk7XG4gIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maWx0ZXJfYnVpbGRlcl9pbXBsLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/filter_builder_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/index_range_builder_impl.js":
/*!******************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/index_range_builder_impl.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IndexRangeBuilderImpl: () => (/* binding */ IndexRangeBuilderImpl)\n/* harmony export */ });\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n/* harmony import */ var _index_range_builder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index_range_builder.js */ \"(ssr)/./node_modules/convex/dist/esm/server/index_range_builder.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\nclass IndexRangeBuilderImpl extends _index_range_builder_js__WEBPACK_IMPORTED_MODULE_1__.IndexRange {\n  constructor(rangeExpressions) {\n    super();\n    __publicField(this, \"rangeExpressions\");\n    __publicField(this, \"isConsumed\");\n    this.rangeExpressions = rangeExpressions;\n    this.isConsumed = false;\n  }\n  static new() {\n    return new IndexRangeBuilderImpl([]);\n  }\n  consume() {\n    if (this.isConsumed) {\n      throw new Error(\n        \"IndexRangeBuilder has already been used! Chain your method calls like `q => q.eq(...).eq(...)`. See https://docs.convex.dev/using/indexes\"\n      );\n    }\n    this.isConsumed = true;\n  }\n  eq(fieldName, value) {\n    this.consume();\n    return new IndexRangeBuilderImpl(\n      this.rangeExpressions.concat({\n        type: \"Eq\",\n        fieldPath: fieldName,\n        value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(value)\n      })\n    );\n  }\n  gt(fieldName, value) {\n    this.consume();\n    return new IndexRangeBuilderImpl(\n      this.rangeExpressions.concat({\n        type: \"Gt\",\n        fieldPath: fieldName,\n        value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(value)\n      })\n    );\n  }\n  gte(fieldName, value) {\n    this.consume();\n    return new IndexRangeBuilderImpl(\n      this.rangeExpressions.concat({\n        type: \"Gte\",\n        fieldPath: fieldName,\n        value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(value)\n      })\n    );\n  }\n  lt(fieldName, value) {\n    this.consume();\n    return new IndexRangeBuilderImpl(\n      this.rangeExpressions.concat({\n        type: \"Lt\",\n        fieldPath: fieldName,\n        value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(value)\n      })\n    );\n  }\n  lte(fieldName, value) {\n    this.consume();\n    return new IndexRangeBuilderImpl(\n      this.rangeExpressions.concat({\n        type: \"Lte\",\n        fieldPath: fieldName,\n        value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(value)\n      })\n    );\n  }\n  export() {\n    this.consume();\n    return this.rangeExpressions;\n  }\n}\n//# sourceMappingURL=index_range_builder_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL2luZGV4X3JhbmdlX2J1aWxkZXJfaW1wbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNnRTtBQUc3QjtBQUM1QixvQ0FBb0MsK0RBQVU7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5RUFBdUI7QUFDdEMsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlFQUF1QjtBQUN0QyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUVBQXVCO0FBQ3RDLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5RUFBdUI7QUFDdEMsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlFQUF1QjtBQUN0QyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxzZXJ2ZXJcXGltcGxcXGluZGV4X3JhbmdlX2J1aWxkZXJfaW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG5pbXBvcnQgeyBjb252ZXhPclVuZGVmaW5lZFRvSnNvbiB9IGZyb20gXCIuLi8uLi92YWx1ZXMvdmFsdWUuanNcIjtcbmltcG9ydCB7XG4gIEluZGV4UmFuZ2Vcbn0gZnJvbSBcIi4uL2luZGV4X3JhbmdlX2J1aWxkZXIuanNcIjtcbmV4cG9ydCBjbGFzcyBJbmRleFJhbmdlQnVpbGRlckltcGwgZXh0ZW5kcyBJbmRleFJhbmdlIHtcbiAgY29uc3RydWN0b3IocmFuZ2VFeHByZXNzaW9ucykge1xuICAgIHN1cGVyKCk7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInJhbmdlRXhwcmVzc2lvbnNcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImlzQ29uc3VtZWRcIik7XG4gICAgdGhpcy5yYW5nZUV4cHJlc3Npb25zID0gcmFuZ2VFeHByZXNzaW9ucztcbiAgICB0aGlzLmlzQ29uc3VtZWQgPSBmYWxzZTtcbiAgfVxuICBzdGF0aWMgbmV3KCkge1xuICAgIHJldHVybiBuZXcgSW5kZXhSYW5nZUJ1aWxkZXJJbXBsKFtdKTtcbiAgfVxuICBjb25zdW1lKCkge1xuICAgIGlmICh0aGlzLmlzQ29uc3VtZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJJbmRleFJhbmdlQnVpbGRlciBoYXMgYWxyZWFkeSBiZWVuIHVzZWQhIENoYWluIHlvdXIgbWV0aG9kIGNhbGxzIGxpa2UgYHEgPT4gcS5lcSguLi4pLmVxKC4uLilgLiBTZWUgaHR0cHM6Ly9kb2NzLmNvbnZleC5kZXYvdXNpbmcvaW5kZXhlc1wiXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLmlzQ29uc3VtZWQgPSB0cnVlO1xuICB9XG4gIGVxKGZpZWxkTmFtZSwgdmFsdWUpIHtcbiAgICB0aGlzLmNvbnN1bWUoKTtcbiAgICByZXR1cm4gbmV3IEluZGV4UmFuZ2VCdWlsZGVySW1wbChcbiAgICAgIHRoaXMucmFuZ2VFeHByZXNzaW9ucy5jb25jYXQoe1xuICAgICAgICB0eXBlOiBcIkVxXCIsXG4gICAgICAgIGZpZWxkUGF0aDogZmllbGROYW1lLFxuICAgICAgICB2YWx1ZTogY29udmV4T3JVbmRlZmluZWRUb0pzb24odmFsdWUpXG4gICAgICB9KVxuICAgICk7XG4gIH1cbiAgZ3QoZmllbGROYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMuY29uc3VtZSgpO1xuICAgIHJldHVybiBuZXcgSW5kZXhSYW5nZUJ1aWxkZXJJbXBsKFxuICAgICAgdGhpcy5yYW5nZUV4cHJlc3Npb25zLmNvbmNhdCh7XG4gICAgICAgIHR5cGU6IFwiR3RcIixcbiAgICAgICAgZmllbGRQYXRoOiBmaWVsZE5hbWUsXG4gICAgICAgIHZhbHVlOiBjb252ZXhPclVuZGVmaW5lZFRvSnNvbih2YWx1ZSlcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuICBndGUoZmllbGROYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMuY29uc3VtZSgpO1xuICAgIHJldHVybiBuZXcgSW5kZXhSYW5nZUJ1aWxkZXJJbXBsKFxuICAgICAgdGhpcy5yYW5nZUV4cHJlc3Npb25zLmNvbmNhdCh7XG4gICAgICAgIHR5cGU6IFwiR3RlXCIsXG4gICAgICAgIGZpZWxkUGF0aDogZmllbGROYW1lLFxuICAgICAgICB2YWx1ZTogY29udmV4T3JVbmRlZmluZWRUb0pzb24odmFsdWUpXG4gICAgICB9KVxuICAgICk7XG4gIH1cbiAgbHQoZmllbGROYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMuY29uc3VtZSgpO1xuICAgIHJldHVybiBuZXcgSW5kZXhSYW5nZUJ1aWxkZXJJbXBsKFxuICAgICAgdGhpcy5yYW5nZUV4cHJlc3Npb25zLmNvbmNhdCh7XG4gICAgICAgIHR5cGU6IFwiTHRcIixcbiAgICAgICAgZmllbGRQYXRoOiBmaWVsZE5hbWUsXG4gICAgICAgIHZhbHVlOiBjb252ZXhPclVuZGVmaW5lZFRvSnNvbih2YWx1ZSlcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuICBsdGUoZmllbGROYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMuY29uc3VtZSgpO1xuICAgIHJldHVybiBuZXcgSW5kZXhSYW5nZUJ1aWxkZXJJbXBsKFxuICAgICAgdGhpcy5yYW5nZUV4cHJlc3Npb25zLmNvbmNhdCh7XG4gICAgICAgIHR5cGU6IFwiTHRlXCIsXG4gICAgICAgIGZpZWxkUGF0aDogZmllbGROYW1lLFxuICAgICAgICB2YWx1ZTogY29udmV4T3JVbmRlZmluZWRUb0pzb24odmFsdWUpXG4gICAgICB9KVxuICAgICk7XG4gIH1cbiAgZXhwb3J0KCkge1xuICAgIHRoaXMuY29uc3VtZSgpO1xuICAgIHJldHVybiB0aGlzLnJhbmdlRXhwcmVzc2lvbnM7XG4gIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4X3JhbmdlX2J1aWxkZXJfaW1wbC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/index_range_builder_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/query_impl.js":
/*!****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/query_impl.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryImpl: () => (/* binding */ QueryImpl),\n/* harmony export */   QueryInitializerImpl: () => (/* binding */ QueryInitializerImpl)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _filter_builder_impl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./filter_builder_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/filter_builder_impl.js\");\n/* harmony import */ var _index_range_builder_impl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index_range_builder_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/index_range_builder_impl.js\");\n/* harmony import */ var _search_filter_builder_impl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./search_filter_builder_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/search_filter_builder_impl.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\n\n\nconst MAX_QUERY_OPERATORS = 256;\nclass QueryInitializerImpl {\n  constructor(tableName) {\n    __publicField(this, \"tableName\");\n    this.tableName = tableName;\n  }\n  withIndex(indexName, indexRange) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(indexName, 1, \"withIndex\", \"indexName\");\n    let rangeBuilder = _index_range_builder_impl_js__WEBPACK_IMPORTED_MODULE_3__.IndexRangeBuilderImpl.new();\n    if (indexRange !== void 0) {\n      rangeBuilder = indexRange(rangeBuilder);\n    }\n    return new QueryImpl({\n      source: {\n        type: \"IndexRange\",\n        indexName: this.tableName + \".\" + indexName,\n        range: rangeBuilder.export(),\n        order: null\n      },\n      operators: []\n    });\n  }\n  withSearchIndex(indexName, searchFilter) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(indexName, 1, \"withSearchIndex\", \"indexName\");\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(searchFilter, 2, \"withSearchIndex\", \"searchFilter\");\n    const searchFilterBuilder = _search_filter_builder_impl_js__WEBPACK_IMPORTED_MODULE_4__.SearchFilterBuilderImpl.new();\n    return new QueryImpl({\n      source: {\n        type: \"Search\",\n        indexName: this.tableName + \".\" + indexName,\n        filters: searchFilter(searchFilterBuilder).export()\n      },\n      operators: []\n    });\n  }\n  fullTableScan() {\n    return new QueryImpl({\n      source: {\n        type: \"FullTableScan\",\n        tableName: this.tableName,\n        order: null\n      },\n      operators: []\n    });\n  }\n  order(order) {\n    return this.fullTableScan().order(order);\n  }\n  // This is internal API and should not be exposed to developers yet.\n  async count() {\n    const syscallJSON = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/count\", {\n      table: this.tableName\n    });\n    const syscallResult = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(syscallJSON);\n    return syscallResult;\n  }\n  filter(predicate) {\n    return this.fullTableScan().filter(predicate);\n  }\n  limit(n) {\n    return this.fullTableScan().limit(n);\n  }\n  collect() {\n    return this.fullTableScan().collect();\n  }\n  take(n) {\n    return this.fullTableScan().take(n);\n  }\n  paginate(paginationOpts) {\n    return this.fullTableScan().paginate(paginationOpts);\n  }\n  first() {\n    return this.fullTableScan().first();\n  }\n  unique() {\n    return this.fullTableScan().unique();\n  }\n  [Symbol.asyncIterator]() {\n    return this.fullTableScan()[Symbol.asyncIterator]();\n  }\n}\nfunction throwClosedError(type) {\n  throw new Error(\n    type === \"consumed\" ? \"This query is closed and can't emit any more values.\" : \"This query has been chained with another operator and can't be reused.\"\n  );\n}\nclass QueryImpl {\n  constructor(query) {\n    __publicField(this, \"state\");\n    __publicField(this, \"tableNameForErrorMessages\");\n    this.state = { type: \"preparing\", query };\n    if (query.source.type === \"FullTableScan\") {\n      this.tableNameForErrorMessages = query.source.tableName;\n    } else {\n      this.tableNameForErrorMessages = query.source.indexName.split(\".\")[0];\n    }\n  }\n  takeQuery() {\n    if (this.state.type !== \"preparing\") {\n      throw new Error(\n        \"A query can only be chained once and can't be chained after iteration begins.\"\n      );\n    }\n    const query = this.state.query;\n    this.state = { type: \"closed\" };\n    return query;\n  }\n  startQuery() {\n    if (this.state.type === \"executing\") {\n      throw new Error(\"Iteration can only begin on a query once.\");\n    }\n    if (this.state.type === \"closed\" || this.state.type === \"consumed\") {\n      throwClosedError(this.state.type);\n    }\n    const query = this.state.query;\n    const { queryId } = (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performSyscall)(\"1.0/queryStream\", { query, version: _index_js__WEBPACK_IMPORTED_MODULE_6__.version });\n    this.state = { type: \"executing\", queryId };\n    return queryId;\n  }\n  closeQuery() {\n    if (this.state.type === \"executing\") {\n      const queryId = this.state.queryId;\n      (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performSyscall)(\"1.0/queryCleanup\", { queryId });\n    }\n    this.state = { type: \"consumed\" };\n  }\n  order(order) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(order, 1, \"order\", \"order\");\n    const query = this.takeQuery();\n    if (query.source.type === \"Search\") {\n      throw new Error(\n        \"Search queries must always be in relevance order. Can not set order manually.\"\n      );\n    }\n    if (query.source.order !== null) {\n      throw new Error(\"Queries may only specify order at most once\");\n    }\n    query.source.order = order;\n    return new QueryImpl(query);\n  }\n  filter(predicate) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(predicate, 1, \"filter\", \"predicate\");\n    const query = this.takeQuery();\n    if (query.operators.length >= MAX_QUERY_OPERATORS) {\n      throw new Error(\n        `Can't construct query with more than ${MAX_QUERY_OPERATORS} operators`\n      );\n    }\n    query.operators.push({\n      filter: (0,_filter_builder_impl_js__WEBPACK_IMPORTED_MODULE_2__.serializeExpression)(predicate(_filter_builder_impl_js__WEBPACK_IMPORTED_MODULE_2__.filterBuilderImpl))\n    });\n    return new QueryImpl(query);\n  }\n  limit(n) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(n, 1, \"limit\", \"n\");\n    const query = this.takeQuery();\n    query.operators.push({ limit: n });\n    return new QueryImpl(query);\n  }\n  [Symbol.asyncIterator]() {\n    this.startQuery();\n    return this;\n  }\n  async next() {\n    if (this.state.type === \"closed\" || this.state.type === \"consumed\") {\n      throwClosedError(this.state.type);\n    }\n    const queryId = this.state.type === \"preparing\" ? this.startQuery() : this.state.queryId;\n    const { value, done } = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/queryStreamNext\", {\n      queryId\n    });\n    if (done) {\n      this.closeQuery();\n    }\n    const convexValue = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(value);\n    return { value: convexValue, done };\n  }\n  return() {\n    this.closeQuery();\n    return Promise.resolve({ done: true, value: void 0 });\n  }\n  async paginate(paginationOpts) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(paginationOpts, 1, \"paginate\", \"options\");\n    if (typeof paginationOpts?.numItems !== \"number\" || paginationOpts.numItems < 0) {\n      throw new Error(\n        `\\`options.numItems\\` must be a positive number. Received \\`${paginationOpts?.numItems}\\`.`\n      );\n    }\n    const query = this.takeQuery();\n    const pageSize = paginationOpts.numItems;\n    const cursor = paginationOpts.cursor;\n    const endCursor = paginationOpts?.endCursor ?? null;\n    const maximumRowsRead = paginationOpts.maximumRowsRead ?? null;\n    const { page, isDone, continueCursor, splitCursor, pageStatus } = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/queryPage\", {\n      query,\n      cursor,\n      endCursor,\n      pageSize,\n      maximumRowsRead,\n      maximumBytesRead: paginationOpts.maximumBytesRead,\n      version: _index_js__WEBPACK_IMPORTED_MODULE_6__.version\n    });\n    return {\n      page: page.map((json) => (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(json)),\n      isDone,\n      continueCursor,\n      splitCursor,\n      pageStatus\n    };\n  }\n  async collect() {\n    const out = [];\n    for await (const item of this) {\n      out.push(item);\n    }\n    return out;\n  }\n  async take(n) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(n, 1, \"take\", \"n\");\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArgIsNonNegativeInteger)(n, 1, \"take\", \"n\");\n    return this.limit(n).collect();\n  }\n  async first() {\n    const first_array = await this.take(1);\n    return first_array.length === 0 ? null : first_array[0];\n  }\n  async unique() {\n    const first_two_array = await this.take(2);\n    if (first_two_array.length === 0) {\n      return null;\n    }\n    if (first_two_array.length === 2) {\n      throw new Error(`unique() query returned more than one result from table ${this.tableNameForErrorMessages}:\n [${first_two_array[0]._id}, ${first_two_array[1]._id}, ...]`);\n    }\n    return first_two_array[0];\n  }\n}\n//# sourceMappingURL=query_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3F1ZXJ5X2ltcGwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQWE7QUFDYjtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDcUQ7QUFDYztBQUlqQztBQUdLO0FBR0U7QUFDb0M7QUFDcEM7QUFDekM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHlEQUFXO0FBQ2YsdUJBQXVCLCtFQUFxQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUkseURBQVc7QUFDZixJQUFJLHlEQUFXO0FBQ2YsZ0NBQWdDLG1GQUF1QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixnRUFBbUI7QUFDakQ7QUFDQSxLQUFLO0FBQ0wsMEJBQTBCLDhEQUFZO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxVQUFVLEVBQUUsMkRBQWMsc0JBQXNCLGNBQWMsa0RBQUU7QUFDNUUsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDJEQUFjLHVCQUF1QixTQUFTO0FBQ3BEO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxJQUFJLHlEQUFXO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHlEQUFXO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELHFCQUFxQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDRFQUFtQixXQUFXLHNFQUFpQjtBQUM3RCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSSx5REFBVztBQUNmO0FBQ0EsMkJBQTJCLFVBQVU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksY0FBYyxRQUFRLGdFQUFtQjtBQUNyRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOERBQVk7QUFDcEMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwyQkFBMkI7QUFDeEQ7QUFDQTtBQUNBLElBQUkseURBQVc7QUFDZjtBQUNBO0FBQ0Esc0VBQXNFLHlCQUF5QjtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0RBQXdELFFBQVEsZ0VBQW1CO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixLQUFLO0FBQ0w7QUFDQSwrQkFBK0IsOERBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkseURBQVc7QUFDZixJQUFJLDZFQUErQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsK0JBQStCO0FBQ2hILElBQUksdUJBQXVCLElBQUksdUJBQXVCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxpbXBsXFxxdWVyeV9pbXBsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbnZhciBfX2RlZk5vcm1hbFByb3AgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBrZXkgaW4gb2JqID8gX19kZWZQcm9wKG9iaiwga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUsIHZhbHVlIH0pIDogb2JqW2tleV0gPSB2YWx1ZTtcbnZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gXCJzeW1ib2xcIiA/IGtleSArIFwiXCIgOiBrZXksIHZhbHVlKTtcbmltcG9ydCB7IGpzb25Ub0NvbnZleCB9IGZyb20gXCIuLi8uLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IHBlcmZvcm1Bc3luY1N5c2NhbGwsIHBlcmZvcm1TeXNjYWxsIH0gZnJvbSBcIi4vc3lzY2FsbC5qc1wiO1xuaW1wb3J0IHtcbiAgZmlsdGVyQnVpbGRlckltcGwsXG4gIHNlcmlhbGl6ZUV4cHJlc3Npb25cbn0gZnJvbSBcIi4vZmlsdGVyX2J1aWxkZXJfaW1wbC5qc1wiO1xuaW1wb3J0IHtcbiAgSW5kZXhSYW5nZUJ1aWxkZXJJbXBsXG59IGZyb20gXCIuL2luZGV4X3JhbmdlX2J1aWxkZXJfaW1wbC5qc1wiO1xuaW1wb3J0IHtcbiAgU2VhcmNoRmlsdGVyQnVpbGRlckltcGxcbn0gZnJvbSBcIi4vc2VhcmNoX2ZpbHRlcl9idWlsZGVyX2ltcGwuanNcIjtcbmltcG9ydCB7IHZhbGlkYXRlQXJnLCB2YWxpZGF0ZUFyZ0lzTm9uTmVnYXRpdmVJbnRlZ2VyIH0gZnJvbSBcIi4vdmFsaWRhdGUuanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vLi4vaW5kZXguanNcIjtcbmNvbnN0IE1BWF9RVUVSWV9PUEVSQVRPUlMgPSAyNTY7XG5leHBvcnQgY2xhc3MgUXVlcnlJbml0aWFsaXplckltcGwge1xuICBjb25zdHJ1Y3Rvcih0YWJsZU5hbWUpIHtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidGFibGVOYW1lXCIpO1xuICAgIHRoaXMudGFibGVOYW1lID0gdGFibGVOYW1lO1xuICB9XG4gIHdpdGhJbmRleChpbmRleE5hbWUsIGluZGV4UmFuZ2UpIHtcbiAgICB2YWxpZGF0ZUFyZyhpbmRleE5hbWUsIDEsIFwid2l0aEluZGV4XCIsIFwiaW5kZXhOYW1lXCIpO1xuICAgIGxldCByYW5nZUJ1aWxkZXIgPSBJbmRleFJhbmdlQnVpbGRlckltcGwubmV3KCk7XG4gICAgaWYgKGluZGV4UmFuZ2UgIT09IHZvaWQgMCkge1xuICAgICAgcmFuZ2VCdWlsZGVyID0gaW5kZXhSYW5nZShyYW5nZUJ1aWxkZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbCh7XG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgdHlwZTogXCJJbmRleFJhbmdlXCIsXG4gICAgICAgIGluZGV4TmFtZTogdGhpcy50YWJsZU5hbWUgKyBcIi5cIiArIGluZGV4TmFtZSxcbiAgICAgICAgcmFuZ2U6IHJhbmdlQnVpbGRlci5leHBvcnQoKSxcbiAgICAgICAgb3JkZXI6IG51bGxcbiAgICAgIH0sXG4gICAgICBvcGVyYXRvcnM6IFtdXG4gICAgfSk7XG4gIH1cbiAgd2l0aFNlYXJjaEluZGV4KGluZGV4TmFtZSwgc2VhcmNoRmlsdGVyKSB7XG4gICAgdmFsaWRhdGVBcmcoaW5kZXhOYW1lLCAxLCBcIndpdGhTZWFyY2hJbmRleFwiLCBcImluZGV4TmFtZVwiKTtcbiAgICB2YWxpZGF0ZUFyZyhzZWFyY2hGaWx0ZXIsIDIsIFwid2l0aFNlYXJjaEluZGV4XCIsIFwic2VhcmNoRmlsdGVyXCIpO1xuICAgIGNvbnN0IHNlYXJjaEZpbHRlckJ1aWxkZXIgPSBTZWFyY2hGaWx0ZXJCdWlsZGVySW1wbC5uZXcoKTtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbCh7XG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgdHlwZTogXCJTZWFyY2hcIixcbiAgICAgICAgaW5kZXhOYW1lOiB0aGlzLnRhYmxlTmFtZSArIFwiLlwiICsgaW5kZXhOYW1lLFxuICAgICAgICBmaWx0ZXJzOiBzZWFyY2hGaWx0ZXIoc2VhcmNoRmlsdGVyQnVpbGRlcikuZXhwb3J0KClcbiAgICAgIH0sXG4gICAgICBvcGVyYXRvcnM6IFtdXG4gICAgfSk7XG4gIH1cbiAgZnVsbFRhYmxlU2NhbigpIHtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbCh7XG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgdHlwZTogXCJGdWxsVGFibGVTY2FuXCIsXG4gICAgICAgIHRhYmxlTmFtZTogdGhpcy50YWJsZU5hbWUsXG4gICAgICAgIG9yZGVyOiBudWxsXG4gICAgICB9LFxuICAgICAgb3BlcmF0b3JzOiBbXVxuICAgIH0pO1xuICB9XG4gIG9yZGVyKG9yZGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuZnVsbFRhYmxlU2NhbigpLm9yZGVyKG9yZGVyKTtcbiAgfVxuICAvLyBUaGlzIGlzIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSBleHBvc2VkIHRvIGRldmVsb3BlcnMgeWV0LlxuICBhc3luYyBjb3VudCgpIHtcbiAgICBjb25zdCBzeXNjYWxsSlNPTiA9IGF3YWl0IHBlcmZvcm1Bc3luY1N5c2NhbGwoXCIxLjAvY291bnRcIiwge1xuICAgICAgdGFibGU6IHRoaXMudGFibGVOYW1lXG4gICAgfSk7XG4gICAgY29uc3Qgc3lzY2FsbFJlc3VsdCA9IGpzb25Ub0NvbnZleChzeXNjYWxsSlNPTik7XG4gICAgcmV0dXJuIHN5c2NhbGxSZXN1bHQ7XG4gIH1cbiAgZmlsdGVyKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiB0aGlzLmZ1bGxUYWJsZVNjYW4oKS5maWx0ZXIocHJlZGljYXRlKTtcbiAgfVxuICBsaW1pdChuKSB7XG4gICAgcmV0dXJuIHRoaXMuZnVsbFRhYmxlU2NhbigpLmxpbWl0KG4pO1xuICB9XG4gIGNvbGxlY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZnVsbFRhYmxlU2NhbigpLmNvbGxlY3QoKTtcbiAgfVxuICB0YWtlKG4pIHtcbiAgICByZXR1cm4gdGhpcy5mdWxsVGFibGVTY2FuKCkudGFrZShuKTtcbiAgfVxuICBwYWdpbmF0ZShwYWdpbmF0aW9uT3B0cykge1xuICAgIHJldHVybiB0aGlzLmZ1bGxUYWJsZVNjYW4oKS5wYWdpbmF0ZShwYWdpbmF0aW9uT3B0cyk7XG4gIH1cbiAgZmlyc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZnVsbFRhYmxlU2NhbigpLmZpcnN0KCk7XG4gIH1cbiAgdW5pcXVlKCkge1xuICAgIHJldHVybiB0aGlzLmZ1bGxUYWJsZVNjYW4oKS51bmlxdWUoKTtcbiAgfVxuICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIHJldHVybiB0aGlzLmZ1bGxUYWJsZVNjYW4oKVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgfVxufVxuZnVuY3Rpb24gdGhyb3dDbG9zZWRFcnJvcih0eXBlKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICB0eXBlID09PSBcImNvbnN1bWVkXCIgPyBcIlRoaXMgcXVlcnkgaXMgY2xvc2VkIGFuZCBjYW4ndCBlbWl0IGFueSBtb3JlIHZhbHVlcy5cIiA6IFwiVGhpcyBxdWVyeSBoYXMgYmVlbiBjaGFpbmVkIHdpdGggYW5vdGhlciBvcGVyYXRvciBhbmQgY2FuJ3QgYmUgcmV1c2VkLlwiXG4gICk7XG59XG5leHBvcnQgY2xhc3MgUXVlcnlJbXBsIHtcbiAgY29uc3RydWN0b3IocXVlcnkpIHtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwic3RhdGVcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInRhYmxlTmFtZUZvckVycm9yTWVzc2FnZXNcIik7XG4gICAgdGhpcy5zdGF0ZSA9IHsgdHlwZTogXCJwcmVwYXJpbmdcIiwgcXVlcnkgfTtcbiAgICBpZiAocXVlcnkuc291cmNlLnR5cGUgPT09IFwiRnVsbFRhYmxlU2NhblwiKSB7XG4gICAgICB0aGlzLnRhYmxlTmFtZUZvckVycm9yTWVzc2FnZXMgPSBxdWVyeS5zb3VyY2UudGFibGVOYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRhYmxlTmFtZUZvckVycm9yTWVzc2FnZXMgPSBxdWVyeS5zb3VyY2UuaW5kZXhOYW1lLnNwbGl0KFwiLlwiKVswXTtcbiAgICB9XG4gIH1cbiAgdGFrZVF1ZXJ5KCkge1xuICAgIGlmICh0aGlzLnN0YXRlLnR5cGUgIT09IFwicHJlcGFyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJBIHF1ZXJ5IGNhbiBvbmx5IGJlIGNoYWluZWQgb25jZSBhbmQgY2FuJ3QgYmUgY2hhaW5lZCBhZnRlciBpdGVyYXRpb24gYmVnaW5zLlwiXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuc3RhdGUucXVlcnk7XG4gICAgdGhpcy5zdGF0ZSA9IHsgdHlwZTogXCJjbG9zZWRcIiB9O1xuICAgIHJldHVybiBxdWVyeTtcbiAgfVxuICBzdGFydFF1ZXJ5KCkge1xuICAgIGlmICh0aGlzLnN0YXRlLnR5cGUgPT09IFwiZXhlY3V0aW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkl0ZXJhdGlvbiBjYW4gb25seSBiZWdpbiBvbiBhIHF1ZXJ5IG9uY2UuXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZS50eXBlID09PSBcImNsb3NlZFwiIHx8IHRoaXMuc3RhdGUudHlwZSA9PT0gXCJjb25zdW1lZFwiKSB7XG4gICAgICB0aHJvd0Nsb3NlZEVycm9yKHRoaXMuc3RhdGUudHlwZSk7XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zdGF0ZS5xdWVyeTtcbiAgICBjb25zdCB7IHF1ZXJ5SWQgfSA9IHBlcmZvcm1TeXNjYWxsKFwiMS4wL3F1ZXJ5U3RyZWFtXCIsIHsgcXVlcnksIHZlcnNpb24gfSk7XG4gICAgdGhpcy5zdGF0ZSA9IHsgdHlwZTogXCJleGVjdXRpbmdcIiwgcXVlcnlJZCB9O1xuICAgIHJldHVybiBxdWVyeUlkO1xuICB9XG4gIGNsb3NlUXVlcnkoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUudHlwZSA9PT0gXCJleGVjdXRpbmdcIikge1xuICAgICAgY29uc3QgcXVlcnlJZCA9IHRoaXMuc3RhdGUucXVlcnlJZDtcbiAgICAgIHBlcmZvcm1TeXNjYWxsKFwiMS4wL3F1ZXJ5Q2xlYW51cFwiLCB7IHF1ZXJ5SWQgfSk7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUgPSB7IHR5cGU6IFwiY29uc3VtZWRcIiB9O1xuICB9XG4gIG9yZGVyKG9yZGVyKSB7XG4gICAgdmFsaWRhdGVBcmcob3JkZXIsIDEsIFwib3JkZXJcIiwgXCJvcmRlclwiKTtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMudGFrZVF1ZXJ5KCk7XG4gICAgaWYgKHF1ZXJ5LnNvdXJjZS50eXBlID09PSBcIlNlYXJjaFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiU2VhcmNoIHF1ZXJpZXMgbXVzdCBhbHdheXMgYmUgaW4gcmVsZXZhbmNlIG9yZGVyLiBDYW4gbm90IHNldCBvcmRlciBtYW51YWxseS5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5LnNvdXJjZS5vcmRlciAhPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUXVlcmllcyBtYXkgb25seSBzcGVjaWZ5IG9yZGVyIGF0IG1vc3Qgb25jZVwiKTtcbiAgICB9XG4gICAgcXVlcnkuc291cmNlLm9yZGVyID0gb3JkZXI7XG4gICAgcmV0dXJuIG5ldyBRdWVyeUltcGwocXVlcnkpO1xuICB9XG4gIGZpbHRlcihwcmVkaWNhdGUpIHtcbiAgICB2YWxpZGF0ZUFyZyhwcmVkaWNhdGUsIDEsIFwiZmlsdGVyXCIsIFwicHJlZGljYXRlXCIpO1xuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy50YWtlUXVlcnkoKTtcbiAgICBpZiAocXVlcnkub3BlcmF0b3JzLmxlbmd0aCA+PSBNQVhfUVVFUllfT1BFUkFUT1JTKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW4ndCBjb25zdHJ1Y3QgcXVlcnkgd2l0aCBtb3JlIHRoYW4gJHtNQVhfUVVFUllfT1BFUkFUT1JTfSBvcGVyYXRvcnNgXG4gICAgICApO1xuICAgIH1cbiAgICBxdWVyeS5vcGVyYXRvcnMucHVzaCh7XG4gICAgICBmaWx0ZXI6IHNlcmlhbGl6ZUV4cHJlc3Npb24ocHJlZGljYXRlKGZpbHRlckJ1aWxkZXJJbXBsKSlcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbChxdWVyeSk7XG4gIH1cbiAgbGltaXQobikge1xuICAgIHZhbGlkYXRlQXJnKG4sIDEsIFwibGltaXRcIiwgXCJuXCIpO1xuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy50YWtlUXVlcnkoKTtcbiAgICBxdWVyeS5vcGVyYXRvcnMucHVzaCh7IGxpbWl0OiBuIH0pO1xuICAgIHJldHVybiBuZXcgUXVlcnlJbXBsKHF1ZXJ5KTtcbiAgfVxuICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIHRoaXMuc3RhcnRRdWVyeSgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGFzeW5jIG5leHQoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUudHlwZSA9PT0gXCJjbG9zZWRcIiB8fCB0aGlzLnN0YXRlLnR5cGUgPT09IFwiY29uc3VtZWRcIikge1xuICAgICAgdGhyb3dDbG9zZWRFcnJvcih0aGlzLnN0YXRlLnR5cGUpO1xuICAgIH1cbiAgICBjb25zdCBxdWVyeUlkID0gdGhpcy5zdGF0ZS50eXBlID09PSBcInByZXBhcmluZ1wiID8gdGhpcy5zdGFydFF1ZXJ5KCkgOiB0aGlzLnN0YXRlLnF1ZXJ5SWQ7XG4gICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9xdWVyeVN0cmVhbU5leHRcIiwge1xuICAgICAgcXVlcnlJZFxuICAgIH0pO1xuICAgIGlmIChkb25lKSB7XG4gICAgICB0aGlzLmNsb3NlUXVlcnkoKTtcbiAgICB9XG4gICAgY29uc3QgY29udmV4VmFsdWUgPSBqc29uVG9Db252ZXgodmFsdWUpO1xuICAgIHJldHVybiB7IHZhbHVlOiBjb252ZXhWYWx1ZSwgZG9uZSB9O1xuICB9XG4gIHJldHVybigpIHtcbiAgICB0aGlzLmNsb3NlUXVlcnkoKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHZvaWQgMCB9KTtcbiAgfVxuICBhc3luYyBwYWdpbmF0ZShwYWdpbmF0aW9uT3B0cykge1xuICAgIHZhbGlkYXRlQXJnKHBhZ2luYXRpb25PcHRzLCAxLCBcInBhZ2luYXRlXCIsIFwib3B0aW9uc1wiKTtcbiAgICBpZiAodHlwZW9mIHBhZ2luYXRpb25PcHRzPy5udW1JdGVtcyAhPT0gXCJudW1iZXJcIiB8fCBwYWdpbmF0aW9uT3B0cy5udW1JdGVtcyA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFxcYG9wdGlvbnMubnVtSXRlbXNcXGAgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlci4gUmVjZWl2ZWQgXFxgJHtwYWdpbmF0aW9uT3B0cz8ubnVtSXRlbXN9XFxgLmBcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy50YWtlUXVlcnkoKTtcbiAgICBjb25zdCBwYWdlU2l6ZSA9IHBhZ2luYXRpb25PcHRzLm51bUl0ZW1zO1xuICAgIGNvbnN0IGN1cnNvciA9IHBhZ2luYXRpb25PcHRzLmN1cnNvcjtcbiAgICBjb25zdCBlbmRDdXJzb3IgPSBwYWdpbmF0aW9uT3B0cz8uZW5kQ3Vyc29yID8/IG51bGw7XG4gICAgY29uc3QgbWF4aW11bVJvd3NSZWFkID0gcGFnaW5hdGlvbk9wdHMubWF4aW11bVJvd3NSZWFkID8/IG51bGw7XG4gICAgY29uc3QgeyBwYWdlLCBpc0RvbmUsIGNvbnRpbnVlQ3Vyc29yLCBzcGxpdEN1cnNvciwgcGFnZVN0YXR1cyB9ID0gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9xdWVyeVBhZ2VcIiwge1xuICAgICAgcXVlcnksXG4gICAgICBjdXJzb3IsXG4gICAgICBlbmRDdXJzb3IsXG4gICAgICBwYWdlU2l6ZSxcbiAgICAgIG1heGltdW1Sb3dzUmVhZCxcbiAgICAgIG1heGltdW1CeXRlc1JlYWQ6IHBhZ2luYXRpb25PcHRzLm1heGltdW1CeXRlc1JlYWQsXG4gICAgICB2ZXJzaW9uXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhZ2U6IHBhZ2UubWFwKChqc29uKSA9PiBqc29uVG9Db252ZXgoanNvbikpLFxuICAgICAgaXNEb25lLFxuICAgICAgY29udGludWVDdXJzb3IsXG4gICAgICBzcGxpdEN1cnNvcixcbiAgICAgIHBhZ2VTdGF0dXNcbiAgICB9O1xuICB9XG4gIGFzeW5jIGNvbGxlY3QoKSB7XG4gICAgY29uc3Qgb3V0ID0gW107XG4gICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIHRoaXMpIHtcbiAgICAgIG91dC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xuICB9XG4gIGFzeW5jIHRha2Uobikge1xuICAgIHZhbGlkYXRlQXJnKG4sIDEsIFwidGFrZVwiLCBcIm5cIik7XG4gICAgdmFsaWRhdGVBcmdJc05vbk5lZ2F0aXZlSW50ZWdlcihuLCAxLCBcInRha2VcIiwgXCJuXCIpO1xuICAgIHJldHVybiB0aGlzLmxpbWl0KG4pLmNvbGxlY3QoKTtcbiAgfVxuICBhc3luYyBmaXJzdCgpIHtcbiAgICBjb25zdCBmaXJzdF9hcnJheSA9IGF3YWl0IHRoaXMudGFrZSgxKTtcbiAgICByZXR1cm4gZmlyc3RfYXJyYXkubGVuZ3RoID09PSAwID8gbnVsbCA6IGZpcnN0X2FycmF5WzBdO1xuICB9XG4gIGFzeW5jIHVuaXF1ZSgpIHtcbiAgICBjb25zdCBmaXJzdF90d29fYXJyYXkgPSBhd2FpdCB0aGlzLnRha2UoMik7XG4gICAgaWYgKGZpcnN0X3R3b19hcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoZmlyc3RfdHdvX2FycmF5Lmxlbmd0aCA9PT0gMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmlxdWUoKSBxdWVyeSByZXR1cm5lZCBtb3JlIHRoYW4gb25lIHJlc3VsdCBmcm9tIHRhYmxlICR7dGhpcy50YWJsZU5hbWVGb3JFcnJvck1lc3NhZ2VzfTpcbiBbJHtmaXJzdF90d29fYXJyYXlbMF0uX2lkfSwgJHtmaXJzdF90d29fYXJyYXlbMV0uX2lkfSwgLi4uXWApO1xuICAgIH1cbiAgICByZXR1cm4gZmlyc3RfdHdvX2FycmF5WzBdO1xuICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWVyeV9pbXBsLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/query_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/registration_impl.js":
/*!***********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/registration_impl.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   actionGeneric: () => (/* binding */ actionGeneric),\n/* harmony export */   httpActionGeneric: () => (/* binding */ httpActionGeneric),\n/* harmony export */   internalActionGeneric: () => (/* binding */ internalActionGeneric),\n/* harmony export */   internalMutationGeneric: () => (/* binding */ internalMutationGeneric),\n/* harmony export */   internalQueryGeneric: () => (/* binding */ internalQueryGeneric),\n/* harmony export */   invokeFunction: () => (/* binding */ invokeFunction),\n/* harmony export */   mutationGeneric: () => (/* binding */ mutationGeneric),\n/* harmony export */   queryGeneric: () => (/* binding */ queryGeneric),\n/* harmony export */   validateReturnValue: () => (/* binding */ validateReturnValue)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _actions_impl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actions_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/actions_impl.js\");\n/* harmony import */ var _vector_search_impl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vector_search_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/vector_search_impl.js\");\n/* harmony import */ var _authentication_impl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./authentication_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/authentication_impl.js\");\n/* harmony import */ var _database_impl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./database_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/database_impl.js\");\n/* harmony import */ var _query_impl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/query_impl.js\");\n/* harmony import */ var _scheduler_impl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./scheduler_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/scheduler_impl.js\");\n/* harmony import */ var _storage_impl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./storage_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/storage_impl.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _values_validator_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../values/validator.js */ \"(ssr)/./node_modules/convex/dist/esm/values/validator.js\");\n/* harmony import */ var _components_paths_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/paths.js */ \"(ssr)/./node_modules/convex/dist/esm/server/components/paths.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nasync function invokeMutation(func, argsStr) {\n  const requestId = \"\";\n  const args = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(JSON.parse(argsStr));\n  const mutationCtx = {\n    db: (0,_database_impl_js__WEBPACK_IMPORTED_MODULE_4__.setupWriter)(),\n    auth: (0,_authentication_impl_js__WEBPACK_IMPORTED_MODULE_3__.setupAuth)(requestId),\n    storage: (0,_storage_impl_js__WEBPACK_IMPORTED_MODULE_7__.setupStorageWriter)(requestId),\n    scheduler: (0,_scheduler_impl_js__WEBPACK_IMPORTED_MODULE_6__.setupMutationScheduler)(),\n    runQuery: (reference, args2) => runUdf(\"query\", reference, args2),\n    runMutation: (reference, args2) => runUdf(\"mutation\", reference, args2)\n  };\n  const result = await invokeFunction(func, mutationCtx, args);\n  validateReturnValue(result);\n  return JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(result === void 0 ? null : result));\n}\nfunction validateReturnValue(v2) {\n  if (v2 instanceof _query_impl_js__WEBPACK_IMPORTED_MODULE_5__.QueryInitializerImpl || v2 instanceof _query_impl_js__WEBPACK_IMPORTED_MODULE_5__.QueryImpl) {\n    throw new Error(\n      \"Return value is a Query. Results must be retrieved with `.collect()`, `.take(n), `.unique()`, or `.first()`.\"\n    );\n  }\n}\nasync function invokeFunction(func, ctx, args) {\n  let result;\n  try {\n    result = await Promise.resolve(func(ctx, ...args));\n  } catch (thrown) {\n    throw serializeConvexErrorData(thrown);\n  }\n  return result;\n}\nfunction dontCallDirectly(funcType, handler) {\n  return (ctx, args) => {\n    globalThis.console.warn(\n      `Convex functions should not directly call other Convex functions. Consider calling a helper function instead. e.g. \\`export const foo = ${funcType}(...); await foo(ctx);\\` is not supported. See https://docs.convex.dev/production/best-practices/#use-helper-functions-to-write-shared-code`\n    );\n    return handler(ctx, args);\n  };\n}\nfunction serializeConvexErrorData(thrown) {\n  if (typeof thrown === \"object\" && thrown !== null && Symbol.for(\"ConvexError\") in thrown) {\n    const error = thrown;\n    error.data = JSON.stringify(\n      (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(error.data === void 0 ? null : error.data)\n    );\n    error.ConvexErrorSymbol = Symbol.for(\"ConvexError\");\n    return error;\n  } else {\n    return thrown;\n  }\n}\nfunction assertNotBrowser() {\n  if (typeof window === \"undefined\" || window.__convexAllowFunctionsInBrowser) {\n    return;\n  }\n  const isRealBrowser = Object.getOwnPropertyDescriptor(globalThis, \"window\")?.get?.toString().includes(\"[native code]\") ?? false;\n  if (isRealBrowser) {\n    console.error(\n      \"Convex functions should not be imported in the browser. This will throw an error in future versions of `convex`. If this is a false negative, please report it to Convex support.\"\n    );\n  }\n}\nfunction strictReplacer(key, value) {\n  if (value === void 0) {\n    throw new Error(\n      `A validator is undefined for field \"${key}\". This is often caused by circular imports. See https://docs.convex.dev/error#undefined-validator for details.`\n    );\n  }\n  return value;\n}\nfunction exportArgs(functionDefinition) {\n  return () => {\n    let args = _values_index_js__WEBPACK_IMPORTED_MODULE_0__.v.any();\n    if (typeof functionDefinition === \"object\" && functionDefinition.args !== void 0) {\n      args = (0,_values_validator_js__WEBPACK_IMPORTED_MODULE_10__.asObjectValidator)(functionDefinition.args);\n    }\n    return JSON.stringify(args.json, strictReplacer);\n  };\n}\nfunction exportReturns(functionDefinition) {\n  return () => {\n    let returns;\n    if (typeof functionDefinition === \"object\" && functionDefinition.returns !== void 0) {\n      returns = (0,_values_validator_js__WEBPACK_IMPORTED_MODULE_10__.asObjectValidator)(functionDefinition.returns);\n    }\n    return JSON.stringify(returns ? returns.json : null, strictReplacer);\n  };\n}\nconst mutationGeneric = ((functionDefinition) => {\n  const handler = typeof functionDefinition === \"function\" ? functionDefinition : functionDefinition.handler;\n  const func = dontCallDirectly(\"mutation\", handler);\n  assertNotBrowser();\n  func.isMutation = true;\n  func.isPublic = true;\n  func.invokeMutation = (argsStr) => invokeMutation(handler, argsStr);\n  func.exportArgs = exportArgs(functionDefinition);\n  func.exportReturns = exportReturns(functionDefinition);\n  func._handler = handler;\n  return func;\n});\nconst internalMutationGeneric = ((functionDefinition) => {\n  const handler = typeof functionDefinition === \"function\" ? functionDefinition : functionDefinition.handler;\n  const func = dontCallDirectly(\n    \"internalMutation\",\n    handler\n  );\n  assertNotBrowser();\n  func.isMutation = true;\n  func.isInternal = true;\n  func.invokeMutation = (argsStr) => invokeMutation(handler, argsStr);\n  func.exportArgs = exportArgs(functionDefinition);\n  func.exportReturns = exportReturns(functionDefinition);\n  func._handler = handler;\n  return func;\n});\nasync function invokeQuery(func, argsStr) {\n  const requestId = \"\";\n  const args = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(JSON.parse(argsStr));\n  const queryCtx = {\n    db: (0,_database_impl_js__WEBPACK_IMPORTED_MODULE_4__.setupReader)(),\n    auth: (0,_authentication_impl_js__WEBPACK_IMPORTED_MODULE_3__.setupAuth)(requestId),\n    storage: (0,_storage_impl_js__WEBPACK_IMPORTED_MODULE_7__.setupStorageReader)(requestId),\n    runQuery: (reference, args2) => runUdf(\"query\", reference, args2)\n  };\n  const result = await invokeFunction(func, queryCtx, args);\n  validateReturnValue(result);\n  return JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(result === void 0 ? null : result));\n}\nconst queryGeneric = ((functionDefinition) => {\n  const handler = typeof functionDefinition === \"function\" ? functionDefinition : functionDefinition.handler;\n  const func = dontCallDirectly(\"query\", handler);\n  assertNotBrowser();\n  func.isQuery = true;\n  func.isPublic = true;\n  func.invokeQuery = (argsStr) => invokeQuery(handler, argsStr);\n  func.exportArgs = exportArgs(functionDefinition);\n  func.exportReturns = exportReturns(functionDefinition);\n  func._handler = handler;\n  return func;\n});\nconst internalQueryGeneric = ((functionDefinition) => {\n  const handler = typeof functionDefinition === \"function\" ? functionDefinition : functionDefinition.handler;\n  const func = dontCallDirectly(\"internalQuery\", handler);\n  assertNotBrowser();\n  func.isQuery = true;\n  func.isInternal = true;\n  func.invokeQuery = (argsStr) => invokeQuery(handler, argsStr);\n  func.exportArgs = exportArgs(functionDefinition);\n  func.exportReturns = exportReturns(functionDefinition);\n  func._handler = handler;\n  return func;\n});\nasync function invokeAction(func, requestId, argsStr) {\n  const args = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(JSON.parse(argsStr));\n  const calls = (0,_actions_impl_js__WEBPACK_IMPORTED_MODULE_1__.setupActionCalls)(requestId);\n  const ctx = {\n    ...calls,\n    auth: (0,_authentication_impl_js__WEBPACK_IMPORTED_MODULE_3__.setupAuth)(requestId),\n    scheduler: (0,_scheduler_impl_js__WEBPACK_IMPORTED_MODULE_6__.setupActionScheduler)(requestId),\n    storage: (0,_storage_impl_js__WEBPACK_IMPORTED_MODULE_7__.setupStorageActionWriter)(requestId),\n    vectorSearch: (0,_vector_search_impl_js__WEBPACK_IMPORTED_MODULE_2__.setupActionVectorSearch)(requestId)\n  };\n  const result = await invokeFunction(func, ctx, args);\n  return JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(result === void 0 ? null : result));\n}\nconst actionGeneric = ((functionDefinition) => {\n  const handler = typeof functionDefinition === \"function\" ? functionDefinition : functionDefinition.handler;\n  const func = dontCallDirectly(\"action\", handler);\n  assertNotBrowser();\n  func.isAction = true;\n  func.isPublic = true;\n  func.invokeAction = (requestId, argsStr) => invokeAction(handler, requestId, argsStr);\n  func.exportArgs = exportArgs(functionDefinition);\n  func.exportReturns = exportReturns(functionDefinition);\n  func._handler = handler;\n  return func;\n});\nconst internalActionGeneric = ((functionDefinition) => {\n  const handler = typeof functionDefinition === \"function\" ? functionDefinition : functionDefinition.handler;\n  const func = dontCallDirectly(\"internalAction\", handler);\n  assertNotBrowser();\n  func.isAction = true;\n  func.isInternal = true;\n  func.invokeAction = (requestId, argsStr) => invokeAction(handler, requestId, argsStr);\n  func.exportArgs = exportArgs(functionDefinition);\n  func.exportReturns = exportReturns(functionDefinition);\n  func._handler = handler;\n  return func;\n});\nasync function invokeHttpAction(func, request) {\n  const requestId = \"\";\n  const calls = (0,_actions_impl_js__WEBPACK_IMPORTED_MODULE_1__.setupActionCalls)(requestId);\n  const ctx = {\n    ...calls,\n    auth: (0,_authentication_impl_js__WEBPACK_IMPORTED_MODULE_3__.setupAuth)(requestId),\n    storage: (0,_storage_impl_js__WEBPACK_IMPORTED_MODULE_7__.setupStorageActionWriter)(requestId),\n    scheduler: (0,_scheduler_impl_js__WEBPACK_IMPORTED_MODULE_6__.setupActionScheduler)(requestId),\n    vectorSearch: (0,_vector_search_impl_js__WEBPACK_IMPORTED_MODULE_2__.setupActionVectorSearch)(requestId)\n  };\n  return await invokeFunction(func, ctx, [request]);\n}\nconst httpActionGeneric = (func) => {\n  const q = dontCallDirectly(\"httpAction\", func);\n  assertNotBrowser();\n  q.isHttp = true;\n  q.invokeHttpAction = (request) => invokeHttpAction(func, request);\n  q._handler = func;\n  return q;\n};\nasync function runUdf(udfType, f, args) {\n  const queryArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_8__.parseArgs)(args);\n  const syscallArgs = {\n    udfType,\n    args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(queryArgs),\n    ...(0,_components_paths_js__WEBPACK_IMPORTED_MODULE_11__.getFunctionAddress)(f)\n  };\n  const result = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_9__.performAsyncSyscall)(\"1.0/runUdf\", syscallArgs);\n  return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(result);\n}\n//# sourceMappingURL=registration_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3JlZ2lzdHJhdGlvbl9pbXBsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFhO0FBS2tCO0FBQ3NCO0FBQ2E7QUFDYjtBQUNTO0FBQ0k7QUFJckM7QUFLRjtBQUN1QjtBQUNDO0FBQ1c7QUFDRjtBQUM1RDtBQUNBO0FBQ0EsZUFBZSw4REFBWTtBQUMzQjtBQUNBLFFBQVEsOERBQVc7QUFDbkIsVUFBVSxrRUFBUztBQUNuQixhQUFhLG9FQUFrQjtBQUMvQixlQUFlLDBFQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDhEQUFZO0FBQ3BDO0FBQ087QUFDUCxvQkFBb0IsZ0VBQW9CLGtCQUFrQixxREFBUztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpSkFBaUosU0FBUyxPQUFPLGVBQWU7QUFDaEw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sOERBQVk7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsSUFBSTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLCtDQUFDO0FBQ2hCO0FBQ0EsYUFBYSx3RUFBaUI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3RUFBaUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLGVBQWUsOERBQVk7QUFDM0I7QUFDQSxRQUFRLDhEQUFXO0FBQ25CLFVBQVUsa0VBQVM7QUFDbkIsYUFBYSxvRUFBa0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOERBQVk7QUFDcEM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxlQUFlLDhEQUFZO0FBQzNCLGdCQUFnQixrRUFBZ0I7QUFDaEM7QUFDQTtBQUNBLFVBQVUsa0VBQVM7QUFDbkIsZUFBZSx3RUFBb0I7QUFDbkMsYUFBYSwwRUFBd0I7QUFDckMsa0JBQWtCLCtFQUF1QjtBQUN6QztBQUNBO0FBQ0Esd0JBQXdCLDhEQUFZO0FBQ3BDO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxnQkFBZ0Isa0VBQWdCO0FBQ2hDO0FBQ0E7QUFDQSxVQUFVLGtFQUFTO0FBQ25CLGFBQWEsMEVBQXdCO0FBQ3JDLGVBQWUsd0VBQW9CO0FBQ25DLGtCQUFrQiwrRUFBdUI7QUFDekM7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJEQUFTO0FBQzdCO0FBQ0E7QUFDQSxVQUFVLDhEQUFZO0FBQ3RCLE9BQU8seUVBQWtCO0FBQ3pCO0FBQ0EsdUJBQXVCLGdFQUFtQjtBQUMxQyxTQUFTLDhEQUFZO0FBQ3JCO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxpbXBsXFxyZWdpc3RyYXRpb25faW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCB7XG4gIGNvbnZleFRvSnNvbixcbiAganNvblRvQ29udmV4LFxuICB2XG59IGZyb20gXCIuLi8uLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IHNldHVwQWN0aW9uQ2FsbHMgfSBmcm9tIFwiLi9hY3Rpb25zX2ltcGwuanNcIjtcbmltcG9ydCB7IHNldHVwQWN0aW9uVmVjdG9yU2VhcmNoIH0gZnJvbSBcIi4vdmVjdG9yX3NlYXJjaF9pbXBsLmpzXCI7XG5pbXBvcnQgeyBzZXR1cEF1dGggfSBmcm9tIFwiLi9hdXRoZW50aWNhdGlvbl9pbXBsLmpzXCI7XG5pbXBvcnQgeyBzZXR1cFJlYWRlciwgc2V0dXBXcml0ZXIgfSBmcm9tIFwiLi9kYXRhYmFzZV9pbXBsLmpzXCI7XG5pbXBvcnQgeyBRdWVyeUltcGwsIFF1ZXJ5SW5pdGlhbGl6ZXJJbXBsIH0gZnJvbSBcIi4vcXVlcnlfaW1wbC5qc1wiO1xuaW1wb3J0IHtcbiAgc2V0dXBBY3Rpb25TY2hlZHVsZXIsXG4gIHNldHVwTXV0YXRpb25TY2hlZHVsZXJcbn0gZnJvbSBcIi4vc2NoZWR1bGVyX2ltcGwuanNcIjtcbmltcG9ydCB7XG4gIHNldHVwU3RvcmFnZUFjdGlvbldyaXRlcixcbiAgc2V0dXBTdG9yYWdlUmVhZGVyLFxuICBzZXR1cFN0b3JhZ2VXcml0ZXJcbn0gZnJvbSBcIi4vc3RvcmFnZV9pbXBsLmpzXCI7XG5pbXBvcnQgeyBwYXJzZUFyZ3MgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBwZXJmb3JtQXN5bmNTeXNjYWxsIH0gZnJvbSBcIi4vc3lzY2FsbC5qc1wiO1xuaW1wb3J0IHsgYXNPYmplY3RWYWxpZGF0b3IgfSBmcm9tIFwiLi4vLi4vdmFsdWVzL3ZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgZ2V0RnVuY3Rpb25BZGRyZXNzIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvcGF0aHMuanNcIjtcbmFzeW5jIGZ1bmN0aW9uIGludm9rZU11dGF0aW9uKGZ1bmMsIGFyZ3NTdHIpIHtcbiAgY29uc3QgcmVxdWVzdElkID0gXCJcIjtcbiAgY29uc3QgYXJncyA9IGpzb25Ub0NvbnZleChKU09OLnBhcnNlKGFyZ3NTdHIpKTtcbiAgY29uc3QgbXV0YXRpb25DdHggPSB7XG4gICAgZGI6IHNldHVwV3JpdGVyKCksXG4gICAgYXV0aDogc2V0dXBBdXRoKHJlcXVlc3RJZCksXG4gICAgc3RvcmFnZTogc2V0dXBTdG9yYWdlV3JpdGVyKHJlcXVlc3RJZCksXG4gICAgc2NoZWR1bGVyOiBzZXR1cE11dGF0aW9uU2NoZWR1bGVyKCksXG4gICAgcnVuUXVlcnk6IChyZWZlcmVuY2UsIGFyZ3MyKSA9PiBydW5VZGYoXCJxdWVyeVwiLCByZWZlcmVuY2UsIGFyZ3MyKSxcbiAgICBydW5NdXRhdGlvbjogKHJlZmVyZW5jZSwgYXJnczIpID0+IHJ1blVkZihcIm11dGF0aW9uXCIsIHJlZmVyZW5jZSwgYXJnczIpXG4gIH07XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGludm9rZUZ1bmN0aW9uKGZ1bmMsIG11dGF0aW9uQ3R4LCBhcmdzKTtcbiAgdmFsaWRhdGVSZXR1cm5WYWx1ZShyZXN1bHQpO1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY29udmV4VG9Kc29uKHJlc3VsdCA9PT0gdm9pZCAwID8gbnVsbCA6IHJlc3VsdCkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUmV0dXJuVmFsdWUodjIpIHtcbiAgaWYgKHYyIGluc3RhbmNlb2YgUXVlcnlJbml0aWFsaXplckltcGwgfHwgdjIgaW5zdGFuY2VvZiBRdWVyeUltcGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIlJldHVybiB2YWx1ZSBpcyBhIFF1ZXJ5LiBSZXN1bHRzIG11c3QgYmUgcmV0cmlldmVkIHdpdGggYC5jb2xsZWN0KClgLCBgLnRha2UobiksIGAudW5pcXVlKClgLCBvciBgLmZpcnN0KClgLlwiXG4gICAgKTtcbiAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGludm9rZUZ1bmN0aW9uKGZ1bmMsIGN0eCwgYXJncykge1xuICBsZXQgcmVzdWx0O1xuICB0cnkge1xuICAgIHJlc3VsdCA9IGF3YWl0IFByb21pc2UucmVzb2x2ZShmdW5jKGN0eCwgLi4uYXJncykpO1xuICB9IGNhdGNoICh0aHJvd24pIHtcbiAgICB0aHJvdyBzZXJpYWxpemVDb252ZXhFcnJvckRhdGEodGhyb3duKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZG9udENhbGxEaXJlY3RseShmdW5jVHlwZSwgaGFuZGxlcikge1xuICByZXR1cm4gKGN0eCwgYXJncykgPT4ge1xuICAgIGdsb2JhbFRoaXMuY29uc29sZS53YXJuKFxuICAgICAgYENvbnZleCBmdW5jdGlvbnMgc2hvdWxkIG5vdCBkaXJlY3RseSBjYWxsIG90aGVyIENvbnZleCBmdW5jdGlvbnMuIENvbnNpZGVyIGNhbGxpbmcgYSBoZWxwZXIgZnVuY3Rpb24gaW5zdGVhZC4gZS5nLiBcXGBleHBvcnQgY29uc3QgZm9vID0gJHtmdW5jVHlwZX0oLi4uKTsgYXdhaXQgZm9vKGN0eCk7XFxgIGlzIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2RvY3MuY29udmV4LmRldi9wcm9kdWN0aW9uL2Jlc3QtcHJhY3RpY2VzLyN1c2UtaGVscGVyLWZ1bmN0aW9ucy10by13cml0ZS1zaGFyZWQtY29kZWBcbiAgICApO1xuICAgIHJldHVybiBoYW5kbGVyKGN0eCwgYXJncyk7XG4gIH07XG59XG5mdW5jdGlvbiBzZXJpYWxpemVDb252ZXhFcnJvckRhdGEodGhyb3duKSB7XG4gIGlmICh0eXBlb2YgdGhyb3duID09PSBcIm9iamVjdFwiICYmIHRocm93biAhPT0gbnVsbCAmJiBTeW1ib2wuZm9yKFwiQ29udmV4RXJyb3JcIikgaW4gdGhyb3duKSB7XG4gICAgY29uc3QgZXJyb3IgPSB0aHJvd247XG4gICAgZXJyb3IuZGF0YSA9IEpTT04uc3RyaW5naWZ5KFxuICAgICAgY29udmV4VG9Kc29uKGVycm9yLmRhdGEgPT09IHZvaWQgMCA/IG51bGwgOiBlcnJvci5kYXRhKVxuICAgICk7XG4gICAgZXJyb3IuQ29udmV4RXJyb3JTeW1ib2wgPSBTeW1ib2wuZm9yKFwiQ29udmV4RXJyb3JcIik7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0aHJvd247XG4gIH1cbn1cbmZ1bmN0aW9uIGFzc2VydE5vdEJyb3dzZXIoKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8IHdpbmRvdy5fX2NvbnZleEFsbG93RnVuY3Rpb25zSW5Ccm93c2VyKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGlzUmVhbEJyb3dzZXIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGdsb2JhbFRoaXMsIFwid2luZG93XCIpPy5nZXQ/LnRvU3RyaW5nKCkuaW5jbHVkZXMoXCJbbmF0aXZlIGNvZGVdXCIpID8/IGZhbHNlO1xuICBpZiAoaXNSZWFsQnJvd3Nlcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBcIkNvbnZleCBmdW5jdGlvbnMgc2hvdWxkIG5vdCBiZSBpbXBvcnRlZCBpbiB0aGUgYnJvd3Nlci4gVGhpcyB3aWxsIHRocm93IGFuIGVycm9yIGluIGZ1dHVyZSB2ZXJzaW9ucyBvZiBgY29udmV4YC4gSWYgdGhpcyBpcyBhIGZhbHNlIG5lZ2F0aXZlLCBwbGVhc2UgcmVwb3J0IGl0IHRvIENvbnZleCBzdXBwb3J0LlwiXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gc3RyaWN0UmVwbGFjZXIoa2V5LCB2YWx1ZSkge1xuICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBBIHZhbGlkYXRvciBpcyB1bmRlZmluZWQgZm9yIGZpZWxkIFwiJHtrZXl9XCIuIFRoaXMgaXMgb2Z0ZW4gY2F1c2VkIGJ5IGNpcmN1bGFyIGltcG9ydHMuIFNlZSBodHRwczovL2RvY3MuY29udmV4LmRldi9lcnJvciN1bmRlZmluZWQtdmFsaWRhdG9yIGZvciBkZXRhaWxzLmBcbiAgICApO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGV4cG9ydEFyZ3MoZnVuY3Rpb25EZWZpbml0aW9uKSB7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgbGV0IGFyZ3MgPSB2LmFueSgpO1xuICAgIGlmICh0eXBlb2YgZnVuY3Rpb25EZWZpbml0aW9uID09PSBcIm9iamVjdFwiICYmIGZ1bmN0aW9uRGVmaW5pdGlvbi5hcmdzICE9PSB2b2lkIDApIHtcbiAgICAgIGFyZ3MgPSBhc09iamVjdFZhbGlkYXRvcihmdW5jdGlvbkRlZmluaXRpb24uYXJncyk7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmdzLmpzb24sIHN0cmljdFJlcGxhY2VyKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGV4cG9ydFJldHVybnMoZnVuY3Rpb25EZWZpbml0aW9uKSB7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgbGV0IHJldHVybnM7XG4gICAgaWYgKHR5cGVvZiBmdW5jdGlvbkRlZmluaXRpb24gPT09IFwib2JqZWN0XCIgJiYgZnVuY3Rpb25EZWZpbml0aW9uLnJldHVybnMgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJucyA9IGFzT2JqZWN0VmFsaWRhdG9yKGZ1bmN0aW9uRGVmaW5pdGlvbi5yZXR1cm5zKTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHJldHVybnMgPyByZXR1cm5zLmpzb24gOiBudWxsLCBzdHJpY3RSZXBsYWNlcik7XG4gIH07XG59XG5leHBvcnQgY29uc3QgbXV0YXRpb25HZW5lcmljID0gKChmdW5jdGlvbkRlZmluaXRpb24pID0+IHtcbiAgY29uc3QgaGFuZGxlciA9IHR5cGVvZiBmdW5jdGlvbkRlZmluaXRpb24gPT09IFwiZnVuY3Rpb25cIiA/IGZ1bmN0aW9uRGVmaW5pdGlvbiA6IGZ1bmN0aW9uRGVmaW5pdGlvbi5oYW5kbGVyO1xuICBjb25zdCBmdW5jID0gZG9udENhbGxEaXJlY3RseShcIm11dGF0aW9uXCIsIGhhbmRsZXIpO1xuICBhc3NlcnROb3RCcm93c2VyKCk7XG4gIGZ1bmMuaXNNdXRhdGlvbiA9IHRydWU7XG4gIGZ1bmMuaXNQdWJsaWMgPSB0cnVlO1xuICBmdW5jLmludm9rZU11dGF0aW9uID0gKGFyZ3NTdHIpID0+IGludm9rZU11dGF0aW9uKGhhbmRsZXIsIGFyZ3NTdHIpO1xuICBmdW5jLmV4cG9ydEFyZ3MgPSBleHBvcnRBcmdzKGZ1bmN0aW9uRGVmaW5pdGlvbik7XG4gIGZ1bmMuZXhwb3J0UmV0dXJucyA9IGV4cG9ydFJldHVybnMoZnVuY3Rpb25EZWZpbml0aW9uKTtcbiAgZnVuYy5faGFuZGxlciA9IGhhbmRsZXI7XG4gIHJldHVybiBmdW5jO1xufSk7XG5leHBvcnQgY29uc3QgaW50ZXJuYWxNdXRhdGlvbkdlbmVyaWMgPSAoKGZ1bmN0aW9uRGVmaW5pdGlvbikgPT4ge1xuICBjb25zdCBoYW5kbGVyID0gdHlwZW9mIGZ1bmN0aW9uRGVmaW5pdGlvbiA9PT0gXCJmdW5jdGlvblwiID8gZnVuY3Rpb25EZWZpbml0aW9uIDogZnVuY3Rpb25EZWZpbml0aW9uLmhhbmRsZXI7XG4gIGNvbnN0IGZ1bmMgPSBkb250Q2FsbERpcmVjdGx5KFxuICAgIFwiaW50ZXJuYWxNdXRhdGlvblwiLFxuICAgIGhhbmRsZXJcbiAgKTtcbiAgYXNzZXJ0Tm90QnJvd3NlcigpO1xuICBmdW5jLmlzTXV0YXRpb24gPSB0cnVlO1xuICBmdW5jLmlzSW50ZXJuYWwgPSB0cnVlO1xuICBmdW5jLmludm9rZU11dGF0aW9uID0gKGFyZ3NTdHIpID0+IGludm9rZU11dGF0aW9uKGhhbmRsZXIsIGFyZ3NTdHIpO1xuICBmdW5jLmV4cG9ydEFyZ3MgPSBleHBvcnRBcmdzKGZ1bmN0aW9uRGVmaW5pdGlvbik7XG4gIGZ1bmMuZXhwb3J0UmV0dXJucyA9IGV4cG9ydFJldHVybnMoZnVuY3Rpb25EZWZpbml0aW9uKTtcbiAgZnVuYy5faGFuZGxlciA9IGhhbmRsZXI7XG4gIHJldHVybiBmdW5jO1xufSk7XG5hc3luYyBmdW5jdGlvbiBpbnZva2VRdWVyeShmdW5jLCBhcmdzU3RyKSB7XG4gIGNvbnN0IHJlcXVlc3RJZCA9IFwiXCI7XG4gIGNvbnN0IGFyZ3MgPSBqc29uVG9Db252ZXgoSlNPTi5wYXJzZShhcmdzU3RyKSk7XG4gIGNvbnN0IHF1ZXJ5Q3R4ID0ge1xuICAgIGRiOiBzZXR1cFJlYWRlcigpLFxuICAgIGF1dGg6IHNldHVwQXV0aChyZXF1ZXN0SWQpLFxuICAgIHN0b3JhZ2U6IHNldHVwU3RvcmFnZVJlYWRlcihyZXF1ZXN0SWQpLFxuICAgIHJ1blF1ZXJ5OiAocmVmZXJlbmNlLCBhcmdzMikgPT4gcnVuVWRmKFwicXVlcnlcIiwgcmVmZXJlbmNlLCBhcmdzMilcbiAgfTtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW52b2tlRnVuY3Rpb24oZnVuYywgcXVlcnlDdHgsIGFyZ3MpO1xuICB2YWxpZGF0ZVJldHVyblZhbHVlKHJlc3VsdCk7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShjb252ZXhUb0pzb24ocmVzdWx0ID09PSB2b2lkIDAgPyBudWxsIDogcmVzdWx0KSk7XG59XG5leHBvcnQgY29uc3QgcXVlcnlHZW5lcmljID0gKChmdW5jdGlvbkRlZmluaXRpb24pID0+IHtcbiAgY29uc3QgaGFuZGxlciA9IHR5cGVvZiBmdW5jdGlvbkRlZmluaXRpb24gPT09IFwiZnVuY3Rpb25cIiA/IGZ1bmN0aW9uRGVmaW5pdGlvbiA6IGZ1bmN0aW9uRGVmaW5pdGlvbi5oYW5kbGVyO1xuICBjb25zdCBmdW5jID0gZG9udENhbGxEaXJlY3RseShcInF1ZXJ5XCIsIGhhbmRsZXIpO1xuICBhc3NlcnROb3RCcm93c2VyKCk7XG4gIGZ1bmMuaXNRdWVyeSA9IHRydWU7XG4gIGZ1bmMuaXNQdWJsaWMgPSB0cnVlO1xuICBmdW5jLmludm9rZVF1ZXJ5ID0gKGFyZ3NTdHIpID0+IGludm9rZVF1ZXJ5KGhhbmRsZXIsIGFyZ3NTdHIpO1xuICBmdW5jLmV4cG9ydEFyZ3MgPSBleHBvcnRBcmdzKGZ1bmN0aW9uRGVmaW5pdGlvbik7XG4gIGZ1bmMuZXhwb3J0UmV0dXJucyA9IGV4cG9ydFJldHVybnMoZnVuY3Rpb25EZWZpbml0aW9uKTtcbiAgZnVuYy5faGFuZGxlciA9IGhhbmRsZXI7XG4gIHJldHVybiBmdW5jO1xufSk7XG5leHBvcnQgY29uc3QgaW50ZXJuYWxRdWVyeUdlbmVyaWMgPSAoKGZ1bmN0aW9uRGVmaW5pdGlvbikgPT4ge1xuICBjb25zdCBoYW5kbGVyID0gdHlwZW9mIGZ1bmN0aW9uRGVmaW5pdGlvbiA9PT0gXCJmdW5jdGlvblwiID8gZnVuY3Rpb25EZWZpbml0aW9uIDogZnVuY3Rpb25EZWZpbml0aW9uLmhhbmRsZXI7XG4gIGNvbnN0IGZ1bmMgPSBkb250Q2FsbERpcmVjdGx5KFwiaW50ZXJuYWxRdWVyeVwiLCBoYW5kbGVyKTtcbiAgYXNzZXJ0Tm90QnJvd3NlcigpO1xuICBmdW5jLmlzUXVlcnkgPSB0cnVlO1xuICBmdW5jLmlzSW50ZXJuYWwgPSB0cnVlO1xuICBmdW5jLmludm9rZVF1ZXJ5ID0gKGFyZ3NTdHIpID0+IGludm9rZVF1ZXJ5KGhhbmRsZXIsIGFyZ3NTdHIpO1xuICBmdW5jLmV4cG9ydEFyZ3MgPSBleHBvcnRBcmdzKGZ1bmN0aW9uRGVmaW5pdGlvbik7XG4gIGZ1bmMuZXhwb3J0UmV0dXJucyA9IGV4cG9ydFJldHVybnMoZnVuY3Rpb25EZWZpbml0aW9uKTtcbiAgZnVuYy5faGFuZGxlciA9IGhhbmRsZXI7XG4gIHJldHVybiBmdW5jO1xufSk7XG5hc3luYyBmdW5jdGlvbiBpbnZva2VBY3Rpb24oZnVuYywgcmVxdWVzdElkLCBhcmdzU3RyKSB7XG4gIGNvbnN0IGFyZ3MgPSBqc29uVG9Db252ZXgoSlNPTi5wYXJzZShhcmdzU3RyKSk7XG4gIGNvbnN0IGNhbGxzID0gc2V0dXBBY3Rpb25DYWxscyhyZXF1ZXN0SWQpO1xuICBjb25zdCBjdHggPSB7XG4gICAgLi4uY2FsbHMsXG4gICAgYXV0aDogc2V0dXBBdXRoKHJlcXVlc3RJZCksXG4gICAgc2NoZWR1bGVyOiBzZXR1cEFjdGlvblNjaGVkdWxlcihyZXF1ZXN0SWQpLFxuICAgIHN0b3JhZ2U6IHNldHVwU3RvcmFnZUFjdGlvbldyaXRlcihyZXF1ZXN0SWQpLFxuICAgIHZlY3RvclNlYXJjaDogc2V0dXBBY3Rpb25WZWN0b3JTZWFyY2gocmVxdWVzdElkKVxuICB9O1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbnZva2VGdW5jdGlvbihmdW5jLCBjdHgsIGFyZ3MpO1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY29udmV4VG9Kc29uKHJlc3VsdCA9PT0gdm9pZCAwID8gbnVsbCA6IHJlc3VsdCkpO1xufVxuZXhwb3J0IGNvbnN0IGFjdGlvbkdlbmVyaWMgPSAoKGZ1bmN0aW9uRGVmaW5pdGlvbikgPT4ge1xuICBjb25zdCBoYW5kbGVyID0gdHlwZW9mIGZ1bmN0aW9uRGVmaW5pdGlvbiA9PT0gXCJmdW5jdGlvblwiID8gZnVuY3Rpb25EZWZpbml0aW9uIDogZnVuY3Rpb25EZWZpbml0aW9uLmhhbmRsZXI7XG4gIGNvbnN0IGZ1bmMgPSBkb250Q2FsbERpcmVjdGx5KFwiYWN0aW9uXCIsIGhhbmRsZXIpO1xuICBhc3NlcnROb3RCcm93c2VyKCk7XG4gIGZ1bmMuaXNBY3Rpb24gPSB0cnVlO1xuICBmdW5jLmlzUHVibGljID0gdHJ1ZTtcbiAgZnVuYy5pbnZva2VBY3Rpb24gPSAocmVxdWVzdElkLCBhcmdzU3RyKSA9PiBpbnZva2VBY3Rpb24oaGFuZGxlciwgcmVxdWVzdElkLCBhcmdzU3RyKTtcbiAgZnVuYy5leHBvcnRBcmdzID0gZXhwb3J0QXJncyhmdW5jdGlvbkRlZmluaXRpb24pO1xuICBmdW5jLmV4cG9ydFJldHVybnMgPSBleHBvcnRSZXR1cm5zKGZ1bmN0aW9uRGVmaW5pdGlvbik7XG4gIGZ1bmMuX2hhbmRsZXIgPSBoYW5kbGVyO1xuICByZXR1cm4gZnVuYztcbn0pO1xuZXhwb3J0IGNvbnN0IGludGVybmFsQWN0aW9uR2VuZXJpYyA9ICgoZnVuY3Rpb25EZWZpbml0aW9uKSA9PiB7XG4gIGNvbnN0IGhhbmRsZXIgPSB0eXBlb2YgZnVuY3Rpb25EZWZpbml0aW9uID09PSBcImZ1bmN0aW9uXCIgPyBmdW5jdGlvbkRlZmluaXRpb24gOiBmdW5jdGlvbkRlZmluaXRpb24uaGFuZGxlcjtcbiAgY29uc3QgZnVuYyA9IGRvbnRDYWxsRGlyZWN0bHkoXCJpbnRlcm5hbEFjdGlvblwiLCBoYW5kbGVyKTtcbiAgYXNzZXJ0Tm90QnJvd3NlcigpO1xuICBmdW5jLmlzQWN0aW9uID0gdHJ1ZTtcbiAgZnVuYy5pc0ludGVybmFsID0gdHJ1ZTtcbiAgZnVuYy5pbnZva2VBY3Rpb24gPSAocmVxdWVzdElkLCBhcmdzU3RyKSA9PiBpbnZva2VBY3Rpb24oaGFuZGxlciwgcmVxdWVzdElkLCBhcmdzU3RyKTtcbiAgZnVuYy5leHBvcnRBcmdzID0gZXhwb3J0QXJncyhmdW5jdGlvbkRlZmluaXRpb24pO1xuICBmdW5jLmV4cG9ydFJldHVybnMgPSBleHBvcnRSZXR1cm5zKGZ1bmN0aW9uRGVmaW5pdGlvbik7XG4gIGZ1bmMuX2hhbmRsZXIgPSBoYW5kbGVyO1xuICByZXR1cm4gZnVuYztcbn0pO1xuYXN5bmMgZnVuY3Rpb24gaW52b2tlSHR0cEFjdGlvbihmdW5jLCByZXF1ZXN0KSB7XG4gIGNvbnN0IHJlcXVlc3RJZCA9IFwiXCI7XG4gIGNvbnN0IGNhbGxzID0gc2V0dXBBY3Rpb25DYWxscyhyZXF1ZXN0SWQpO1xuICBjb25zdCBjdHggPSB7XG4gICAgLi4uY2FsbHMsXG4gICAgYXV0aDogc2V0dXBBdXRoKHJlcXVlc3RJZCksXG4gICAgc3RvcmFnZTogc2V0dXBTdG9yYWdlQWN0aW9uV3JpdGVyKHJlcXVlc3RJZCksXG4gICAgc2NoZWR1bGVyOiBzZXR1cEFjdGlvblNjaGVkdWxlcihyZXF1ZXN0SWQpLFxuICAgIHZlY3RvclNlYXJjaDogc2V0dXBBY3Rpb25WZWN0b3JTZWFyY2gocmVxdWVzdElkKVxuICB9O1xuICByZXR1cm4gYXdhaXQgaW52b2tlRnVuY3Rpb24oZnVuYywgY3R4LCBbcmVxdWVzdF0pO1xufVxuZXhwb3J0IGNvbnN0IGh0dHBBY3Rpb25HZW5lcmljID0gKGZ1bmMpID0+IHtcbiAgY29uc3QgcSA9IGRvbnRDYWxsRGlyZWN0bHkoXCJodHRwQWN0aW9uXCIsIGZ1bmMpO1xuICBhc3NlcnROb3RCcm93c2VyKCk7XG4gIHEuaXNIdHRwID0gdHJ1ZTtcbiAgcS5pbnZva2VIdHRwQWN0aW9uID0gKHJlcXVlc3QpID0+IGludm9rZUh0dHBBY3Rpb24oZnVuYywgcmVxdWVzdCk7XG4gIHEuX2hhbmRsZXIgPSBmdW5jO1xuICByZXR1cm4gcTtcbn07XG5hc3luYyBmdW5jdGlvbiBydW5VZGYodWRmVHlwZSwgZiwgYXJncykge1xuICBjb25zdCBxdWVyeUFyZ3MgPSBwYXJzZUFyZ3MoYXJncyk7XG4gIGNvbnN0IHN5c2NhbGxBcmdzID0ge1xuICAgIHVkZlR5cGUsXG4gICAgYXJnczogY29udmV4VG9Kc29uKHF1ZXJ5QXJncyksXG4gICAgLi4uZ2V0RnVuY3Rpb25BZGRyZXNzKGYpXG4gIH07XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBlcmZvcm1Bc3luY1N5c2NhbGwoXCIxLjAvcnVuVWRmXCIsIHN5c2NhbGxBcmdzKTtcbiAgcmV0dXJuIGpzb25Ub0NvbnZleChyZXN1bHQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVnaXN0cmF0aW9uX2ltcGwuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/registration_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/scheduler_impl.js":
/*!********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/scheduler_impl.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setupActionScheduler: () => (/* binding */ setupActionScheduler),\n/* harmony export */   setupMutationScheduler: () => (/* binding */ setupMutationScheduler)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\");\n/* harmony import */ var _components_paths_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/paths.js */ \"(ssr)/./node_modules/convex/dist/esm/server/components/paths.js\");\n\n\n\n\n\n\n\nfunction setupMutationScheduler() {\n  return {\n    runAfter: async (delayMs, functionReference, args) => {\n      const syscallArgs = runAfterSyscallArgs(delayMs, functionReference, args);\n      return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/schedule\", syscallArgs);\n    },\n    runAt: async (ms_since_epoch_or_date, functionReference, args) => {\n      const syscallArgs = runAtSyscallArgs(\n        ms_since_epoch_or_date,\n        functionReference,\n        args\n      );\n      return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/schedule\", syscallArgs);\n    },\n    cancel: async (id) => {\n      (0,_validate_js__WEBPACK_IMPORTED_MODULE_4__.validateArg)(id, 1, \"cancel\", \"id\");\n      const args = { id: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(id) };\n      await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/cancel_job\", args);\n    }\n  };\n}\nfunction setupActionScheduler(requestId) {\n  return {\n    runAfter: async (delayMs, functionReference, args) => {\n      const syscallArgs = {\n        requestId,\n        ...runAfterSyscallArgs(delayMs, functionReference, args)\n      };\n      return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/actions/schedule\", syscallArgs);\n    },\n    runAt: async (ms_since_epoch_or_date, functionReference, args) => {\n      const syscallArgs = {\n        requestId,\n        ...runAtSyscallArgs(ms_since_epoch_or_date, functionReference, args)\n      };\n      return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/actions/schedule\", syscallArgs);\n    },\n    cancel: async (id) => {\n      (0,_validate_js__WEBPACK_IMPORTED_MODULE_4__.validateArg)(id, 1, \"cancel\", \"id\");\n      const syscallArgs = { id: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(id) };\n      return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/actions/cancel_job\", syscallArgs);\n    }\n  };\n}\nfunction runAfterSyscallArgs(delayMs, functionReference, args) {\n  if (typeof delayMs !== \"number\") {\n    throw new Error(\"`delayMs` must be a number\");\n  }\n  if (!isFinite(delayMs)) {\n    throw new Error(\"`delayMs` must be a finite number\");\n  }\n  if (delayMs < 0) {\n    throw new Error(\"`delayMs` must be non-negative\");\n  }\n  const functionArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_3__.parseArgs)(args);\n  const address = (0,_components_paths_js__WEBPACK_IMPORTED_MODULE_5__.getFunctionAddress)(functionReference);\n  const ts = (Date.now() + delayMs) / 1e3;\n  return {\n    ...address,\n    ts,\n    args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(functionArgs),\n    version: _index_js__WEBPACK_IMPORTED_MODULE_1__.version\n  };\n}\nfunction runAtSyscallArgs(ms_since_epoch_or_date, functionReference, args) {\n  let ts;\n  if (ms_since_epoch_or_date instanceof Date) {\n    ts = ms_since_epoch_or_date.valueOf() / 1e3;\n  } else if (typeof ms_since_epoch_or_date === \"number\") {\n    ts = ms_since_epoch_or_date / 1e3;\n  } else {\n    throw new Error(\"The invoke time must a Date or a timestamp\");\n  }\n  const address = (0,_components_paths_js__WEBPACK_IMPORTED_MODULE_5__.getFunctionAddress)(functionReference);\n  const functionArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_3__.parseArgs)(args);\n  return {\n    ...address,\n    ts,\n    args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(functionArgs),\n    version: _index_js__WEBPACK_IMPORTED_MODULE_1__.version\n  };\n}\n//# sourceMappingURL=scheduler_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3NjaGVkdWxlcl9pbXBsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWE7QUFDd0M7QUFDWjtBQUNVO0FBQ0Q7QUFDTjtBQUNnQjtBQUNyRDtBQUNQO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnRUFBbUI7QUFDdEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnRUFBbUI7QUFDdEMsS0FBSztBQUNMO0FBQ0EsTUFBTSx5REFBVztBQUNqQixxQkFBcUIsSUFBSSw4REFBWTtBQUNyQyxZQUFZLGdFQUFtQjtBQUMvQjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnRUFBbUI7QUFDdEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0VBQW1CO0FBQ3RDLEtBQUs7QUFDTDtBQUNBLE1BQU0seURBQVc7QUFDakIsNEJBQTRCLElBQUksOERBQVk7QUFDNUMsbUJBQW1CLGdFQUFtQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwyREFBUztBQUNoQyxrQkFBa0Isd0VBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSw4REFBWTtBQUN0QixXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxrQkFBa0Isd0VBQWtCO0FBQ3BDLHVCQUF1QiwyREFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQSxVQUFVLDhEQUFZO0FBQ3RCLFdBQVc7QUFDWDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxpbXBsXFxzY2hlZHVsZXJfaW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCB7IGNvbnZleFRvSnNvbiB9IGZyb20gXCIuLi8uLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vLi4vaW5kZXguanNcIjtcbmltcG9ydCB7IHBlcmZvcm1Bc3luY1N5c2NhbGwgfSBmcm9tIFwiLi9zeXNjYWxsLmpzXCI7XG5pbXBvcnQgeyBwYXJzZUFyZ3MgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUFyZyB9IGZyb20gXCIuL3ZhbGlkYXRlLmpzXCI7XG5pbXBvcnQgeyBnZXRGdW5jdGlvbkFkZHJlc3MgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9wYXRocy5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwTXV0YXRpb25TY2hlZHVsZXIoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuQWZ0ZXI6IGFzeW5jIChkZWxheU1zLCBmdW5jdGlvblJlZmVyZW5jZSwgYXJncykgPT4ge1xuICAgICAgY29uc3Qgc3lzY2FsbEFyZ3MgPSBydW5BZnRlclN5c2NhbGxBcmdzKGRlbGF5TXMsIGZ1bmN0aW9uUmVmZXJlbmNlLCBhcmdzKTtcbiAgICAgIHJldHVybiBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL3NjaGVkdWxlXCIsIHN5c2NhbGxBcmdzKTtcbiAgICB9LFxuICAgIHJ1bkF0OiBhc3luYyAobXNfc2luY2VfZXBvY2hfb3JfZGF0ZSwgZnVuY3Rpb25SZWZlcmVuY2UsIGFyZ3MpID0+IHtcbiAgICAgIGNvbnN0IHN5c2NhbGxBcmdzID0gcnVuQXRTeXNjYWxsQXJncyhcbiAgICAgICAgbXNfc2luY2VfZXBvY2hfb3JfZGF0ZSxcbiAgICAgICAgZnVuY3Rpb25SZWZlcmVuY2UsXG4gICAgICAgIGFyZ3NcbiAgICAgICk7XG4gICAgICByZXR1cm4gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9zY2hlZHVsZVwiLCBzeXNjYWxsQXJncyk7XG4gICAgfSxcbiAgICBjYW5jZWw6IGFzeW5jIChpZCkgPT4ge1xuICAgICAgdmFsaWRhdGVBcmcoaWQsIDEsIFwiY2FuY2VsXCIsIFwiaWRcIik7XG4gICAgICBjb25zdCBhcmdzID0geyBpZDogY29udmV4VG9Kc29uKGlkKSB9O1xuICAgICAgYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9jYW5jZWxfam9iXCIsIGFyZ3MpO1xuICAgIH1cbiAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cEFjdGlvblNjaGVkdWxlcihyZXF1ZXN0SWQpIHtcbiAgcmV0dXJuIHtcbiAgICBydW5BZnRlcjogYXN5bmMgKGRlbGF5TXMsIGZ1bmN0aW9uUmVmZXJlbmNlLCBhcmdzKSA9PiB7XG4gICAgICBjb25zdCBzeXNjYWxsQXJncyA9IHtcbiAgICAgICAgcmVxdWVzdElkLFxuICAgICAgICAuLi5ydW5BZnRlclN5c2NhbGxBcmdzKGRlbGF5TXMsIGZ1bmN0aW9uUmVmZXJlbmNlLCBhcmdzKVxuICAgICAgfTtcbiAgICAgIHJldHVybiBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL2FjdGlvbnMvc2NoZWR1bGVcIiwgc3lzY2FsbEFyZ3MpO1xuICAgIH0sXG4gICAgcnVuQXQ6IGFzeW5jIChtc19zaW5jZV9lcG9jaF9vcl9kYXRlLCBmdW5jdGlvblJlZmVyZW5jZSwgYXJncykgPT4ge1xuICAgICAgY29uc3Qgc3lzY2FsbEFyZ3MgPSB7XG4gICAgICAgIHJlcXVlc3RJZCxcbiAgICAgICAgLi4ucnVuQXRTeXNjYWxsQXJncyhtc19zaW5jZV9lcG9jaF9vcl9kYXRlLCBmdW5jdGlvblJlZmVyZW5jZSwgYXJncylcbiAgICAgIH07XG4gICAgICByZXR1cm4gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9hY3Rpb25zL3NjaGVkdWxlXCIsIHN5c2NhbGxBcmdzKTtcbiAgICB9LFxuICAgIGNhbmNlbDogYXN5bmMgKGlkKSA9PiB7XG4gICAgICB2YWxpZGF0ZUFyZyhpZCwgMSwgXCJjYW5jZWxcIiwgXCJpZFwiKTtcbiAgICAgIGNvbnN0IHN5c2NhbGxBcmdzID0geyBpZDogY29udmV4VG9Kc29uKGlkKSB9O1xuICAgICAgcmV0dXJuIGF3YWl0IHBlcmZvcm1Bc3luY1N5c2NhbGwoXCIxLjAvYWN0aW9ucy9jYW5jZWxfam9iXCIsIHN5c2NhbGxBcmdzKTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBydW5BZnRlclN5c2NhbGxBcmdzKGRlbGF5TXMsIGZ1bmN0aW9uUmVmZXJlbmNlLCBhcmdzKSB7XG4gIGlmICh0eXBlb2YgZGVsYXlNcyAhPT0gXCJudW1iZXJcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihcImBkZWxheU1zYCBtdXN0IGJlIGEgbnVtYmVyXCIpO1xuICB9XG4gIGlmICghaXNGaW5pdGUoZGVsYXlNcykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJgZGVsYXlNc2AgbXVzdCBiZSBhIGZpbml0ZSBudW1iZXJcIik7XG4gIH1cbiAgaWYgKGRlbGF5TXMgPCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYGRlbGF5TXNgIG11c3QgYmUgbm9uLW5lZ2F0aXZlXCIpO1xuICB9XG4gIGNvbnN0IGZ1bmN0aW9uQXJncyA9IHBhcnNlQXJncyhhcmdzKTtcbiAgY29uc3QgYWRkcmVzcyA9IGdldEZ1bmN0aW9uQWRkcmVzcyhmdW5jdGlvblJlZmVyZW5jZSk7XG4gIGNvbnN0IHRzID0gKERhdGUubm93KCkgKyBkZWxheU1zKSAvIDFlMztcbiAgcmV0dXJuIHtcbiAgICAuLi5hZGRyZXNzLFxuICAgIHRzLFxuICAgIGFyZ3M6IGNvbnZleFRvSnNvbihmdW5jdGlvbkFyZ3MpLFxuICAgIHZlcnNpb25cbiAgfTtcbn1cbmZ1bmN0aW9uIHJ1bkF0U3lzY2FsbEFyZ3MobXNfc2luY2VfZXBvY2hfb3JfZGF0ZSwgZnVuY3Rpb25SZWZlcmVuY2UsIGFyZ3MpIHtcbiAgbGV0IHRzO1xuICBpZiAobXNfc2luY2VfZXBvY2hfb3JfZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICB0cyA9IG1zX3NpbmNlX2Vwb2NoX29yX2RhdGUudmFsdWVPZigpIC8gMWUzO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBtc19zaW5jZV9lcG9jaF9vcl9kYXRlID09PSBcIm51bWJlclwiKSB7XG4gICAgdHMgPSBtc19zaW5jZV9lcG9jaF9vcl9kYXRlIC8gMWUzO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBpbnZva2UgdGltZSBtdXN0IGEgRGF0ZSBvciBhIHRpbWVzdGFtcFwiKTtcbiAgfVxuICBjb25zdCBhZGRyZXNzID0gZ2V0RnVuY3Rpb25BZGRyZXNzKGZ1bmN0aW9uUmVmZXJlbmNlKTtcbiAgY29uc3QgZnVuY3Rpb25BcmdzID0gcGFyc2VBcmdzKGFyZ3MpO1xuICByZXR1cm4ge1xuICAgIC4uLmFkZHJlc3MsXG4gICAgdHMsXG4gICAgYXJnczogY29udmV4VG9Kc29uKGZ1bmN0aW9uQXJncyksXG4gICAgdmVyc2lvblxuICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZWR1bGVyX2ltcGwuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/scheduler_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/search_filter_builder_impl.js":
/*!********************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/search_filter_builder_impl.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SearchFilterBuilderImpl: () => (/* binding */ SearchFilterBuilderImpl)\n/* harmony export */ });\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n/* harmony import */ var _search_filter_builder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../search_filter_builder.js */ \"(ssr)/./node_modules/convex/dist/esm/server/search_filter_builder.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\nclass SearchFilterBuilderImpl extends _search_filter_builder_js__WEBPACK_IMPORTED_MODULE_1__.SearchFilter {\n  constructor(filters) {\n    super();\n    __publicField(this, \"filters\");\n    __publicField(this, \"isConsumed\");\n    this.filters = filters;\n    this.isConsumed = false;\n  }\n  static new() {\n    return new SearchFilterBuilderImpl([]);\n  }\n  consume() {\n    if (this.isConsumed) {\n      throw new Error(\n        \"SearchFilterBuilder has already been used! Chain your method calls like `q => q.search(...).eq(...)`.\"\n      );\n    }\n    this.isConsumed = true;\n  }\n  search(fieldName, query) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_2__.validateArg)(fieldName, 1, \"search\", \"fieldName\");\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_2__.validateArg)(query, 2, \"search\", \"query\");\n    this.consume();\n    return new SearchFilterBuilderImpl(\n      this.filters.concat({\n        type: \"Search\",\n        fieldPath: fieldName,\n        value: query\n      })\n    );\n  }\n  eq(fieldName, value) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_2__.validateArg)(fieldName, 1, \"eq\", \"fieldName\");\n    if (arguments.length !== 2) {\n      (0,_validate_js__WEBPACK_IMPORTED_MODULE_2__.validateArg)(value, 2, \"search\", \"value\");\n    }\n    this.consume();\n    return new SearchFilterBuilderImpl(\n      this.filters.concat({\n        type: \"Eq\",\n        fieldPath: fieldName,\n        value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(value)\n      })\n    );\n  }\n  export() {\n    this.consume();\n    return this.filters;\n  }\n}\n//# sourceMappingURL=search_filter_builder_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3NlYXJjaF9maWx0ZXJfYnVpbGRlcl9pbXBsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNnRTtBQUczQjtBQUNPO0FBQ3JDLHNDQUFzQyxtRUFBWTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkseURBQVc7QUFDZixJQUFJLHlEQUFXO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLElBQUkseURBQVc7QUFDZjtBQUNBLE1BQU0seURBQVc7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5RUFBdUI7QUFDdEMsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxpbXBsXFxzZWFyY2hfZmlsdGVyX2J1aWxkZXJfaW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG5pbXBvcnQgeyBjb252ZXhPclVuZGVmaW5lZFRvSnNvbiB9IGZyb20gXCIuLi8uLi92YWx1ZXMvdmFsdWUuanNcIjtcbmltcG9ydCB7XG4gIFNlYXJjaEZpbHRlclxufSBmcm9tIFwiLi4vc2VhcmNoX2ZpbHRlcl9idWlsZGVyLmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUFyZyB9IGZyb20gXCIuL3ZhbGlkYXRlLmpzXCI7XG5leHBvcnQgY2xhc3MgU2VhcmNoRmlsdGVyQnVpbGRlckltcGwgZXh0ZW5kcyBTZWFyY2hGaWx0ZXIge1xuICBjb25zdHJ1Y3RvcihmaWx0ZXJzKSB7XG4gICAgc3VwZXIoKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZmlsdGVyc1wiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiaXNDb25zdW1lZFwiKTtcbiAgICB0aGlzLmZpbHRlcnMgPSBmaWx0ZXJzO1xuICAgIHRoaXMuaXNDb25zdW1lZCA9IGZhbHNlO1xuICB9XG4gIHN0YXRpYyBuZXcoKSB7XG4gICAgcmV0dXJuIG5ldyBTZWFyY2hGaWx0ZXJCdWlsZGVySW1wbChbXSk7XG4gIH1cbiAgY29uc3VtZSgpIHtcbiAgICBpZiAodGhpcy5pc0NvbnN1bWVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiU2VhcmNoRmlsdGVyQnVpbGRlciBoYXMgYWxyZWFkeSBiZWVuIHVzZWQhIENoYWluIHlvdXIgbWV0aG9kIGNhbGxzIGxpa2UgYHEgPT4gcS5zZWFyY2goLi4uKS5lcSguLi4pYC5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5pc0NvbnN1bWVkID0gdHJ1ZTtcbiAgfVxuICBzZWFyY2goZmllbGROYW1lLCBxdWVyeSkge1xuICAgIHZhbGlkYXRlQXJnKGZpZWxkTmFtZSwgMSwgXCJzZWFyY2hcIiwgXCJmaWVsZE5hbWVcIik7XG4gICAgdmFsaWRhdGVBcmcocXVlcnksIDIsIFwic2VhcmNoXCIsIFwicXVlcnlcIik7XG4gICAgdGhpcy5jb25zdW1lKCk7XG4gICAgcmV0dXJuIG5ldyBTZWFyY2hGaWx0ZXJCdWlsZGVySW1wbChcbiAgICAgIHRoaXMuZmlsdGVycy5jb25jYXQoe1xuICAgICAgICB0eXBlOiBcIlNlYXJjaFwiLFxuICAgICAgICBmaWVsZFBhdGg6IGZpZWxkTmFtZSxcbiAgICAgICAgdmFsdWU6IHF1ZXJ5XG4gICAgICB9KVxuICAgICk7XG4gIH1cbiAgZXEoZmllbGROYW1lLCB2YWx1ZSkge1xuICAgIHZhbGlkYXRlQXJnKGZpZWxkTmFtZSwgMSwgXCJlcVwiLCBcImZpZWxkTmFtZVwiKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAhPT0gMikge1xuICAgICAgdmFsaWRhdGVBcmcodmFsdWUsIDIsIFwic2VhcmNoXCIsIFwidmFsdWVcIik7XG4gICAgfVxuICAgIHRoaXMuY29uc3VtZSgpO1xuICAgIHJldHVybiBuZXcgU2VhcmNoRmlsdGVyQnVpbGRlckltcGwoXG4gICAgICB0aGlzLmZpbHRlcnMuY29uY2F0KHtcbiAgICAgICAgdHlwZTogXCJFcVwiLFxuICAgICAgICBmaWVsZFBhdGg6IGZpZWxkTmFtZSxcbiAgICAgICAgdmFsdWU6IGNvbnZleE9yVW5kZWZpbmVkVG9Kc29uKHZhbHVlKVxuICAgICAgfSlcbiAgICApO1xuICB9XG4gIGV4cG9ydCgpIHtcbiAgICB0aGlzLmNvbnN1bWUoKTtcbiAgICByZXR1cm4gdGhpcy5maWx0ZXJzO1xuICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZWFyY2hfZmlsdGVyX2J1aWxkZXJfaW1wbC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/search_filter_builder_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/storage_impl.js":
/*!******************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/storage_impl.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setupStorageActionWriter: () => (/* binding */ setupStorageActionWriter),\n/* harmony export */   setupStorageReader: () => (/* binding */ setupStorageReader),\n/* harmony export */   setupStorageWriter: () => (/* binding */ setupStorageWriter)\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\");\n\n\n\n\nfunction setupStorageReader(requestId) {\n  return {\n    getUrl: async (storageId) => {\n      (0,_validate_js__WEBPACK_IMPORTED_MODULE_2__.validateArg)(storageId, 1, \"getUrl\", \"storageId\");\n      return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/storageGetUrl\", {\n        requestId,\n        version: _index_js__WEBPACK_IMPORTED_MODULE_0__.version,\n        storageId\n      });\n    },\n    getMetadata: async (storageId) => {\n      return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/storageGetMetadata\", {\n        requestId,\n        version: _index_js__WEBPACK_IMPORTED_MODULE_0__.version,\n        storageId\n      });\n    }\n  };\n}\nfunction setupStorageWriter(requestId) {\n  const reader = setupStorageReader(requestId);\n  return {\n    generateUploadUrl: async () => {\n      return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/storageGenerateUploadUrl\", {\n        requestId,\n        version: _index_js__WEBPACK_IMPORTED_MODULE_0__.version\n      });\n    },\n    delete: async (storageId) => {\n      await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/storageDelete\", {\n        requestId,\n        version: _index_js__WEBPACK_IMPORTED_MODULE_0__.version,\n        storageId\n      });\n    },\n    getUrl: reader.getUrl,\n    getMetadata: reader.getMetadata\n  };\n}\nfunction setupStorageActionWriter(requestId) {\n  const writer = setupStorageWriter(requestId);\n  return {\n    ...writer,\n    store: async (blob, options) => {\n      return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performJsSyscall)(\"storage/storeBlob\", {\n        requestId,\n        version: _index_js__WEBPACK_IMPORTED_MODULE_0__.version,\n        blob,\n        options\n      });\n    },\n    get: async (storageId) => {\n      return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performJsSyscall)(\"storage/getBlob\", {\n        requestId,\n        version: _index_js__WEBPACK_IMPORTED_MODULE_0__.version,\n        storageId\n      });\n    }\n  };\n}\n//# sourceMappingURL=storage_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3N0b3JhZ2VfaW1wbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBYTtBQUM0QjtBQUM0QjtBQUN6QjtBQUNyQztBQUNQO0FBQ0E7QUFDQSxNQUFNLHlEQUFXO0FBQ2pCLG1CQUFtQixnRUFBbUI7QUFDdEM7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsbUJBQW1CLGdFQUFtQjtBQUN0QztBQUNBLGVBQWU7QUFDZjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnRUFBbUI7QUFDdEM7QUFDQSxlQUFlO0FBQ2YsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLFlBQVksZ0VBQW1CO0FBQy9CO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkRBQWdCO0FBQ25DO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsbUJBQW1CLDZEQUFnQjtBQUNuQztBQUNBLGVBQWU7QUFDZjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxzZXJ2ZXJcXGltcGxcXHN0b3JhZ2VfaW1wbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vLi4vaW5kZXguanNcIjtcbmltcG9ydCB7IHBlcmZvcm1Bc3luY1N5c2NhbGwsIHBlcmZvcm1Kc1N5c2NhbGwgfSBmcm9tIFwiLi9zeXNjYWxsLmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUFyZyB9IGZyb20gXCIuL3ZhbGlkYXRlLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gc2V0dXBTdG9yYWdlUmVhZGVyKHJlcXVlc3RJZCkge1xuICByZXR1cm4ge1xuICAgIGdldFVybDogYXN5bmMgKHN0b3JhZ2VJZCkgPT4ge1xuICAgICAgdmFsaWRhdGVBcmcoc3RvcmFnZUlkLCAxLCBcImdldFVybFwiLCBcInN0b3JhZ2VJZFwiKTtcbiAgICAgIHJldHVybiBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL3N0b3JhZ2VHZXRVcmxcIiwge1xuICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgIHZlcnNpb24sXG4gICAgICAgIHN0b3JhZ2VJZFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRNZXRhZGF0YTogYXN5bmMgKHN0b3JhZ2VJZCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHBlcmZvcm1Bc3luY1N5c2NhbGwoXCIxLjAvc3RvcmFnZUdldE1ldGFkYXRhXCIsIHtcbiAgICAgICAgcmVxdWVzdElkLFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgICBzdG9yYWdlSWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFN0b3JhZ2VXcml0ZXIocmVxdWVzdElkKSB7XG4gIGNvbnN0IHJlYWRlciA9IHNldHVwU3RvcmFnZVJlYWRlcihyZXF1ZXN0SWQpO1xuICByZXR1cm4ge1xuICAgIGdlbmVyYXRlVXBsb2FkVXJsOiBhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9zdG9yYWdlR2VuZXJhdGVVcGxvYWRVcmxcIiwge1xuICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgIHZlcnNpb25cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsZXRlOiBhc3luYyAoc3RvcmFnZUlkKSA9PiB7XG4gICAgICBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL3N0b3JhZ2VEZWxldGVcIiwge1xuICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgIHZlcnNpb24sXG4gICAgICAgIHN0b3JhZ2VJZFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRVcmw6IHJlYWRlci5nZXRVcmwsXG4gICAgZ2V0TWV0YWRhdGE6IHJlYWRlci5nZXRNZXRhZGF0YVxuICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwU3RvcmFnZUFjdGlvbldyaXRlcihyZXF1ZXN0SWQpIHtcbiAgY29uc3Qgd3JpdGVyID0gc2V0dXBTdG9yYWdlV3JpdGVyKHJlcXVlc3RJZCk7XG4gIHJldHVybiB7XG4gICAgLi4ud3JpdGVyLFxuICAgIHN0b3JlOiBhc3luYyAoYmxvYiwgb3B0aW9ucykgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHBlcmZvcm1Kc1N5c2NhbGwoXCJzdG9yYWdlL3N0b3JlQmxvYlwiLCB7XG4gICAgICAgIHJlcXVlc3RJZCxcbiAgICAgICAgdmVyc2lvbixcbiAgICAgICAgYmxvYixcbiAgICAgICAgb3B0aW9uc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXQ6IGFzeW5jIChzdG9yYWdlSWQpID0+IHtcbiAgICAgIHJldHVybiBhd2FpdCBwZXJmb3JtSnNTeXNjYWxsKFwic3RvcmFnZS9nZXRCbG9iXCIsIHtcbiAgICAgICAgcmVxdWVzdElkLFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgICBzdG9yYWdlSWRcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0b3JhZ2VfaW1wbC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/storage_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js":
/*!*************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/syscall.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   performAsyncSyscall: () => (/* binding */ performAsyncSyscall),\n/* harmony export */   performJsSyscall: () => (/* binding */ performJsSyscall),\n/* harmony export */   performSyscall: () => (/* binding */ performSyscall)\n/* harmony export */ });\n/* harmony import */ var _values_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/errors.js */ \"(ssr)/./node_modules/convex/dist/esm/values/errors.js\");\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n\n\n\nfunction performSyscall(op, arg) {\n  if (typeof Convex === \"undefined\" || Convex.syscall === void 0) {\n    throw new Error(\n      \"The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?\"\n    );\n  }\n  const resultStr = Convex.syscall(op, JSON.stringify(arg));\n  return JSON.parse(resultStr);\n}\nasync function performAsyncSyscall(op, arg) {\n  if (typeof Convex === \"undefined\" || Convex.asyncSyscall === void 0) {\n    throw new Error(\n      \"The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?\"\n    );\n  }\n  let resultStr;\n  try {\n    resultStr = await Convex.asyncSyscall(op, JSON.stringify(arg));\n  } catch (e) {\n    if (e.data !== void 0) {\n      const rethrown = new _values_errors_js__WEBPACK_IMPORTED_MODULE_0__.ConvexError(e.message);\n      rethrown.data = (0,_values_value_js__WEBPACK_IMPORTED_MODULE_1__.jsonToConvex)(e.data);\n      throw rethrown;\n    }\n    throw new Error(e.message);\n  }\n  return JSON.parse(resultStr);\n}\nfunction performJsSyscall(op, arg) {\n  if (typeof Convex === \"undefined\" || Convex.jsSyscall === void 0) {\n    throw new Error(\n      \"The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?\"\n    );\n  }\n  return Convex.jsSyscall(op, arg);\n}\n//# sourceMappingURL=syscall.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3N5c2NhbGwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBYTtBQUN3QztBQUNBO0FBQzlDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLDJCQUEyQiwwREFBVztBQUN0QyxzQkFBc0IsOERBQVk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHNlcnZlclxcaW1wbFxcc3lzY2FsbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCB7IENvbnZleEVycm9yIH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGpzb25Ub0NvbnZleCB9IGZyb20gXCIuLi8uLi92YWx1ZXMvdmFsdWUuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwZXJmb3JtU3lzY2FsbChvcCwgYXJnKSB7XG4gIGlmICh0eXBlb2YgQ29udmV4ID09PSBcInVuZGVmaW5lZFwiIHx8IENvbnZleC5zeXNjYWxsID09PSB2b2lkIDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIlRoZSBDb252ZXggZGF0YWJhc2UgYW5kIGF1dGggb2JqZWN0cyBhcmUgYmVpbmcgdXNlZCBvdXRzaWRlIG9mIGEgQ29udmV4IGJhY2tlbmQuIERpZCB5b3UgbWVhbiB0byB1c2UgYHVzZVF1ZXJ5YCBvciBgdXNlTXV0YXRpb25gIHRvIGNhbGwgYSBDb252ZXggZnVuY3Rpb24/XCJcbiAgICApO1xuICB9XG4gIGNvbnN0IHJlc3VsdFN0ciA9IENvbnZleC5zeXNjYWxsKG9wLCBKU09OLnN0cmluZ2lmeShhcmcpKTtcbiAgcmV0dXJuIEpTT04ucGFyc2UocmVzdWx0U3RyKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwZXJmb3JtQXN5bmNTeXNjYWxsKG9wLCBhcmcpIHtcbiAgaWYgKHR5cGVvZiBDb252ZXggPT09IFwidW5kZWZpbmVkXCIgfHwgQ29udmV4LmFzeW5jU3lzY2FsbCA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJUaGUgQ29udmV4IGRhdGFiYXNlIGFuZCBhdXRoIG9iamVjdHMgYXJlIGJlaW5nIHVzZWQgb3V0c2lkZSBvZiBhIENvbnZleCBiYWNrZW5kLiBEaWQgeW91IG1lYW4gdG8gdXNlIGB1c2VRdWVyeWAgb3IgYHVzZU11dGF0aW9uYCB0byBjYWxsIGEgQ29udmV4IGZ1bmN0aW9uP1wiXG4gICAgKTtcbiAgfVxuICBsZXQgcmVzdWx0U3RyO1xuICB0cnkge1xuICAgIHJlc3VsdFN0ciA9IGF3YWl0IENvbnZleC5hc3luY1N5c2NhbGwob3AsIEpTT04uc3RyaW5naWZ5KGFyZykpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGUuZGF0YSAhPT0gdm9pZCAwKSB7XG4gICAgICBjb25zdCByZXRocm93biA9IG5ldyBDb252ZXhFcnJvcihlLm1lc3NhZ2UpO1xuICAgICAgcmV0aHJvd24uZGF0YSA9IGpzb25Ub0NvbnZleChlLmRhdGEpO1xuICAgICAgdGhyb3cgcmV0aHJvd247XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihlLm1lc3NhZ2UpO1xuICB9XG4gIHJldHVybiBKU09OLnBhcnNlKHJlc3VsdFN0cik7XG59XG5leHBvcnQgZnVuY3Rpb24gcGVyZm9ybUpzU3lzY2FsbChvcCwgYXJnKSB7XG4gIGlmICh0eXBlb2YgQ29udmV4ID09PSBcInVuZGVmaW5lZFwiIHx8IENvbnZleC5qc1N5c2NhbGwgPT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiVGhlIENvbnZleCBkYXRhYmFzZSBhbmQgYXV0aCBvYmplY3RzIGFyZSBiZWluZyB1c2VkIG91dHNpZGUgb2YgYSBDb252ZXggYmFja2VuZC4gRGlkIHlvdSBtZWFuIHRvIHVzZSBgdXNlUXVlcnlgIG9yIGB1c2VNdXRhdGlvbmAgdG8gY2FsbCBhIENvbnZleCBmdW5jdGlvbj9cIlxuICAgICk7XG4gIH1cbiAgcmV0dXJuIENvbnZleC5qc1N5c2NhbGwob3AsIGFyZyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zeXNjYWxsLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js":
/*!**************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/validate.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validateArg: () => (/* binding */ validateArg),\n/* harmony export */   validateArgIsInteger: () => (/* binding */ validateArgIsInteger),\n/* harmony export */   validateArgIsNonNegativeInteger: () => (/* binding */ validateArgIsNonNegativeInteger)\n/* harmony export */ });\n\nfunction validateArg(arg, idx, method, argName) {\n  if (arg === void 0) {\n    throw new TypeError(\n      `Must provide arg ${idx} \\`${argName}\\` to \\`${method}\\``\n    );\n  }\n}\nfunction validateArgIsInteger(arg, idx, method, argName) {\n  if (!Number.isInteger(arg)) {\n    throw new TypeError(\n      `Arg ${idx} \\`${argName}\\` to \\`${method}\\` must be an integer`\n    );\n  }\n}\nfunction validateArgIsNonNegativeInteger(arg, idx, method, argName) {\n  if (!Number.isInteger(arg) || arg < 0) {\n    throw new TypeError(\n      `Arg ${idx} \\`${argName}\\` to \\`${method}\\` must be a non-negative integer`\n    );\n  }\n}\n//# sourceMappingURL=validate.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3ZhbGlkYXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFhO0FBQ047QUFDUDtBQUNBO0FBQ0EsMEJBQTBCLEtBQUssSUFBSSxRQUFRLFVBQVUsT0FBTztBQUM1RDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxhQUFhLEtBQUssSUFBSSxRQUFRLFVBQVUsT0FBTztBQUMvQztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxhQUFhLEtBQUssSUFBSSxRQUFRLFVBQVUsT0FBTztBQUMvQztBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxzZXJ2ZXJcXGltcGxcXHZhbGlkYXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQXJnKGFyZywgaWR4LCBtZXRob2QsIGFyZ05hbWUpIHtcbiAgaWYgKGFyZyA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBNdXN0IHByb3ZpZGUgYXJnICR7aWR4fSBcXGAke2FyZ05hbWV9XFxgIHRvIFxcYCR7bWV0aG9kfVxcYGBcbiAgICApO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVBcmdJc0ludGVnZXIoYXJnLCBpZHgsIG1ldGhvZCwgYXJnTmFtZSkge1xuICBpZiAoIU51bWJlci5pc0ludGVnZXIoYXJnKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBgQXJnICR7aWR4fSBcXGAke2FyZ05hbWV9XFxgIHRvIFxcYCR7bWV0aG9kfVxcYCBtdXN0IGJlIGFuIGludGVnZXJgXG4gICAgKTtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQXJnSXNOb25OZWdhdGl2ZUludGVnZXIoYXJnLCBpZHgsIG1ldGhvZCwgYXJnTmFtZSkge1xuICBpZiAoIU51bWJlci5pc0ludGVnZXIoYXJnKSB8fCBhcmcgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBBcmcgJHtpZHh9IFxcYCR7YXJnTmFtZX1cXGAgdG8gXFxgJHttZXRob2R9XFxgIG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlcmBcbiAgICApO1xuICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD12YWxpZGF0ZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/vector_search_impl.js":
/*!************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/vector_search_impl.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExpressionImpl: () => (/* binding */ ExpressionImpl),\n/* harmony export */   VectorQueryImpl: () => (/* binding */ VectorQueryImpl),\n/* harmony export */   filterBuilderImpl: () => (/* binding */ filterBuilderImpl),\n/* harmony export */   serializeExpression: () => (/* binding */ serializeExpression),\n/* harmony export */   setupActionVectorSearch: () => (/* binding */ setupActionVectorSearch)\n/* harmony export */ });\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _vector_search_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../vector_search.js */ \"(ssr)/./node_modules/convex/dist/esm/server/vector_search.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\");\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\nfunction setupActionVectorSearch(requestId) {\n  return async (tableName, indexName, query) => {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(tableName, 1, \"vectorSearch\", \"tableName\");\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(indexName, 2, \"vectorSearch\", \"indexName\");\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(query, 3, \"vectorSearch\", \"query\");\n    if (!query.vector || !Array.isArray(query.vector) || query.vector.length === 0) {\n      throw Error(\"`vector` must be a non-empty Array in vectorSearch\");\n    }\n    return await new VectorQueryImpl(\n      requestId,\n      tableName + \".\" + indexName,\n      query\n    ).collect();\n  };\n}\nclass VectorQueryImpl {\n  constructor(requestId, indexName, query) {\n    __publicField(this, \"requestId\");\n    __publicField(this, \"state\");\n    this.requestId = requestId;\n    const filters = query.filter ? serializeExpression(query.filter(filterBuilderImpl)) : null;\n    this.state = {\n      type: \"preparing\",\n      query: {\n        indexName,\n        limit: query.limit,\n        vector: query.vector,\n        expressions: filters\n      }\n    };\n  }\n  async collect() {\n    if (this.state.type === \"consumed\") {\n      throw new Error(\"This query is closed and can't emit any more values.\");\n    }\n    const query = this.state.query;\n    this.state = { type: \"consumed\" };\n    const { results } = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_0__.performAsyncSyscall)(\"1.0/actions/vectorSearch\", {\n      requestId: this.requestId,\n      version: _index_js__WEBPACK_IMPORTED_MODULE_1__.version,\n      query\n    });\n    return results;\n  }\n}\nclass ExpressionImpl extends _vector_search_js__WEBPACK_IMPORTED_MODULE_2__.FilterExpression {\n  constructor(inner) {\n    super();\n    __publicField(this, \"inner\");\n    this.inner = inner;\n  }\n  serialize() {\n    return this.inner;\n  }\n}\nfunction serializeExpression(expr) {\n  if (expr instanceof ExpressionImpl) {\n    return expr.serialize();\n  } else {\n    return { $literal: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_4__.convexOrUndefinedToJson)(expr) };\n  }\n}\nconst filterBuilderImpl = {\n  //  Comparisons  /////////////////////////////////////////////////////////////\n  eq(fieldName, value) {\n    if (typeof fieldName !== \"string\") {\n      throw new Error(\"The first argument to `q.eq` must be a field name.\");\n    }\n    return new ExpressionImpl({\n      $eq: [\n        serializeExpression(new ExpressionImpl({ $field: fieldName })),\n        serializeExpression(value)\n      ]\n    });\n  },\n  //  Logic  ///////////////////////////////////////////////////////////////////\n  or(...exprs) {\n    return new ExpressionImpl({ $or: exprs.map(serializeExpression) });\n  }\n};\n//# sourceMappingURL=vector_search_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3ZlY3Rvcl9zZWFyY2hfaW1wbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQWE7QUFDYjtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDbUQ7QUFDVjtBQUdaO0FBQ2U7QUFDb0I7QUFDekQ7QUFDUDtBQUNBLElBQUkseURBQVc7QUFDZixJQUFJLHlEQUFXO0FBQ2YsSUFBSSx5REFBVztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLFlBQVksVUFBVSxRQUFRLGdFQUFtQjtBQUNqRDtBQUNBLGFBQWE7QUFDYjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDTyw2QkFBNkIsK0RBQWdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLElBQUk7QUFDSixhQUFhLFVBQVUseUVBQXVCO0FBQzlDO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELG1CQUFtQjtBQUNwRTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZ0NBQWdDLHFDQUFxQztBQUNyRTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxpbXBsXFx2ZWN0b3Jfc2VhcmNoX2ltcGwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuaW1wb3J0IHsgcGVyZm9ybUFzeW5jU3lzY2FsbCB9IGZyb20gXCIuL3N5c2NhbGwuanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vLi4vaW5kZXguanNcIjtcbmltcG9ydCB7XG4gIEZpbHRlckV4cHJlc3Npb25cbn0gZnJvbSBcIi4uL3ZlY3Rvcl9zZWFyY2guanNcIjtcbmltcG9ydCB7IHZhbGlkYXRlQXJnIH0gZnJvbSBcIi4vdmFsaWRhdGUuanNcIjtcbmltcG9ydCB7IGNvbnZleE9yVW5kZWZpbmVkVG9Kc29uIH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy92YWx1ZS5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwQWN0aW9uVmVjdG9yU2VhcmNoKHJlcXVlc3RJZCkge1xuICByZXR1cm4gYXN5bmMgKHRhYmxlTmFtZSwgaW5kZXhOYW1lLCBxdWVyeSkgPT4ge1xuICAgIHZhbGlkYXRlQXJnKHRhYmxlTmFtZSwgMSwgXCJ2ZWN0b3JTZWFyY2hcIiwgXCJ0YWJsZU5hbWVcIik7XG4gICAgdmFsaWRhdGVBcmcoaW5kZXhOYW1lLCAyLCBcInZlY3RvclNlYXJjaFwiLCBcImluZGV4TmFtZVwiKTtcbiAgICB2YWxpZGF0ZUFyZyhxdWVyeSwgMywgXCJ2ZWN0b3JTZWFyY2hcIiwgXCJxdWVyeVwiKTtcbiAgICBpZiAoIXF1ZXJ5LnZlY3RvciB8fCAhQXJyYXkuaXNBcnJheShxdWVyeS52ZWN0b3IpIHx8IHF1ZXJ5LnZlY3Rvci5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IEVycm9yKFwiYHZlY3RvcmAgbXVzdCBiZSBhIG5vbi1lbXB0eSBBcnJheSBpbiB2ZWN0b3JTZWFyY2hcIik7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBuZXcgVmVjdG9yUXVlcnlJbXBsKFxuICAgICAgcmVxdWVzdElkLFxuICAgICAgdGFibGVOYW1lICsgXCIuXCIgKyBpbmRleE5hbWUsXG4gICAgICBxdWVyeVxuICAgICkuY29sbGVjdCgpO1xuICB9O1xufVxuZXhwb3J0IGNsYXNzIFZlY3RvclF1ZXJ5SW1wbCB7XG4gIGNvbnN0cnVjdG9yKHJlcXVlc3RJZCwgaW5kZXhOYW1lLCBxdWVyeSkge1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJyZXF1ZXN0SWRcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInN0YXRlXCIpO1xuICAgIHRoaXMucmVxdWVzdElkID0gcmVxdWVzdElkO1xuICAgIGNvbnN0IGZpbHRlcnMgPSBxdWVyeS5maWx0ZXIgPyBzZXJpYWxpemVFeHByZXNzaW9uKHF1ZXJ5LmZpbHRlcihmaWx0ZXJCdWlsZGVySW1wbCkpIDogbnVsbDtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdHlwZTogXCJwcmVwYXJpbmdcIixcbiAgICAgIHF1ZXJ5OiB7XG4gICAgICAgIGluZGV4TmFtZSxcbiAgICAgICAgbGltaXQ6IHF1ZXJ5LmxpbWl0LFxuICAgICAgICB2ZWN0b3I6IHF1ZXJ5LnZlY3RvcixcbiAgICAgICAgZXhwcmVzc2lvbnM6IGZpbHRlcnNcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGFzeW5jIGNvbGxlY3QoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUudHlwZSA9PT0gXCJjb25zdW1lZFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHF1ZXJ5IGlzIGNsb3NlZCBhbmQgY2FuJ3QgZW1pdCBhbnkgbW9yZSB2YWx1ZXMuXCIpO1xuICAgIH1cbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuc3RhdGUucXVlcnk7XG4gICAgdGhpcy5zdGF0ZSA9IHsgdHlwZTogXCJjb25zdW1lZFwiIH07XG4gICAgY29uc3QgeyByZXN1bHRzIH0gPSBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL2FjdGlvbnMvdmVjdG9yU2VhcmNoXCIsIHtcbiAgICAgIHJlcXVlc3RJZDogdGhpcy5yZXF1ZXN0SWQsXG4gICAgICB2ZXJzaW9uLFxuICAgICAgcXVlcnlcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxufVxuZXhwb3J0IGNsYXNzIEV4cHJlc3Npb25JbXBsIGV4dGVuZHMgRmlsdGVyRXhwcmVzc2lvbiB7XG4gIGNvbnN0cnVjdG9yKGlubmVyKSB7XG4gICAgc3VwZXIoKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiaW5uZXJcIik7XG4gICAgdGhpcy5pbm5lciA9IGlubmVyO1xuICB9XG4gIHNlcmlhbGl6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pbm5lcjtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUV4cHJlc3Npb24oZXhwcikge1xuICBpZiAoZXhwciBpbnN0YW5jZW9mIEV4cHJlc3Npb25JbXBsKSB7XG4gICAgcmV0dXJuIGV4cHIuc2VyaWFsaXplKCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgJGxpdGVyYWw6IGNvbnZleE9yVW5kZWZpbmVkVG9Kc29uKGV4cHIpIH07XG4gIH1cbn1cbmV4cG9ydCBjb25zdCBmaWx0ZXJCdWlsZGVySW1wbCA9IHtcbiAgLy8gIENvbXBhcmlzb25zICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIGVxKGZpZWxkTmFtZSwgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIGZpZWxkTmFtZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGZpcnN0IGFyZ3VtZW50IHRvIGBxLmVxYCBtdXN0IGJlIGEgZmllbGQgbmFtZS5cIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRXhwcmVzc2lvbkltcGwoe1xuICAgICAgJGVxOiBbXG4gICAgICAgIHNlcmlhbGl6ZUV4cHJlc3Npb24obmV3IEV4cHJlc3Npb25JbXBsKHsgJGZpZWxkOiBmaWVsZE5hbWUgfSkpLFxuICAgICAgICBzZXJpYWxpemVFeHByZXNzaW9uKHZhbHVlKVxuICAgICAgXVxuICAgIH0pO1xuICB9LFxuICAvLyAgTG9naWMgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgb3IoLi4uZXhwcnMpIHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHsgJG9yOiBleHBycy5tYXAoc2VyaWFsaXplRXhwcmVzc2lvbikgfSk7XG4gIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZWN0b3Jfc2VhcmNoX2ltcGwuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/vector_search_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/index.js":
/*!******************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HttpRouter: () => (/* reexport safe */ _router_js__WEBPACK_IMPORTED_MODULE_6__.HttpRouter),\n/* harmony export */   ROUTABLE_HTTP_METHODS: () => (/* reexport safe */ _router_js__WEBPACK_IMPORTED_MODULE_6__.ROUTABLE_HTTP_METHODS),\n/* harmony export */   SearchFilter: () => (/* reexport safe */ _search_filter_builder_js__WEBPACK_IMPORTED_MODULE_3__.SearchFilter),\n/* harmony export */   actionGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.actionGeneric),\n/* harmony export */   anyApi: () => (/* reexport safe */ _api_js__WEBPACK_IMPORTED_MODULE_7__.anyApi),\n/* harmony export */   componentsGeneric: () => (/* reexport safe */ _components_index_js__WEBPACK_IMPORTED_MODULE_8__.componentsGeneric),\n/* harmony export */   createFunctionHandle: () => (/* reexport safe */ _components_index_js__WEBPACK_IMPORTED_MODULE_8__.createFunctionHandle),\n/* harmony export */   cronJobs: () => (/* reexport safe */ _cron_js__WEBPACK_IMPORTED_MODULE_5__.cronJobs),\n/* harmony export */   currentSystemUdfInComponent: () => (/* reexport safe */ _components_index_js__WEBPACK_IMPORTED_MODULE_8__.currentSystemUdfInComponent),\n/* harmony export */   defineApp: () => (/* reexport safe */ _components_index_js__WEBPACK_IMPORTED_MODULE_8__.defineApp),\n/* harmony export */   defineComponent: () => (/* reexport safe */ _components_index_js__WEBPACK_IMPORTED_MODULE_8__.defineComponent),\n/* harmony export */   defineSchema: () => (/* reexport safe */ _schema_js__WEBPACK_IMPORTED_MODULE_9__.defineSchema),\n/* harmony export */   defineTable: () => (/* reexport safe */ _schema_js__WEBPACK_IMPORTED_MODULE_9__.defineTable),\n/* harmony export */   filterApi: () => (/* reexport safe */ _api_js__WEBPACK_IMPORTED_MODULE_7__.filterApi),\n/* harmony export */   getFunctionAddress: () => (/* reexport safe */ _components_index_js__WEBPACK_IMPORTED_MODULE_8__.getFunctionAddress),\n/* harmony export */   getFunctionName: () => (/* reexport safe */ _api_js__WEBPACK_IMPORTED_MODULE_7__.getFunctionName),\n/* harmony export */   httpActionGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.httpActionGeneric),\n/* harmony export */   httpRouter: () => (/* reexport safe */ _router_js__WEBPACK_IMPORTED_MODULE_6__.httpRouter),\n/* harmony export */   internalActionGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.internalActionGeneric),\n/* harmony export */   internalMutationGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.internalMutationGeneric),\n/* harmony export */   internalQueryGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.internalQueryGeneric),\n/* harmony export */   makeFunctionReference: () => (/* reexport safe */ _api_js__WEBPACK_IMPORTED_MODULE_7__.makeFunctionReference),\n/* harmony export */   mutationGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.mutationGeneric),\n/* harmony export */   paginationOptsValidator: () => (/* reexport safe */ _pagination_js__WEBPACK_IMPORTED_MODULE_2__.paginationOptsValidator),\n/* harmony export */   paginationResultValidator: () => (/* reexport safe */ _pagination_js__WEBPACK_IMPORTED_MODULE_2__.paginationResultValidator),\n/* harmony export */   queryGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.queryGeneric)\n/* harmony export */ });\n/* harmony import */ var _database_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./database.js */ \"(ssr)/./node_modules/convex/dist/esm/server/database.js\");\n/* harmony import */ var _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./impl/registration_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/registration_impl.js\");\n/* harmony import */ var _pagination_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pagination.js */ \"(ssr)/./node_modules/convex/dist/esm/server/pagination.js\");\n/* harmony import */ var _search_filter_builder_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./search_filter_builder.js */ \"(ssr)/./node_modules/convex/dist/esm/server/search_filter_builder.js\");\n/* harmony import */ var _storage_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./storage.js */ \"(ssr)/./node_modules/convex/dist/esm/server/storage.js\");\n/* harmony import */ var _cron_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cron.js */ \"(ssr)/./node_modules/convex/dist/esm/server/cron.js\");\n/* harmony import */ var _router_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./router.js */ \"(ssr)/./node_modules/convex/dist/esm/server/router.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _components_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./components/index.js */ \"(ssr)/./node_modules/convex/dist/esm/server/components/index.js\");\n/* harmony import */ var _schema_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./schema.js */ \"(ssr)/./node_modules/convex/dist/esm/server/schema.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBYTtBQUNpQjtBQVNPO0FBQ0w7QUFDVztBQUNkO0FBQ1E7QUFDdUM7QUFNMUQ7QUFNYTtBQUNxQztBQUNUO0FBQ0g7QUFDeEQiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RhdGFiYXNlLmpzXCI7XG5leHBvcnQge1xuICBhY3Rpb25HZW5lcmljLFxuICBodHRwQWN0aW9uR2VuZXJpYyxcbiAgbXV0YXRpb25HZW5lcmljLFxuICBxdWVyeUdlbmVyaWMsXG4gIGludGVybmFsQWN0aW9uR2VuZXJpYyxcbiAgaW50ZXJuYWxNdXRhdGlvbkdlbmVyaWMsXG4gIGludGVybmFsUXVlcnlHZW5lcmljXG59IGZyb20gXCIuL2ltcGwvcmVnaXN0cmF0aW9uX2ltcGwuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3BhZ2luYXRpb24uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NlYXJjaF9maWx0ZXJfYnVpbGRlci5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3RvcmFnZS5qc1wiO1xuZXhwb3J0IHsgY3JvbkpvYnMgfSBmcm9tIFwiLi9jcm9uLmpzXCI7XG5leHBvcnQgeyBodHRwUm91dGVyLCBIdHRwUm91dGVyLCBST1VUQUJMRV9IVFRQX01FVEhPRFMgfSBmcm9tIFwiLi9yb3V0ZXIuanNcIjtcbmV4cG9ydCB7XG4gIGFueUFwaSxcbiAgZ2V0RnVuY3Rpb25OYW1lLFxuICBtYWtlRnVuY3Rpb25SZWZlcmVuY2UsXG4gIGZpbHRlckFwaVxufSBmcm9tIFwiLi9hcGkuanNcIjtcbmV4cG9ydCB7XG4gIGRlZmluZUFwcCxcbiAgZGVmaW5lQ29tcG9uZW50LFxuICBjb21wb25lbnRzR2VuZXJpYyxcbiAgY3JlYXRlRnVuY3Rpb25IYW5kbGVcbn0gZnJvbSBcIi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgY3VycmVudFN5c3RlbVVkZkluQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgZ2V0RnVuY3Rpb25BZGRyZXNzIH0gZnJvbSBcIi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgZGVmaW5lVGFibGUsIGRlZmluZVNjaGVtYSB9IGZyb20gXCIuL3NjaGVtYS5qc1wiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/index_range_builder.js":
/*!********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/index_range_builder.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IndexRange: () => (/* binding */ IndexRange)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nclass IndexRange {\n  /**\n   * @internal\n   */\n  constructor() {\n    // Property for nominal type support.\n    __publicField(this, \"_isIndexRange\");\n  }\n}\n//# sourceMappingURL=index_range_builder.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbmRleF9yYW5nZV9idWlsZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHNlcnZlclxcaW5kZXhfcmFuZ2VfYnVpbGRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG5leHBvcnQgY2xhc3MgSW5kZXhSYW5nZSB7XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIFByb3BlcnR5IGZvciBub21pbmFsIHR5cGUgc3VwcG9ydC5cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX2lzSW5kZXhSYW5nZVwiKTtcbiAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXhfcmFuZ2VfYnVpbGRlci5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/index_range_builder.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/pagination.js":
/*!***********************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/pagination.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   paginationOptsValidator: () => (/* binding */ paginationOptsValidator),\n/* harmony export */   paginationResultValidator: () => (/* binding */ paginationResultValidator)\n/* harmony export */ });\n/* harmony import */ var _values_validator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../values/validator.js */ \"(ssr)/./node_modules/convex/dist/esm/values/validator.js\");\n\n\nconst paginationOptsValidator = _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({\n  numItems: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.number(),\n  cursor: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.union(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string(), _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.null()),\n  endCursor: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.union(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string(), _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.null())),\n  id: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.number()),\n  maximumRowsRead: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.number()),\n  maximumBytesRead: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.number())\n});\nfunction paginationResultValidator(itemValidator) {\n  return _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({\n    page: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.array(itemValidator),\n    continueCursor: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string(),\n    isDone: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.boolean(),\n    splitCursor: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.union(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string(), _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.null())),\n    pageStatus: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(\n      _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.union(\n        _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"SplitRecommended\"),\n        _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"SplitRequired\"),\n        _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.null()\n      )\n    )\n  });\n}\n//# sourceMappingURL=pagination.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9wYWdpbmF0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFhO0FBQzhCO0FBQ3BDLGdDQUFnQyxtREFBQztBQUN4QyxZQUFZLG1EQUFDO0FBQ2IsVUFBVSxtREFBQyxPQUFPLG1EQUFDLFdBQVcsbURBQUM7QUFDL0IsYUFBYSxtREFBQyxVQUFVLG1EQUFDLE9BQU8sbURBQUMsV0FBVyxtREFBQztBQUM3QyxNQUFNLG1EQUFDLFVBQVUsbURBQUM7QUFDbEIsbUJBQW1CLG1EQUFDLFVBQVUsbURBQUM7QUFDL0Isb0JBQW9CLG1EQUFDLFVBQVUsbURBQUM7QUFDaEMsQ0FBQztBQUNNO0FBQ1AsU0FBUyxtREFBQztBQUNWLFVBQVUsbURBQUM7QUFDWCxvQkFBb0IsbURBQUM7QUFDckIsWUFBWSxtREFBQztBQUNiLGlCQUFpQixtREFBQyxVQUFVLG1EQUFDLE9BQU8sbURBQUMsV0FBVyxtREFBQztBQUNqRCxnQkFBZ0IsbURBQUM7QUFDakIsTUFBTSxtREFBQztBQUNQLFFBQVEsbURBQUM7QUFDVCxRQUFRLG1EQUFDO0FBQ1QsUUFBUSxtREFBQztBQUNUO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxzZXJ2ZXJcXHBhZ2luYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5pbXBvcnQgeyB2IH0gZnJvbSBcIi4uL3ZhbHVlcy92YWxpZGF0b3IuanNcIjtcbmV4cG9ydCBjb25zdCBwYWdpbmF0aW9uT3B0c1ZhbGlkYXRvciA9IHYub2JqZWN0KHtcbiAgbnVtSXRlbXM6IHYubnVtYmVyKCksXG4gIGN1cnNvcjogdi51bmlvbih2LnN0cmluZygpLCB2Lm51bGwoKSksXG4gIGVuZEN1cnNvcjogdi5vcHRpb25hbCh2LnVuaW9uKHYuc3RyaW5nKCksIHYubnVsbCgpKSksXG4gIGlkOiB2Lm9wdGlvbmFsKHYubnVtYmVyKCkpLFxuICBtYXhpbXVtUm93c1JlYWQ6IHYub3B0aW9uYWwodi5udW1iZXIoKSksXG4gIG1heGltdW1CeXRlc1JlYWQ6IHYub3B0aW9uYWwodi5udW1iZXIoKSlcbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIHBhZ2luYXRpb25SZXN1bHRWYWxpZGF0b3IoaXRlbVZhbGlkYXRvcikge1xuICByZXR1cm4gdi5vYmplY3Qoe1xuICAgIHBhZ2U6IHYuYXJyYXkoaXRlbVZhbGlkYXRvciksXG4gICAgY29udGludWVDdXJzb3I6IHYuc3RyaW5nKCksXG4gICAgaXNEb25lOiB2LmJvb2xlYW4oKSxcbiAgICBzcGxpdEN1cnNvcjogdi5vcHRpb25hbCh2LnVuaW9uKHYuc3RyaW5nKCksIHYubnVsbCgpKSksXG4gICAgcGFnZVN0YXR1czogdi5vcHRpb25hbChcbiAgICAgIHYudW5pb24oXG4gICAgICAgIHYubGl0ZXJhbChcIlNwbGl0UmVjb21tZW5kZWRcIiksXG4gICAgICAgIHYubGl0ZXJhbChcIlNwbGl0UmVxdWlyZWRcIiksXG4gICAgICAgIHYubnVsbCgpXG4gICAgICApXG4gICAgKVxuICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2luYXRpb24uanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/pagination.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/router.js":
/*!*******************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/router.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HttpRouter: () => (/* binding */ HttpRouter),\n/* harmony export */   ROUTABLE_HTTP_METHODS: () => (/* binding */ ROUTABLE_HTTP_METHODS),\n/* harmony export */   httpRouter: () => (/* binding */ httpRouter),\n/* harmony export */   normalizeMethod: () => (/* binding */ normalizeMethod)\n/* harmony export */ });\n/* harmony import */ var _impl_syscall_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./impl/syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\nconst ROUTABLE_HTTP_METHODS = [\n  \"GET\",\n  \"POST\",\n  \"PUT\",\n  \"DELETE\",\n  \"OPTIONS\",\n  \"PATCH\"\n];\nfunction normalizeMethod(method) {\n  if (method === \"HEAD\") return \"GET\";\n  return method;\n}\nconst httpRouter = () => new HttpRouter();\nclass HttpRouter {\n  constructor() {\n    __publicField(this, \"exactRoutes\", /* @__PURE__ */ new Map());\n    __publicField(this, \"prefixRoutes\", /* @__PURE__ */ new Map());\n    __publicField(this, \"isRouter\", true);\n    /**\n     * Specify an HttpAction to be used to respond to requests\n     * for an HTTP method (e.g. \"GET\") and a path or pathPrefix.\n     *\n     * Paths must begin with a slash. Path prefixes must also end in a slash.\n     *\n     * ```js\n     * // matches `/profile` (but not `/profile/`)\n     * http.route({ path: \"/profile\", method: \"GET\", handler: getProfile})\n     *\n     * // matches `/profiles/`, `/profiles/abc`, and `/profiles/a/c/b` (but not `/profile`)\n     * http.route({ pathPrefix: \"/profile/\", method: \"GET\", handler: getProfile})\n     * ```\n     */\n    __publicField(this, \"route\", (spec) => {\n      if (!spec.handler) throw new Error(`route requires handler`);\n      if (!spec.method) throw new Error(`route requires method`);\n      const { method, handler } = spec;\n      if (!ROUTABLE_HTTP_METHODS.includes(method)) {\n        throw new Error(\n          `'${method}' is not an allowed HTTP method (like GET, POST, PUT etc.)`\n        );\n      }\n      if (\"path\" in spec) {\n        if (\"pathPrefix\" in spec) {\n          throw new Error(\n            `Invalid httpRouter route: cannot contain both 'path' and 'pathPrefix'`\n          );\n        }\n        if (!spec.path.startsWith(\"/\")) {\n          throw new Error(`path '${spec.path}' does not start with a /`);\n        }\n        if (spec.path.startsWith(\"/.files/\") || spec.path === \"/.files\") {\n          throw new Error(`path '${spec.path}' is reserved`);\n        }\n        const methods = this.exactRoutes.has(spec.path) ? this.exactRoutes.get(spec.path) : /* @__PURE__ */ new Map();\n        if (methods.has(method)) {\n          throw new Error(\n            `Path '${spec.path}' for method ${method} already in use`\n          );\n        }\n        methods.set(method, handler);\n        this.exactRoutes.set(spec.path, methods);\n      } else if (\"pathPrefix\" in spec) {\n        if (!spec.pathPrefix.startsWith(\"/\")) {\n          throw new Error(\n            `pathPrefix '${spec.pathPrefix}' does not start with a /`\n          );\n        }\n        if (!spec.pathPrefix.endsWith(\"/\")) {\n          throw new Error(`pathPrefix ${spec.pathPrefix} must end with a /`);\n        }\n        if (spec.pathPrefix.startsWith(\"/.files/\")) {\n          throw new Error(`pathPrefix '${spec.pathPrefix}' is reserved`);\n        }\n        const prefixes = this.prefixRoutes.get(method) || /* @__PURE__ */ new Map();\n        if (prefixes.has(spec.pathPrefix)) {\n          throw new Error(\n            `${spec.method} pathPrefix ${spec.pathPrefix} is already defined`\n          );\n        }\n        prefixes.set(spec.pathPrefix, handler);\n        this.prefixRoutes.set(method, prefixes);\n      } else {\n        throw new Error(\n          `Invalid httpRouter route entry: must contain either field 'path' or 'pathPrefix'`\n        );\n      }\n    });\n    /**\n     * Returns a list of routed HTTP actions.\n     *\n     * These are used to populate the list of routes shown in the Functions page of the Convex dashboard.\n     *\n     * @returns - an array of [path, method, endpoint] tuples.\n     */\n    __publicField(this, \"getRoutes\", () => {\n      const exactPaths = [...this.exactRoutes.keys()].sort();\n      const exact = exactPaths.flatMap(\n        (path) => [...this.exactRoutes.get(path).keys()].sort().map(\n          (method) => [path, method, this.exactRoutes.get(path).get(method)]\n        )\n      );\n      const prefixPathMethods = [...this.prefixRoutes.keys()].sort();\n      const prefixes = prefixPathMethods.flatMap(\n        (method) => [...this.prefixRoutes.get(method).keys()].sort().map(\n          (pathPrefix) => [\n            `${pathPrefix}*`,\n            method,\n            this.prefixRoutes.get(method).get(pathPrefix)\n          ]\n        )\n      );\n      return [...exact, ...prefixes];\n    });\n    /**\n     * Returns the appropriate HTTP action and its routed request path and method.\n     *\n     * The path and method returned are used for logging and metrics, and should\n     * match up with one of the routes returned by `getRoutes`.\n     *\n     * For example,\n     *\n     * ```js\n     * http.route({ pathPrefix: \"/profile/\", method: \"GET\", handler: getProfile});\n     *\n     * http.lookup(\"/profile/abc\", \"GET\") // returns [getProfile, \"GET\", \"/profile/*\"]\n     *```\n     *\n     * @returns - a tuple [{@link PublicHttpAction}, method, path] or null.\n     */\n    __publicField(this, \"lookup\", (path, method) => {\n      method = normalizeMethod(method);\n      const exactMatch = this.exactRoutes.get(path)?.get(method);\n      if (exactMatch) return [exactMatch, method, path];\n      const prefixes = this.prefixRoutes.get(method) || /* @__PURE__ */ new Map();\n      const prefixesSorted = [...prefixes.entries()].sort(\n        ([prefixA, _a], [prefixB, _b]) => prefixB.length - prefixA.length\n      );\n      for (const [pathPrefix, endpoint] of prefixesSorted) {\n        if (path.startsWith(pathPrefix)) {\n          return [endpoint, method, `${pathPrefix}*`];\n        }\n      }\n      return null;\n    });\n    /**\n     * Given a JSON string representation of a Request object, return a Response\n     * by routing the request and running the appropriate endpoint or returning\n     * a 404 Response.\n     *\n     * @param argsStr - a JSON string representing a Request object.\n     *\n     * @returns - a Response object.\n     */\n    __publicField(this, \"runRequest\", async (argsStr, requestRoute) => {\n      const request = (0,_impl_syscall_js__WEBPACK_IMPORTED_MODULE_0__.performJsSyscall)(\"requestFromConvexJson\", {\n        convexJson: JSON.parse(argsStr)\n      });\n      let pathname = requestRoute;\n      if (!pathname || typeof pathname !== \"string\") {\n        pathname = new URL(request.url).pathname;\n      }\n      const method = request.method;\n      const match = this.lookup(pathname, method);\n      if (!match) {\n        const response2 = new Response(`No HttpAction routed for ${pathname}`, {\n          status: 404\n        });\n        return JSON.stringify(\n          (0,_impl_syscall_js__WEBPACK_IMPORTED_MODULE_0__.performJsSyscall)(\"convexJsonFromResponse\", { response: response2 })\n        );\n      }\n      const [endpoint, _method, _path] = match;\n      const response = await endpoint.invokeHttpAction(request);\n      return JSON.stringify(\n        (0,_impl_syscall_js__WEBPACK_IMPORTED_MODULE_0__.performJsSyscall)(\"convexJsonFromResponse\", { response })\n      );\n    });\n  }\n}\n//# sourceMappingURL=router.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9yb3V0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNxRDtBQUM5QztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFEQUFxRDtBQUN6RTtBQUNBO0FBQ0Esb0JBQW9CLDREQUE0RDtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxrQkFBa0I7QUFDaEM7QUFDQTtBQUNBLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsVUFBVTtBQUM3QztBQUNBO0FBQ0EsbUNBQW1DLFVBQVU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsVUFBVSxlQUFlLFFBQVE7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLDJCQUEyQixnQkFBZ0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLGlCQUFpQjtBQUN6RDtBQUNBO0FBQ0EseUNBQXlDLGdCQUFnQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsYUFBYSxhQUFhLGlCQUFpQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFdBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw0REFBNEQ7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsdUJBQXVCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsV0FBVztBQUNsRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isa0VBQWdCO0FBQ3RDO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLFNBQVM7QUFDNUU7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxVQUFVLGtFQUFnQiw2QkFBNkIscUJBQXFCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtFQUFnQiw2QkFBNkIsVUFBVTtBQUMvRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxyb3V0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuaW1wb3J0IHsgcGVyZm9ybUpzU3lzY2FsbCB9IGZyb20gXCIuL2ltcGwvc3lzY2FsbC5qc1wiO1xuZXhwb3J0IGNvbnN0IFJPVVRBQkxFX0hUVFBfTUVUSE9EUyA9IFtcbiAgXCJHRVRcIixcbiAgXCJQT1NUXCIsXG4gIFwiUFVUXCIsXG4gIFwiREVMRVRFXCIsXG4gIFwiT1BUSU9OU1wiLFxuICBcIlBBVENIXCJcbl07XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuICBpZiAobWV0aG9kID09PSBcIkhFQURcIikgcmV0dXJuIFwiR0VUXCI7XG4gIHJldHVybiBtZXRob2Q7XG59XG5leHBvcnQgY29uc3QgaHR0cFJvdXRlciA9ICgpID0+IG5ldyBIdHRwUm91dGVyKCk7XG5leHBvcnQgY2xhc3MgSHR0cFJvdXRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJleGFjdFJvdXRlc1wiLCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicHJlZml4Um91dGVzXCIsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJpc1JvdXRlclwiLCB0cnVlKTtcbiAgICAvKipcbiAgICAgKiBTcGVjaWZ5IGFuIEh0dHBBY3Rpb24gdG8gYmUgdXNlZCB0byByZXNwb25kIHRvIHJlcXVlc3RzXG4gICAgICogZm9yIGFuIEhUVFAgbWV0aG9kIChlLmcuIFwiR0VUXCIpIGFuZCBhIHBhdGggb3IgcGF0aFByZWZpeC5cbiAgICAgKlxuICAgICAqIFBhdGhzIG11c3QgYmVnaW4gd2l0aCBhIHNsYXNoLiBQYXRoIHByZWZpeGVzIG11c3QgYWxzbyBlbmQgaW4gYSBzbGFzaC5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gbWF0Y2hlcyBgL3Byb2ZpbGVgIChidXQgbm90IGAvcHJvZmlsZS9gKVxuICAgICAqIGh0dHAucm91dGUoeyBwYXRoOiBcIi9wcm9maWxlXCIsIG1ldGhvZDogXCJHRVRcIiwgaGFuZGxlcjogZ2V0UHJvZmlsZX0pXG4gICAgICpcbiAgICAgKiAvLyBtYXRjaGVzIGAvcHJvZmlsZXMvYCwgYC9wcm9maWxlcy9hYmNgLCBhbmQgYC9wcm9maWxlcy9hL2MvYmAgKGJ1dCBub3QgYC9wcm9maWxlYClcbiAgICAgKiBodHRwLnJvdXRlKHsgcGF0aFByZWZpeDogXCIvcHJvZmlsZS9cIiwgbWV0aG9kOiBcIkdFVFwiLCBoYW5kbGVyOiBnZXRQcm9maWxlfSlcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicm91dGVcIiwgKHNwZWMpID0+IHtcbiAgICAgIGlmICghc3BlYy5oYW5kbGVyKSB0aHJvdyBuZXcgRXJyb3IoYHJvdXRlIHJlcXVpcmVzIGhhbmRsZXJgKTtcbiAgICAgIGlmICghc3BlYy5tZXRob2QpIHRocm93IG5ldyBFcnJvcihgcm91dGUgcmVxdWlyZXMgbWV0aG9kYCk7XG4gICAgICBjb25zdCB7IG1ldGhvZCwgaGFuZGxlciB9ID0gc3BlYztcbiAgICAgIGlmICghUk9VVEFCTEVfSFRUUF9NRVRIT0RTLmluY2x1ZGVzKG1ldGhvZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGAnJHttZXRob2R9JyBpcyBub3QgYW4gYWxsb3dlZCBIVFRQIG1ldGhvZCAobGlrZSBHRVQsIFBPU1QsIFBVVCBldGMuKWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChcInBhdGhcIiBpbiBzcGVjKSB7XG4gICAgICAgIGlmIChcInBhdGhQcmVmaXhcIiBpbiBzcGVjKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEludmFsaWQgaHR0cFJvdXRlciByb3V0ZTogY2Fubm90IGNvbnRhaW4gYm90aCAncGF0aCcgYW5kICdwYXRoUHJlZml4J2BcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3BlYy5wYXRoLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBwYXRoICcke3NwZWMucGF0aH0nIGRvZXMgbm90IHN0YXJ0IHdpdGggYSAvYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNwZWMucGF0aC5zdGFydHNXaXRoKFwiLy5maWxlcy9cIikgfHwgc3BlYy5wYXRoID09PSBcIi8uZmlsZXNcIikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgcGF0aCAnJHtzcGVjLnBhdGh9JyBpcyByZXNlcnZlZGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1ldGhvZHMgPSB0aGlzLmV4YWN0Um91dGVzLmhhcyhzcGVjLnBhdGgpID8gdGhpcy5leGFjdFJvdXRlcy5nZXQoc3BlYy5wYXRoKSA6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgIGlmIChtZXRob2RzLmhhcyhtZXRob2QpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYFBhdGggJyR7c3BlYy5wYXRofScgZm9yIG1ldGhvZCAke21ldGhvZH0gYWxyZWFkeSBpbiB1c2VgXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBtZXRob2RzLnNldChtZXRob2QsIGhhbmRsZXIpO1xuICAgICAgICB0aGlzLmV4YWN0Um91dGVzLnNldChzcGVjLnBhdGgsIG1ldGhvZHMpO1xuICAgICAgfSBlbHNlIGlmIChcInBhdGhQcmVmaXhcIiBpbiBzcGVjKSB7XG4gICAgICAgIGlmICghc3BlYy5wYXRoUHJlZml4LnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHBhdGhQcmVmaXggJyR7c3BlYy5wYXRoUHJlZml4fScgZG9lcyBub3Qgc3RhcnQgd2l0aCBhIC9gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNwZWMucGF0aFByZWZpeC5lbmRzV2l0aChcIi9cIikpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHBhdGhQcmVmaXggJHtzcGVjLnBhdGhQcmVmaXh9IG11c3QgZW5kIHdpdGggYSAvYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNwZWMucGF0aFByZWZpeC5zdGFydHNXaXRoKFwiLy5maWxlcy9cIikpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHBhdGhQcmVmaXggJyR7c3BlYy5wYXRoUHJlZml4fScgaXMgcmVzZXJ2ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmVmaXhlcyA9IHRoaXMucHJlZml4Um91dGVzLmdldChtZXRob2QpIHx8IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgIGlmIChwcmVmaXhlcy5oYXMoc3BlYy5wYXRoUHJlZml4KSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGAke3NwZWMubWV0aG9kfSBwYXRoUHJlZml4ICR7c3BlYy5wYXRoUHJlZml4fSBpcyBhbHJlYWR5IGRlZmluZWRgXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBwcmVmaXhlcy5zZXQoc3BlYy5wYXRoUHJlZml4LCBoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5wcmVmaXhSb3V0ZXMuc2V0KG1ldGhvZCwgcHJlZml4ZXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBJbnZhbGlkIGh0dHBSb3V0ZXIgcm91dGUgZW50cnk6IG11c3QgY29udGFpbiBlaXRoZXIgZmllbGQgJ3BhdGgnIG9yICdwYXRoUHJlZml4J2BcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiByb3V0ZWQgSFRUUCBhY3Rpb25zLlxuICAgICAqXG4gICAgICogVGhlc2UgYXJlIHVzZWQgdG8gcG9wdWxhdGUgdGhlIGxpc3Qgb2Ygcm91dGVzIHNob3duIGluIHRoZSBGdW5jdGlvbnMgcGFnZSBvZiB0aGUgQ29udmV4IGRhc2hib2FyZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIC0gYW4gYXJyYXkgb2YgW3BhdGgsIG1ldGhvZCwgZW5kcG9pbnRdIHR1cGxlcy5cbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZ2V0Um91dGVzXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGV4YWN0UGF0aHMgPSBbLi4udGhpcy5leGFjdFJvdXRlcy5rZXlzKCldLnNvcnQoKTtcbiAgICAgIGNvbnN0IGV4YWN0ID0gZXhhY3RQYXRocy5mbGF0TWFwKFxuICAgICAgICAocGF0aCkgPT4gWy4uLnRoaXMuZXhhY3RSb3V0ZXMuZ2V0KHBhdGgpLmtleXMoKV0uc29ydCgpLm1hcChcbiAgICAgICAgICAobWV0aG9kKSA9PiBbcGF0aCwgbWV0aG9kLCB0aGlzLmV4YWN0Um91dGVzLmdldChwYXRoKS5nZXQobWV0aG9kKV1cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHByZWZpeFBhdGhNZXRob2RzID0gWy4uLnRoaXMucHJlZml4Um91dGVzLmtleXMoKV0uc29ydCgpO1xuICAgICAgY29uc3QgcHJlZml4ZXMgPSBwcmVmaXhQYXRoTWV0aG9kcy5mbGF0TWFwKFxuICAgICAgICAobWV0aG9kKSA9PiBbLi4udGhpcy5wcmVmaXhSb3V0ZXMuZ2V0KG1ldGhvZCkua2V5cygpXS5zb3J0KCkubWFwKFxuICAgICAgICAgIChwYXRoUHJlZml4KSA9PiBbXG4gICAgICAgICAgICBgJHtwYXRoUHJlZml4fSpgLFxuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgdGhpcy5wcmVmaXhSb3V0ZXMuZ2V0KG1ldGhvZCkuZ2V0KHBhdGhQcmVmaXgpXG4gICAgICAgICAgXVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgcmV0dXJuIFsuLi5leGFjdCwgLi4ucHJlZml4ZXNdO1xuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGFwcHJvcHJpYXRlIEhUVFAgYWN0aW9uIGFuZCBpdHMgcm91dGVkIHJlcXVlc3QgcGF0aCBhbmQgbWV0aG9kLlxuICAgICAqXG4gICAgICogVGhlIHBhdGggYW5kIG1ldGhvZCByZXR1cm5lZCBhcmUgdXNlZCBmb3IgbG9nZ2luZyBhbmQgbWV0cmljcywgYW5kIHNob3VsZFxuICAgICAqIG1hdGNoIHVwIHdpdGggb25lIG9mIHRoZSByb3V0ZXMgcmV0dXJuZWQgYnkgYGdldFJvdXRlc2AuXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSxcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogaHR0cC5yb3V0ZSh7IHBhdGhQcmVmaXg6IFwiL3Byb2ZpbGUvXCIsIG1ldGhvZDogXCJHRVRcIiwgaGFuZGxlcjogZ2V0UHJvZmlsZX0pO1xuICAgICAqXG4gICAgICogaHR0cC5sb29rdXAoXCIvcHJvZmlsZS9hYmNcIiwgXCJHRVRcIikgLy8gcmV0dXJucyBbZ2V0UHJvZmlsZSwgXCJHRVRcIiwgXCIvcHJvZmlsZS8qXCJdXG4gICAgICpgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIC0gYSB0dXBsZSBbe0BsaW5rIFB1YmxpY0h0dHBBY3Rpb259LCBtZXRob2QsIHBhdGhdIG9yIG51bGwuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImxvb2t1cFwiLCAocGF0aCwgbWV0aG9kKSA9PiB7XG4gICAgICBtZXRob2QgPSBub3JtYWxpemVNZXRob2QobWV0aG9kKTtcbiAgICAgIGNvbnN0IGV4YWN0TWF0Y2ggPSB0aGlzLmV4YWN0Um91dGVzLmdldChwYXRoKT8uZ2V0KG1ldGhvZCk7XG4gICAgICBpZiAoZXhhY3RNYXRjaCkgcmV0dXJuIFtleGFjdE1hdGNoLCBtZXRob2QsIHBhdGhdO1xuICAgICAgY29uc3QgcHJlZml4ZXMgPSB0aGlzLnByZWZpeFJvdXRlcy5nZXQobWV0aG9kKSB8fCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgICAgY29uc3QgcHJlZml4ZXNTb3J0ZWQgPSBbLi4ucHJlZml4ZXMuZW50cmllcygpXS5zb3J0KFxuICAgICAgICAoW3ByZWZpeEEsIF9hXSwgW3ByZWZpeEIsIF9iXSkgPT4gcHJlZml4Qi5sZW5ndGggLSBwcmVmaXhBLmxlbmd0aFxuICAgICAgKTtcbiAgICAgIGZvciAoY29uc3QgW3BhdGhQcmVmaXgsIGVuZHBvaW50XSBvZiBwcmVmaXhlc1NvcnRlZCkge1xuICAgICAgICBpZiAocGF0aC5zdGFydHNXaXRoKHBhdGhQcmVmaXgpKSB7XG4gICAgICAgICAgcmV0dXJuIFtlbmRwb2ludCwgbWV0aG9kLCBgJHtwYXRoUHJlZml4fSpgXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBKU09OIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIFJlcXVlc3Qgb2JqZWN0LCByZXR1cm4gYSBSZXNwb25zZVxuICAgICAqIGJ5IHJvdXRpbmcgdGhlIHJlcXVlc3QgYW5kIHJ1bm5pbmcgdGhlIGFwcHJvcHJpYXRlIGVuZHBvaW50IG9yIHJldHVybmluZ1xuICAgICAqIGEgNDA0IFJlc3BvbnNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFyZ3NTdHIgLSBhIEpTT04gc3RyaW5nIHJlcHJlc2VudGluZyBhIFJlcXVlc3Qgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgLSBhIFJlc3BvbnNlIG9iamVjdC5cbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwicnVuUmVxdWVzdFwiLCBhc3luYyAoYXJnc1N0ciwgcmVxdWVzdFJvdXRlKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gcGVyZm9ybUpzU3lzY2FsbChcInJlcXVlc3RGcm9tQ29udmV4SnNvblwiLCB7XG4gICAgICAgIGNvbnZleEpzb246IEpTT04ucGFyc2UoYXJnc1N0cilcbiAgICAgIH0pO1xuICAgICAgbGV0IHBhdGhuYW1lID0gcmVxdWVzdFJvdXRlO1xuICAgICAgaWYgKCFwYXRobmFtZSB8fCB0eXBlb2YgcGF0aG5hbWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcGF0aG5hbWUgPSBuZXcgVVJMKHJlcXVlc3QudXJsKS5wYXRobmFtZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1ldGhvZCA9IHJlcXVlc3QubWV0aG9kO1xuICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLmxvb2t1cChwYXRobmFtZSwgbWV0aG9kKTtcbiAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UyID0gbmV3IFJlc3BvbnNlKGBObyBIdHRwQWN0aW9uIHJvdXRlZCBmb3IgJHtwYXRobmFtZX1gLCB7XG4gICAgICAgICAgc3RhdHVzOiA0MDRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICBwZXJmb3JtSnNTeXNjYWxsKFwiY29udmV4SnNvbkZyb21SZXNwb25zZVwiLCB7IHJlc3BvbnNlOiByZXNwb25zZTIgfSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IFtlbmRwb2ludCwgX21ldGhvZCwgX3BhdGhdID0gbWF0Y2g7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGVuZHBvaW50Lmludm9rZUh0dHBBY3Rpb24ocmVxdWVzdCk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoXG4gICAgICAgIHBlcmZvcm1Kc1N5c2NhbGwoXCJjb252ZXhKc29uRnJvbVJlc3BvbnNlXCIsIHsgcmVzcG9uc2UgfSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdXRlci5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/router.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/schema.js":
/*!*******************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/schema.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SchemaDefinition: () => (/* binding */ SchemaDefinition),\n/* harmony export */   TableDefinition: () => (/* binding */ TableDefinition),\n/* harmony export */   defineSchema: () => (/* binding */ defineSchema),\n/* harmony export */   defineTable: () => (/* binding */ defineTable)\n/* harmony export */ });\n/* harmony import */ var _values_validator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../values/validator.js */ \"(ssr)/./node_modules/convex/dist/esm/values/validator.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\nclass TableDefinition {\n  /**\n   * @internal\n   */\n  constructor(documentType) {\n    __publicField(this, \"indexes\");\n    __publicField(this, \"stagedDbIndexes\");\n    __publicField(this, \"searchIndexes\");\n    __publicField(this, \"stagedSearchIndexes\");\n    __publicField(this, \"vectorIndexes\");\n    __publicField(this, \"stagedVectorIndexes\");\n    // The type of documents stored in this table.\n    __publicField(this, \"validator\");\n    this.indexes = [];\n    this.stagedDbIndexes = [];\n    this.searchIndexes = [];\n    this.stagedSearchIndexes = [];\n    this.vectorIndexes = [];\n    this.stagedVectorIndexes = [];\n    this.validator = documentType;\n  }\n  /**\n   * This API is experimental: it may change or disappear.\n   *\n   * Returns indexes defined on this table.\n   * Intended for the advanced use cases of dynamically deciding which index to use for a query.\n   * If you think you need this, please chime in on ths issue in the Convex JS GitHub repo.\n   * https://github.com/get-convex/convex-js/issues/49\n   */\n  \" indexes\"() {\n    return this.indexes;\n  }\n  index(name, indexConfig) {\n    if (Array.isArray(indexConfig)) {\n      this.indexes.push({\n        indexDescriptor: name,\n        fields: indexConfig\n      });\n    } else if (indexConfig.staged) {\n      this.stagedDbIndexes.push({\n        indexDescriptor: name,\n        fields: indexConfig.fields\n      });\n    } else {\n      this.indexes.push({\n        indexDescriptor: name,\n        fields: indexConfig.fields\n      });\n    }\n    return this;\n  }\n  searchIndex(name, indexConfig) {\n    if (indexConfig.staged) {\n      this.stagedSearchIndexes.push({\n        indexDescriptor: name,\n        searchField: indexConfig.searchField,\n        filterFields: indexConfig.filterFields || []\n      });\n    } else {\n      this.searchIndexes.push({\n        indexDescriptor: name,\n        searchField: indexConfig.searchField,\n        filterFields: indexConfig.filterFields || []\n      });\n    }\n    return this;\n  }\n  vectorIndex(name, indexConfig) {\n    if (indexConfig.staged) {\n      this.stagedVectorIndexes.push({\n        indexDescriptor: name,\n        vectorField: indexConfig.vectorField,\n        dimensions: indexConfig.dimensions,\n        filterFields: indexConfig.filterFields || []\n      });\n    } else {\n      this.vectorIndexes.push({\n        indexDescriptor: name,\n        vectorField: indexConfig.vectorField,\n        dimensions: indexConfig.dimensions,\n        filterFields: indexConfig.filterFields || []\n      });\n    }\n    return this;\n  }\n  /**\n   * Work around for https://github.com/microsoft/TypeScript/issues/57035\n   */\n  self() {\n    return this;\n  }\n  /**\n   * Export the contents of this definition.\n   *\n   * This is called internally by the Convex framework.\n   * @internal\n   */\n  export() {\n    const documentType = this.validator.json;\n    if (typeof documentType !== \"object\") {\n      throw new Error(\n        \"Invalid validator: please make sure that the parameter of `defineTable` is valid (see https://docs.convex.dev/database/schemas)\"\n      );\n    }\n    return {\n      indexes: this.indexes,\n      stagedDbIndexes: this.stagedDbIndexes,\n      searchIndexes: this.searchIndexes,\n      stagedSearchIndexes: this.stagedSearchIndexes,\n      vectorIndexes: this.vectorIndexes,\n      stagedVectorIndexes: this.stagedVectorIndexes,\n      documentType\n    };\n  }\n}\nfunction defineTable(documentSchema) {\n  if ((0,_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.isValidator)(documentSchema)) {\n    return new TableDefinition(documentSchema);\n  } else {\n    return new TableDefinition(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object(documentSchema));\n  }\n}\nclass SchemaDefinition {\n  /**\n   * @internal\n   */\n  constructor(tables, options) {\n    __publicField(this, \"tables\");\n    __publicField(this, \"strictTableNameTypes\");\n    __publicField(this, \"schemaValidation\");\n    this.tables = tables;\n    this.schemaValidation = options?.schemaValidation === void 0 ? true : options.schemaValidation;\n  }\n  /**\n   * Export the contents of this definition.\n   *\n   * This is called internally by the Convex framework.\n   * @internal\n   */\n  export() {\n    return JSON.stringify({\n      tables: Object.entries(this.tables).map(([tableName, definition]) => {\n        const {\n          indexes,\n          stagedDbIndexes,\n          searchIndexes,\n          stagedSearchIndexes,\n          vectorIndexes,\n          stagedVectorIndexes,\n          documentType\n        } = definition.export();\n        return {\n          tableName,\n          indexes,\n          stagedDbIndexes,\n          searchIndexes,\n          stagedSearchIndexes,\n          vectorIndexes,\n          stagedVectorIndexes,\n          documentType\n        };\n      }),\n      schemaValidation: this.schemaValidation\n    });\n  }\n}\nfunction defineSchema(schema, options) {\n  return new SchemaDefinition(schema, options);\n}\nconst _systemSchema = defineSchema({\n  _scheduled_functions: defineTable({\n    name: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string(),\n    args: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.array(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.any()),\n    scheduledTime: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.float64(),\n    completedTime: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.float64()),\n    state: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.union(\n      _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({ kind: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"pending\") }),\n      _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({ kind: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"inProgress\") }),\n      _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({ kind: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"success\") }),\n      _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({ kind: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"failed\"), error: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string() }),\n      _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({ kind: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"canceled\") })\n    )\n  }),\n  _storage: defineTable({\n    sha256: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string(),\n    size: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.float64(),\n    contentType: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string())\n  })\n});\n//# sourceMappingURL=schema.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9zY2hlbWEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUlnQztBQUN6QjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLE1BQU0saUVBQVc7QUFDakI7QUFDQSxJQUFJO0FBQ0osK0JBQStCLG1EQUFDO0FBQ2hDO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbURBQUM7QUFDWCxVQUFVLG1EQUFDLE9BQU8sbURBQUM7QUFDbkIsbUJBQW1CLG1EQUFDO0FBQ3BCLG1CQUFtQixtREFBQyxVQUFVLG1EQUFDO0FBQy9CLFdBQVcsbURBQUM7QUFDWixNQUFNLG1EQUFDLFVBQVUsTUFBTSxtREFBQyxxQkFBcUI7QUFDN0MsTUFBTSxtREFBQyxVQUFVLE1BQU0sbURBQUMsd0JBQXdCO0FBQ2hELE1BQU0sbURBQUMsVUFBVSxNQUFNLG1EQUFDLHFCQUFxQjtBQUM3QyxNQUFNLG1EQUFDLFVBQVUsTUFBTSxtREFBQywyQkFBMkIsbURBQUMsV0FBVztBQUMvRCxNQUFNLG1EQUFDLFVBQVUsTUFBTSxtREFBQyxzQkFBc0I7QUFDOUM7QUFDQSxHQUFHO0FBQ0g7QUFDQSxZQUFZLG1EQUFDO0FBQ2IsVUFBVSxtREFBQztBQUNYLGlCQUFpQixtREFBQyxVQUFVLG1EQUFDO0FBQzdCLEdBQUc7QUFDSCxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxzY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuaW1wb3J0IHtcbiAgaXNWYWxpZGF0b3IsXG4gIHZcbn0gZnJvbSBcIi4uL3ZhbHVlcy92YWxpZGF0b3IuanNcIjtcbmV4cG9ydCBjbGFzcyBUYWJsZURlZmluaXRpb24ge1xuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2N1bWVudFR5cGUpIHtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiaW5kZXhlc1wiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwic3RhZ2VkRGJJbmRleGVzXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJzZWFyY2hJbmRleGVzXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJzdGFnZWRTZWFyY2hJbmRleGVzXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJ2ZWN0b3JJbmRleGVzXCIpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJzdGFnZWRWZWN0b3JJbmRleGVzXCIpO1xuICAgIC8vIFRoZSB0eXBlIG9mIGRvY3VtZW50cyBzdG9yZWQgaW4gdGhpcyB0YWJsZS5cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidmFsaWRhdG9yXCIpO1xuICAgIHRoaXMuaW5kZXhlcyA9IFtdO1xuICAgIHRoaXMuc3RhZ2VkRGJJbmRleGVzID0gW107XG4gICAgdGhpcy5zZWFyY2hJbmRleGVzID0gW107XG4gICAgdGhpcy5zdGFnZWRTZWFyY2hJbmRleGVzID0gW107XG4gICAgdGhpcy52ZWN0b3JJbmRleGVzID0gW107XG4gICAgdGhpcy5zdGFnZWRWZWN0b3JJbmRleGVzID0gW107XG4gICAgdGhpcy52YWxpZGF0b3IgPSBkb2N1bWVudFR5cGU7XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgQVBJIGlzIGV4cGVyaW1lbnRhbDogaXQgbWF5IGNoYW5nZSBvciBkaXNhcHBlYXIuXG4gICAqXG4gICAqIFJldHVybnMgaW5kZXhlcyBkZWZpbmVkIG9uIHRoaXMgdGFibGUuXG4gICAqIEludGVuZGVkIGZvciB0aGUgYWR2YW5jZWQgdXNlIGNhc2VzIG9mIGR5bmFtaWNhbGx5IGRlY2lkaW5nIHdoaWNoIGluZGV4IHRvIHVzZSBmb3IgYSBxdWVyeS5cbiAgICogSWYgeW91IHRoaW5rIHlvdSBuZWVkIHRoaXMsIHBsZWFzZSBjaGltZSBpbiBvbiB0aHMgaXNzdWUgaW4gdGhlIENvbnZleCBKUyBHaXRIdWIgcmVwby5cbiAgICogaHR0cHM6Ly9naXRodWIuY29tL2dldC1jb252ZXgvY29udmV4LWpzL2lzc3Vlcy80OVxuICAgKi9cbiAgXCIgaW5kZXhlc1wiKCkge1xuICAgIHJldHVybiB0aGlzLmluZGV4ZXM7XG4gIH1cbiAgaW5kZXgobmFtZSwgaW5kZXhDb25maWcpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShpbmRleENvbmZpZykpIHtcbiAgICAgIHRoaXMuaW5kZXhlcy5wdXNoKHtcbiAgICAgICAgaW5kZXhEZXNjcmlwdG9yOiBuYW1lLFxuICAgICAgICBmaWVsZHM6IGluZGV4Q29uZmlnXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGluZGV4Q29uZmlnLnN0YWdlZCkge1xuICAgICAgdGhpcy5zdGFnZWREYkluZGV4ZXMucHVzaCh7XG4gICAgICAgIGluZGV4RGVzY3JpcHRvcjogbmFtZSxcbiAgICAgICAgZmllbGRzOiBpbmRleENvbmZpZy5maWVsZHNcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluZGV4ZXMucHVzaCh7XG4gICAgICAgIGluZGV4RGVzY3JpcHRvcjogbmFtZSxcbiAgICAgICAgZmllbGRzOiBpbmRleENvbmZpZy5maWVsZHNcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZWFyY2hJbmRleChuYW1lLCBpbmRleENvbmZpZykge1xuICAgIGlmIChpbmRleENvbmZpZy5zdGFnZWQpIHtcbiAgICAgIHRoaXMuc3RhZ2VkU2VhcmNoSW5kZXhlcy5wdXNoKHtcbiAgICAgICAgaW5kZXhEZXNjcmlwdG9yOiBuYW1lLFxuICAgICAgICBzZWFyY2hGaWVsZDogaW5kZXhDb25maWcuc2VhcmNoRmllbGQsXG4gICAgICAgIGZpbHRlckZpZWxkczogaW5kZXhDb25maWcuZmlsdGVyRmllbGRzIHx8IFtdXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWFyY2hJbmRleGVzLnB1c2goe1xuICAgICAgICBpbmRleERlc2NyaXB0b3I6IG5hbWUsXG4gICAgICAgIHNlYXJjaEZpZWxkOiBpbmRleENvbmZpZy5zZWFyY2hGaWVsZCxcbiAgICAgICAgZmlsdGVyRmllbGRzOiBpbmRleENvbmZpZy5maWx0ZXJGaWVsZHMgfHwgW11cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB2ZWN0b3JJbmRleChuYW1lLCBpbmRleENvbmZpZykge1xuICAgIGlmIChpbmRleENvbmZpZy5zdGFnZWQpIHtcbiAgICAgIHRoaXMuc3RhZ2VkVmVjdG9ySW5kZXhlcy5wdXNoKHtcbiAgICAgICAgaW5kZXhEZXNjcmlwdG9yOiBuYW1lLFxuICAgICAgICB2ZWN0b3JGaWVsZDogaW5kZXhDb25maWcudmVjdG9yRmllbGQsXG4gICAgICAgIGRpbWVuc2lvbnM6IGluZGV4Q29uZmlnLmRpbWVuc2lvbnMsXG4gICAgICAgIGZpbHRlckZpZWxkczogaW5kZXhDb25maWcuZmlsdGVyRmllbGRzIHx8IFtdXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy52ZWN0b3JJbmRleGVzLnB1c2goe1xuICAgICAgICBpbmRleERlc2NyaXB0b3I6IG5hbWUsXG4gICAgICAgIHZlY3RvckZpZWxkOiBpbmRleENvbmZpZy52ZWN0b3JGaWVsZCxcbiAgICAgICAgZGltZW5zaW9uczogaW5kZXhDb25maWcuZGltZW5zaW9ucyxcbiAgICAgICAgZmlsdGVyRmllbGRzOiBpbmRleENvbmZpZy5maWx0ZXJGaWVsZHMgfHwgW11cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogV29yayBhcm91bmQgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNTcwMzVcbiAgICovXG4gIHNlbGYoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEV4cG9ydCB0aGUgY29udGVudHMgb2YgdGhpcyBkZWZpbml0aW9uLlxuICAgKlxuICAgKiBUaGlzIGlzIGNhbGxlZCBpbnRlcm5hbGx5IGJ5IHRoZSBDb252ZXggZnJhbWV3b3JrLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGV4cG9ydCgpIHtcbiAgICBjb25zdCBkb2N1bWVudFR5cGUgPSB0aGlzLnZhbGlkYXRvci5qc29uO1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnRUeXBlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiSW52YWxpZCB2YWxpZGF0b3I6IHBsZWFzZSBtYWtlIHN1cmUgdGhhdCB0aGUgcGFyYW1ldGVyIG9mIGBkZWZpbmVUYWJsZWAgaXMgdmFsaWQgKHNlZSBodHRwczovL2RvY3MuY29udmV4LmRldi9kYXRhYmFzZS9zY2hlbWFzKVwiXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgaW5kZXhlczogdGhpcy5pbmRleGVzLFxuICAgICAgc3RhZ2VkRGJJbmRleGVzOiB0aGlzLnN0YWdlZERiSW5kZXhlcyxcbiAgICAgIHNlYXJjaEluZGV4ZXM6IHRoaXMuc2VhcmNoSW5kZXhlcyxcbiAgICAgIHN0YWdlZFNlYXJjaEluZGV4ZXM6IHRoaXMuc3RhZ2VkU2VhcmNoSW5kZXhlcyxcbiAgICAgIHZlY3RvckluZGV4ZXM6IHRoaXMudmVjdG9ySW5kZXhlcyxcbiAgICAgIHN0YWdlZFZlY3RvckluZGV4ZXM6IHRoaXMuc3RhZ2VkVmVjdG9ySW5kZXhlcyxcbiAgICAgIGRvY3VtZW50VHlwZVxuICAgIH07XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVUYWJsZShkb2N1bWVudFNjaGVtYSkge1xuICBpZiAoaXNWYWxpZGF0b3IoZG9jdW1lbnRTY2hlbWEpKSB7XG4gICAgcmV0dXJuIG5ldyBUYWJsZURlZmluaXRpb24oZG9jdW1lbnRTY2hlbWEpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgVGFibGVEZWZpbml0aW9uKHYub2JqZWN0KGRvY3VtZW50U2NoZW1hKSk7XG4gIH1cbn1cbmV4cG9ydCBjbGFzcyBTY2hlbWFEZWZpbml0aW9uIHtcbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY29uc3RydWN0b3IodGFibGVzLCBvcHRpb25zKSB7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInRhYmxlc1wiKTtcbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwic3RyaWN0VGFibGVOYW1lVHlwZXNcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInNjaGVtYVZhbGlkYXRpb25cIik7XG4gICAgdGhpcy50YWJsZXMgPSB0YWJsZXM7XG4gICAgdGhpcy5zY2hlbWFWYWxpZGF0aW9uID0gb3B0aW9ucz8uc2NoZW1hVmFsaWRhdGlvbiA9PT0gdm9pZCAwID8gdHJ1ZSA6IG9wdGlvbnMuc2NoZW1hVmFsaWRhdGlvbjtcbiAgfVxuICAvKipcbiAgICogRXhwb3J0IHRoZSBjb250ZW50cyBvZiB0aGlzIGRlZmluaXRpb24uXG4gICAqXG4gICAqIFRoaXMgaXMgY2FsbGVkIGludGVybmFsbHkgYnkgdGhlIENvbnZleCBmcmFtZXdvcmsuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZXhwb3J0KCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICB0YWJsZXM6IE9iamVjdC5lbnRyaWVzKHRoaXMudGFibGVzKS5tYXAoKFt0YWJsZU5hbWUsIGRlZmluaXRpb25dKSA9PiB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBpbmRleGVzLFxuICAgICAgICAgIHN0YWdlZERiSW5kZXhlcyxcbiAgICAgICAgICBzZWFyY2hJbmRleGVzLFxuICAgICAgICAgIHN0YWdlZFNlYXJjaEluZGV4ZXMsXG4gICAgICAgICAgdmVjdG9ySW5kZXhlcyxcbiAgICAgICAgICBzdGFnZWRWZWN0b3JJbmRleGVzLFxuICAgICAgICAgIGRvY3VtZW50VHlwZVxuICAgICAgICB9ID0gZGVmaW5pdGlvbi5leHBvcnQoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0YWJsZU5hbWUsXG4gICAgICAgICAgaW5kZXhlcyxcbiAgICAgICAgICBzdGFnZWREYkluZGV4ZXMsXG4gICAgICAgICAgc2VhcmNoSW5kZXhlcyxcbiAgICAgICAgICBzdGFnZWRTZWFyY2hJbmRleGVzLFxuICAgICAgICAgIHZlY3RvckluZGV4ZXMsXG4gICAgICAgICAgc3RhZ2VkVmVjdG9ySW5kZXhlcyxcbiAgICAgICAgICBkb2N1bWVudFR5cGVcbiAgICAgICAgfTtcbiAgICAgIH0pLFxuICAgICAgc2NoZW1hVmFsaWRhdGlvbjogdGhpcy5zY2hlbWFWYWxpZGF0aW9uXG4gICAgfSk7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVTY2hlbWEoc2NoZW1hLCBvcHRpb25zKSB7XG4gIHJldHVybiBuZXcgU2NoZW1hRGVmaW5pdGlvbihzY2hlbWEsIG9wdGlvbnMpO1xufVxuY29uc3QgX3N5c3RlbVNjaGVtYSA9IGRlZmluZVNjaGVtYSh7XG4gIF9zY2hlZHVsZWRfZnVuY3Rpb25zOiBkZWZpbmVUYWJsZSh7XG4gICAgbmFtZTogdi5zdHJpbmcoKSxcbiAgICBhcmdzOiB2LmFycmF5KHYuYW55KCkpLFxuICAgIHNjaGVkdWxlZFRpbWU6IHYuZmxvYXQ2NCgpLFxuICAgIGNvbXBsZXRlZFRpbWU6IHYub3B0aW9uYWwodi5mbG9hdDY0KCkpLFxuICAgIHN0YXRlOiB2LnVuaW9uKFxuICAgICAgdi5vYmplY3QoeyBraW5kOiB2LmxpdGVyYWwoXCJwZW5kaW5nXCIpIH0pLFxuICAgICAgdi5vYmplY3QoeyBraW5kOiB2LmxpdGVyYWwoXCJpblByb2dyZXNzXCIpIH0pLFxuICAgICAgdi5vYmplY3QoeyBraW5kOiB2LmxpdGVyYWwoXCJzdWNjZXNzXCIpIH0pLFxuICAgICAgdi5vYmplY3QoeyBraW5kOiB2LmxpdGVyYWwoXCJmYWlsZWRcIiksIGVycm9yOiB2LnN0cmluZygpIH0pLFxuICAgICAgdi5vYmplY3QoeyBraW5kOiB2LmxpdGVyYWwoXCJjYW5jZWxlZFwiKSB9KVxuICAgIClcbiAgfSksXG4gIF9zdG9yYWdlOiBkZWZpbmVUYWJsZSh7XG4gICAgc2hhMjU2OiB2LnN0cmluZygpLFxuICAgIHNpemU6IHYuZmxvYXQ2NCgpLFxuICAgIGNvbnRlbnRUeXBlOiB2Lm9wdGlvbmFsKHYuc3RyaW5nKCkpXG4gIH0pXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjaGVtYS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/schema.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/search_filter_builder.js":
/*!**********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/search_filter_builder.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SearchFilter: () => (/* binding */ SearchFilter)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nclass SearchFilter {\n  /**\n   * @internal\n   */\n  constructor() {\n    // Property for nominal type support.\n    __publicField(this, \"_isSearchFilter\");\n  }\n}\n//# sourceMappingURL=search_filter_builder.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9zZWFyY2hfZmlsdGVyX2J1aWxkZXIuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFhO0FBQ2I7QUFDQSw4RUFBOEUsNkRBQTZEO0FBQzNJO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcc2VydmVyXFxzZWFyY2hfZmlsdGVyX2J1aWxkZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuZXhwb3J0IGNsYXNzIFNlYXJjaEZpbHRlciB7XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIFByb3BlcnR5IGZvciBub21pbmFsIHR5cGUgc3VwcG9ydC5cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiX2lzU2VhcmNoRmlsdGVyXCIpO1xuICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZWFyY2hfZmlsdGVyX2J1aWxkZXIuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/search_filter_builder.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/storage.js":
/*!********************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/storage.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceMappingURL=storage.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9zdG9yYWdlLmpzIiwibWFwcGluZ3MiOiI7QUFBYTtBQUNiIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHNlcnZlclxcc3RvcmFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0b3JhZ2UuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/storage.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/vector_search.js":
/*!**************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/vector_search.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FilterExpression: () => (/* binding */ FilterExpression)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nclass FilterExpression {\n  /**\n   * @internal\n   */\n  constructor() {\n    // Property for nominal type support.\n    __publicField(this, \"_isExpression\");\n    // Property to distinguish expressions by the type they resolve to.\n    __publicField(this, \"_value\");\n  }\n}\n//# sourceMappingURL=vector_search.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci92ZWN0b3Jfc2VhcmNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFxzZXJ2ZXJcXHZlY3Rvcl9zZWFyY2guanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuZXhwb3J0IGNsYXNzIEZpbHRlckV4cHJlc3Npb24ge1xuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBQcm9wZXJ0eSBmb3Igbm9taW5hbCB0eXBlIHN1cHBvcnQuXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9pc0V4cHJlc3Npb25cIik7XG4gICAgLy8gUHJvcGVydHkgdG8gZGlzdGluZ3Vpc2ggZXhwcmVzc2lvbnMgYnkgdGhlIHR5cGUgdGhleSByZXNvbHZlIHRvLlxuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJfdmFsdWVcIik7XG4gIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlY3Rvcl9zZWFyY2guanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/vector_search.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/base64.js":
/*!*******************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/base64.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   byteLength: () => (/* binding */ byteLength),\n/* harmony export */   fromByteArray: () => (/* binding */ fromByteArray),\n/* harmony export */   fromByteArrayUrlSafeNoPadding: () => (/* binding */ fromByteArrayUrlSafeNoPadding),\n/* harmony export */   toByteArray: () => (/* binding */ toByteArray)\n/* harmony export */ });\n\nvar lookup = [];\nvar revLookup = [];\nvar Arr = Uint8Array;\nvar code = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n}\nrevLookup[\"-\".charCodeAt(0)] = 62;\nrevLookup[\"_\".charCodeAt(0)] = 63;\nfunction getLens(b64) {\n  var len = b64.length;\n  if (len % 4 > 0) {\n    throw new Error(\"Invalid string. Length must be a multiple of 4\");\n  }\n  var validLen = b64.indexOf(\"=\");\n  if (validLen === -1) validLen = len;\n  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n  return [validLen, placeHoldersLen];\n}\nfunction byteLength(b64) {\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\nfunction _byteLength(_b64, validLen, placeHoldersLen) {\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\nfunction toByteArray(b64) {\n  var tmp;\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n  var curByte = 0;\n  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n  var i;\n  for (i = 0; i < len; i += 4) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[curByte++] = tmp >> 16 & 255;\n    arr[curByte++] = tmp >> 8 & 255;\n    arr[curByte++] = tmp & 255;\n  }\n  if (placeHoldersLen === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[curByte++] = tmp & 255;\n  }\n  if (placeHoldersLen === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[curByte++] = tmp >> 8 & 255;\n    arr[curByte++] = tmp & 255;\n  }\n  return arr;\n}\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 63] + lookup[num >> 12 & 63] + lookup[num >> 6 & 63] + lookup[num & 63];\n}\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16 & 16711680) + (uint8[i + 1] << 8 & 65280) + (uint8[i + 2] & 255);\n    output.push(tripletToBase64(tmp));\n  }\n  return output.join(\"\");\n}\nfunction fromByteArray(uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3;\n  var parts = [];\n  var maxChunkLength = 16383;\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(\n      encodeChunk(\n        uint8,\n        i,\n        i + maxChunkLength > len2 ? len2 : i + maxChunkLength\n      )\n    );\n  }\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 63] + \"==\");\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    parts.push(\n      lookup[tmp >> 10] + lookup[tmp >> 4 & 63] + lookup[tmp << 2 & 63] + \"=\"\n    );\n  }\n  return parts.join(\"\");\n}\nfunction fromByteArrayUrlSafeNoPadding(uint8) {\n  return fromByteArray(uint8).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n}\n//# sourceMappingURL=base64.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy9iYXNlNjQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsU0FBUztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFNBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsU0FBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLFVBQVU7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHZhbHVlc1xcYmFzZTY0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIGxvb2t1cCA9IFtdO1xudmFyIHJldkxvb2t1cCA9IFtdO1xudmFyIEFyciA9IFVpbnQ4QXJyYXk7XG52YXIgY29kZSA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiO1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXTtcbiAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpO1xufVxucmV2TG9va3VwW1wiLVwiLmNoYXJDb2RlQXQoMCldID0gNjI7XG5yZXZMb29rdXBbXCJfXCIuY2hhckNvZGVBdCgwKV0gPSA2MztcbmZ1bmN0aW9uIGdldExlbnMoYjY0KSB7XG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoO1xuICBpZiAobGVuICUgNCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0XCIpO1xuICB9XG4gIHZhciB2YWxpZExlbiA9IGI2NC5pbmRleE9mKFwiPVwiKTtcbiAgaWYgKHZhbGlkTGVuID09PSAtMSkgdmFsaWRMZW4gPSBsZW47XG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSB2YWxpZExlbiA9PT0gbGVuID8gMCA6IDQgLSB2YWxpZExlbiAlIDQ7XG4gIHJldHVybiBbdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbl07XG59XG5leHBvcnQgZnVuY3Rpb24gYnl0ZUxlbmd0aChiNjQpIHtcbiAgdmFyIGxlbnMgPSBnZXRMZW5zKGI2NCk7XG4gIHZhciB2YWxpZExlbiA9IGxlbnNbMF07XG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSBsZW5zWzFdO1xuICByZXR1cm4gKHZhbGlkTGVuICsgcGxhY2VIb2xkZXJzTGVuKSAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzTGVuO1xufVxuZnVuY3Rpb24gX2J5dGVMZW5ndGgoX2I2NCwgdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbikge1xuICByZXR1cm4gKHZhbGlkTGVuICsgcGxhY2VIb2xkZXJzTGVuKSAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzTGVuO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRvQnl0ZUFycmF5KGI2NCkge1xuICB2YXIgdG1wO1xuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KTtcbiAgdmFyIHZhbGlkTGVuID0gbGVuc1swXTtcbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV07XG4gIHZhciBhcnIgPSBuZXcgQXJyKF9ieXRlTGVuZ3RoKGI2NCwgdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbikpO1xuICB2YXIgY3VyQnl0ZSA9IDA7XG4gIHZhciBsZW4gPSBwbGFjZUhvbGRlcnNMZW4gPiAwID8gdmFsaWRMZW4gLSA0IDogdmFsaWRMZW47XG4gIHZhciBpO1xuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICB0bXAgPSByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4IHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2IHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV07XG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgPj4gMTYgJiAyNTU7XG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgPj4gOCAmIDI1NTtcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDI1NTtcbiAgfVxuICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAyKSB7XG4gICAgdG1wID0gcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNDtcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDI1NTtcbiAgfVxuICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAxKSB7XG4gICAgdG1wID0gcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxMCB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA+PiAyO1xuICAgIGFycltjdXJCeXRlKytdID0gdG1wID4+IDggJiAyNTU7XG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAyNTU7XG4gIH1cbiAgcmV0dXJuIGFycjtcbn1cbmZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NChudW0pIHtcbiAgcmV0dXJuIGxvb2t1cFtudW0gPj4gMTggJiA2M10gKyBsb29rdXBbbnVtID4+IDEyICYgNjNdICsgbG9va3VwW251bSA+PiA2ICYgNjNdICsgbG9va3VwW251bSAmIDYzXTtcbn1cbmZ1bmN0aW9uIGVuY29kZUNodW5rKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gIHZhciB0bXA7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcbiAgICB0bXAgPSAodWludDhbaV0gPDwgMTYgJiAxNjcxMTY4MCkgKyAodWludDhbaSArIDFdIDw8IDggJiA2NTI4MCkgKyAodWludDhbaSArIDJdICYgMjU1KTtcbiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dC5qb2luKFwiXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21CeXRlQXJyYXkodWludDgpIHtcbiAgdmFyIHRtcDtcbiAgdmFyIGxlbiA9IHVpbnQ4Lmxlbmd0aDtcbiAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzO1xuICB2YXIgcGFydHMgPSBbXTtcbiAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODM7XG4gIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcbiAgICBwYXJ0cy5wdXNoKFxuICAgICAgZW5jb2RlQ2h1bmsoXG4gICAgICAgIHVpbnQ4LFxuICAgICAgICBpLFxuICAgICAgICBpICsgbWF4Q2h1bmtMZW5ndGggPiBsZW4yID8gbGVuMiA6IGkgKyBtYXhDaHVua0xlbmd0aFxuICAgICAgKVxuICAgICk7XG4gIH1cbiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcbiAgICB0bXAgPSB1aW50OFtsZW4gLSAxXTtcbiAgICBwYXJ0cy5wdXNoKGxvb2t1cFt0bXAgPj4gMl0gKyBsb29rdXBbdG1wIDw8IDQgJiA2M10gKyBcIj09XCIpO1xuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyB1aW50OFtsZW4gLSAxXTtcbiAgICBwYXJ0cy5wdXNoKFxuICAgICAgbG9va3VwW3RtcCA+PiAxMF0gKyBsb29rdXBbdG1wID4+IDQgJiA2M10gKyBsb29rdXBbdG1wIDw8IDIgJiA2M10gKyBcIj1cIlxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHBhcnRzLmpvaW4oXCJcIik7XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbUJ5dGVBcnJheVVybFNhZmVOb1BhZGRpbmcodWludDgpIHtcbiAgcmV0dXJuIGZyb21CeXRlQXJyYXkodWludDgpLnJlcGxhY2UoL1xcKy9nLCBcIi1cIikucmVwbGFjZSgvXFwvL2csIFwiX1wiKS5yZXBsYWNlKC89L2csIFwiXCIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZTY0LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/base64.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/compare.js":
/*!********************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/compare.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compareValues: () => (/* binding */ compareValues)\n/* harmony export */ });\n/* harmony import */ var _compare_utf8_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./compare_utf8.js */ \"(ssr)/./node_modules/convex/dist/esm/values/compare_utf8.js\");\n\n\nfunction compareValues(k1, k2) {\n  return compareAsTuples(makeComparable(k1), makeComparable(k2));\n}\nfunction compareAsTuples(a, b) {\n  if (a[0] === b[0]) {\n    return compareSameTypeValues(a[1], b[1]);\n  } else if (a[0] < b[0]) {\n    return -1;\n  }\n  return 1;\n}\nfunction compareSameTypeValues(v1, v2) {\n  if (v1 === void 0 || v1 === null) {\n    return 0;\n  }\n  if (typeof v1 === \"number\") {\n    if (typeof v2 !== \"number\") {\n      throw new Error(`Unexpected type ${v2}`);\n    }\n    return compareNumbers(v1, v2);\n  }\n  if (typeof v1 === \"string\") {\n    if (typeof v2 !== \"string\") {\n      throw new Error(`Unexpected type ${v2}`);\n    }\n    return (0,_compare_utf8_js__WEBPACK_IMPORTED_MODULE_0__.compareUTF8)(v1, v2);\n  }\n  if (typeof v1 === \"bigint\" || typeof v1 === \"boolean\" || typeof v1 === \"string\") {\n    return v1 < v2 ? -1 : v1 === v2 ? 0 : 1;\n  }\n  if (!Array.isArray(v1) || !Array.isArray(v2)) {\n    throw new Error(`Unexpected type ${v1}`);\n  }\n  for (let i = 0; i < v1.length && i < v2.length; i++) {\n    const cmp = compareAsTuples(v1[i], v2[i]);\n    if (cmp !== 0) {\n      return cmp;\n    }\n  }\n  if (v1.length < v2.length) {\n    return -1;\n  }\n  if (v1.length > v2.length) {\n    return 1;\n  }\n  return 0;\n}\nfunction compareNumbers(v1, v2) {\n  if (isNaN(v1) || isNaN(v2)) {\n    const buffer1 = new ArrayBuffer(8);\n    const buffer2 = new ArrayBuffer(8);\n    new DataView(buffer1).setFloat64(\n      0,\n      v1,\n      /* little-endian */\n      true\n    );\n    new DataView(buffer2).setFloat64(\n      0,\n      v2,\n      /* little-endian */\n      true\n    );\n    const v1Bits = BigInt(\n      new DataView(buffer1).getBigInt64(\n        0,\n        /* little-endian */\n        true\n      )\n    );\n    const v2Bits = BigInt(\n      new DataView(buffer2).getBigInt64(\n        0,\n        /* little-endian */\n        true\n      )\n    );\n    const v1Sign = (v1Bits & 0x8000000000000000n) !== 0n;\n    const v2Sign = (v2Bits & 0x8000000000000000n) !== 0n;\n    if (isNaN(v1) !== isNaN(v2)) {\n      if (isNaN(v1)) {\n        return v1Sign ? -1 : 1;\n      }\n      return v2Sign ? 1 : -1;\n    }\n    if (v1Sign !== v2Sign) {\n      return v1Sign ? -1 : 1;\n    }\n    return v1Bits < v2Bits ? -1 : v1Bits === v2Bits ? 0 : 1;\n  }\n  if (Object.is(v1, v2)) {\n    return 0;\n  }\n  if (Object.is(v1, -0)) {\n    return Object.is(v2, 0) ? -1 : -Math.sign(v2);\n  }\n  if (Object.is(v2, -0)) {\n    return Object.is(v1, 0) ? 1 : Math.sign(v1);\n  }\n  return v1 < v2 ? -1 : 1;\n}\nfunction makeComparable(v) {\n  if (v === void 0) {\n    return [0, void 0];\n  }\n  if (v === null) {\n    return [1, null];\n  }\n  if (typeof v === \"bigint\") {\n    return [2, v];\n  }\n  if (typeof v === \"number\") {\n    return [3, v];\n  }\n  if (typeof v === \"boolean\") {\n    return [4, v];\n  }\n  if (typeof v === \"string\") {\n    return [5, v];\n  }\n  if (v instanceof ArrayBuffer) {\n    return [6, Array.from(new Uint8Array(v)).map(makeComparable)];\n  }\n  if (Array.isArray(v)) {\n    return [7, v.map(makeComparable)];\n  }\n  const keys = Object.keys(v).sort();\n  const pojo = keys.map((k) => [k, v[k]]);\n  return [8, pojo.map(makeComparable)];\n}\n//# sourceMappingURL=compare.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy9jb21wYXJlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWE7QUFDbUM7QUFDekM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLEdBQUc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxHQUFHO0FBQzVDO0FBQ0EsV0FBVyw2REFBVztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLEdBQUc7QUFDMUM7QUFDQSxrQkFBa0IsZ0NBQWdDO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHZhbHVlc1xcY29tcGFyZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCB7IGNvbXBhcmVVVEY4IH0gZnJvbSBcIi4vY29tcGFyZV91dGY4LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVZhbHVlcyhrMSwgazIpIHtcbiAgcmV0dXJuIGNvbXBhcmVBc1R1cGxlcyhtYWtlQ29tcGFyYWJsZShrMSksIG1ha2VDb21wYXJhYmxlKGsyKSk7XG59XG5mdW5jdGlvbiBjb21wYXJlQXNUdXBsZXMoYSwgYikge1xuICBpZiAoYVswXSA9PT0gYlswXSkge1xuICAgIHJldHVybiBjb21wYXJlU2FtZVR5cGVWYWx1ZXMoYVsxXSwgYlsxXSk7XG4gIH0gZWxzZSBpZiAoYVswXSA8IGJbMF0pIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgcmV0dXJuIDE7XG59XG5mdW5jdGlvbiBjb21wYXJlU2FtZVR5cGVWYWx1ZXModjEsIHYyKSB7XG4gIGlmICh2MSA9PT0gdm9pZCAwIHx8IHYxID09PSBudWxsKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgaWYgKHR5cGVvZiB2MSA9PT0gXCJudW1iZXJcIikge1xuICAgIGlmICh0eXBlb2YgdjIgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCB0eXBlICR7djJ9YCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wYXJlTnVtYmVycyh2MSwgdjIpO1xuICB9XG4gIGlmICh0eXBlb2YgdjEgPT09IFwic3RyaW5nXCIpIHtcbiAgICBpZiAodHlwZW9mIHYyICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgdHlwZSAke3YyfWApO1xuICAgIH1cbiAgICByZXR1cm4gY29tcGFyZVVURjgodjEsIHYyKTtcbiAgfVxuICBpZiAodHlwZW9mIHYxID09PSBcImJpZ2ludFwiIHx8IHR5cGVvZiB2MSA9PT0gXCJib29sZWFuXCIgfHwgdHlwZW9mIHYxID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIHYxIDwgdjIgPyAtMSA6IHYxID09PSB2MiA/IDAgOiAxO1xuICB9XG4gIGlmICghQXJyYXkuaXNBcnJheSh2MSkgfHwgIUFycmF5LmlzQXJyYXkodjIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIHR5cGUgJHt2MX1gKTtcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHYxLmxlbmd0aCAmJiBpIDwgdjIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjbXAgPSBjb21wYXJlQXNUdXBsZXModjFbaV0sIHYyW2ldKTtcbiAgICBpZiAoY21wICE9PSAwKSB7XG4gICAgICByZXR1cm4gY21wO1xuICAgIH1cbiAgfVxuICBpZiAodjEubGVuZ3RoIDwgdjIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGlmICh2MS5sZW5ndGggPiB2Mi5sZW5ndGgpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuICByZXR1cm4gMDtcbn1cbmZ1bmN0aW9uIGNvbXBhcmVOdW1iZXJzKHYxLCB2Mikge1xuICBpZiAoaXNOYU4odjEpIHx8IGlzTmFOKHYyKSkge1xuICAgIGNvbnN0IGJ1ZmZlcjEgPSBuZXcgQXJyYXlCdWZmZXIoOCk7XG4gICAgY29uc3QgYnVmZmVyMiA9IG5ldyBBcnJheUJ1ZmZlcig4KTtcbiAgICBuZXcgRGF0YVZpZXcoYnVmZmVyMSkuc2V0RmxvYXQ2NChcbiAgICAgIDAsXG4gICAgICB2MSxcbiAgICAgIC8qIGxpdHRsZS1lbmRpYW4gKi9cbiAgICAgIHRydWVcbiAgICApO1xuICAgIG5ldyBEYXRhVmlldyhidWZmZXIyKS5zZXRGbG9hdDY0KFxuICAgICAgMCxcbiAgICAgIHYyLFxuICAgICAgLyogbGl0dGxlLWVuZGlhbiAqL1xuICAgICAgdHJ1ZVxuICAgICk7XG4gICAgY29uc3QgdjFCaXRzID0gQmlnSW50KFxuICAgICAgbmV3IERhdGFWaWV3KGJ1ZmZlcjEpLmdldEJpZ0ludDY0KFxuICAgICAgICAwLFxuICAgICAgICAvKiBsaXR0bGUtZW5kaWFuICovXG4gICAgICAgIHRydWVcbiAgICAgIClcbiAgICApO1xuICAgIGNvbnN0IHYyQml0cyA9IEJpZ0ludChcbiAgICAgIG5ldyBEYXRhVmlldyhidWZmZXIyKS5nZXRCaWdJbnQ2NChcbiAgICAgICAgMCxcbiAgICAgICAgLyogbGl0dGxlLWVuZGlhbiAqL1xuICAgICAgICB0cnVlXG4gICAgICApXG4gICAgKTtcbiAgICBjb25zdCB2MVNpZ24gPSAodjFCaXRzICYgMHg4MDAwMDAwMDAwMDAwMDAwbikgIT09IDBuO1xuICAgIGNvbnN0IHYyU2lnbiA9ICh2MkJpdHMgJiAweDgwMDAwMDAwMDAwMDAwMDBuKSAhPT0gMG47XG4gICAgaWYgKGlzTmFOKHYxKSAhPT0gaXNOYU4odjIpKSB7XG4gICAgICBpZiAoaXNOYU4odjEpKSB7XG4gICAgICAgIHJldHVybiB2MVNpZ24gPyAtMSA6IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gdjJTaWduID8gMSA6IC0xO1xuICAgIH1cbiAgICBpZiAodjFTaWduICE9PSB2MlNpZ24pIHtcbiAgICAgIHJldHVybiB2MVNpZ24gPyAtMSA6IDE7XG4gICAgfVxuICAgIHJldHVybiB2MUJpdHMgPCB2MkJpdHMgPyAtMSA6IHYxQml0cyA9PT0gdjJCaXRzID8gMCA6IDE7XG4gIH1cbiAgaWYgKE9iamVjdC5pcyh2MSwgdjIpKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgaWYgKE9iamVjdC5pcyh2MSwgLTApKSB7XG4gICAgcmV0dXJuIE9iamVjdC5pcyh2MiwgMCkgPyAtMSA6IC1NYXRoLnNpZ24odjIpO1xuICB9XG4gIGlmIChPYmplY3QuaXModjIsIC0wKSkge1xuICAgIHJldHVybiBPYmplY3QuaXModjEsIDApID8gMSA6IE1hdGguc2lnbih2MSk7XG4gIH1cbiAgcmV0dXJuIHYxIDwgdjIgPyAtMSA6IDE7XG59XG5mdW5jdGlvbiBtYWtlQ29tcGFyYWJsZSh2KSB7XG4gIGlmICh2ID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4gWzAsIHZvaWQgMF07XG4gIH1cbiAgaWYgKHYgPT09IG51bGwpIHtcbiAgICByZXR1cm4gWzEsIG51bGxdO1xuICB9XG4gIGlmICh0eXBlb2YgdiA9PT0gXCJiaWdpbnRcIikge1xuICAgIHJldHVybiBbMiwgdl07XG4gIH1cbiAgaWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiKSB7XG4gICAgcmV0dXJuIFszLCB2XTtcbiAgfVxuICBpZiAodHlwZW9mIHYgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgcmV0dXJuIFs0LCB2XTtcbiAgfVxuICBpZiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gWzUsIHZdO1xuICB9XG4gIGlmICh2IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICByZXR1cm4gWzYsIEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkodikpLm1hcChtYWtlQ29tcGFyYWJsZSldO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHYpKSB7XG4gICAgcmV0dXJuIFs3LCB2Lm1hcChtYWtlQ29tcGFyYWJsZSldO1xuICB9XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2KS5zb3J0KCk7XG4gIGNvbnN0IHBvam8gPSBrZXlzLm1hcCgoaykgPT4gW2ssIHZba11dKTtcbiAgcmV0dXJuIFs4LCBwb2pvLm1hcChtYWtlQ29tcGFyYWJsZSldO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tcGFyZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/compare.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/compare_utf8.js":
/*!*************************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/compare_utf8.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compareUTF8: () => (/* binding */ compareUTF8),\n/* harmony export */   greaterThan: () => (/* binding */ greaterThan),\n/* harmony export */   greaterThanEq: () => (/* binding */ greaterThanEq),\n/* harmony export */   lessThan: () => (/* binding */ lessThan),\n/* harmony export */   lessThanEq: () => (/* binding */ lessThanEq),\n/* harmony export */   utf16LengthForCodePoint: () => (/* binding */ utf16LengthForCodePoint)\n/* harmony export */ });\n\nfunction compareUTF8(a, b) {\n  const aLength = a.length;\n  const bLength = b.length;\n  const length = Math.min(aLength, bLength);\n  for (let i = 0; i < length; ) {\n    const aCodePoint = a.codePointAt(i);\n    const bCodePoint = b.codePointAt(i);\n    if (aCodePoint !== bCodePoint) {\n      if (aCodePoint < 128 && bCodePoint < 128) {\n        return aCodePoint - bCodePoint;\n      }\n      const aLength2 = utf8Bytes(aCodePoint, aBytes);\n      const bLength2 = utf8Bytes(bCodePoint, bBytes);\n      return compareArrays(aBytes, aLength2, bBytes, bLength2);\n    }\n    i += utf16LengthForCodePoint(aCodePoint);\n  }\n  return aLength - bLength;\n}\nfunction compareArrays(a, aLength, b, bLength) {\n  const length = Math.min(aLength, bLength);\n  for (let i = 0; i < length; i++) {\n    const aValue = a[i];\n    const bValue = b[i];\n    if (aValue !== bValue) {\n      return aValue - bValue;\n    }\n  }\n  return aLength - bLength;\n}\nfunction utf16LengthForCodePoint(aCodePoint) {\n  return aCodePoint > 65535 ? 2 : 1;\n}\nconst arr = () => Array.from({ length: 4 }, () => 0);\nconst aBytes = arr();\nconst bBytes = arr();\nfunction utf8Bytes(codePoint, bytes) {\n  if (codePoint < 128) {\n    bytes[0] = codePoint;\n    return 1;\n  }\n  let count;\n  let offset;\n  if (codePoint <= 2047) {\n    count = 1;\n    offset = 192;\n  } else if (codePoint <= 65535) {\n    count = 2;\n    offset = 224;\n  } else if (codePoint <= 1114111) {\n    count = 3;\n    offset = 240;\n  } else {\n    throw new Error(\"Invalid code point\");\n  }\n  bytes[0] = (codePoint >> 6 * count) + offset;\n  let i = 1;\n  for (; count > 0; count--) {\n    const temp = codePoint >> 6 * (count - 1);\n    bytes[i++] = 128 | temp & 63;\n  }\n  return i;\n}\nfunction greaterThan(a, b) {\n  return compareUTF8(a, b) > 0;\n}\nfunction greaterThanEq(a, b) {\n  return compareUTF8(a, b) >= 0;\n}\nfunction lessThan(a, b) {\n  return compareUTF8(a, b) < 0;\n}\nfunction lessThanEq(a, b) {\n  return compareUTF8(a, b) <= 0;\n}\n//# sourceMappingURL=compare_utf8.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy9jb21wYXJlX3V0ZjguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWE7QUFDTjtBQUNQO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixZQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLCtCQUErQixXQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLFdBQVc7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHZhbHVlc1xcY29tcGFyZV91dGY4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVVVEY4KGEsIGIpIHtcbiAgY29uc3QgYUxlbmd0aCA9IGEubGVuZ3RoO1xuICBjb25zdCBiTGVuZ3RoID0gYi5sZW5ndGg7XG4gIGNvbnN0IGxlbmd0aCA9IE1hdGgubWluKGFMZW5ndGgsIGJMZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKSB7XG4gICAgY29uc3QgYUNvZGVQb2ludCA9IGEuY29kZVBvaW50QXQoaSk7XG4gICAgY29uc3QgYkNvZGVQb2ludCA9IGIuY29kZVBvaW50QXQoaSk7XG4gICAgaWYgKGFDb2RlUG9pbnQgIT09IGJDb2RlUG9pbnQpIHtcbiAgICAgIGlmIChhQ29kZVBvaW50IDwgMTI4ICYmIGJDb2RlUG9pbnQgPCAxMjgpIHtcbiAgICAgICAgcmV0dXJuIGFDb2RlUG9pbnQgLSBiQ29kZVBvaW50O1xuICAgICAgfVxuICAgICAgY29uc3QgYUxlbmd0aDIgPSB1dGY4Qnl0ZXMoYUNvZGVQb2ludCwgYUJ5dGVzKTtcbiAgICAgIGNvbnN0IGJMZW5ndGgyID0gdXRmOEJ5dGVzKGJDb2RlUG9pbnQsIGJCeXRlcyk7XG4gICAgICByZXR1cm4gY29tcGFyZUFycmF5cyhhQnl0ZXMsIGFMZW5ndGgyLCBiQnl0ZXMsIGJMZW5ndGgyKTtcbiAgICB9XG4gICAgaSArPSB1dGYxNkxlbmd0aEZvckNvZGVQb2ludChhQ29kZVBvaW50KTtcbiAgfVxuICByZXR1cm4gYUxlbmd0aCAtIGJMZW5ndGg7XG59XG5mdW5jdGlvbiBjb21wYXJlQXJyYXlzKGEsIGFMZW5ndGgsIGIsIGJMZW5ndGgpIHtcbiAgY29uc3QgbGVuZ3RoID0gTWF0aC5taW4oYUxlbmd0aCwgYkxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBhVmFsdWUgPSBhW2ldO1xuICAgIGNvbnN0IGJWYWx1ZSA9IGJbaV07XG4gICAgaWYgKGFWYWx1ZSAhPT0gYlZhbHVlKSB7XG4gICAgICByZXR1cm4gYVZhbHVlIC0gYlZhbHVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYUxlbmd0aCAtIGJMZW5ndGg7XG59XG5leHBvcnQgZnVuY3Rpb24gdXRmMTZMZW5ndGhGb3JDb2RlUG9pbnQoYUNvZGVQb2ludCkge1xuICByZXR1cm4gYUNvZGVQb2ludCA+IDY1NTM1ID8gMiA6IDE7XG59XG5jb25zdCBhcnIgPSAoKSA9PiBBcnJheS5mcm9tKHsgbGVuZ3RoOiA0IH0sICgpID0+IDApO1xuY29uc3QgYUJ5dGVzID0gYXJyKCk7XG5jb25zdCBiQnl0ZXMgPSBhcnIoKTtcbmZ1bmN0aW9uIHV0ZjhCeXRlcyhjb2RlUG9pbnQsIGJ5dGVzKSB7XG4gIGlmIChjb2RlUG9pbnQgPCAxMjgpIHtcbiAgICBieXRlc1swXSA9IGNvZGVQb2ludDtcbiAgICByZXR1cm4gMTtcbiAgfVxuICBsZXQgY291bnQ7XG4gIGxldCBvZmZzZXQ7XG4gIGlmIChjb2RlUG9pbnQgPD0gMjA0Nykge1xuICAgIGNvdW50ID0gMTtcbiAgICBvZmZzZXQgPSAxOTI7XG4gIH0gZWxzZSBpZiAoY29kZVBvaW50IDw9IDY1NTM1KSB7XG4gICAgY291bnQgPSAyO1xuICAgIG9mZnNldCA9IDIyNDtcbiAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPD0gMTExNDExMSkge1xuICAgIGNvdW50ID0gMztcbiAgICBvZmZzZXQgPSAyNDA7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb2RlIHBvaW50XCIpO1xuICB9XG4gIGJ5dGVzWzBdID0gKGNvZGVQb2ludCA+PiA2ICogY291bnQpICsgb2Zmc2V0O1xuICBsZXQgaSA9IDE7XG4gIGZvciAoOyBjb3VudCA+IDA7IGNvdW50LS0pIHtcbiAgICBjb25zdCB0ZW1wID0gY29kZVBvaW50ID4+IDYgKiAoY291bnQgLSAxKTtcbiAgICBieXRlc1tpKytdID0gMTI4IHwgdGVtcCAmIDYzO1xuICB9XG4gIHJldHVybiBpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdyZWF0ZXJUaGFuKGEsIGIpIHtcbiAgcmV0dXJuIGNvbXBhcmVVVEY4KGEsIGIpID4gMDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBncmVhdGVyVGhhbkVxKGEsIGIpIHtcbiAgcmV0dXJuIGNvbXBhcmVVVEY4KGEsIGIpID49IDA7XG59XG5leHBvcnQgZnVuY3Rpb24gbGVzc1RoYW4oYSwgYikge1xuICByZXR1cm4gY29tcGFyZVVURjgoYSwgYikgPCAwO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxlc3NUaGFuRXEoYSwgYikge1xuICByZXR1cm4gY29tcGFyZVVURjgoYSwgYikgPD0gMDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbXBhcmVfdXRmOC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/compare_utf8.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/errors.js":
/*!*******************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/errors.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexError: () => (/* binding */ ConvexError)\n/* harmony export */ });\n/* harmony import */ var _value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar _a, _b;\n\nconst IDENTIFYING_FIELD = Symbol.for(\"ConvexError\");\nclass ConvexError extends (_b = Error, _a = IDENTIFYING_FIELD, _b) {\n  constructor(data) {\n    super(typeof data === \"string\" ? data : (0,_value_js__WEBPACK_IMPORTED_MODULE_0__.stringifyValueForError)(data));\n    __publicField(this, \"name\", \"ConvexError\");\n    __publicField(this, \"data\");\n    __publicField(this, _a, true);\n    this.data = data;\n  }\n}\n//# sourceMappingURL=errors.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy9lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBO0FBQ29EO0FBQ3BEO0FBQ087QUFDUDtBQUNBLDRDQUE0QyxpRUFBc0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcdmFsdWVzXFxlcnJvcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xudmFyIF9hLCBfYjtcbmltcG9ydCB7IHN0cmluZ2lmeVZhbHVlRm9yRXJyb3IgfSBmcm9tIFwiLi92YWx1ZS5qc1wiO1xuY29uc3QgSURFTlRJRllJTkdfRklFTEQgPSBTeW1ib2wuZm9yKFwiQ29udmV4RXJyb3JcIik7XG5leHBvcnQgY2xhc3MgQ29udmV4RXJyb3IgZXh0ZW5kcyAoX2IgPSBFcnJvciwgX2EgPSBJREVOVElGWUlOR19GSUVMRCwgX2IpIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiID8gZGF0YSA6IHN0cmluZ2lmeVZhbHVlRm9yRXJyb3IoZGF0YSkpO1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJuYW1lXCIsIFwiQ29udmV4RXJyb3JcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImRhdGFcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBfYSwgdHJ1ZSk7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/index.js":
/*!******************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Base64: () => (/* reexport module object */ _base64_js__WEBPACK_IMPORTED_MODULE_2__),\n/* harmony export */   ConvexError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_3__.ConvexError),\n/* harmony export */   asObjectValidator: () => (/* reexport safe */ _validator_js__WEBPACK_IMPORTED_MODULE_1__.asObjectValidator),\n/* harmony export */   compareValues: () => (/* reexport safe */ _compare_js__WEBPACK_IMPORTED_MODULE_4__.compareValues),\n/* harmony export */   convexToJson: () => (/* reexport safe */ _value_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson),\n/* harmony export */   getConvexSize: () => (/* reexport safe */ _size_js__WEBPACK_IMPORTED_MODULE_5__.getConvexSize),\n/* harmony export */   getDocumentSize: () => (/* reexport safe */ _size_js__WEBPACK_IMPORTED_MODULE_5__.getDocumentSize),\n/* harmony export */   jsonToConvex: () => (/* reexport safe */ _value_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex),\n/* harmony export */   v: () => (/* reexport safe */ _validator_js__WEBPACK_IMPORTED_MODULE_1__.v)\n/* harmony export */ });\n/* harmony import */ var _value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n/* harmony import */ var _validator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./validator.js */ \"(ssr)/./node_modules/convex/dist/esm/values/validator.js\");\n/* harmony import */ var _base64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base64.js */ \"(ssr)/./node_modules/convex/dist/esm/values/base64.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./errors.js */ \"(ssr)/./node_modules/convex/dist/esm/values/errors.js\");\n/* harmony import */ var _compare_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./compare.js */ \"(ssr)/./node_modules/convex/dist/esm/values/compare.js\");\n/* harmony import */ var _size_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./size.js */ \"(ssr)/./node_modules/convex/dist/esm/values/size.js\");\n\n\n\n\n\n\n\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBYTtBQUMyQztBQUNGO0FBQ2hCO0FBQ3BCO0FBQ1U7QUFDaUI7QUFDYztBQUMzRCIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFx2YWx1ZXNcXGluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0IHsgY29udmV4VG9Kc29uLCBqc29uVG9Db252ZXggfSBmcm9tIFwiLi92YWx1ZS5qc1wiO1xuZXhwb3J0IHsgdiwgYXNPYmplY3RWYWxpZGF0b3IgfSBmcm9tIFwiLi92YWxpZGF0b3IuanNcIjtcbmltcG9ydCAqIGFzIEJhc2U2NCBmcm9tIFwiLi9iYXNlNjQuanNcIjtcbmV4cG9ydCB7IEJhc2U2NCB9O1xuZXhwb3J0ICogZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5leHBvcnQgeyBjb21wYXJlVmFsdWVzIH0gZnJvbSBcIi4vY29tcGFyZS5qc1wiO1xuZXhwb3J0IHsgZ2V0Q29udmV4U2l6ZSwgZ2V0RG9jdW1lbnRTaXplIH0gZnJvbSBcIi4vc2l6ZS5qc1wiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/size.js":
/*!*****************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/size.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SYSTEM_FIELD_CREATION_TIME_SIZE: () => (/* binding */ SYSTEM_FIELD_CREATION_TIME_SIZE),\n/* harmony export */   SYSTEM_FIELD_ID_ESTIMATE: () => (/* binding */ SYSTEM_FIELD_ID_ESTIMATE),\n/* harmony export */   getConvexSize: () => (/* binding */ getConvexSize),\n/* harmony export */   getDocumentSize: () => (/* binding */ getDocumentSize)\n/* harmony export */ });\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n\n\nfunction getConvexSize(value) {\n  if (value === null) {\n    return 1;\n  }\n  if (typeof value === \"boolean\") {\n    return 1;\n  }\n  if (typeof value === \"bigint\") {\n    return 9;\n  }\n  if (typeof value === \"number\") {\n    return 9;\n  }\n  if (typeof value === \"string\") {\n    return 2 + getUtf8ByteLength(value);\n  }\n  if (value instanceof ArrayBuffer) {\n    return 2 + value.byteLength;\n  }\n  if (Array.isArray(value)) {\n    let size = 2;\n    for (const element of value) {\n      size += getConvexSize(element);\n    }\n    return size;\n  }\n  if ((0,_common_index_js__WEBPACK_IMPORTED_MODULE_0__.isSimpleObject)(value)) {\n    let size = 2;\n    for (const [key, val] of Object.entries(value)) {\n      if (val !== void 0) {\n        size += getUtf8ByteLength(key) + 1 + getConvexSize(val);\n      }\n    }\n    return size;\n  }\n  throw new Error(`Unsupported value type: ${typeof value}`);\n}\nconst UTF8_LENGTH_THRESHOLD = 500;\nfunction getUtf8ByteLength(str) {\n  if (str.length > UTF8_LENGTH_THRESHOLD) {\n    return new TextEncoder().encode(str).length;\n  }\n  let bytes = 0;\n  for (let i = 0; i < str.length; i++) {\n    const code = str.charCodeAt(i);\n    if (code < 128) {\n      bytes += 1;\n    } else if (code < 2048) {\n      bytes += 2;\n    } else if (code >= 55296 && code <= 56319) {\n      bytes += 4;\n      i++;\n    } else {\n      bytes += 3;\n    }\n  }\n  return bytes;\n}\nconst SYSTEM_FIELD_ID_ESTIMATE = 38;\nconst SYSTEM_FIELD_CREATION_TIME_SIZE = 23;\nfunction getDocumentSize(value, options) {\n  const baseSize = getConvexSize(value);\n  const hasId = \"_id\" in value && value[\"_id\"] !== void 0;\n  const hasCreationTime = \"_creationTime\" in value && value[\"_creationTime\"] !== void 0;\n  if (hasId && hasCreationTime) {\n    return baseSize;\n  }\n  let additionalSize = 0;\n  if (!hasId) {\n    if (options?.customIdLength) {\n      additionalSize += options.customIdLength + 6;\n    } else {\n      additionalSize += SYSTEM_FIELD_ID_ESTIMATE;\n    }\n  }\n  if (!hasCreationTime) {\n    additionalSize += SYSTEM_FIELD_CREATION_TIME_SIZE;\n  }\n  return baseSize + additionalSize;\n}\n//# sourceMappingURL=size.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy9zaXplLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWE7QUFDdUM7QUFDN0M7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sZ0VBQWM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxhQUFhO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdCQUFnQjtBQUNsQztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHZhbHVlc1xcc2l6ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCB7IGlzU2ltcGxlT2JqZWN0IH0gZnJvbSBcIi4uL2NvbW1vbi9pbmRleC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnZleFNpemUodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiKSB7XG4gICAgcmV0dXJuIDk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgIHJldHVybiA5O1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gMiArIGdldFV0ZjhCeXRlTGVuZ3RoKHZhbHVlKTtcbiAgfVxuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiAyICsgdmFsdWUuYnl0ZUxlbmd0aDtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBsZXQgc2l6ZSA9IDI7XG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHZhbHVlKSB7XG4gICAgICBzaXplICs9IGdldENvbnZleFNpemUoZWxlbWVudCk7XG4gICAgfVxuICAgIHJldHVybiBzaXplO1xuICB9XG4gIGlmIChpc1NpbXBsZU9iamVjdCh2YWx1ZSkpIHtcbiAgICBsZXQgc2l6ZSA9IDI7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlKSkge1xuICAgICAgaWYgKHZhbCAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHNpemUgKz0gZ2V0VXRmOEJ5dGVMZW5ndGgoa2V5KSArIDEgKyBnZXRDb252ZXhTaXplKHZhbCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaXplO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgdmFsdWUgdHlwZTogJHt0eXBlb2YgdmFsdWV9YCk7XG59XG5jb25zdCBVVEY4X0xFTkdUSF9USFJFU0hPTEQgPSA1MDA7XG5mdW5jdGlvbiBnZXRVdGY4Qnl0ZUxlbmd0aChzdHIpIHtcbiAgaWYgKHN0ci5sZW5ndGggPiBVVEY4X0xFTkdUSF9USFJFU0hPTEQpIHtcbiAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHN0cikubGVuZ3RoO1xuICB9XG4gIGxldCBieXRlcyA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChjb2RlIDwgMTI4KSB7XG4gICAgICBieXRlcyArPSAxO1xuICAgIH0gZWxzZSBpZiAoY29kZSA8IDIwNDgpIHtcbiAgICAgIGJ5dGVzICs9IDI7XG4gICAgfSBlbHNlIGlmIChjb2RlID49IDU1Mjk2ICYmIGNvZGUgPD0gNTYzMTkpIHtcbiAgICAgIGJ5dGVzICs9IDQ7XG4gICAgICBpKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ5dGVzICs9IDM7XG4gICAgfVxuICB9XG4gIHJldHVybiBieXRlcztcbn1cbmV4cG9ydCBjb25zdCBTWVNURU1fRklFTERfSURfRVNUSU1BVEUgPSAzODtcbmV4cG9ydCBjb25zdCBTWVNURU1fRklFTERfQ1JFQVRJT05fVElNRV9TSVpFID0gMjM7XG5leHBvcnQgZnVuY3Rpb24gZ2V0RG9jdW1lbnRTaXplKHZhbHVlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGJhc2VTaXplID0gZ2V0Q29udmV4U2l6ZSh2YWx1ZSk7XG4gIGNvbnN0IGhhc0lkID0gXCJfaWRcIiBpbiB2YWx1ZSAmJiB2YWx1ZVtcIl9pZFwiXSAhPT0gdm9pZCAwO1xuICBjb25zdCBoYXNDcmVhdGlvblRpbWUgPSBcIl9jcmVhdGlvblRpbWVcIiBpbiB2YWx1ZSAmJiB2YWx1ZVtcIl9jcmVhdGlvblRpbWVcIl0gIT09IHZvaWQgMDtcbiAgaWYgKGhhc0lkICYmIGhhc0NyZWF0aW9uVGltZSkge1xuICAgIHJldHVybiBiYXNlU2l6ZTtcbiAgfVxuICBsZXQgYWRkaXRpb25hbFNpemUgPSAwO1xuICBpZiAoIWhhc0lkKSB7XG4gICAgaWYgKG9wdGlvbnM/LmN1c3RvbUlkTGVuZ3RoKSB7XG4gICAgICBhZGRpdGlvbmFsU2l6ZSArPSBvcHRpb25zLmN1c3RvbUlkTGVuZ3RoICsgNjtcbiAgICB9IGVsc2Uge1xuICAgICAgYWRkaXRpb25hbFNpemUgKz0gU1lTVEVNX0ZJRUxEX0lEX0VTVElNQVRFO1xuICAgIH1cbiAgfVxuICBpZiAoIWhhc0NyZWF0aW9uVGltZSkge1xuICAgIGFkZGl0aW9uYWxTaXplICs9IFNZU1RFTV9GSUVMRF9DUkVBVElPTl9USU1FX1NJWkU7XG4gIH1cbiAgcmV0dXJuIGJhc2VTaXplICsgYWRkaXRpb25hbFNpemU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaXplLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/size.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/validator.js":
/*!**********************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/validator.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   asObjectValidator: () => (/* binding */ asObjectValidator),\n/* harmony export */   isValidator: () => (/* binding */ isValidator),\n/* harmony export */   v: () => (/* binding */ v)\n/* harmony export */ });\n/* harmony import */ var _validators_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validators.js */ \"(ssr)/./node_modules/convex/dist/esm/values/validators.js\");\n\n\nfunction isValidator(v2) {\n  return !!v2.isConvexValidator;\n}\nfunction asObjectValidator(obj) {\n  if (isValidator(obj)) {\n    return obj;\n  } else {\n    return v.object(obj);\n  }\n}\nconst v = {\n  /**\n   * Validates that the value corresponds to an ID of a document in given table.\n   * @param tableName The name of the table.\n   */\n  id: (tableName) => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VId({\n      isOptional: \"required\",\n      tableName\n    });\n  },\n  /**\n   * Validates that the value is of type Null.\n   */\n  null: () => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VNull({ isOptional: \"required\" });\n  },\n  /**\n   * Validates that the value is of Convex type Float64 (Number in JS).\n   *\n   * Alias for `v.float64()`\n   */\n  number: () => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VFloat64({ isOptional: \"required\" });\n  },\n  /**\n   * Validates that the value is of Convex type Float64 (Number in JS).\n   */\n  float64: () => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VFloat64({ isOptional: \"required\" });\n  },\n  /**\n   * @deprecated Use `v.int64()` instead\n   */\n  bigint: () => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VInt64({ isOptional: \"required\" });\n  },\n  /**\n   * Validates that the value is of Convex type Int64 (BigInt in JS).\n   */\n  int64: () => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VInt64({ isOptional: \"required\" });\n  },\n  /**\n   * Validates that the value is of type Boolean.\n   */\n  boolean: () => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VBoolean({ isOptional: \"required\" });\n  },\n  /**\n   * Validates that the value is of type String.\n   */\n  string: () => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VString({ isOptional: \"required\" });\n  },\n  /**\n   * Validates that the value is of Convex type Bytes (constructed in JS via `ArrayBuffer`).\n   */\n  bytes: () => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VBytes({ isOptional: \"required\" });\n  },\n  /**\n   * Validates that the value is equal to the given literal value.\n   * @param literal The literal value to compare against.\n   */\n  literal: (literal) => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VLiteral({ isOptional: \"required\", value: literal });\n  },\n  /**\n   * Validates that the value is an Array of the given element type.\n   * @param element The validator for the elements of the array.\n   */\n  array: (element) => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VArray({ isOptional: \"required\", element });\n  },\n  /**\n   * Validates that the value is an Object with the given properties.\n   * @param fields An object specifying the validator for each property.\n   */\n  object: (fields) => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VObject({ isOptional: \"required\", fields });\n  },\n  /**\n   * Validates that the value is a Record with keys and values that match the given types.\n   * @param keys The validator for the keys of the record. This cannot contain string literals.\n   * @param values The validator for the values of the record.\n   */\n  record: (keys, values) => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VRecord({\n      isOptional: \"required\",\n      key: keys,\n      value: values\n    });\n  },\n  /**\n   * Validates that the value matches one of the given validators.\n   * @param members The validators to match against.\n   */\n  union: (...members) => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VUnion({\n      isOptional: \"required\",\n      members\n    });\n  },\n  /**\n   * Does not validate the value.\n   */\n  any: () => {\n    return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VAny({ isOptional: \"required\" });\n  },\n  /**\n   * Allows not specifying a value for a property in an Object.\n   * @param value The property value validator to make optional.\n   *\n   * ```typescript\n   * const objectWithOptionalFields = v.object({\n   *   requiredField: v.string(),\n   *   optionalField: v.optional(v.string()),\n   * });\n   * ```\n   */\n  optional: (value) => {\n    return value.asOptional();\n  },\n  /**\n   * Allows specifying a value or null.\n   */\n  nullable: (value) => {\n    return v.union(value, v.null());\n  }\n};\n//# sourceMappingURL=validator.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy92YWxpZGF0b3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFhO0FBZVk7QUFDbEI7QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsK0NBQUc7QUFDbEI7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlEQUFLLEdBQUcsd0JBQXdCO0FBQy9DLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG9EQUFRLEdBQUcsd0JBQXdCO0FBQ2xELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0RBQVEsR0FBRyx3QkFBd0I7QUFDbEQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrREFBTSxHQUFHLHdCQUF3QjtBQUNoRCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtEQUFNLEdBQUcsd0JBQXdCO0FBQ2hELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0RBQVEsR0FBRyx3QkFBd0I7QUFDbEQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtREFBTyxHQUFHLHdCQUF3QjtBQUNqRCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtEQUFNLEdBQUcsd0JBQXdCO0FBQ2hELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvREFBUSxHQUFHLHdDQUF3QztBQUNsRSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0RBQU0sR0FBRyxpQ0FBaUM7QUFDekQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1EQUFPLEdBQUcsZ0NBQWdDO0FBQ3pELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1EQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0RBQU07QUFDckI7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFJLEdBQUcsd0JBQXdCO0FBQzlDLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcdmFsdWVzXFx2YWxpZGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5pbXBvcnQge1xuICBWQW55LFxuICBWQXJyYXksXG4gIFZCb29sZWFuLFxuICBWQnl0ZXMsXG4gIFZGbG9hdDY0LFxuICBWSWQsXG4gIFZJbnQ2NCxcbiAgVkxpdGVyYWwsXG4gIFZOdWxsLFxuICBWT2JqZWN0LFxuICBWUmVjb3JkLFxuICBWU3RyaW5nLFxuICBWVW5pb25cbn0gZnJvbSBcIi4vdmFsaWRhdG9ycy5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRhdG9yKHYyKSB7XG4gIHJldHVybiAhIXYyLmlzQ29udmV4VmFsaWRhdG9yO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzT2JqZWN0VmFsaWRhdG9yKG9iaikge1xuICBpZiAoaXNWYWxpZGF0b3Iob2JqKSkge1xuICAgIHJldHVybiBvYmo7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHYub2JqZWN0KG9iaik7XG4gIH1cbn1cbmV4cG9ydCBjb25zdCB2ID0ge1xuICAvKipcbiAgICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGNvcnJlc3BvbmRzIHRvIGFuIElEIG9mIGEgZG9jdW1lbnQgaW4gZ2l2ZW4gdGFibGUuXG4gICAqIEBwYXJhbSB0YWJsZU5hbWUgVGhlIG5hbWUgb2YgdGhlIHRhYmxlLlxuICAgKi9cbiAgaWQ6ICh0YWJsZU5hbWUpID0+IHtcbiAgICByZXR1cm4gbmV3IFZJZCh7XG4gICAgICBpc09wdGlvbmFsOiBcInJlcXVpcmVkXCIsXG4gICAgICB0YWJsZU5hbWVcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBpcyBvZiB0eXBlIE51bGwuXG4gICAqL1xuICBudWxsOiAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBWTnVsbCh7IGlzT3B0aW9uYWw6IFwicmVxdWlyZWRcIiB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBpcyBvZiBDb252ZXggdHlwZSBGbG9hdDY0IChOdW1iZXIgaW4gSlMpLlxuICAgKlxuICAgKiBBbGlhcyBmb3IgYHYuZmxvYXQ2NCgpYFxuICAgKi9cbiAgbnVtYmVyOiAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBWRmxvYXQ2NCh7IGlzT3B0aW9uYWw6IFwicmVxdWlyZWRcIiB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBpcyBvZiBDb252ZXggdHlwZSBGbG9hdDY0IChOdW1iZXIgaW4gSlMpLlxuICAgKi9cbiAgZmxvYXQ2NDogKCkgPT4ge1xuICAgIHJldHVybiBuZXcgVkZsb2F0NjQoeyBpc09wdGlvbmFsOiBcInJlcXVpcmVkXCIgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgYHYuaW50NjQoKWAgaW5zdGVhZFxuICAgKi9cbiAgYmlnaW50OiAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBWSW50NjQoeyBpc09wdGlvbmFsOiBcInJlcXVpcmVkXCIgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgaXMgb2YgQ29udmV4IHR5cGUgSW50NjQgKEJpZ0ludCBpbiBKUykuXG4gICAqL1xuICBpbnQ2NDogKCkgPT4ge1xuICAgIHJldHVybiBuZXcgVkludDY0KHsgaXNPcHRpb25hbDogXCJyZXF1aXJlZFwiIH0pO1xuICB9LFxuICAvKipcbiAgICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGlzIG9mIHR5cGUgQm9vbGVhbi5cbiAgICovXG4gIGJvb2xlYW46ICgpID0+IHtcbiAgICByZXR1cm4gbmV3IFZCb29sZWFuKHsgaXNPcHRpb25hbDogXCJyZXF1aXJlZFwiIH0pO1xuICB9LFxuICAvKipcbiAgICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGlzIG9mIHR5cGUgU3RyaW5nLlxuICAgKi9cbiAgc3RyaW5nOiAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBWU3RyaW5nKHsgaXNPcHRpb25hbDogXCJyZXF1aXJlZFwiIH0pO1xuICB9LFxuICAvKipcbiAgICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGlzIG9mIENvbnZleCB0eXBlIEJ5dGVzIChjb25zdHJ1Y3RlZCBpbiBKUyB2aWEgYEFycmF5QnVmZmVyYCkuXG4gICAqL1xuICBieXRlczogKCkgPT4ge1xuICAgIHJldHVybiBuZXcgVkJ5dGVzKHsgaXNPcHRpb25hbDogXCJyZXF1aXJlZFwiIH0pO1xuICB9LFxuICAvKipcbiAgICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGlzIGVxdWFsIHRvIHRoZSBnaXZlbiBsaXRlcmFsIHZhbHVlLlxuICAgKiBAcGFyYW0gbGl0ZXJhbCBUaGUgbGl0ZXJhbCB2YWx1ZSB0byBjb21wYXJlIGFnYWluc3QuXG4gICAqL1xuICBsaXRlcmFsOiAobGl0ZXJhbCkgPT4ge1xuICAgIHJldHVybiBuZXcgVkxpdGVyYWwoeyBpc09wdGlvbmFsOiBcInJlcXVpcmVkXCIsIHZhbHVlOiBsaXRlcmFsIH0pO1xuICB9LFxuICAvKipcbiAgICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGlzIGFuIEFycmF5IG9mIHRoZSBnaXZlbiBlbGVtZW50IHR5cGUuXG4gICAqIEBwYXJhbSBlbGVtZW50IFRoZSB2YWxpZGF0b3IgZm9yIHRoZSBlbGVtZW50cyBvZiB0aGUgYXJyYXkuXG4gICAqL1xuICBhcnJheTogKGVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gbmV3IFZBcnJheSh7IGlzT3B0aW9uYWw6IFwicmVxdWlyZWRcIiwgZWxlbWVudCB9KTtcbiAgfSxcbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBpcyBhbiBPYmplY3Qgd2l0aCB0aGUgZ2l2ZW4gcHJvcGVydGllcy5cbiAgICogQHBhcmFtIGZpZWxkcyBBbiBvYmplY3Qgc3BlY2lmeWluZyB0aGUgdmFsaWRhdG9yIGZvciBlYWNoIHByb3BlcnR5LlxuICAgKi9cbiAgb2JqZWN0OiAoZmllbGRzKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBWT2JqZWN0KHsgaXNPcHRpb25hbDogXCJyZXF1aXJlZFwiLCBmaWVsZHMgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgaXMgYSBSZWNvcmQgd2l0aCBrZXlzIGFuZCB2YWx1ZXMgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4gdHlwZXMuXG4gICAqIEBwYXJhbSBrZXlzIFRoZSB2YWxpZGF0b3IgZm9yIHRoZSBrZXlzIG9mIHRoZSByZWNvcmQuIFRoaXMgY2Fubm90IGNvbnRhaW4gc3RyaW5nIGxpdGVyYWxzLlxuICAgKiBAcGFyYW0gdmFsdWVzIFRoZSB2YWxpZGF0b3IgZm9yIHRoZSB2YWx1ZXMgb2YgdGhlIHJlY29yZC5cbiAgICovXG4gIHJlY29yZDogKGtleXMsIHZhbHVlcykgPT4ge1xuICAgIHJldHVybiBuZXcgVlJlY29yZCh7XG4gICAgICBpc09wdGlvbmFsOiBcInJlcXVpcmVkXCIsXG4gICAgICBrZXk6IGtleXMsXG4gICAgICB2YWx1ZTogdmFsdWVzXG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgbWF0Y2hlcyBvbmUgb2YgdGhlIGdpdmVuIHZhbGlkYXRvcnMuXG4gICAqIEBwYXJhbSBtZW1iZXJzIFRoZSB2YWxpZGF0b3JzIHRvIG1hdGNoIGFnYWluc3QuXG4gICAqL1xuICB1bmlvbjogKC4uLm1lbWJlcnMpID0+IHtcbiAgICByZXR1cm4gbmV3IFZVbmlvbih7XG4gICAgICBpc09wdGlvbmFsOiBcInJlcXVpcmVkXCIsXG4gICAgICBtZW1iZXJzXG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBEb2VzIG5vdCB2YWxpZGF0ZSB0aGUgdmFsdWUuXG4gICAqL1xuICBhbnk6ICgpID0+IHtcbiAgICByZXR1cm4gbmV3IFZBbnkoeyBpc09wdGlvbmFsOiBcInJlcXVpcmVkXCIgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBBbGxvd3Mgbm90IHNwZWNpZnlpbmcgYSB2YWx1ZSBmb3IgYSBwcm9wZXJ0eSBpbiBhbiBPYmplY3QuXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgcHJvcGVydHkgdmFsdWUgdmFsaWRhdG9yIHRvIG1ha2Ugb3B0aW9uYWwuXG4gICAqXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogY29uc3Qgb2JqZWN0V2l0aE9wdGlvbmFsRmllbGRzID0gdi5vYmplY3Qoe1xuICAgKiAgIHJlcXVpcmVkRmllbGQ6IHYuc3RyaW5nKCksXG4gICAqICAgb3B0aW9uYWxGaWVsZDogdi5vcHRpb25hbCh2LnN0cmluZygpKSxcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKi9cbiAgb3B0aW9uYWw6ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiB2YWx1ZS5hc09wdGlvbmFsKCk7XG4gIH0sXG4gIC8qKlxuICAgKiBBbGxvd3Mgc3BlY2lmeWluZyBhIHZhbHVlIG9yIG51bGwuXG4gICAqL1xuICBudWxsYWJsZTogKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIHYudW5pb24odmFsdWUsIHYubnVsbCgpKTtcbiAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhbGlkYXRvci5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/validator.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/validators.js":
/*!***********************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/validators.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VAny: () => (/* binding */ VAny),\n/* harmony export */   VArray: () => (/* binding */ VArray),\n/* harmony export */   VBoolean: () => (/* binding */ VBoolean),\n/* harmony export */   VBytes: () => (/* binding */ VBytes),\n/* harmony export */   VFloat64: () => (/* binding */ VFloat64),\n/* harmony export */   VId: () => (/* binding */ VId),\n/* harmony export */   VInt64: () => (/* binding */ VInt64),\n/* harmony export */   VLiteral: () => (/* binding */ VLiteral),\n/* harmony export */   VNull: () => (/* binding */ VNull),\n/* harmony export */   VObject: () => (/* binding */ VObject),\n/* harmony export */   VRecord: () => (/* binding */ VRecord),\n/* harmony export */   VString: () => (/* binding */ VString),\n/* harmony export */   VUnion: () => (/* binding */ VUnion)\n/* harmony export */ });\n/* harmony import */ var _value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\nconst UNDEFINED_VALIDATOR_ERROR_URL = \"https://docs.convex.dev/error#undefined-validator\";\nfunction throwUndefinedValidatorError(context, fieldName) {\n  const fieldInfo = fieldName !== void 0 ? ` for field \"${fieldName}\"` : \"\";\n  throw new Error(\n    `A validator is undefined${fieldInfo} in ${context}. This is often caused by circular imports. See ${UNDEFINED_VALIDATOR_ERROR_URL} for details.`\n  );\n}\nclass BaseValidator {\n  constructor({ isOptional }) {\n    /**\n     * Only for TypeScript, the TS type of the JS values validated\n     * by this validator.\n     */\n    __publicField(this, \"type\");\n    /**\n     * Only for TypeScript, if this an Object validator, then\n     * this is the TS type of its property names.\n     */\n    __publicField(this, \"fieldPaths\");\n    /**\n     * Whether this is an optional Object property value validator.\n     */\n    __publicField(this, \"isOptional\");\n    /**\n     * Always `\"true\"`.\n     */\n    __publicField(this, \"isConvexValidator\");\n    this.isOptional = isOptional;\n    this.isConvexValidator = true;\n  }\n}\nclass VId extends BaseValidator {\n  /**\n   * Usually you'd use `v.id(tableName)` instead.\n   */\n  constructor({\n    isOptional,\n    tableName\n  }) {\n    super({ isOptional });\n    /**\n     * The name of the table that the validated IDs must belong to.\n     */\n    __publicField(this, \"tableName\");\n    /**\n     * The kind of validator, `\"id\"`.\n     */\n    __publicField(this, \"kind\", \"id\");\n    if (typeof tableName !== \"string\") {\n      throw new Error(\"v.id(tableName) requires a string\");\n    }\n    this.tableName = tableName;\n  }\n  /** @internal */\n  get json() {\n    return { type: \"id\", tableName: this.tableName };\n  }\n  /** @internal */\n  asOptional() {\n    return new VId({\n      isOptional: \"optional\",\n      tableName: this.tableName\n    });\n  }\n}\nclass VFloat64 extends BaseValidator {\n  constructor() {\n    super(...arguments);\n    /**\n     * The kind of validator, `\"float64\"`.\n     */\n    __publicField(this, \"kind\", \"float64\");\n  }\n  /** @internal */\n  get json() {\n    return { type: \"number\" };\n  }\n  /** @internal */\n  asOptional() {\n    return new VFloat64({\n      isOptional: \"optional\"\n    });\n  }\n}\nclass VInt64 extends BaseValidator {\n  constructor() {\n    super(...arguments);\n    /**\n     * The kind of validator, `\"int64\"`.\n     */\n    __publicField(this, \"kind\", \"int64\");\n  }\n  /** @internal */\n  get json() {\n    return { type: \"bigint\" };\n  }\n  /** @internal */\n  asOptional() {\n    return new VInt64({ isOptional: \"optional\" });\n  }\n}\nclass VBoolean extends BaseValidator {\n  constructor() {\n    super(...arguments);\n    /**\n     * The kind of validator, `\"boolean\"`.\n     */\n    __publicField(this, \"kind\", \"boolean\");\n  }\n  /** @internal */\n  get json() {\n    return { type: this.kind };\n  }\n  /** @internal */\n  asOptional() {\n    return new VBoolean({\n      isOptional: \"optional\"\n    });\n  }\n}\nclass VBytes extends BaseValidator {\n  constructor() {\n    super(...arguments);\n    /**\n     * The kind of validator, `\"bytes\"`.\n     */\n    __publicField(this, \"kind\", \"bytes\");\n  }\n  /** @internal */\n  get json() {\n    return { type: this.kind };\n  }\n  /** @internal */\n  asOptional() {\n    return new VBytes({ isOptional: \"optional\" });\n  }\n}\nclass VString extends BaseValidator {\n  constructor() {\n    super(...arguments);\n    /**\n     * The kind of validator, `\"string\"`.\n     */\n    __publicField(this, \"kind\", \"string\");\n  }\n  /** @internal */\n  get json() {\n    return { type: this.kind };\n  }\n  /** @internal */\n  asOptional() {\n    return new VString({\n      isOptional: \"optional\"\n    });\n  }\n}\nclass VNull extends BaseValidator {\n  constructor() {\n    super(...arguments);\n    /**\n     * The kind of validator, `\"null\"`.\n     */\n    __publicField(this, \"kind\", \"null\");\n  }\n  /** @internal */\n  get json() {\n    return { type: this.kind };\n  }\n  /** @internal */\n  asOptional() {\n    return new VNull({ isOptional: \"optional\" });\n  }\n}\nclass VAny extends BaseValidator {\n  constructor() {\n    super(...arguments);\n    /**\n     * The kind of validator, `\"any\"`.\n     */\n    __publicField(this, \"kind\", \"any\");\n  }\n  /** @internal */\n  get json() {\n    return {\n      type: this.kind\n    };\n  }\n  /** @internal */\n  asOptional() {\n    return new VAny({\n      isOptional: \"optional\"\n    });\n  }\n}\nclass VObject extends BaseValidator {\n  /**\n   * Usually you'd use `v.object({ ... })` instead.\n   */\n  constructor({\n    isOptional,\n    fields\n  }) {\n    super({ isOptional });\n    /**\n     * An object with the validator for each property.\n     */\n    __publicField(this, \"fields\");\n    /**\n     * The kind of validator, `\"object\"`.\n     */\n    __publicField(this, \"kind\", \"object\");\n    globalThis.Object.entries(fields).forEach(([fieldName, validator]) => {\n      if (validator === void 0) {\n        throwUndefinedValidatorError(\"v.object()\", fieldName);\n      }\n      if (!validator.isConvexValidator) {\n        throw new Error(\"v.object() entries must be validators\");\n      }\n    });\n    this.fields = fields;\n  }\n  /** @internal */\n  get json() {\n    return {\n      type: this.kind,\n      value: globalThis.Object.fromEntries(\n        globalThis.Object.entries(this.fields).map(([k, v]) => [\n          k,\n          {\n            fieldType: v.json,\n            optional: v.isOptional === \"optional\" ? true : false\n          }\n        ])\n      )\n    };\n  }\n  /** @internal */\n  asOptional() {\n    return new VObject({\n      isOptional: \"optional\",\n      fields: this.fields\n    });\n  }\n  /**\n   * Create a new VObject with the specified fields omitted.\n   * @param fields The field names to omit from this VObject.\n   */\n  omit(...fields) {\n    const newFields = { ...this.fields };\n    for (const field of fields) {\n      delete newFields[field];\n    }\n    return new VObject({\n      isOptional: this.isOptional,\n      fields: newFields\n    });\n  }\n  /**\n   * Create a new VObject with only the specified fields.\n   * @param fields The field names to pick from this VObject.\n   */\n  pick(...fields) {\n    const newFields = {};\n    for (const field of fields) {\n      newFields[field] = this.fields[field];\n    }\n    return new VObject({\n      isOptional: this.isOptional,\n      fields: newFields\n    });\n  }\n  /**\n   * Create a new VObject with all fields marked as optional.\n   */\n  partial() {\n    const newFields = {};\n    for (const [key, validator] of globalThis.Object.entries(this.fields)) {\n      newFields[key] = validator.asOptional();\n    }\n    return new VObject({\n      isOptional: this.isOptional,\n      fields: newFields\n    });\n  }\n  /**\n   * Create a new VObject with additional fields merged in.\n   * @param fields An object with additional validators to merge into this VObject.\n   */\n  extend(fields) {\n    return new VObject({\n      isOptional: this.isOptional,\n      fields: { ...this.fields, ...fields }\n    });\n  }\n}\nclass VLiteral extends BaseValidator {\n  /**\n   * Usually you'd use `v.literal(value)` instead.\n   */\n  constructor({ isOptional, value }) {\n    super({ isOptional });\n    /**\n     * The value that the validated values must be equal to.\n     */\n    __publicField(this, \"value\");\n    /**\n     * The kind of validator, `\"literal\"`.\n     */\n    __publicField(this, \"kind\", \"literal\");\n    if (typeof value !== \"string\" && typeof value !== \"boolean\" && typeof value !== \"number\" && typeof value !== \"bigint\") {\n      throw new Error(\"v.literal(value) must be a string, number, or boolean\");\n    }\n    this.value = value;\n  }\n  /** @internal */\n  get json() {\n    return {\n      type: this.kind,\n      value: (0,_value_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(this.value)\n    };\n  }\n  /** @internal */\n  asOptional() {\n    return new VLiteral({\n      isOptional: \"optional\",\n      value: this.value\n    });\n  }\n}\nclass VArray extends BaseValidator {\n  /**\n   * Usually you'd use `v.array(element)` instead.\n   */\n  constructor({\n    isOptional,\n    element\n  }) {\n    super({ isOptional });\n    /**\n     * The validator for the elements of the array.\n     */\n    __publicField(this, \"element\");\n    /**\n     * The kind of validator, `\"array\"`.\n     */\n    __publicField(this, \"kind\", \"array\");\n    if (element === void 0) {\n      throwUndefinedValidatorError(\"v.array()\");\n    }\n    this.element = element;\n  }\n  /** @internal */\n  get json() {\n    return {\n      type: this.kind,\n      value: this.element.json\n    };\n  }\n  /** @internal */\n  asOptional() {\n    return new VArray({\n      isOptional: \"optional\",\n      element: this.element\n    });\n  }\n}\nclass VRecord extends BaseValidator {\n  /**\n   * Usually you'd use `v.record(key, value)` instead.\n   */\n  constructor({\n    isOptional,\n    key,\n    value\n  }) {\n    super({ isOptional });\n    /**\n     * The validator for the keys of the record.\n     */\n    __publicField(this, \"key\");\n    /**\n     * The validator for the values of the record.\n     */\n    __publicField(this, \"value\");\n    /**\n     * The kind of validator, `\"record\"`.\n     */\n    __publicField(this, \"kind\", \"record\");\n    if (key === void 0) {\n      throwUndefinedValidatorError(\"v.record()\", \"key\");\n    }\n    if (value === void 0) {\n      throwUndefinedValidatorError(\"v.record()\", \"value\");\n    }\n    if (key.isOptional === \"optional\") {\n      throw new Error(\"Record validator cannot have optional keys\");\n    }\n    if (value.isOptional === \"optional\") {\n      throw new Error(\"Record validator cannot have optional values\");\n    }\n    if (!key.isConvexValidator || !value.isConvexValidator) {\n      throw new Error(\"Key and value of v.record() but be validators\");\n    }\n    this.key = key;\n    this.value = value;\n  }\n  /** @internal */\n  get json() {\n    return {\n      type: this.kind,\n      // This cast is needed because TypeScript thinks the key type is too wide\n      keys: this.key.json,\n      values: {\n        fieldType: this.value.json,\n        optional: false\n      }\n    };\n  }\n  /** @internal */\n  asOptional() {\n    return new VRecord({\n      isOptional: \"optional\",\n      key: this.key,\n      value: this.value\n    });\n  }\n}\nclass VUnion extends BaseValidator {\n  /**\n   * Usually you'd use `v.union(...members)` instead.\n   */\n  constructor({ isOptional, members }) {\n    super({ isOptional });\n    /**\n     * The array of validators, one of which must match the value.\n     */\n    __publicField(this, \"members\");\n    /**\n     * The kind of validator, `\"union\"`.\n     */\n    __publicField(this, \"kind\", \"union\");\n    members.forEach((member, index) => {\n      if (member === void 0) {\n        throwUndefinedValidatorError(\"v.union()\", `member at index ${index}`);\n      }\n      if (!member.isConvexValidator) {\n        throw new Error(\"All members of v.union() must be validators\");\n      }\n    });\n    this.members = members;\n  }\n  /** @internal */\n  get json() {\n    return {\n      type: this.kind,\n      value: this.members.map((v) => v.json)\n    };\n  }\n  /** @internal */\n  asOptional() {\n    return new VUnion({\n      isOptional: \"optional\",\n      members: this.members\n    });\n  }\n}\n//# sourceMappingURL=validators.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy92YWxpZGF0b3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWE7QUFDYjtBQUNBLDhFQUE4RSw2REFBNkQ7QUFDM0k7QUFDMEM7QUFDMUM7QUFDQTtBQUNBLDBEQUEwRCxVQUFVO0FBQ3BFO0FBQ0EsK0JBQStCLFdBQVcsS0FBSyxRQUFRLGtEQUFrRCwrQkFBK0I7QUFDeEk7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLFlBQVk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdCQUF3QjtBQUNoRDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdCQUF3QjtBQUNoRDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHdCQUF3QjtBQUMvQztBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTztBQUNQO0FBQ0EsbUNBQW1DLEtBQUs7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsWUFBWSxZQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUJBQW1CO0FBQ25DLFlBQVksWUFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx1REFBWTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsWUFBWSxZQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFlBQVksWUFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFCQUFxQjtBQUNyQyxZQUFZLFlBQVk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsTUFBTTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiRTpcXG5ldyBtdnBcXGtlbGFuaS13ZWJzaXRlXFxub2RlX21vZHVsZXNcXGNvbnZleFxcZGlzdFxcZXNtXFx2YWx1ZXNcXHZhbGlkYXRvcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fcHVibGljRmllbGQgPSAob2JqLCBrZXksIHZhbHVlKSA9PiBfX2RlZk5vcm1hbFByb3Aob2JqLCB0eXBlb2Yga2V5ICE9PSBcInN5bWJvbFwiID8ga2V5ICsgXCJcIiA6IGtleSwgdmFsdWUpO1xuaW1wb3J0IHsgY29udmV4VG9Kc29uIH0gZnJvbSBcIi4vdmFsdWUuanNcIjtcbmNvbnN0IFVOREVGSU5FRF9WQUxJREFUT1JfRVJST1JfVVJMID0gXCJodHRwczovL2RvY3MuY29udmV4LmRldi9lcnJvciN1bmRlZmluZWQtdmFsaWRhdG9yXCI7XG5mdW5jdGlvbiB0aHJvd1VuZGVmaW5lZFZhbGlkYXRvckVycm9yKGNvbnRleHQsIGZpZWxkTmFtZSkge1xuICBjb25zdCBmaWVsZEluZm8gPSBmaWVsZE5hbWUgIT09IHZvaWQgMCA/IGAgZm9yIGZpZWxkIFwiJHtmaWVsZE5hbWV9XCJgIDogXCJcIjtcbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgIGBBIHZhbGlkYXRvciBpcyB1bmRlZmluZWQke2ZpZWxkSW5mb30gaW4gJHtjb250ZXh0fS4gVGhpcyBpcyBvZnRlbiBjYXVzZWQgYnkgY2lyY3VsYXIgaW1wb3J0cy4gU2VlICR7VU5ERUZJTkVEX1ZBTElEQVRPUl9FUlJPUl9VUkx9IGZvciBkZXRhaWxzLmBcbiAgKTtcbn1cbmNsYXNzIEJhc2VWYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcih7IGlzT3B0aW9uYWwgfSkge1xuICAgIC8qKlxuICAgICAqIE9ubHkgZm9yIFR5cGVTY3JpcHQsIHRoZSBUUyB0eXBlIG9mIHRoZSBKUyB2YWx1ZXMgdmFsaWRhdGVkXG4gICAgICogYnkgdGhpcyB2YWxpZGF0b3IuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcInR5cGVcIik7XG4gICAgLyoqXG4gICAgICogT25seSBmb3IgVHlwZVNjcmlwdCwgaWYgdGhpcyBhbiBPYmplY3QgdmFsaWRhdG9yLCB0aGVuXG4gICAgICogdGhpcyBpcyB0aGUgVFMgdHlwZSBvZiBpdHMgcHJvcGVydHkgbmFtZXMuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImZpZWxkUGF0aHNcIik7XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIGlzIGFuIG9wdGlvbmFsIE9iamVjdCBwcm9wZXJ0eSB2YWx1ZSB2YWxpZGF0b3IuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImlzT3B0aW9uYWxcIik7XG4gICAgLyoqXG4gICAgICogQWx3YXlzIGBcInRydWVcImAuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImlzQ29udmV4VmFsaWRhdG9yXCIpO1xuICAgIHRoaXMuaXNPcHRpb25hbCA9IGlzT3B0aW9uYWw7XG4gICAgdGhpcy5pc0NvbnZleFZhbGlkYXRvciA9IHRydWU7XG4gIH1cbn1cbmV4cG9ydCBjbGFzcyBWSWQgZXh0ZW5kcyBCYXNlVmFsaWRhdG9yIHtcbiAgLyoqXG4gICAqIFVzdWFsbHkgeW91J2QgdXNlIGB2LmlkKHRhYmxlTmFtZSlgIGluc3RlYWQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgaXNPcHRpb25hbCxcbiAgICB0YWJsZU5hbWVcbiAgfSkge1xuICAgIHN1cGVyKHsgaXNPcHRpb25hbCB9KTtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdGFibGUgdGhhdCB0aGUgdmFsaWRhdGVkIElEcyBtdXN0IGJlbG9uZyB0by5cbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidGFibGVOYW1lXCIpO1xuICAgIC8qKlxuICAgICAqIFRoZSBraW5kIG9mIHZhbGlkYXRvciwgYFwiaWRcImAuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImtpbmRcIiwgXCJpZFwiKTtcbiAgICBpZiAodHlwZW9mIHRhYmxlTmFtZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidi5pZCh0YWJsZU5hbWUpIHJlcXVpcmVzIGEgc3RyaW5nXCIpO1xuICAgIH1cbiAgICB0aGlzLnRhYmxlTmFtZSA9IHRhYmxlTmFtZTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGdldCBqc29uKCkge1xuICAgIHJldHVybiB7IHR5cGU6IFwiaWRcIiwgdGFibGVOYW1lOiB0aGlzLnRhYmxlTmFtZSB9O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgYXNPcHRpb25hbCgpIHtcbiAgICByZXR1cm4gbmV3IFZJZCh7XG4gICAgICBpc09wdGlvbmFsOiBcIm9wdGlvbmFsXCIsXG4gICAgICB0YWJsZU5hbWU6IHRoaXMudGFibGVOYW1lXG4gICAgfSk7XG4gIH1cbn1cbmV4cG9ydCBjbGFzcyBWRmxvYXQ2NCBleHRlbmRzIEJhc2VWYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIC8qKlxuICAgICAqIFRoZSBraW5kIG9mIHZhbGlkYXRvciwgYFwiZmxvYXQ2NFwiYC5cbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwia2luZFwiLCBcImZsb2F0NjRcIik7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXQganNvbigpIHtcbiAgICByZXR1cm4geyB0eXBlOiBcIm51bWJlclwiIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVkZsb2F0NjQoe1xuICAgICAgaXNPcHRpb25hbDogXCJvcHRpb25hbFwiXG4gICAgfSk7XG4gIH1cbn1cbmV4cG9ydCBjbGFzcyBWSW50NjQgZXh0ZW5kcyBCYXNlVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAvKipcbiAgICAgKiBUaGUga2luZCBvZiB2YWxpZGF0b3IsIGBcImludDY0XCJgLlxuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJraW5kXCIsIFwiaW50NjRcIik7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXQganNvbigpIHtcbiAgICByZXR1cm4geyB0eXBlOiBcImJpZ2ludFwiIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVkludDY0KHsgaXNPcHRpb25hbDogXCJvcHRpb25hbFwiIH0pO1xuICB9XG59XG5leHBvcnQgY2xhc3MgVkJvb2xlYW4gZXh0ZW5kcyBCYXNlVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAvKipcbiAgICAgKiBUaGUga2luZCBvZiB2YWxpZGF0b3IsIGBcImJvb2xlYW5cImAuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImtpbmRcIiwgXCJib29sZWFuXCIpO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZ2V0IGpzb24oKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogdGhpcy5raW5kIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVkJvb2xlYW4oe1xuICAgICAgaXNPcHRpb25hbDogXCJvcHRpb25hbFwiXG4gICAgfSk7XG4gIH1cbn1cbmV4cG9ydCBjbGFzcyBWQnl0ZXMgZXh0ZW5kcyBCYXNlVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAvKipcbiAgICAgKiBUaGUga2luZCBvZiB2YWxpZGF0b3IsIGBcImJ5dGVzXCJgLlxuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJraW5kXCIsIFwiYnl0ZXNcIik7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXQganNvbigpIHtcbiAgICByZXR1cm4geyB0eXBlOiB0aGlzLmtpbmQgfTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGFzT3B0aW9uYWwoKSB7XG4gICAgcmV0dXJuIG5ldyBWQnl0ZXMoeyBpc09wdGlvbmFsOiBcIm9wdGlvbmFsXCIgfSk7XG4gIH1cbn1cbmV4cG9ydCBjbGFzcyBWU3RyaW5nIGV4dGVuZHMgQmFzZVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgLyoqXG4gICAgICogVGhlIGtpbmQgb2YgdmFsaWRhdG9yLCBgXCJzdHJpbmdcImAuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImtpbmRcIiwgXCJzdHJpbmdcIik7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXQganNvbigpIHtcbiAgICByZXR1cm4geyB0eXBlOiB0aGlzLmtpbmQgfTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGFzT3B0aW9uYWwoKSB7XG4gICAgcmV0dXJuIG5ldyBWU3RyaW5nKHtcbiAgICAgIGlzT3B0aW9uYWw6IFwib3B0aW9uYWxcIlxuICAgIH0pO1xuICB9XG59XG5leHBvcnQgY2xhc3MgVk51bGwgZXh0ZW5kcyBCYXNlVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAvKipcbiAgICAgKiBUaGUga2luZCBvZiB2YWxpZGF0b3IsIGBcIm51bGxcImAuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImtpbmRcIiwgXCJudWxsXCIpO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZ2V0IGpzb24oKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogdGhpcy5raW5kIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVk51bGwoeyBpc09wdGlvbmFsOiBcIm9wdGlvbmFsXCIgfSk7XG4gIH1cbn1cbmV4cG9ydCBjbGFzcyBWQW55IGV4dGVuZHMgQmFzZVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgLyoqXG4gICAgICogVGhlIGtpbmQgb2YgdmFsaWRhdG9yLCBgXCJhbnlcImAuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImtpbmRcIiwgXCJhbnlcIik7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXQganNvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogdGhpcy5raW5kXG4gICAgfTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGFzT3B0aW9uYWwoKSB7XG4gICAgcmV0dXJuIG5ldyBWQW55KHtcbiAgICAgIGlzT3B0aW9uYWw6IFwib3B0aW9uYWxcIlxuICAgIH0pO1xuICB9XG59XG5leHBvcnQgY2xhc3MgVk9iamVjdCBleHRlbmRzIEJhc2VWYWxpZGF0b3Ige1xuICAvKipcbiAgICogVXN1YWxseSB5b3UnZCB1c2UgYHYub2JqZWN0KHsgLi4uIH0pYCBpbnN0ZWFkLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioe1xuICAgIGlzT3B0aW9uYWwsXG4gICAgZmllbGRzXG4gIH0pIHtcbiAgICBzdXBlcih7IGlzT3B0aW9uYWwgfSk7XG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IHdpdGggdGhlIHZhbGlkYXRvciBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwiZmllbGRzXCIpO1xuICAgIC8qKlxuICAgICAqIFRoZSBraW5kIG9mIHZhbGlkYXRvciwgYFwib2JqZWN0XCJgLlxuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJraW5kXCIsIFwib2JqZWN0XCIpO1xuICAgIGdsb2JhbFRoaXMuT2JqZWN0LmVudHJpZXMoZmllbGRzKS5mb3JFYWNoKChbZmllbGROYW1lLCB2YWxpZGF0b3JdKSA9PiB7XG4gICAgICBpZiAodmFsaWRhdG9yID09PSB2b2lkIDApIHtcbiAgICAgICAgdGhyb3dVbmRlZmluZWRWYWxpZGF0b3JFcnJvcihcInYub2JqZWN0KClcIiwgZmllbGROYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmICghdmFsaWRhdG9yLmlzQ29udmV4VmFsaWRhdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInYub2JqZWN0KCkgZW50cmllcyBtdXN0IGJlIHZhbGlkYXRvcnNcIik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5maWVsZHMgPSBmaWVsZHM7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXQganNvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogdGhpcy5raW5kLFxuICAgICAgdmFsdWU6IGdsb2JhbFRoaXMuT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICBnbG9iYWxUaGlzLk9iamVjdC5lbnRyaWVzKHRoaXMuZmllbGRzKS5tYXAoKFtrLCB2XSkgPT4gW1xuICAgICAgICAgIGssXG4gICAgICAgICAge1xuICAgICAgICAgICAgZmllbGRUeXBlOiB2Lmpzb24sXG4gICAgICAgICAgICBvcHRpb25hbDogdi5pc09wdGlvbmFsID09PSBcIm9wdGlvbmFsXCIgPyB0cnVlIDogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIF0pXG4gICAgICApXG4gICAgfTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGFzT3B0aW9uYWwoKSB7XG4gICAgcmV0dXJuIG5ldyBWT2JqZWN0KHtcbiAgICAgIGlzT3B0aW9uYWw6IFwib3B0aW9uYWxcIixcbiAgICAgIGZpZWxkczogdGhpcy5maWVsZHNcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFZPYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGZpZWxkcyBvbWl0dGVkLlxuICAgKiBAcGFyYW0gZmllbGRzIFRoZSBmaWVsZCBuYW1lcyB0byBvbWl0IGZyb20gdGhpcyBWT2JqZWN0LlxuICAgKi9cbiAgb21pdCguLi5maWVsZHMpIHtcbiAgICBjb25zdCBuZXdGaWVsZHMgPSB7IC4uLnRoaXMuZmllbGRzIH07XG4gICAgZm9yIChjb25zdCBmaWVsZCBvZiBmaWVsZHMpIHtcbiAgICAgIGRlbGV0ZSBuZXdGaWVsZHNbZmllbGRdO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFZPYmplY3Qoe1xuICAgICAgaXNPcHRpb25hbDogdGhpcy5pc09wdGlvbmFsLFxuICAgICAgZmllbGRzOiBuZXdGaWVsZHNcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFZPYmplY3Qgd2l0aCBvbmx5IHRoZSBzcGVjaWZpZWQgZmllbGRzLlxuICAgKiBAcGFyYW0gZmllbGRzIFRoZSBmaWVsZCBuYW1lcyB0byBwaWNrIGZyb20gdGhpcyBWT2JqZWN0LlxuICAgKi9cbiAgcGljayguLi5maWVsZHMpIHtcbiAgICBjb25zdCBuZXdGaWVsZHMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkcykge1xuICAgICAgbmV3RmllbGRzW2ZpZWxkXSA9IHRoaXMuZmllbGRzW2ZpZWxkXTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBWT2JqZWN0KHtcbiAgICAgIGlzT3B0aW9uYWw6IHRoaXMuaXNPcHRpb25hbCxcbiAgICAgIGZpZWxkczogbmV3RmllbGRzXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBWT2JqZWN0IHdpdGggYWxsIGZpZWxkcyBtYXJrZWQgYXMgb3B0aW9uYWwuXG4gICAqL1xuICBwYXJ0aWFsKCkge1xuICAgIGNvbnN0IG5ld0ZpZWxkcyA9IHt9O1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsaWRhdG9yXSBvZiBnbG9iYWxUaGlzLk9iamVjdC5lbnRyaWVzKHRoaXMuZmllbGRzKSkge1xuICAgICAgbmV3RmllbGRzW2tleV0gPSB2YWxpZGF0b3IuYXNPcHRpb25hbCgpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFZPYmplY3Qoe1xuICAgICAgaXNPcHRpb25hbDogdGhpcy5pc09wdGlvbmFsLFxuICAgICAgZmllbGRzOiBuZXdGaWVsZHNcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFZPYmplY3Qgd2l0aCBhZGRpdGlvbmFsIGZpZWxkcyBtZXJnZWQgaW4uXG4gICAqIEBwYXJhbSBmaWVsZHMgQW4gb2JqZWN0IHdpdGggYWRkaXRpb25hbCB2YWxpZGF0b3JzIHRvIG1lcmdlIGludG8gdGhpcyBWT2JqZWN0LlxuICAgKi9cbiAgZXh0ZW5kKGZpZWxkcykge1xuICAgIHJldHVybiBuZXcgVk9iamVjdCh7XG4gICAgICBpc09wdGlvbmFsOiB0aGlzLmlzT3B0aW9uYWwsXG4gICAgICBmaWVsZHM6IHsgLi4udGhpcy5maWVsZHMsIC4uLmZpZWxkcyB9XG4gICAgfSk7XG4gIH1cbn1cbmV4cG9ydCBjbGFzcyBWTGl0ZXJhbCBleHRlbmRzIEJhc2VWYWxpZGF0b3Ige1xuICAvKipcbiAgICogVXN1YWxseSB5b3UnZCB1c2UgYHYubGl0ZXJhbCh2YWx1ZSlgIGluc3RlYWQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7IGlzT3B0aW9uYWwsIHZhbHVlIH0pIHtcbiAgICBzdXBlcih7IGlzT3B0aW9uYWwgfSk7XG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIHRoYXQgdGhlIHZhbGlkYXRlZCB2YWx1ZXMgbXVzdCBiZSBlcXVhbCB0by5cbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidmFsdWVcIik7XG4gICAgLyoqXG4gICAgICogVGhlIGtpbmQgb2YgdmFsaWRhdG9yLCBgXCJsaXRlcmFsXCJgLlxuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJraW5kXCIsIFwibGl0ZXJhbFwiKTtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJib29sZWFuXCIgJiYgdHlwZW9mIHZhbHVlICE9PSBcIm51bWJlclwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJiaWdpbnRcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidi5saXRlcmFsKHZhbHVlKSBtdXN0IGJlIGEgc3RyaW5nLCBudW1iZXIsIG9yIGJvb2xlYW5cIik7XG4gICAgfVxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGdldCBqc29uKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiB0aGlzLmtpbmQsXG4gICAgICB2YWx1ZTogY29udmV4VG9Kc29uKHRoaXMudmFsdWUpXG4gICAgfTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGFzT3B0aW9uYWwoKSB7XG4gICAgcmV0dXJuIG5ldyBWTGl0ZXJhbCh7XG4gICAgICBpc09wdGlvbmFsOiBcIm9wdGlvbmFsXCIsXG4gICAgICB2YWx1ZTogdGhpcy52YWx1ZVxuICAgIH0pO1xuICB9XG59XG5leHBvcnQgY2xhc3MgVkFycmF5IGV4dGVuZHMgQmFzZVZhbGlkYXRvciB7XG4gIC8qKlxuICAgKiBVc3VhbGx5IHlvdSdkIHVzZSBgdi5hcnJheShlbGVtZW50KWAgaW5zdGVhZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBpc09wdGlvbmFsLFxuICAgIGVsZW1lbnRcbiAgfSkge1xuICAgIHN1cGVyKHsgaXNPcHRpb25hbCB9KTtcbiAgICAvKipcbiAgICAgKiBUaGUgdmFsaWRhdG9yIGZvciB0aGUgZWxlbWVudHMgb2YgdGhlIGFycmF5LlxuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJlbGVtZW50XCIpO1xuICAgIC8qKlxuICAgICAqIFRoZSBraW5kIG9mIHZhbGlkYXRvciwgYFwiYXJyYXlcImAuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImtpbmRcIiwgXCJhcnJheVwiKTtcbiAgICBpZiAoZWxlbWVudCA9PT0gdm9pZCAwKSB7XG4gICAgICB0aHJvd1VuZGVmaW5lZFZhbGlkYXRvckVycm9yKFwidi5hcnJheSgpXCIpO1xuICAgIH1cbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZ2V0IGpzb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IHRoaXMua2luZCxcbiAgICAgIHZhbHVlOiB0aGlzLmVsZW1lbnQuanNvblxuICAgIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVkFycmF5KHtcbiAgICAgIGlzT3B0aW9uYWw6IFwib3B0aW9uYWxcIixcbiAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudFxuICAgIH0pO1xuICB9XG59XG5leHBvcnQgY2xhc3MgVlJlY29yZCBleHRlbmRzIEJhc2VWYWxpZGF0b3Ige1xuICAvKipcbiAgICogVXN1YWxseSB5b3UnZCB1c2UgYHYucmVjb3JkKGtleSwgdmFsdWUpYCBpbnN0ZWFkLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioe1xuICAgIGlzT3B0aW9uYWwsXG4gICAga2V5LFxuICAgIHZhbHVlXG4gIH0pIHtcbiAgICBzdXBlcih7IGlzT3B0aW9uYWwgfSk7XG4gICAgLyoqXG4gICAgICogVGhlIHZhbGlkYXRvciBmb3IgdGhlIGtleXMgb2YgdGhlIHJlY29yZC5cbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwia2V5XCIpO1xuICAgIC8qKlxuICAgICAqIFRoZSB2YWxpZGF0b3IgZm9yIHRoZSB2YWx1ZXMgb2YgdGhlIHJlY29yZC5cbiAgICAgKi9cbiAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsIFwidmFsdWVcIik7XG4gICAgLyoqXG4gICAgICogVGhlIGtpbmQgb2YgdmFsaWRhdG9yLCBgXCJyZWNvcmRcImAuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImtpbmRcIiwgXCJyZWNvcmRcIik7XG4gICAgaWYgKGtleSA9PT0gdm9pZCAwKSB7XG4gICAgICB0aHJvd1VuZGVmaW5lZFZhbGlkYXRvckVycm9yKFwidi5yZWNvcmQoKVwiLCBcImtleVwiKTtcbiAgICB9XG4gICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgIHRocm93VW5kZWZpbmVkVmFsaWRhdG9yRXJyb3IoXCJ2LnJlY29yZCgpXCIsIFwidmFsdWVcIik7XG4gICAgfVxuICAgIGlmIChrZXkuaXNPcHRpb25hbCA9PT0gXCJvcHRpb25hbFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWNvcmQgdmFsaWRhdG9yIGNhbm5vdCBoYXZlIG9wdGlvbmFsIGtleXNcIik7XG4gICAgfVxuICAgIGlmICh2YWx1ZS5pc09wdGlvbmFsID09PSBcIm9wdGlvbmFsXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlY29yZCB2YWxpZGF0b3IgY2Fubm90IGhhdmUgb3B0aW9uYWwgdmFsdWVzXCIpO1xuICAgIH1cbiAgICBpZiAoIWtleS5pc0NvbnZleFZhbGlkYXRvciB8fCAhdmFsdWUuaXNDb252ZXhWYWxpZGF0b3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIktleSBhbmQgdmFsdWUgb2Ygdi5yZWNvcmQoKSBidXQgYmUgdmFsaWRhdG9yc1wiKTtcbiAgICB9XG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZ2V0IGpzb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IHRoaXMua2luZCxcbiAgICAgIC8vIFRoaXMgY2FzdCBpcyBuZWVkZWQgYmVjYXVzZSBUeXBlU2NyaXB0IHRoaW5rcyB0aGUga2V5IHR5cGUgaXMgdG9vIHdpZGVcbiAgICAgIGtleXM6IHRoaXMua2V5Lmpzb24sXG4gICAgICB2YWx1ZXM6IHtcbiAgICAgICAgZmllbGRUeXBlOiB0aGlzLnZhbHVlLmpzb24sXG4gICAgICAgIG9wdGlvbmFsOiBmYWxzZVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVlJlY29yZCh7XG4gICAgICBpc09wdGlvbmFsOiBcIm9wdGlvbmFsXCIsXG4gICAgICBrZXk6IHRoaXMua2V5LFxuICAgICAgdmFsdWU6IHRoaXMudmFsdWVcbiAgICB9KTtcbiAgfVxufVxuZXhwb3J0IGNsYXNzIFZVbmlvbiBleHRlbmRzIEJhc2VWYWxpZGF0b3Ige1xuICAvKipcbiAgICogVXN1YWxseSB5b3UnZCB1c2UgYHYudW5pb24oLi4ubWVtYmVycylgIGluc3RlYWQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7IGlzT3B0aW9uYWwsIG1lbWJlcnMgfSkge1xuICAgIHN1cGVyKHsgaXNPcHRpb25hbCB9KTtcbiAgICAvKipcbiAgICAgKiBUaGUgYXJyYXkgb2YgdmFsaWRhdG9ycywgb25lIG9mIHdoaWNoIG11c3QgbWF0Y2ggdGhlIHZhbHVlLlxuICAgICAqL1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJtZW1iZXJzXCIpO1xuICAgIC8qKlxuICAgICAqIFRoZSBraW5kIG9mIHZhbGlkYXRvciwgYFwidW5pb25cImAuXG4gICAgICovXG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImtpbmRcIiwgXCJ1bmlvblwiKTtcbiAgICBtZW1iZXJzLmZvckVhY2goKG1lbWJlciwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChtZW1iZXIgPT09IHZvaWQgMCkge1xuICAgICAgICB0aHJvd1VuZGVmaW5lZFZhbGlkYXRvckVycm9yKFwidi51bmlvbigpXCIsIGBtZW1iZXIgYXQgaW5kZXggJHtpbmRleH1gKTtcbiAgICAgIH1cbiAgICAgIGlmICghbWVtYmVyLmlzQ29udmV4VmFsaWRhdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFsbCBtZW1iZXJzIG9mIHYudW5pb24oKSBtdXN0IGJlIHZhbGlkYXRvcnNcIik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5tZW1iZXJzID0gbWVtYmVycztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGdldCBqc29uKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiB0aGlzLmtpbmQsXG4gICAgICB2YWx1ZTogdGhpcy5tZW1iZXJzLm1hcCgodikgPT4gdi5qc29uKVxuICAgIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVlVuaW9uKHtcbiAgICAgIGlzT3B0aW9uYWw6IFwib3B0aW9uYWxcIixcbiAgICAgIG1lbWJlcnM6IHRoaXMubWVtYmVyc1xuICAgIH0pO1xuICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD12YWxpZGF0b3JzLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/validators.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/value.js":
/*!******************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/value.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   base64ToBigInt: () => (/* binding */ base64ToBigInt),\n/* harmony export */   bigIntToBase64: () => (/* binding */ bigIntToBase64),\n/* harmony export */   convexOrUndefinedToJson: () => (/* binding */ convexOrUndefinedToJson),\n/* harmony export */   convexToJson: () => (/* binding */ convexToJson),\n/* harmony export */   jsonToConvex: () => (/* binding */ jsonToConvex),\n/* harmony export */   modernBase64ToBigInt: () => (/* binding */ modernBase64ToBigInt),\n/* harmony export */   modernBigIntToBase64: () => (/* binding */ modernBigIntToBase64),\n/* harmony export */   patchValueToJson: () => (/* binding */ patchValueToJson),\n/* harmony export */   slowBase64ToBigInt: () => (/* binding */ slowBase64ToBigInt),\n/* harmony export */   slowBigIntToBase64: () => (/* binding */ slowBigIntToBase64),\n/* harmony export */   stringifyValueForError: () => (/* binding */ stringifyValueForError)\n/* harmony export */ });\n/* harmony import */ var _base64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base64.js */ \"(ssr)/./node_modules/convex/dist/esm/values/base64.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n\n\n\nconst LITTLE_ENDIAN = true;\nconst MIN_INT64 = BigInt(\"-9223372036854775808\");\nconst MAX_INT64 = BigInt(\"9223372036854775807\");\nconst ZERO = BigInt(\"0\");\nconst EIGHT = BigInt(\"8\");\nconst TWOFIFTYSIX = BigInt(\"256\");\nfunction isSpecial(n) {\n  return Number.isNaN(n) || !Number.isFinite(n) || Object.is(n, -0);\n}\nfunction slowBigIntToBase64(value) {\n  if (value < ZERO) {\n    value -= MIN_INT64 + MIN_INT64;\n  }\n  let hex = value.toString(16);\n  if (hex.length % 2 === 1) hex = \"0\" + hex;\n  const bytes = new Uint8Array(new ArrayBuffer(8));\n  let i = 0;\n  for (const hexByte of hex.match(/.{2}/g).reverse()) {\n    bytes.set([parseInt(hexByte, 16)], i++);\n    value >>= EIGHT;\n  }\n  return _base64_js__WEBPACK_IMPORTED_MODULE_0__.fromByteArray(bytes);\n}\nfunction slowBase64ToBigInt(encoded) {\n  const integerBytes = _base64_js__WEBPACK_IMPORTED_MODULE_0__.toByteArray(encoded);\n  if (integerBytes.byteLength !== 8) {\n    throw new Error(\n      `Received ${integerBytes.byteLength} bytes, expected 8 for $integer`\n    );\n  }\n  let value = ZERO;\n  let power = ZERO;\n  for (const byte of integerBytes) {\n    value += BigInt(byte) * TWOFIFTYSIX ** power;\n    power++;\n  }\n  if (value > MAX_INT64) {\n    value += MIN_INT64 + MIN_INT64;\n  }\n  return value;\n}\nfunction modernBigIntToBase64(value) {\n  if (value < MIN_INT64 || MAX_INT64 < value) {\n    throw new Error(\n      `BigInt ${value} does not fit into a 64-bit signed integer.`\n    );\n  }\n  const buffer = new ArrayBuffer(8);\n  new DataView(buffer).setBigInt64(0, value, true);\n  return _base64_js__WEBPACK_IMPORTED_MODULE_0__.fromByteArray(new Uint8Array(buffer));\n}\nfunction modernBase64ToBigInt(encoded) {\n  const integerBytes = _base64_js__WEBPACK_IMPORTED_MODULE_0__.toByteArray(encoded);\n  if (integerBytes.byteLength !== 8) {\n    throw new Error(\n      `Received ${integerBytes.byteLength} bytes, expected 8 for $integer`\n    );\n  }\n  const intBytesView = new DataView(integerBytes.buffer);\n  return intBytesView.getBigInt64(0, true);\n}\nconst bigIntToBase64 = DataView.prototype.setBigInt64 ? modernBigIntToBase64 : slowBigIntToBase64;\nconst base64ToBigInt = DataView.prototype.getBigInt64 ? modernBase64ToBigInt : slowBase64ToBigInt;\nconst MAX_IDENTIFIER_LEN = 1024;\nfunction validateObjectField(k) {\n  if (k.length > MAX_IDENTIFIER_LEN) {\n    throw new Error(\n      `Field name ${k} exceeds maximum field name length ${MAX_IDENTIFIER_LEN}.`\n    );\n  }\n  if (k.startsWith(\"$\")) {\n    throw new Error(`Field name ${k} starts with a '$', which is reserved.`);\n  }\n  for (let i = 0; i < k.length; i += 1) {\n    const charCode = k.charCodeAt(i);\n    if (charCode < 32 || charCode >= 127) {\n      throw new Error(\n        `Field name ${k} has invalid character '${k[i]}': Field names can only contain non-control ASCII characters`\n      );\n    }\n  }\n}\nfunction jsonToConvex(value) {\n  if (value === null) {\n    return value;\n  }\n  if (typeof value === \"boolean\") {\n    return value;\n  }\n  if (typeof value === \"number\") {\n    return value;\n  }\n  if (typeof value === \"string\") {\n    return value;\n  }\n  if (Array.isArray(value)) {\n    return value.map((value2) => jsonToConvex(value2));\n  }\n  if (typeof value !== \"object\") {\n    throw new Error(`Unexpected type of ${value}`);\n  }\n  const entries = Object.entries(value);\n  if (entries.length === 1) {\n    const key = entries[0][0];\n    if (key === \"$bytes\") {\n      if (typeof value.$bytes !== \"string\") {\n        throw new Error(`Malformed $bytes field on ${value}`);\n      }\n      return _base64_js__WEBPACK_IMPORTED_MODULE_0__.toByteArray(value.$bytes).buffer;\n    }\n    if (key === \"$integer\") {\n      if (typeof value.$integer !== \"string\") {\n        throw new Error(`Malformed $integer field on ${value}`);\n      }\n      return base64ToBigInt(value.$integer);\n    }\n    if (key === \"$float\") {\n      if (typeof value.$float !== \"string\") {\n        throw new Error(`Malformed $float field on ${value}`);\n      }\n      const floatBytes = _base64_js__WEBPACK_IMPORTED_MODULE_0__.toByteArray(value.$float);\n      if (floatBytes.byteLength !== 8) {\n        throw new Error(\n          `Received ${floatBytes.byteLength} bytes, expected 8 for $float`\n        );\n      }\n      const floatBytesView = new DataView(floatBytes.buffer);\n      const float = floatBytesView.getFloat64(0, LITTLE_ENDIAN);\n      if (!isSpecial(float)) {\n        throw new Error(`Float ${float} should be encoded as a number`);\n      }\n      return float;\n    }\n    if (key === \"$set\") {\n      throw new Error(\n        `Received a Set which is no longer supported as a Convex type.`\n      );\n    }\n    if (key === \"$map\") {\n      throw new Error(\n        `Received a Map which is no longer supported as a Convex type.`\n      );\n    }\n  }\n  const out = {};\n  for (const [k, v] of Object.entries(value)) {\n    validateObjectField(k);\n    out[k] = jsonToConvex(v);\n  }\n  return out;\n}\nconst MAX_VALUE_FOR_ERROR_LEN = 16384;\nfunction stringifyValueForError(value) {\n  const str = JSON.stringify(value, (_key, value2) => {\n    if (value2 === void 0) {\n      return \"undefined\";\n    }\n    if (typeof value2 === \"bigint\") {\n      return `${value2.toString()}n`;\n    }\n    return value2;\n  });\n  if (str.length > MAX_VALUE_FOR_ERROR_LEN) {\n    const rest = \"[...truncated]\";\n    let truncateAt = MAX_VALUE_FOR_ERROR_LEN - rest.length;\n    const codePoint = str.codePointAt(truncateAt - 1);\n    if (codePoint !== void 0 && codePoint > 65535) {\n      truncateAt -= 1;\n    }\n    return str.substring(0, truncateAt) + rest;\n  }\n  return str;\n}\nfunction convexToJsonInternal(value, originalValue, context, includeTopLevelUndefined) {\n  if (value === void 0) {\n    const contextText = context && ` (present at path ${context} in original object ${stringifyValueForError(\n      originalValue\n    )})`;\n    throw new Error(\n      `undefined is not a valid Convex value${contextText}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`\n    );\n  }\n  if (value === null) {\n    return value;\n  }\n  if (typeof value === \"bigint\") {\n    if (value < MIN_INT64 || MAX_INT64 < value) {\n      throw new Error(\n        `BigInt ${value} does not fit into a 64-bit signed integer.`\n      );\n    }\n    return { $integer: bigIntToBase64(value) };\n  }\n  if (typeof value === \"number\") {\n    if (isSpecial(value)) {\n      const buffer = new ArrayBuffer(8);\n      new DataView(buffer).setFloat64(0, value, LITTLE_ENDIAN);\n      return { $float: _base64_js__WEBPACK_IMPORTED_MODULE_0__.fromByteArray(new Uint8Array(buffer)) };\n    } else {\n      return value;\n    }\n  }\n  if (typeof value === \"boolean\") {\n    return value;\n  }\n  if (typeof value === \"string\") {\n    return value;\n  }\n  if (value instanceof ArrayBuffer) {\n    return { $bytes: _base64_js__WEBPACK_IMPORTED_MODULE_0__.fromByteArray(new Uint8Array(value)) };\n  }\n  if (Array.isArray(value)) {\n    return value.map(\n      (value2, i) => convexToJsonInternal(value2, originalValue, context + `[${i}]`, false)\n    );\n  }\n  if (value instanceof Set) {\n    throw new Error(\n      errorMessageForUnsupportedType(context, \"Set\", [...value], originalValue)\n    );\n  }\n  if (value instanceof Map) {\n    throw new Error(\n      errorMessageForUnsupportedType(context, \"Map\", [...value], originalValue)\n    );\n  }\n  if (!(0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.isSimpleObject)(value)) {\n    const theType = value?.constructor?.name;\n    const typeName = theType ? `${theType} ` : \"\";\n    throw new Error(\n      errorMessageForUnsupportedType(context, typeName, value, originalValue)\n    );\n  }\n  const out = {};\n  const entries = Object.entries(value);\n  entries.sort(([k1, _v1], [k2, _v2]) => k1 === k2 ? 0 : k1 < k2 ? -1 : 1);\n  for (const [k, v] of entries) {\n    if (v !== void 0) {\n      validateObjectField(k);\n      out[k] = convexToJsonInternal(v, originalValue, context + `.${k}`, false);\n    } else if (includeTopLevelUndefined) {\n      validateObjectField(k);\n      out[k] = convexOrUndefinedToJsonInternal(\n        v,\n        originalValue,\n        context + `.${k}`\n      );\n    }\n  }\n  return out;\n}\nfunction errorMessageForUnsupportedType(context, typeName, value, originalValue) {\n  if (context) {\n    return `${typeName}${stringifyValueForError(\n      value\n    )} is not a supported Convex type (present at path ${context} in original object ${stringifyValueForError(\n      originalValue\n    )}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`;\n  } else {\n    return `${typeName}${stringifyValueForError(\n      value\n    )} is not a supported Convex type.`;\n  }\n}\nfunction convexOrUndefinedToJsonInternal(value, originalValue, context) {\n  if (value === void 0) {\n    return { $undefined: null };\n  } else {\n    if (originalValue === void 0) {\n      throw new Error(\n        `Programming error. Current value is ${stringifyValueForError(\n          value\n        )} but original value is undefined`\n      );\n    }\n    return convexToJsonInternal(value, originalValue, context, false);\n  }\n}\nfunction convexToJson(value) {\n  return convexToJsonInternal(value, value, \"\", false);\n}\nfunction convexOrUndefinedToJson(value) {\n  return convexOrUndefinedToJsonInternal(value, value, \"\");\n}\nfunction patchValueToJson(value) {\n  return convexToJsonInternal(value, value, \"\", true);\n}\n//# sourceMappingURL=value.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy92YWx1ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQWE7QUFDeUI7QUFDYztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLEVBQUU7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsU0FBUyxxREFBb0I7QUFDN0I7QUFDTztBQUNQLHVCQUF1QixtREFBa0I7QUFDekM7QUFDQTtBQUNBLGtCQUFrQix5QkFBeUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMscURBQW9CO0FBQzdCO0FBQ087QUFDUCx1QkFBdUIsbURBQWtCO0FBQ3pDO0FBQ0E7QUFDQSxrQkFBa0IseUJBQXlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsR0FBRyxvQ0FBb0MsbUJBQW1CO0FBQzlFO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxHQUFHO0FBQ3JDO0FBQ0Esa0JBQWtCLGNBQWM7QUFDaEM7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLEdBQUcseUJBQXlCLEtBQUs7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLE1BQU07QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELE1BQU07QUFDM0Q7QUFDQSxhQUFhLG1EQUFrQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsTUFBTTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELE1BQU07QUFDM0Q7QUFDQSx5QkFBeUIsbURBQWtCO0FBQzNDO0FBQ0E7QUFDQSxzQkFBc0IsdUJBQXVCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsT0FBTztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrQkFBa0I7QUFDbEM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxTQUFTLHFCQUFxQjtBQUN0RjtBQUNBLE1BQU07QUFDTjtBQUNBLDhDQUE4QyxZQUFZO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsT0FBTztBQUN6QjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVEscURBQW9CO0FBQzNDLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUSxxREFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLEVBQUU7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxnRUFBYztBQUNyQjtBQUNBLGtDQUFrQyxTQUFTO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLEVBQUU7QUFDdEUsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLEVBQUU7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFNBQVMsRUFBRTtBQUN6QjtBQUNBLE9BQU8sa0RBQWtELFNBQVMscUJBQXFCO0FBQ3ZGO0FBQ0EsTUFBTTtBQUNOLElBQUk7QUFDSixjQUFjLFNBQVMsRUFBRTtBQUN6QjtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixJQUFJO0FBQ0o7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcdmFsdWVzXFx2YWx1ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCAqIGFzIEJhc2U2NCBmcm9tIFwiLi9iYXNlNjQuanNcIjtcbmltcG9ydCB7IGlzU2ltcGxlT2JqZWN0IH0gZnJvbSBcIi4uL2NvbW1vbi9pbmRleC5qc1wiO1xuY29uc3QgTElUVExFX0VORElBTiA9IHRydWU7XG5jb25zdCBNSU5fSU5UNjQgPSBCaWdJbnQoXCItOTIyMzM3MjAzNjg1NDc3NTgwOFwiKTtcbmNvbnN0IE1BWF9JTlQ2NCA9IEJpZ0ludChcIjkyMjMzNzIwMzY4NTQ3NzU4MDdcIik7XG5jb25zdCBaRVJPID0gQmlnSW50KFwiMFwiKTtcbmNvbnN0IEVJR0hUID0gQmlnSW50KFwiOFwiKTtcbmNvbnN0IFRXT0ZJRlRZU0lYID0gQmlnSW50KFwiMjU2XCIpO1xuZnVuY3Rpb24gaXNTcGVjaWFsKG4pIHtcbiAgcmV0dXJuIE51bWJlci5pc05hTihuKSB8fCAhTnVtYmVyLmlzRmluaXRlKG4pIHx8IE9iamVjdC5pcyhuLCAtMCk7XG59XG5leHBvcnQgZnVuY3Rpb24gc2xvd0JpZ0ludFRvQmFzZTY0KHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA8IFpFUk8pIHtcbiAgICB2YWx1ZSAtPSBNSU5fSU5UNjQgKyBNSU5fSU5UNjQ7XG4gIH1cbiAgbGV0IGhleCA9IHZhbHVlLnRvU3RyaW5nKDE2KTtcbiAgaWYgKGhleC5sZW5ndGggJSAyID09PSAxKSBoZXggPSBcIjBcIiArIGhleDtcbiAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShuZXcgQXJyYXlCdWZmZXIoOCkpO1xuICBsZXQgaSA9IDA7XG4gIGZvciAoY29uc3QgaGV4Qnl0ZSBvZiBoZXgubWF0Y2goLy57Mn0vZykucmV2ZXJzZSgpKSB7XG4gICAgYnl0ZXMuc2V0KFtwYXJzZUludChoZXhCeXRlLCAxNildLCBpKyspO1xuICAgIHZhbHVlID4+PSBFSUdIVDtcbiAgfVxuICByZXR1cm4gQmFzZTY0LmZyb21CeXRlQXJyYXkoYnl0ZXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNsb3dCYXNlNjRUb0JpZ0ludChlbmNvZGVkKSB7XG4gIGNvbnN0IGludGVnZXJCeXRlcyA9IEJhc2U2NC50b0J5dGVBcnJheShlbmNvZGVkKTtcbiAgaWYgKGludGVnZXJCeXRlcy5ieXRlTGVuZ3RoICE9PSA4KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFJlY2VpdmVkICR7aW50ZWdlckJ5dGVzLmJ5dGVMZW5ndGh9IGJ5dGVzLCBleHBlY3RlZCA4IGZvciAkaW50ZWdlcmBcbiAgICApO1xuICB9XG4gIGxldCB2YWx1ZSA9IFpFUk87XG4gIGxldCBwb3dlciA9IFpFUk87XG4gIGZvciAoY29uc3QgYnl0ZSBvZiBpbnRlZ2VyQnl0ZXMpIHtcbiAgICB2YWx1ZSArPSBCaWdJbnQoYnl0ZSkgKiBUV09GSUZUWVNJWCAqKiBwb3dlcjtcbiAgICBwb3dlcisrO1xuICB9XG4gIGlmICh2YWx1ZSA+IE1BWF9JTlQ2NCkge1xuICAgIHZhbHVlICs9IE1JTl9JTlQ2NCArIE1JTl9JTlQ2NDtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5leHBvcnQgZnVuY3Rpb24gbW9kZXJuQmlnSW50VG9CYXNlNjQodmFsdWUpIHtcbiAgaWYgKHZhbHVlIDwgTUlOX0lOVDY0IHx8IE1BWF9JTlQ2NCA8IHZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEJpZ0ludCAke3ZhbHVlfSBkb2VzIG5vdCBmaXQgaW50byBhIDY0LWJpdCBzaWduZWQgaW50ZWdlci5gXG4gICAgKTtcbiAgfVxuICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoOCk7XG4gIG5ldyBEYXRhVmlldyhidWZmZXIpLnNldEJpZ0ludDY0KDAsIHZhbHVlLCB0cnVlKTtcbiAgcmV0dXJuIEJhc2U2NC5mcm9tQnl0ZUFycmF5KG5ldyBVaW50OEFycmF5KGJ1ZmZlcikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1vZGVybkJhc2U2NFRvQmlnSW50KGVuY29kZWQpIHtcbiAgY29uc3QgaW50ZWdlckJ5dGVzID0gQmFzZTY0LnRvQnl0ZUFycmF5KGVuY29kZWQpO1xuICBpZiAoaW50ZWdlckJ5dGVzLmJ5dGVMZW5ndGggIT09IDgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgUmVjZWl2ZWQgJHtpbnRlZ2VyQnl0ZXMuYnl0ZUxlbmd0aH0gYnl0ZXMsIGV4cGVjdGVkIDggZm9yICRpbnRlZ2VyYFxuICAgICk7XG4gIH1cbiAgY29uc3QgaW50Qnl0ZXNWaWV3ID0gbmV3IERhdGFWaWV3KGludGVnZXJCeXRlcy5idWZmZXIpO1xuICByZXR1cm4gaW50Qnl0ZXNWaWV3LmdldEJpZ0ludDY0KDAsIHRydWUpO1xufVxuZXhwb3J0IGNvbnN0IGJpZ0ludFRvQmFzZTY0ID0gRGF0YVZpZXcucHJvdG90eXBlLnNldEJpZ0ludDY0ID8gbW9kZXJuQmlnSW50VG9CYXNlNjQgOiBzbG93QmlnSW50VG9CYXNlNjQ7XG5leHBvcnQgY29uc3QgYmFzZTY0VG9CaWdJbnQgPSBEYXRhVmlldy5wcm90b3R5cGUuZ2V0QmlnSW50NjQgPyBtb2Rlcm5CYXNlNjRUb0JpZ0ludCA6IHNsb3dCYXNlNjRUb0JpZ0ludDtcbmNvbnN0IE1BWF9JREVOVElGSUVSX0xFTiA9IDEwMjQ7XG5mdW5jdGlvbiB2YWxpZGF0ZU9iamVjdEZpZWxkKGspIHtcbiAgaWYgKGsubGVuZ3RoID4gTUFYX0lERU5USUZJRVJfTEVOKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEZpZWxkIG5hbWUgJHtrfSBleGNlZWRzIG1heGltdW0gZmllbGQgbmFtZSBsZW5ndGggJHtNQVhfSURFTlRJRklFUl9MRU59LmBcbiAgICApO1xuICB9XG4gIGlmIChrLnN0YXJ0c1dpdGgoXCIkXCIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGaWVsZCBuYW1lICR7a30gc3RhcnRzIHdpdGggYSAnJCcsIHdoaWNoIGlzIHJlc2VydmVkLmApO1xuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgay5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IGNoYXJDb2RlID0gay5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChjaGFyQ29kZSA8IDMyIHx8IGNoYXJDb2RlID49IDEyNykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgRmllbGQgbmFtZSAke2t9IGhhcyBpbnZhbGlkIGNoYXJhY3RlciAnJHtrW2ldfSc6IEZpZWxkIG5hbWVzIGNhbiBvbmx5IGNvbnRhaW4gbm9uLWNvbnRyb2wgQVNDSUkgY2hhcmFjdGVyc2BcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5leHBvcnQgZnVuY3Rpb24ganNvblRvQ29udmV4KHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLm1hcCgodmFsdWUyKSA9PiBqc29uVG9Db252ZXgodmFsdWUyKSk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCB0eXBlIG9mICR7dmFsdWV9YCk7XG4gIH1cbiAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHZhbHVlKTtcbiAgaWYgKGVudHJpZXMubGVuZ3RoID09PSAxKSB7XG4gICAgY29uc3Qga2V5ID0gZW50cmllc1swXVswXTtcbiAgICBpZiAoa2V5ID09PSBcIiRieXRlc1wiKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlLiRieXRlcyAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1hbGZvcm1lZCAkYnl0ZXMgZmllbGQgb24gJHt2YWx1ZX1gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBCYXNlNjQudG9CeXRlQXJyYXkodmFsdWUuJGJ5dGVzKS5idWZmZXI7XG4gICAgfVxuICAgIGlmIChrZXkgPT09IFwiJGludGVnZXJcIikge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZS4kaW50ZWdlciAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1hbGZvcm1lZCAkaW50ZWdlciBmaWVsZCBvbiAke3ZhbHVlfWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2U2NFRvQmlnSW50KHZhbHVlLiRpbnRlZ2VyKTtcbiAgICB9XG4gICAgaWYgKGtleSA9PT0gXCIkZmxvYXRcIikge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZS4kZmxvYXQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNYWxmb3JtZWQgJGZsb2F0IGZpZWxkIG9uICR7dmFsdWV9YCk7XG4gICAgICB9XG4gICAgICBjb25zdCBmbG9hdEJ5dGVzID0gQmFzZTY0LnRvQnl0ZUFycmF5KHZhbHVlLiRmbG9hdCk7XG4gICAgICBpZiAoZmxvYXRCeXRlcy5ieXRlTGVuZ3RoICE9PSA4KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgUmVjZWl2ZWQgJHtmbG9hdEJ5dGVzLmJ5dGVMZW5ndGh9IGJ5dGVzLCBleHBlY3RlZCA4IGZvciAkZmxvYXRgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBmbG9hdEJ5dGVzVmlldyA9IG5ldyBEYXRhVmlldyhmbG9hdEJ5dGVzLmJ1ZmZlcik7XG4gICAgICBjb25zdCBmbG9hdCA9IGZsb2F0Qnl0ZXNWaWV3LmdldEZsb2F0NjQoMCwgTElUVExFX0VORElBTik7XG4gICAgICBpZiAoIWlzU3BlY2lhbChmbG9hdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGbG9hdCAke2Zsb2F0fSBzaG91bGQgYmUgZW5jb2RlZCBhcyBhIG51bWJlcmApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZsb2F0O1xuICAgIH1cbiAgICBpZiAoa2V5ID09PSBcIiRzZXRcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgUmVjZWl2ZWQgYSBTZXQgd2hpY2ggaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBhcyBhIENvbnZleCB0eXBlLmBcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChrZXkgPT09IFwiJG1hcFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBSZWNlaXZlZCBhIE1hcCB3aGljaCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGFzIGEgQ29udmV4IHR5cGUuYFxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgY29uc3Qgb3V0ID0ge307XG4gIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlKSkge1xuICAgIHZhbGlkYXRlT2JqZWN0RmllbGQoayk7XG4gICAgb3V0W2tdID0ganNvblRvQ29udmV4KHYpO1xuICB9XG4gIHJldHVybiBvdXQ7XG59XG5jb25zdCBNQVhfVkFMVUVfRk9SX0VSUk9SX0xFTiA9IDE2Mzg0O1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeVZhbHVlRm9yRXJyb3IodmFsdWUpIHtcbiAgY29uc3Qgc3RyID0gSlNPTi5zdHJpbmdpZnkodmFsdWUsIChfa2V5LCB2YWx1ZTIpID0+IHtcbiAgICBpZiAodmFsdWUyID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlMiA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgcmV0dXJuIGAke3ZhbHVlMi50b1N0cmluZygpfW5gO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUyO1xuICB9KTtcbiAgaWYgKHN0ci5sZW5ndGggPiBNQVhfVkFMVUVfRk9SX0VSUk9SX0xFTikge1xuICAgIGNvbnN0IHJlc3QgPSBcIlsuLi50cnVuY2F0ZWRdXCI7XG4gICAgbGV0IHRydW5jYXRlQXQgPSBNQVhfVkFMVUVfRk9SX0VSUk9SX0xFTiAtIHJlc3QubGVuZ3RoO1xuICAgIGNvbnN0IGNvZGVQb2ludCA9IHN0ci5jb2RlUG9pbnRBdCh0cnVuY2F0ZUF0IC0gMSk7XG4gICAgaWYgKGNvZGVQb2ludCAhPT0gdm9pZCAwICYmIGNvZGVQb2ludCA+IDY1NTM1KSB7XG4gICAgICB0cnVuY2F0ZUF0IC09IDE7XG4gICAgfVxuICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIHRydW5jYXRlQXQpICsgcmVzdDtcbiAgfVxuICByZXR1cm4gc3RyO1xufVxuZnVuY3Rpb24gY29udmV4VG9Kc29uSW50ZXJuYWwodmFsdWUsIG9yaWdpbmFsVmFsdWUsIGNvbnRleHQsIGluY2x1ZGVUb3BMZXZlbFVuZGVmaW5lZCkge1xuICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgIGNvbnN0IGNvbnRleHRUZXh0ID0gY29udGV4dCAmJiBgIChwcmVzZW50IGF0IHBhdGggJHtjb250ZXh0fSBpbiBvcmlnaW5hbCBvYmplY3QgJHtzdHJpbmdpZnlWYWx1ZUZvckVycm9yKFxuICAgICAgb3JpZ2luYWxWYWx1ZVxuICAgICl9KWA7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYHVuZGVmaW5lZCBpcyBub3QgYSB2YWxpZCBDb252ZXggdmFsdWUke2NvbnRleHRUZXh0fS4gVG8gbGVhcm4gYWJvdXQgQ29udmV4J3Mgc3VwcG9ydGVkIHR5cGVzLCBzZWUgaHR0cHM6Ly9kb2NzLmNvbnZleC5kZXYvdXNpbmcvdHlwZXMuYFxuICAgICk7XG4gIH1cbiAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICBpZiAodmFsdWUgPCBNSU5fSU5UNjQgfHwgTUFYX0lOVDY0IDwgdmFsdWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEJpZ0ludCAke3ZhbHVlfSBkb2VzIG5vdCBmaXQgaW50byBhIDY0LWJpdCBzaWduZWQgaW50ZWdlci5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4geyAkaW50ZWdlcjogYmlnSW50VG9CYXNlNjQodmFsdWUpIH07XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgIGlmIChpc1NwZWNpYWwodmFsdWUpKSB7XG4gICAgICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoOCk7XG4gICAgICBuZXcgRGF0YVZpZXcoYnVmZmVyKS5zZXRGbG9hdDY0KDAsIHZhbHVlLCBMSVRUTEVfRU5ESUFOKTtcbiAgICAgIHJldHVybiB7ICRmbG9hdDogQmFzZTY0LmZyb21CeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSkgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgcmV0dXJuIHsgJGJ5dGVzOiBCYXNlNjQuZnJvbUJ5dGVBcnJheShuZXcgVWludDhBcnJheSh2YWx1ZSkpIH07XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLm1hcChcbiAgICAgICh2YWx1ZTIsIGkpID0+IGNvbnZleFRvSnNvbkludGVybmFsKHZhbHVlMiwgb3JpZ2luYWxWYWx1ZSwgY29udGV4dCArIGBbJHtpfV1gLCBmYWxzZSlcbiAgICApO1xuICB9XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFNldCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGVycm9yTWVzc2FnZUZvclVuc3VwcG9ydGVkVHlwZShjb250ZXh0LCBcIlNldFwiLCBbLi4udmFsdWVdLCBvcmlnaW5hbFZhbHVlKVxuICAgICk7XG4gIH1cbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgZXJyb3JNZXNzYWdlRm9yVW5zdXBwb3J0ZWRUeXBlKGNvbnRleHQsIFwiTWFwXCIsIFsuLi52YWx1ZV0sIG9yaWdpbmFsVmFsdWUpXG4gICAgKTtcbiAgfVxuICBpZiAoIWlzU2ltcGxlT2JqZWN0KHZhbHVlKSkge1xuICAgIGNvbnN0IHRoZVR5cGUgPSB2YWx1ZT8uY29uc3RydWN0b3I/Lm5hbWU7XG4gICAgY29uc3QgdHlwZU5hbWUgPSB0aGVUeXBlID8gYCR7dGhlVHlwZX0gYCA6IFwiXCI7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgZXJyb3JNZXNzYWdlRm9yVW5zdXBwb3J0ZWRUeXBlKGNvbnRleHQsIHR5cGVOYW1lLCB2YWx1ZSwgb3JpZ2luYWxWYWx1ZSlcbiAgICApO1xuICB9XG4gIGNvbnN0IG91dCA9IHt9O1xuICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXModmFsdWUpO1xuICBlbnRyaWVzLnNvcnQoKFtrMSwgX3YxXSwgW2syLCBfdjJdKSA9PiBrMSA9PT0gazIgPyAwIDogazEgPCBrMiA/IC0xIDogMSk7XG4gIGZvciAoY29uc3QgW2ssIHZdIG9mIGVudHJpZXMpIHtcbiAgICBpZiAodiAhPT0gdm9pZCAwKSB7XG4gICAgICB2YWxpZGF0ZU9iamVjdEZpZWxkKGspO1xuICAgICAgb3V0W2tdID0gY29udmV4VG9Kc29uSW50ZXJuYWwodiwgb3JpZ2luYWxWYWx1ZSwgY29udGV4dCArIGAuJHtrfWAsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKGluY2x1ZGVUb3BMZXZlbFVuZGVmaW5lZCkge1xuICAgICAgdmFsaWRhdGVPYmplY3RGaWVsZChrKTtcbiAgICAgIG91dFtrXSA9IGNvbnZleE9yVW5kZWZpbmVkVG9Kc29uSW50ZXJuYWwoXG4gICAgICAgIHYsXG4gICAgICAgIG9yaWdpbmFsVmFsdWUsXG4gICAgICAgIGNvbnRleHQgKyBgLiR7a31gXG4gICAgICApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gZXJyb3JNZXNzYWdlRm9yVW5zdXBwb3J0ZWRUeXBlKGNvbnRleHQsIHR5cGVOYW1lLCB2YWx1ZSwgb3JpZ2luYWxWYWx1ZSkge1xuICBpZiAoY29udGV4dCkge1xuICAgIHJldHVybiBgJHt0eXBlTmFtZX0ke3N0cmluZ2lmeVZhbHVlRm9yRXJyb3IoXG4gICAgICB2YWx1ZVxuICAgICl9IGlzIG5vdCBhIHN1cHBvcnRlZCBDb252ZXggdHlwZSAocHJlc2VudCBhdCBwYXRoICR7Y29udGV4dH0gaW4gb3JpZ2luYWwgb2JqZWN0ICR7c3RyaW5naWZ5VmFsdWVGb3JFcnJvcihcbiAgICAgIG9yaWdpbmFsVmFsdWVcbiAgICApfSkuIFRvIGxlYXJuIGFib3V0IENvbnZleCdzIHN1cHBvcnRlZCB0eXBlcywgc2VlIGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3VzaW5nL3R5cGVzLmA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAke3R5cGVOYW1lfSR7c3RyaW5naWZ5VmFsdWVGb3JFcnJvcihcbiAgICAgIHZhbHVlXG4gICAgKX0gaXMgbm90IGEgc3VwcG9ydGVkIENvbnZleCB0eXBlLmA7XG4gIH1cbn1cbmZ1bmN0aW9uIGNvbnZleE9yVW5kZWZpbmVkVG9Kc29uSW50ZXJuYWwodmFsdWUsIG9yaWdpbmFsVmFsdWUsIGNvbnRleHQpIHtcbiAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4geyAkdW5kZWZpbmVkOiBudWxsIH07XG4gIH0gZWxzZSB7XG4gICAgaWYgKG9yaWdpbmFsVmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgUHJvZ3JhbW1pbmcgZXJyb3IuIEN1cnJlbnQgdmFsdWUgaXMgJHtzdHJpbmdpZnlWYWx1ZUZvckVycm9yKFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgICl9IGJ1dCBvcmlnaW5hbCB2YWx1ZSBpcyB1bmRlZmluZWRgXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gY29udmV4VG9Kc29uSW50ZXJuYWwodmFsdWUsIG9yaWdpbmFsVmFsdWUsIGNvbnRleHQsIGZhbHNlKTtcbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZleFRvSnNvbih2YWx1ZSkge1xuICByZXR1cm4gY29udmV4VG9Kc29uSW50ZXJuYWwodmFsdWUsIHZhbHVlLCBcIlwiLCBmYWxzZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29udmV4T3JVbmRlZmluZWRUb0pzb24odmFsdWUpIHtcbiAgcmV0dXJuIGNvbnZleE9yVW5kZWZpbmVkVG9Kc29uSW50ZXJuYWwodmFsdWUsIHZhbHVlLCBcIlwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXRjaFZhbHVlVG9Kc29uKHZhbHVlKSB7XG4gIHJldHVybiBjb252ZXhUb0pzb25JbnRlcm5hbCh2YWx1ZSwgdmFsdWUsIFwiXCIsIHRydWUpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmFsdWUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/value.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/vendor/jwt-decode/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/vendor/jwt-decode/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InvalidTokenError: () => (/* binding */ InvalidTokenError),\n/* harmony export */   jwtDecode: () => (/* binding */ jwtDecode)\n/* harmony export */ });\n\nclass InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n  return decodeURIComponent(\n    atob(str).replace(/(.)/g, (_m, p) => {\n      let code = p.charCodeAt(0).toString(16).toUpperCase();\n      if (code.length < 2) {\n        code = \"0\" + code;\n      }\n      return \"%\" + code;\n    })\n  );\n}\nfunction base64UrlDecode(str) {\n  let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n  switch (output.length % 4) {\n    case 0:\n      break;\n    case 2:\n      output += \"==\";\n      break;\n    case 3:\n      output += \"=\";\n      break;\n    default:\n      throw new Error(\"base64 string is not of the correct length\");\n  }\n  try {\n    return b64DecodeUnicode(output);\n  } catch {\n    return atob(output);\n  }\n}\nfunction jwtDecode(token, options) {\n  if (typeof token !== \"string\") {\n    throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n  }\n  options || (options = {});\n  const pos = options.header === true ? 0 : 1;\n  const part = token.split(\".\")[pos];\n  if (typeof part !== \"string\") {\n    throw new InvalidTokenError(\n      `Invalid token specified: missing part #${pos + 1}`\n    );\n  }\n  let decoded;\n  try {\n    decoded = base64UrlDecode(part);\n  } catch (e) {\n    throw new InvalidTokenError(\n      `Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`\n    );\n  }\n  try {\n    return JSON.parse(decoded);\n  } catch (e) {\n    throw new InvalidTokenError(\n      `Invalid token specified: invalid json for part #${pos + 1} (${e.message})`\n    );\n  }\n}\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZlbmRvci9qd3QtZGVjb2RlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWE7QUFDTjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxRQUFRO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSwyREFBMkQsU0FBUyxHQUFHLFVBQVU7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSx5REFBeUQsU0FBUyxHQUFHLFVBQVU7QUFDL0U7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIkU6XFxuZXcgbXZwXFxrZWxhbmktd2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxjb252ZXhcXGRpc3RcXGVzbVxcdmVuZG9yXFxqd3QtZGVjb2RlXFxpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbmV4cG9ydCBjbGFzcyBJbnZhbGlkVG9rZW5FcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbkludmFsaWRUb2tlbkVycm9yLnByb3RvdHlwZS5uYW1lID0gXCJJbnZhbGlkVG9rZW5FcnJvclwiO1xuZnVuY3Rpb24gYjY0RGVjb2RlVW5pY29kZShzdHIpIHtcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChcbiAgICBhdG9iKHN0cikucmVwbGFjZSgvKC4pL2csIChfbSwgcCkgPT4ge1xuICAgICAgbGV0IGNvZGUgPSBwLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG4gICAgICBpZiAoY29kZS5sZW5ndGggPCAyKSB7XG4gICAgICAgIGNvZGUgPSBcIjBcIiArIGNvZGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gXCIlXCIgKyBjb2RlO1xuICAgIH0pXG4gICk7XG59XG5mdW5jdGlvbiBiYXNlNjRVcmxEZWNvZGUoc3RyKSB7XG4gIGxldCBvdXRwdXQgPSBzdHIucmVwbGFjZSgvLS9nLCBcIitcIikucmVwbGFjZSgvXy9nLCBcIi9cIik7XG4gIHN3aXRjaCAob3V0cHV0Lmxlbmd0aCAlIDQpIHtcbiAgICBjYXNlIDA6XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI6XG4gICAgICBvdXRwdXQgKz0gXCI9PVwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgb3V0cHV0ICs9IFwiPVwiO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImJhc2U2NCBzdHJpbmcgaXMgbm90IG9mIHRoZSBjb3JyZWN0IGxlbmd0aFwiKTtcbiAgfVxuICB0cnkge1xuICAgIHJldHVybiBiNjREZWNvZGVVbmljb2RlKG91dHB1dCk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBhdG9iKG91dHB1dCk7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBqd3REZWNvZGUodG9rZW4sIG9wdGlvbnMpIHtcbiAgaWYgKHR5cGVvZiB0b2tlbiAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBJbnZhbGlkVG9rZW5FcnJvcihcIkludmFsaWQgdG9rZW4gc3BlY2lmaWVkOiBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICB9XG4gIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gIGNvbnN0IHBvcyA9IG9wdGlvbnMuaGVhZGVyID09PSB0cnVlID8gMCA6IDE7XG4gIGNvbnN0IHBhcnQgPSB0b2tlbi5zcGxpdChcIi5cIilbcG9zXTtcbiAgaWYgKHR5cGVvZiBwYXJ0ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEludmFsaWRUb2tlbkVycm9yKFxuICAgICAgYEludmFsaWQgdG9rZW4gc3BlY2lmaWVkOiBtaXNzaW5nIHBhcnQgIyR7cG9zICsgMX1gXG4gICAgKTtcbiAgfVxuICBsZXQgZGVjb2RlZDtcbiAgdHJ5IHtcbiAgICBkZWNvZGVkID0gYmFzZTY0VXJsRGVjb2RlKHBhcnQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEludmFsaWRUb2tlbkVycm9yKFxuICAgICAgYEludmFsaWQgdG9rZW4gc3BlY2lmaWVkOiBpbnZhbGlkIGJhc2U2NCBmb3IgcGFydCAjJHtwb3MgKyAxfSAoJHtlLm1lc3NhZ2V9KWBcbiAgICApO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlZCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgSW52YWxpZFRva2VuRXJyb3IoXG4gICAgICBgSW52YWxpZCB0b2tlbiBzcGVjaWZpZWQ6IGludmFsaWQganNvbiBmb3IgcGFydCAjJHtwb3MgKyAxfSAoJHtlLm1lc3NhZ2V9KWBcbiAgICApO1xuICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/vendor/jwt-decode/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/vendor/long.js":
/*!*****************************************************!*\
  !*** ./node_modules/convex/dist/esm/vendor/long.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Long: () => (/* binding */ Long)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nclass Long {\n  constructor(low, high) {\n    __publicField(this, \"low\");\n    __publicField(this, \"high\");\n    __publicField(this, \"__isUnsignedLong__\");\n    this.low = low | 0;\n    this.high = high | 0;\n    this.__isUnsignedLong__ = true;\n  }\n  static isLong(obj) {\n    return (obj && obj.__isUnsignedLong__) === true;\n  }\n  // prettier-ignore\n  static fromBytesLE(bytes) {\n    return new Long(\n      bytes[0] | bytes[1] << 8 | bytes[2] << 16 | bytes[3] << 24,\n      bytes[4] | bytes[5] << 8 | bytes[6] << 16 | bytes[7] << 24\n    );\n  }\n  // prettier-ignore\n  toBytesLE() {\n    const hi = this.high;\n    const lo = this.low;\n    return [\n      lo & 255,\n      lo >>> 8 & 255,\n      lo >>> 16 & 255,\n      lo >>> 24,\n      hi & 255,\n      hi >>> 8 & 255,\n      hi >>> 16 & 255,\n      hi >>> 24\n    ];\n  }\n  static fromNumber(value) {\n    if (isNaN(value)) return UZERO;\n    if (value < 0) return UZERO;\n    if (value >= TWO_PWR_64_DBL) return MAX_UNSIGNED_VALUE;\n    return new Long(value % TWO_PWR_32_DBL | 0, value / TWO_PWR_32_DBL | 0);\n  }\n  toString() {\n    return (BigInt(this.high) * BigInt(TWO_PWR_32_DBL) + BigInt(this.low)).toString();\n  }\n  equals(other) {\n    if (!Long.isLong(other)) other = Long.fromValue(other);\n    if (this.high >>> 31 === 1 && other.high >>> 31 === 1) return false;\n    return this.high === other.high && this.low === other.low;\n  }\n  notEquals(other) {\n    return !this.equals(other);\n  }\n  comp(other) {\n    if (!Long.isLong(other)) other = Long.fromValue(other);\n    if (this.equals(other)) return 0;\n    return other.high >>> 0 > this.high >>> 0 || other.high === this.high && other.low >>> 0 > this.low >>> 0 ? -1 : 1;\n  }\n  lessThanOrEqual(other) {\n    return this.comp(\n      /* validates */\n      other\n    ) <= 0;\n  }\n  static fromValue(val) {\n    if (typeof val === \"number\") return Long.fromNumber(val);\n    return new Long(val.low, val.high);\n  }\n}\nconst UZERO = new Long(0, 0);\nconst TWO_PWR_16_DBL = 1 << 16;\nconst TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\nconst TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;\nconst MAX_UNSIGNED_VALUE = new Long(4294967295 | 0, 4294967295 | 0);\n//# sourceMappingURL=long.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZlbmRvci9sb25nLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBYTtBQUNiO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJFOlxcbmV3IG12cFxca2VsYW5pLXdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcY29udmV4XFxkaXN0XFxlc21cXHZlbmRvclxcbG9uZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZOb3JtYWxQcm9wID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4ga2V5IGluIG9iaiA/IF9fZGVmUHJvcChvYmosIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlLCB2YWx1ZSB9KSA6IG9ialtrZXldID0gdmFsdWU7XG52YXIgX19wdWJsaWNGaWVsZCA9IChvYmosIGtleSwgdmFsdWUpID0+IF9fZGVmTm9ybWFsUHJvcChvYmosIHR5cGVvZiBrZXkgIT09IFwic3ltYm9sXCIgPyBrZXkgKyBcIlwiIDoga2V5LCB2YWx1ZSk7XG5leHBvcnQgY2xhc3MgTG9uZyB7XG4gIGNvbnN0cnVjdG9yKGxvdywgaGlnaCkge1xuICAgIF9fcHVibGljRmllbGQodGhpcywgXCJsb3dcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcImhpZ2hcIik7XG4gICAgX19wdWJsaWNGaWVsZCh0aGlzLCBcIl9faXNVbnNpZ25lZExvbmdfX1wiKTtcbiAgICB0aGlzLmxvdyA9IGxvdyB8IDA7XG4gICAgdGhpcy5oaWdoID0gaGlnaCB8IDA7XG4gICAgdGhpcy5fX2lzVW5zaWduZWRMb25nX18gPSB0cnVlO1xuICB9XG4gIHN0YXRpYyBpc0xvbmcob2JqKSB7XG4gICAgcmV0dXJuIChvYmogJiYgb2JqLl9faXNVbnNpZ25lZExvbmdfXykgPT09IHRydWU7XG4gIH1cbiAgLy8gcHJldHRpZXItaWdub3JlXG4gIHN0YXRpYyBmcm9tQnl0ZXNMRShieXRlcykge1xuICAgIHJldHVybiBuZXcgTG9uZyhcbiAgICAgIGJ5dGVzWzBdIHwgYnl0ZXNbMV0gPDwgOCB8IGJ5dGVzWzJdIDw8IDE2IHwgYnl0ZXNbM10gPDwgMjQsXG4gICAgICBieXRlc1s0XSB8IGJ5dGVzWzVdIDw8IDggfCBieXRlc1s2XSA8PCAxNiB8IGJ5dGVzWzddIDw8IDI0XG4gICAgKTtcbiAgfVxuICAvLyBwcmV0dGllci1pZ25vcmVcbiAgdG9CeXRlc0xFKCkge1xuICAgIGNvbnN0IGhpID0gdGhpcy5oaWdoO1xuICAgIGNvbnN0IGxvID0gdGhpcy5sb3c7XG4gICAgcmV0dXJuIFtcbiAgICAgIGxvICYgMjU1LFxuICAgICAgbG8gPj4+IDggJiAyNTUsXG4gICAgICBsbyA+Pj4gMTYgJiAyNTUsXG4gICAgICBsbyA+Pj4gMjQsXG4gICAgICBoaSAmIDI1NSxcbiAgICAgIGhpID4+PiA4ICYgMjU1LFxuICAgICAgaGkgPj4+IDE2ICYgMjU1LFxuICAgICAgaGkgPj4+IDI0XG4gICAgXTtcbiAgfVxuICBzdGF0aWMgZnJvbU51bWJlcih2YWx1ZSkge1xuICAgIGlmIChpc05hTih2YWx1ZSkpIHJldHVybiBVWkVSTztcbiAgICBpZiAodmFsdWUgPCAwKSByZXR1cm4gVVpFUk87XG4gICAgaWYgKHZhbHVlID49IFRXT19QV1JfNjRfREJMKSByZXR1cm4gTUFYX1VOU0lHTkVEX1ZBTFVFO1xuICAgIHJldHVybiBuZXcgTG9uZyh2YWx1ZSAlIFRXT19QV1JfMzJfREJMIHwgMCwgdmFsdWUgLyBUV09fUFdSXzMyX0RCTCB8IDApO1xuICB9XG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiAoQmlnSW50KHRoaXMuaGlnaCkgKiBCaWdJbnQoVFdPX1BXUl8zMl9EQkwpICsgQmlnSW50KHRoaXMubG93KSkudG9TdHJpbmcoKTtcbiAgfVxuICBlcXVhbHMob3RoZXIpIHtcbiAgICBpZiAoIUxvbmcuaXNMb25nKG90aGVyKSkgb3RoZXIgPSBMb25nLmZyb21WYWx1ZShvdGhlcik7XG4gICAgaWYgKHRoaXMuaGlnaCA+Pj4gMzEgPT09IDEgJiYgb3RoZXIuaGlnaCA+Pj4gMzEgPT09IDEpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5oaWdoID09PSBvdGhlci5oaWdoICYmIHRoaXMubG93ID09PSBvdGhlci5sb3c7XG4gIH1cbiAgbm90RXF1YWxzKG90aGVyKSB7XG4gICAgcmV0dXJuICF0aGlzLmVxdWFscyhvdGhlcik7XG4gIH1cbiAgY29tcChvdGhlcikge1xuICAgIGlmICghTG9uZy5pc0xvbmcob3RoZXIpKSBvdGhlciA9IExvbmcuZnJvbVZhbHVlKG90aGVyKTtcbiAgICBpZiAodGhpcy5lcXVhbHMob3RoZXIpKSByZXR1cm4gMDtcbiAgICByZXR1cm4gb3RoZXIuaGlnaCA+Pj4gMCA+IHRoaXMuaGlnaCA+Pj4gMCB8fCBvdGhlci5oaWdoID09PSB0aGlzLmhpZ2ggJiYgb3RoZXIubG93ID4+PiAwID4gdGhpcy5sb3cgPj4+IDAgPyAtMSA6IDE7XG4gIH1cbiAgbGVzc1RoYW5PckVxdWFsKG90aGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcChcbiAgICAgIC8qIHZhbGlkYXRlcyAqL1xuICAgICAgb3RoZXJcbiAgICApIDw9IDA7XG4gIH1cbiAgc3RhdGljIGZyb21WYWx1ZSh2YWwpIHtcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIExvbmcuZnJvbU51bWJlcih2YWwpO1xuICAgIHJldHVybiBuZXcgTG9uZyh2YWwubG93LCB2YWwuaGlnaCk7XG4gIH1cbn1cbmNvbnN0IFVaRVJPID0gbmV3IExvbmcoMCwgMCk7XG5jb25zdCBUV09fUFdSXzE2X0RCTCA9IDEgPDwgMTY7XG5jb25zdCBUV09fUFdSXzMyX0RCTCA9IFRXT19QV1JfMTZfREJMICogVFdPX1BXUl8xNl9EQkw7XG5jb25zdCBUV09fUFdSXzY0X0RCTCA9IFRXT19QV1JfMzJfREJMICogVFdPX1BXUl8zMl9EQkw7XG5jb25zdCBNQVhfVU5TSUdORURfVkFMVUUgPSBuZXcgTG9uZyg0Mjk0OTY3Mjk1IHwgMCwgNDI5NDk2NzI5NSB8IDApO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9uZy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/vendor/long.js\n");

/***/ })

};
;